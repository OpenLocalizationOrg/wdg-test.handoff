{"nodes":[{"content":"Exercise 3 - Identify Problems with Missing Constraints","pos":[11,66]},{"content":"The SoC power state is the sum of the states of all the devices.","pos":[80,144]},{"content":"Exercise 3 - Identify Problems with Missing Constraints","pos":[280,335]},{"content":"The SoC power state is the sum of the states of all the devices.","pos":[338,402]},{"content":"Windows keeps a list of devices and their states that are critical to reach low power – they are called constraints.","pos":[404,520]},{"content":"Windows will wait for all constraints to be met before engaging resiliency and entering <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept>.","pos":[521,619]},{"content":"The constraints are specified by an OEM and the SoC vendor through the ACPI firmware.","pos":[620,705]},{"content":"The ACPI firmware must be modified if an OEM changes the SoC vendor reference design and constraints must reflect those changes accurately.","pos":[707,846]},{"content":"Missing constraints, or having too many constraints, can cause a variety of problems that increase power drain during standby.","pos":[848,974]},{"pos":[980,1158],"content":"Download the pre-generated <bpt id=\"p1\">**</bpt>sleepstudy-report<ph id=\"ph1\">\\_</ph>2.html<ept id=\"p1\">**</ept> report <bpt id=\"p2\">[</bpt>here<ept id=\"p2\">](http://download.microsoft.com/download/3/2/E/32E8B553-47F6-4E2A-9109-C6D678FE0EE8/sleepstudy-report_2.mdl)</ept>."},{"pos":[1164,1226],"content":"Open <bpt id=\"p1\">**</bpt>sleepstudy-report<ph id=\"ph1\">\\_</ph>2.html<ept id=\"p1\">**</ept> with your favorite browser."},{"pos":[1232,1256],"content":"Click on <bpt id=\"p1\">**</bpt>Session 12<ept id=\"p1\">**</ept>."},{"content":"The system consumes 1.307 Watts of energy during 11 minutes","pos":[1266,1325]},{"pos":[1335,1358],"content":"The <bpt id=\"p1\">**</bpt>DRIPS %<ept id=\"p1\">**</ept> is 92%."},{"pos":[1368,1400],"content":"The hardware <bpt id=\"p1\">**</bpt>DRIPS %<ept id=\"p1\">**</ept> is 19%."},{"pos":[1439,1474],"content":"Look at the <bpt id=\"p1\">**</bpt>Top Offenders<ept id=\"p1\">**</ept> table"},{"content":"The wireless networking device is listed as active only 7% of the time during the session.","pos":[1484,1574]},{"pos":[1584,1641],"content":"This problem can’t account for the 19% HW <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept> rate."},{"pos":[1676,1856],"content":"Large discrepancies between software <bpt id=\"p1\">**</bpt>DRIPS %<ept id=\"p1\">**</ept> (for example, 92%) and hardware <bpt id=\"p2\">**</bpt>DRIPS %<ept id=\"p2\">**</ept> (for example, 19%) is usually symptomatic of a missing constraint in the ACPI firmware."},{"pos":[1858,2034],"content":"Simply stated, Windows assumes the system is ready to enter <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept>, but some hardware component is still active and prevents the SoC package from entering S0 low power idle."},{"content":"The next logical step is to try to isolate and identify which hardware component is still in D0 and consuming power by using either a power instrumented platform or your silicon partner debugging tools.","pos":[2036,2238]},{"content":"Note","pos":[2242,2246]},{"content":"The missing constraint issue surfaced by the software and hardware <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept> discrepancy is different than the Wireless device 7% active time problem shown in the top offenders table.","pos":[2251,2434]},{"content":"This issue should be investigated separately.","pos":[2435,2480]}],"content":"---\ntitle: Exercise 3 - Identify Problems with Missing Constraints\ndescription: The SoC power state is the sum of the states of all the devices.\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 7D11B22F-38A4-4764-B2B0-1AA05D779E0C\n---\n\n# Exercise 3 - Identify Problems with Missing Constraints\n\n\nThe SoC power state is the sum of the states of all the devices.\n\nWindows keeps a list of devices and their states that are critical to reach low power – they are called constraints. Windows will wait for all constraints to be met before engaging resiliency and entering **DRIPS**. The constraints are specified by an OEM and the SoC vendor through the ACPI firmware.\n\nThe ACPI firmware must be modified if an OEM changes the SoC vendor reference design and constraints must reflect those changes accurately.\n\nMissing constraints, or having too many constraints, can cause a variety of problems that increase power drain during standby.\n\n1.  Download the pre-generated **sleepstudy-report\\_2.html** report [here](http://download.microsoft.com/download/3/2/E/32E8B553-47F6-4E2A-9109-C6D678FE0EE8/sleepstudy-report_2.mdl).\n\n2.  Open **sleepstudy-report\\_2.html** with your favorite browser.\n\n3.  Click on **Session 12**.\n\n    -   The system consumes 1.307 Watts of energy during 11 minutes\n\n    -   The **DRIPS %** is 92%.\n\n    -   The hardware **DRIPS %** is 19%.\n\n    ![](images/standbylab7.png)\n\n4.  Look at the **Top Offenders** table\n\n    -   The wireless networking device is listed as active only 7% of the time during the session.\n\n    -   This problem can’t account for the 19% HW **DRIPS** rate.\n\n    ![](images/standbylab8.png)\n\nLarge discrepancies between software **DRIPS %** (for example, 92%) and hardware **DRIPS %** (for example, 19%) is usually symptomatic of a missing constraint in the ACPI firmware.\n\nSimply stated, Windows assumes the system is ready to enter **DRIPS**, but some hardware component is still active and prevents the SoC package from entering S0 low power idle.\n\nThe next logical step is to try to isolate and identify which hardware component is still in D0 and consuming power by using either a power instrumented platform or your silicon partner debugging tools.\n\n**Note**  \nThe missing constraint issue surfaced by the software and hardware **DRIPS** discrepancy is different than the Wireless device 7% active time problem shown in the top offenders table. This issue should be investigated separately.\n\n \n\n \n\n \n\n\n\n\n\n\n"}