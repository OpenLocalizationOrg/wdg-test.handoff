{"nodes":[{"content":"Clean Up the WinSxS Folder","pos":[34,60]},{"content":"Clean Up the WinSxS Folder","pos":[167,193]},{"content":"Clean Up the WinSxS Folder","pos":[201,227]},{"content":"One commonly asked question is can I delete the WinSxS folder to regain some disk space?","pos":[230,318]},{"content":"The short answer is no.","pos":[319,342]},{"content":"However, there are ways to reduce the size of the WinSxS folder.","pos":[343,407]},{"content":"For more information about the WinSxS folder, see <bpt id=\"p1\">[</bpt>Manage the Component Store<ept id=\"p1\">](manage-the-component-store.md)</ept>.","pos":[408,518]},{"content":"This topic was written to provide information about the different ways to reduce the size of the WinSxS folder on a running version of Windows 10.","pos":[519,665]},{"content":"Windows 10 and Windows Server 2016 Technical Preview automatically reduces the size of the WinSxS by using methods similar to the ones described in this topic, however these methods also include internal processes, such as uninstalling and deleting packages with components that have been replaced by other components with newer versions.","pos":[667,1005]},{"content":"Previous versions of some components are kept on the system for a period of time, allowing you to rollback if necessary.","pos":[1006,1126]},{"content":"After a period of time, these components are removed from the installation.","pos":[1127,1202]},{"pos":[1204,1443],"content":"You can also reduce the size of a Windows image using some of the same techniques, as discussed in <bpt id=\"p1\">[</bpt>Reduce the Size of the Component Store in an Offline Windows Image<ept id=\"p1\">](reduce-the-size-of-the-component-store-in-an-offline-windows-image.md)</ept>."},{"content":"Warning","pos":[1447,1454]},{"content":"Deleting files from the WinSxS folder or deleting the entire WinSxS folder may severely damage your system so that your PC might not boot and make it impossible to update.","pos":[1459,1630]},{"content":"In Windows 10 and Windows Server 2016 Technical Preview, you have a number of ways to start the cleanup of the component store, which use a combination of package deletion and component compression to clean up the WinSxS folder:","pos":[1635,1863]},{"pos":[1967,1981],"content":"Task Scheduler"},{"content":"The <bpt id=\"p1\">**</bpt>StartComponentCleanup<ept id=\"p1\">**</ept> task was created in Windows 8 to regularly clean up components automatically when the system is not in use.","pos":[1984,2121]},{"content":"This task is set to run automatically when triggered by the operating system.","pos":[2122,2199]},{"content":"When run automatically, the task will wait at least 30 days after an updated component has been installed before uninstalling the previous versions of the component.","pos":[2200,2365]},{"content":"If you choose to run this task, the task will have a 1 hour timeout and may not completely clean up all files.","pos":[2367,2477]},{"content":"Run the StartComponentCleanup task in Task Scheduler to clean up and compress components","pos":[2481,2569]},{"content":"If <bpt id=\"p1\">**</bpt>Task Scheduler<ept id=\"p1\">**</ept> is not open, start the <bpt id=\"p2\">**</bpt>Task Scheduler<ept id=\"p2\">**</ept>.","pos":[2577,2641]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Start Task Scheduler<ept id=\"p1\">](http://technet.microsoft.com/library/cc721931.aspx)</ept>.","pos":[2642,2743]},{"pos":[2749,2870],"content":"Expand the console tree and navigate to <bpt id=\"p1\">**</bpt>Task Scheduler Library<ph id=\"ph1\">\\\\</ph>Microsoft<ph id=\"ph2\">\\\\</ph>Windows<ph id=\"ph3\">\\\\</ph>Servicing<ph id=\"ph4\">\\\\</ph>StartComponentCleanup<ept id=\"p1\">**</ept>."},{"pos":[2876,2914],"content":"Under <bpt id=\"p1\">**</bpt>Selected Item<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Run<ept id=\"p2\">**</ept>"},{"content":"Note","pos":[2918,2922]},{"content":"The StartComponentCleanup task can also be started from the command line:","pos":[2927,3000]},{"content":"schtasks.exe /Run /TN \"<ph id=\"ph1\">\\\\</ph>Microsoft<ph id=\"ph2\">\\\\</ph>Windows<ph id=\"ph3\">\\\\</ph>Servicing<ph id=\"ph4\">\\\\</ph>StartComponentCleanup\"","pos":[3004,3082]},{"pos":[3146,3154],"content":"Dism.exe"},{"content":"Deployment Image Servicing and Management (DISM) is a command-line tool that allows you to install, uninstall, configure, and update Windows features, packages, drivers, and international settings.","pos":[3157,3354]},{"content":"The <bpt id=\"p1\">**</bpt>/Cleanup-Image<ept id=\"p1\">**</ept> parameter of <bpt id=\"p2\">**</bpt>Dism.exe<ept id=\"p2\">**</ept> provides advanced users more options to further reduce the size of the WinSxS folder.","pos":[3355,3489]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>DISM Operating System Package Servicing Command-Line Options<ept id=\"p1\">](dism-operating-system-package-servicing-command-line-options.md)</ept>.","pos":[3490,3644]},{"content":"Use the /StartComponentCleanup parameter","pos":[3648,3688]},{"pos":[3696,4042],"content":"Using the <bpt id=\"p1\">**</bpt>/StartComponentCleanup<ept id=\"p1\">**</ept> parameter of Dism.exe on a running version of Windows 10 gives you similar results to running the <bpt id=\"p2\">**</bpt>StartComponentCleanup<ept id=\"p2\">**</ept> task in <bpt id=\"p3\">**</bpt>Task Scheduler<ept id=\"p3\">**</ept>, except previous versions of updated components will be immediately deleted (without a 30 day grace period) and you will not have a 1-hour timeout limitation."},{"content":"From an elevated command prompt, type the following:","pos":[4048,4100]},{"content":"Use the /ResetBase switch with the /StartComponentCleanup parameter","pos":[4187,4254]},{"pos":[4262,4461],"content":"Using the <bpt id=\"p1\">**</bpt>/ResetBase<ept id=\"p1\">**</ept> switch with the <bpt id=\"p2\">**</bpt>/StartComponentCleanup<ept id=\"p2\">**</ept> parameter of DISM.exe on a running version of Windows 10 removes all superseded versions of every component in the component store."},{"content":"From an elevated command prompt, type the following:","pos":[4467,4519]},{"pos":[4619,4805],"content":"**Warning**  \nAll existing service packs and updates cannot be uninstalled after this command is completed. This will not block the uninstallation of future service packs or updates.","leadings":["","    "],"nodes":[{"content":"Warning","pos":[2,9]},{"content":"All existing service packs and updates cannot be uninstalled after this command is completed. This will not block the uninstallation of future service packs or updates.","pos":[14,182],"nodes":[{"content":"All existing service packs and updates cannot be uninstalled after this command is completed.","pos":[0,93]},{"content":"This will not block the uninstallation of future service packs or updates.","pos":[94,168]}]}]},{"content":"Use the /SPSuperseded parameter","pos":[4816,4847]},{"content":"To reduce the amount of space used by a Service Pack, use the <bpt id=\"p1\">**</bpt>/SPSuperseded<ept id=\"p1\">**</ept> parameter of Dism.exe on a running version of Windows 10 to remove any backup components needed for uninstallation of the service pack.","pos":[4855,5070]},{"content":"A service pack is a collection of cumulative updates for a particular release of Windows.","pos":[5071,5160]},{"content":"From an elevated command prompt, type the following:","pos":[5166,5218]},{"pos":[5298,5387],"content":"**Warning**  \nThe service pack cannot be uninstalled after this command is completed.","leadings":["","    "],"nodes":[{"content":"Warning","pos":[2,9]},{"content":"The service pack cannot be uninstalled after this command is completed.","pos":[14,85]}]},{"pos":[5492,5504],"content":"Disk Cleanup"},{"content":"You can use Disk Cleanup to reduce the number of unnecessary files on your drives, which can help your PC run faster.","pos":[5507,5624]},{"content":"It can delete temporary files and system files, empty the Recycle Bin, and remove a variety of other items that you might no longer need.","pos":[5625,5762]},{"content":"The option to cleanup updates helps reduce the size of the component store.","pos":[5763,5838]},{"content":"Run Disk Cleanup to delete system files","pos":[5842,5881]},{"pos":[5889,6024],"content":"To delete system files run the steps as provided in <bpt id=\"p1\">[</bpt>Delete files using Disk Cleanup<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=698648)</ept>."},{"pos":[6062,6076],"content":"Related topics"},{"content":"Manage the Component Store","pos":[6080,6106]},{"content":"Determine the Actual Size of the WinSxS Folder","pos":[6141,6187]},{"content":"Reduce the Size of the Component Store in an Offline Windows Image","pos":[6242,6308]},{"content":"Uninstall-WindowsFeature","pos":[6383,6407]},{"content":"How to Reduce the Size of the Winsxs directory and Free Up Disk Space on Windows Server 2012 Using Features on Demand","pos":[6463,6580]},{"content":"How to address disk space issues that are caused by a large Windows component store (WinSxS) directory","pos":[6765,6867]}],"content":"---\nauthor: Justinha\nDescription: Clean Up the WinSxS Folder\nms.assetid: 67fe462d-cda1-4f2e-9652-62c374a6be97\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Clean Up the WinSxS Folder\n---\n\n# Clean Up the WinSxS Folder\n\n\nOne commonly asked question is can I delete the WinSxS folder to regain some disk space? The short answer is no. However, there are ways to reduce the size of the WinSxS folder. For more information about the WinSxS folder, see [Manage the Component Store](manage-the-component-store.md). This topic was written to provide information about the different ways to reduce the size of the WinSxS folder on a running version of Windows 10.\n\nWindows 10 and Windows Server 2016 Technical Preview automatically reduces the size of the WinSxS by using methods similar to the ones described in this topic, however these methods also include internal processes, such as uninstalling and deleting packages with components that have been replaced by other components with newer versions. Previous versions of some components are kept on the system for a period of time, allowing you to rollback if necessary. After a period of time, these components are removed from the installation.\n\nYou can also reduce the size of a Windows image using some of the same techniques, as discussed in [Reduce the Size of the Component Store in an Offline Windows Image](reduce-the-size-of-the-component-store-in-an-offline-windows-image.md).\n\n**Warning**  \nDeleting files from the WinSxS folder or deleting the entire WinSxS folder may severely damage your system so that your PC might not boot and make it impossible to update.\n\n \n\nIn Windows 10 and Windows Server 2016 Technical Preview, you have a number of ways to start the cleanup of the component store, which use a combination of package deletion and component compression to clean up the WinSxS folder:\n\n## <span id=\"Task_Scheduler\"></span><span id=\"task_scheduler\"></span><span id=\"TASK_SCHEDULER\"></span>Task Scheduler\n\n\nThe **StartComponentCleanup** task was created in Windows 8 to regularly clean up components automatically when the system is not in use. This task is set to run automatically when triggered by the operating system. When run automatically, the task will wait at least 30 days after an updated component has been installed before uninstalling the previous versions of the component.\n\nIf you choose to run this task, the task will have a 1 hour timeout and may not completely clean up all files.\n\n**Run the StartComponentCleanup task in Task Scheduler to clean up and compress components**\n\n1.  If **Task Scheduler** is not open, start the **Task Scheduler**. For more information, see [Start Task Scheduler](http://technet.microsoft.com/library/cc721931.aspx).\n\n2.  Expand the console tree and navigate to **Task Scheduler Library\\\\Microsoft\\\\Windows\\\\Servicing\\\\StartComponentCleanup**.\n\n3.  Under **Selected Item**, click **Run**\n\n**Note**  \nThe StartComponentCleanup task can also be started from the command line:\n\n**schtasks.exe /Run /TN \"\\\\Microsoft\\\\Windows\\\\Servicing\\\\StartComponentCleanup\"**\n\n \n\n## <span id=\"dism.exe\"></span><span id=\"DISM.EXE\"></span>Dism.exe\n\n\nDeployment Image Servicing and Management (DISM) is a command-line tool that allows you to install, uninstall, configure, and update Windows features, packages, drivers, and international settings. The **/Cleanup-Image** parameter of **Dism.exe** provides advanced users more options to further reduce the size of the WinSxS folder. For more information, see [DISM Operating System Package Servicing Command-Line Options](dism-operating-system-package-servicing-command-line-options.md).\n\n**Use the /StartComponentCleanup parameter**\n\n-   Using the **/StartComponentCleanup** parameter of Dism.exe on a running version of Windows 10 gives you similar results to running the **StartComponentCleanup** task in **Task Scheduler**, except previous versions of updated components will be immediately deleted (without a 30 day grace period) and you will not have a 1-hour timeout limitation.\n\n    From an elevated command prompt, type the following:\n\n    ``` syntax\n    Dism.exe /online /Cleanup-Image /StartComponentCleanup\n    ```\n\n**Use the /ResetBase switch with the /StartComponentCleanup parameter**\n\n-   Using the **/ResetBase** switch with the **/StartComponentCleanup** parameter of DISM.exe on a running version of Windows 10 removes all superseded versions of every component in the component store.\n\n    From an elevated command prompt, type the following:\n\n    ``` syntax\n    Dism.exe /online /Cleanup-Image /StartComponentCleanup /ResetBase\n    ```\n\n    **Warning**  \n    All existing service packs and updates cannot be uninstalled after this command is completed. This will not block the uninstallation of future service packs or updates.\n\n     \n\n**Use the /SPSuperseded parameter**\n\n-   To reduce the amount of space used by a Service Pack, use the **/SPSuperseded** parameter of Dism.exe on a running version of Windows 10 to remove any backup components needed for uninstallation of the service pack. A service pack is a collection of cumulative updates for a particular release of Windows.\n\n    From an elevated command prompt, type the following:\n\n    ``` syntax\n    Dism.exe /online /Cleanup-Image /SPSuperseded\n    ```\n\n    **Warning**  \n    The service pack cannot be uninstalled after this command is completed.\n\n     \n\n## <span id=\"Disk_Cleanup\"></span><span id=\"disk_cleanup\"></span><span id=\"DISK_CLEANUP\"></span>Disk Cleanup\n\n\nYou can use Disk Cleanup to reduce the number of unnecessary files on your drives, which can help your PC run faster. It can delete temporary files and system files, empty the Recycle Bin, and remove a variety of other items that you might no longer need. The option to cleanup updates helps reduce the size of the component store.\n\n**Run Disk Cleanup to delete system files**\n\n-   To delete system files run the steps as provided in [Delete files using Disk Cleanup](http://go.microsoft.com/fwlink/p/?LinkId=698648).\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[Manage the Component Store](manage-the-component-store.md)\n\n[Determine the Actual Size of the WinSxS Folder](determine-the-actual-size-of-the-winsxs-folder.md)\n\n[Reduce the Size of the Component Store in an Offline Windows Image](reduce-the-size-of-the-component-store-in-an-offline-windows-image.md)\n\n[Uninstall-WindowsFeature](http://technet.microsoft.com/library/jj205471.aspx)\n\n[How to Reduce the Size of the Winsxs directory and Free Up Disk Space on Windows Server 2012 Using Features on Demand](http://blogs.technet.com/b/askpfeplat/archive/2013/02/24/how-to-reduce-the-size-of-the-winsxs-directory-and-free-up-disk-space-on-windows-server-2012-using-features-on-demand.aspx)\n\n[How to address disk space issues that are caused by a large Windows component store (WinSxS) directory](http://support.microsoft.com/kb/2795190)\n\n \n\n \n\n\n\n\n\n\n"}