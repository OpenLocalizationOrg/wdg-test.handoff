{"nodes":[{"content":"Custom logging with Field Medic","pos":[11,42]},{"content":"Custom logging with Field Medic","pos":[56,87]},{"content":"Custom logging with Field Medic","pos":[223,254]},{"content":"You can configure Field Medic to generate reports from custom loggers that are not part of the default group of loggers.","pos":[257,377]},{"content":"To specify a custom logger, create a profile XML file and copy it to Phone<ph id=\"ph1\">\\\\</ph>Documents<ph id=\"ph2\">\\\\</ph>FieldMedic<ph id=\"ph3\">\\\\</ph>CustomProfiles.","pos":[378,492]},{"content":"On development device, T-shell can be used to place XML files into the OEM shared folder.","pos":[494,583]},{"content":"A simple package can be created to place the files there.","pos":[584,641]},{"content":"For more info about the structure of XML that a custom profile XML file has to contain, see <bpt id=\"p1\">[</bpt>Authoring Recording Profiles<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/hardware/hh448223.aspx)</ept>.","pos":[642,831]},{"content":"Create a custom profile XML file","pos":[836,868]},{"content":"Here is an example how to create of a custom profile XML file.","pos":[871,933]},{"content":"Suppose you want to create a custom category that includes these two ETW providers.","pos":[934,1017]},{"content":"ETW provider name","pos":[1021,1038]},{"content":"ETW provider GUID","pos":[1066,1083]},{"content":"Microsoft-WindowsPhone-TileHelper","pos":[1193,1226]},{"content":"B3448AD3-4BE8-4F7C-892B-EA1D69B14ADB","pos":[1238,1274]},{"content":"Microsoft-WindowsPhone-AccessoryManagerSvc","pos":[1279,1321]},{"content":"68EC658D-C373-4166-996F-D8A757108B27","pos":[1324,1360]},{"content":"This custom profile XML file describes an event collector that has an ID of EventCollector<ph id=\"ph1\">\\_</ph>TileManager.","pos":[1367,1471]},{"content":"The event collector contains your two providers, which are specified in the <ph id=\"ph1\">&amp;lt;</ph>EventProvider<ph id=\"ph2\">&amp;gt;</ph> and <ph id=\"ph3\">&amp;lt;</ph>EventProviderId<ph id=\"ph4\">&amp;gt;</ph> elements.","pos":[1472,1607]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  The ETW providers listed in the preceding XML are user-mode components.","pos":[3134,3215]},{"content":"If your custom profile XML file lists a kernel-mode provider, add NonPagedMemory=”true” to the <ph id=\"ph1\">&amp;lt;</ph>EventProvider<ph id=\"ph2\">&amp;gt;</ph> element.","pos":[3216,3341]},{"pos":[3346,3518],"content":"For more information about the structure of a custom profile XML file, see <bpt id=\"p1\">[</bpt>Authoring Recording Profiles<ept id=\"p1\">](http://msdn.microsoft.com/library/windows/hardware/hh448223.aspx)</ept>."},{"content":"Add your custom profile to Field Medic","pos":[3523,3561]},{"content":"Create your custom profile XML file as described previously.","pos":[3568,3628]},{"content":"Copy your custom profile XML file to Phone<ph id=\"ph1\">\\\\</ph>Documents<ph id=\"ph2\">\\\\</ph>FieldMedic<ph id=\"ph3\">\\\\</ph>CustomProfiles.","pos":[3633,3715]},{"pos":[3720,3766],"content":"Open the FieldMedic app, and tap <bpt id=\"p1\">**</bpt>Advanced.<ept id=\"p1\">**</ept>"},{"content":"Tap the box under <bpt id=\"p1\">**</bpt>Choose which ETW providers to use<ept id=\"p1\">**</ept>.","pos":[3771,3827]},{"content":"Scroll down to <bpt id=\"p1\">**</bpt>Custom Group<ept id=\"p1\">**</ept>.","pos":[3828,3860]},{"content":"Under <bpt id=\"p1\">**</bpt>Custom Group<ept id=\"p1\">**</ept>, Field Medic displays the names of the custom profile XML files that are in Phone<ph id=\"ph1\">\\\\</ph>Documents<ph id=\"ph2\">\\\\</ph>FieldMedic<ph id=\"ph3\">\\\\</ph>CustomProfiles.","pos":[3865,4009]},{"content":"Select your custom profile.","pos":[4010,4037]},{"content":"Generate a report as described in <bpt id=\"p1\">[</bpt>Use Field Medic to generate a report<ept id=\"p1\">](use-field-medic-to-generate-a-report.md)</ept>.","pos":[4102,4216]},{"content":"The resulting ETL files have a prefix of “Custom-“ and are placed in root of the device or the SD card.","pos":[4217,4320]},{"content":"Custom profiles can be selected together, separate from, or mixed with the regular profiles depending on your logging requirements.","pos":[4322,4453]},{"content":"Note","pos":[4457,4461]},{"content":"Windows 10 Mobile has a limitation of 64 total parallel profiles, of which a variable number is always taken by the standard OS logging.","pos":[4466,4602]},{"content":"This reserved amount depends on the type of image.","pos":[4603,4653]},{"content":"For example, on retail phones, the reserved amount is going to be much lower than on test devices.","pos":[4654,4752]},{"content":"Therefore, we recommend bundling multiple ETW providers together in a custom profile XML file if possible, or avoid selecting too many ETW providers in parallel.","pos":[4753,4914]},{"content":"If an error still occurs when running reports, try and unselect some of the profiles.","pos":[4915,5000]},{"content":"Another consideration to take into account is that each running profile takes an amount of system memory away from the rest of the OS.","pos":[5002,5136]},{"content":"So having too many parallel logging sessions may impact performance, especially on low memory devices.","pos":[5137,5239]},{"content":"This amount of memory can be configured in the profile XML file.","pos":[5240,5304]},{"content":"The standard included profiles use 8 MB per XML file.","pos":[5305,5358]},{"content":"When investigating low-memory issues, we recommend running only the profiles that are needed for that specific investigation.","pos":[5359,5484]}],"content":"---\ntitle: Custom logging with Field Medic\ndescription: Custom logging with Field Medic\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 762da1e5-abfe-4888-a886-8e74e7658362\n---\n\n# Custom logging with Field Medic\n\n\nYou can configure Field Medic to generate reports from custom loggers that are not part of the default group of loggers. To specify a custom logger, create a profile XML file and copy it to Phone\\\\Documents\\\\FieldMedic\\\\CustomProfiles.\n\nOn development device, T-shell can be used to place XML files into the OEM shared folder. A simple package can be created to place the files there. For more info about the structure of XML that a custom profile XML file has to contain, see [Authoring Recording Profiles](http://msdn.microsoft.com/library/windows/hardware/hh448223.aspx).\n\n## Create a custom profile XML file\n\n\nHere is an example how to create of a custom profile XML file. Suppose you want to create a custom category that includes these two ETW providers.\n\n| ETW provider name                          | ETW provider GUID                    |\n|--------------------------------------------|--------------------------------------|\n| Microsoft-WindowsPhone-TileHelper          | B3448AD3-4BE8-4F7C-892B-EA1D69B14ADB |\n| Microsoft-WindowsPhone-AccessoryManagerSvc | 68EC658D-C373-4166-996F-D8A757108B27 |\n\n \n\nThis custom profile XML file describes an event collector that has an ID of EventCollector\\_TileManager. The event collector contains your two providers, which are specified in the &lt;EventProvider&gt; and &lt;EventProviderId&gt; elements.\n\n``` syntax\n<?xml version=\"1.0\" encoding=\"utf-8\" standalone='yes'?>\n\n<WindowsPerformanceRecorder Version=\"1.0\" Author=\"You\" Team=\"Your team\" Comments=\"Your comments\" Company=\"Your company\" Copyright=\"Your company\" Tag=\"WPDiet\">\n  <Profiles>\n    <!-- Event Collectors -->\n    <EventCollector Id=\"EventCollector_TileManager\" Name=\"WPDiet TileHelper Category Event Collector\" Private=\"false\" ProcessPrivate=\"false\" Secure=\"false\" Realtime=\"false\">\n      <BufferSize Value=\"128\"/>\n      <Buffers Value=\"40\"/>\n      <MaximumFileSize Value=\"5\" FileMode=\"Circular\"/>\n      <FileMax Value=\"3\"/>\n    </EventCollector>\n\n    <!-- Event Providers -->\n    <EventProvider Id=\"EventProvider_Microsoft-WindowsPhone-TileHelper\" Name=\"B3448AD3-4BE8-4F7C-892B-EA1D69B14ADB\" Level=\"5\"/>\n    <EventProvider Id=\"EventProvider_Microsoft-WindowsPhone-AccessoryManagerSvc\" Name=\"68EC658D-C373-4166-996F-D8A757108B27\" Level=\"5\"/>\n\n    <!-- Profiles -->\n    <Profile Id=\"TileHelperCategory.Verbose.File\" LoggingMode=\"File\" Name=\"TileManagerCategory\" DetailLevel=\"Verbose\" Description=\"WPDiet TileHelper category profile\">\n      <Collectors>\n        <EventCollectorId Value=\"EventCollector_TileManager\">\n          <EventProviders>\n            <EventProviderId Value=\"EventProvider_Microsoft-WindowsPhone-TileHelper\"/>\n            <EventProviderId Value=\"EventProvider_Microsoft-WindowsPhone-AccessoryManagerSvc\"/>\n          </EventProviders>\n        </EventCollectorId>\n      </Collectors>\n    </Profile>\n  </Profiles>\n</WindowsPerformanceRecorder>\n```\n\n**Note**  The ETW providers listed in the preceding XML are user-mode components. If your custom profile XML file lists a kernel-mode provider, add NonPagedMemory=”true” to the &lt;EventProvider&gt; element.\n\n \n\nFor more information about the structure of a custom profile XML file, see [Authoring Recording Profiles](http://msdn.microsoft.com/library/windows/hardware/hh448223.aspx).\n\n## Add your custom profile to Field Medic\n\n\n1.  Create your custom profile XML file as described previously.\n2.  Copy your custom profile XML file to Phone\\\\Documents\\\\FieldMedic\\\\CustomProfiles.\n3.  Open the FieldMedic app, and tap **Advanced.**\n4.  Tap the box under **Choose which ETW providers to use**. Scroll down to **Custom Group**.\n5.  Under **Custom Group**, Field Medic displays the names of the custom profile XML files that are in Phone\\\\Documents\\\\FieldMedic\\\\CustomProfiles. Select your custom profile.![](images/oem-softwaretracing-fieldmedic-customlogging.png)\n6.  Generate a report as described in [Use Field Medic to generate a report](use-field-medic-to-generate-a-report.md). The resulting ETL files have a prefix of “Custom-“ and are placed in root of the device or the SD card.\n\nCustom profiles can be selected together, separate from, or mixed with the regular profiles depending on your logging requirements.\n\n**Note**  \nWindows 10 Mobile has a limitation of 64 total parallel profiles, of which a variable number is always taken by the standard OS logging. This reserved amount depends on the type of image. For example, on retail phones, the reserved amount is going to be much lower than on test devices. Therefore, we recommend bundling multiple ETW providers together in a custom profile XML file if possible, or avoid selecting too many ETW providers in parallel. If an error still occurs when running reports, try and unselect some of the profiles.\n\nAnother consideration to take into account is that each running profile takes an amount of system memory away from the rest of the OS. So having too many parallel logging sessions may impact performance, especially on low memory devices. This amount of memory can be configured in the profile XML file. The standard included profiles use 8 MB per XML file. When investigating low-memory issues, we recommend running only the profiles that are needed for that specific investigation.\n\n \n\n \n\n \n\n\n\n\n\n\n"}