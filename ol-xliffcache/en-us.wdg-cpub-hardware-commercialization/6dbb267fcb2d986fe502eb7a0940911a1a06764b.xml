{"nodes":[{"content":"WinPE: Add drivers","pos":[35,53]},{"content":"WinPE: Add drivers","pos":[162,180]},{"content":"WinPE: Add drivers","pos":[189,207]},{"content":"Add drivers to Windows PE, such as graphics drivers or network drivers.","pos":[210,281]},{"content":"Device drivers typically include a folder that contains multiple files.","pos":[283,354]},{"content":"These folders include a file that has the <ph id=\"ph1\">`.inf`</ph> file name extension.","pos":[355,424]},{"content":"This file manages the other files in the device driver package.","pos":[425,488]},{"content":"Many boot-critical drivers can be used in both the Windows image and in Windows PE.","pos":[489,572]},{"content":"You can also update device drivers while you're running Windows PE.","pos":[574,641]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Drvload Command-Line Options<ept id=\"p1\">](drvload-command-line-options.md)</ept>.","pos":[642,732]},{"content":"Get the Windows Assessment and Deployment Kit with Windows PE tools","pos":[736,803]},{"pos":[811,980],"content":"Install the <bpt id=\"p1\">[</bpt>Windows Assessment and Deployment Kit (Windows ADK) Technical Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=526803)</ept>, including the Windows PE feature."},{"content":"Create a set of either 32-bit or 64-bit Windows PE files","pos":[984,1040]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, and type <bpt id=\"p2\">**</bpt>deployment<ept id=\"p2\">**</ept>.","pos":[1048,1089]},{"content":"Right-click <bpt id=\"p1\">**</bpt>Deployment and Imaging Tools Environment<ept id=\"p1\">**</ept> and then select <bpt id=\"p2\">**</bpt>Run as administrator<ept id=\"p2\">**</ept>.","pos":[1090,1188]},{"pos":[1194,1302],"content":"In the <bpt id=\"p1\">**</bpt>Deployment Tools and Imaging Environment<ept id=\"p1\">**</ept>, copy the Windows PE files for the PCs you want to boot."},{"content":"The 64-bit version can boot 64-bit UEFI and 64-bit BIOS PCs.","pos":[1312,1372]},{"content":"The 32-bit version can boot 32-bit UEFI, 32-bit BIOS, and 64-bit BIOS PCs.","pos":[1450,1524]},{"content":"Mount the Windows PE boot image","pos":[1592,1623]},{"content":"Mount the Windows PE image.","pos":[1631,1658]},{"pos":[1913,1931],"content":"Add customizations"},{"content":"Add device drivers (.inf files)","pos":[1936,1967]},{"content":"Add the device driver to the Windows PE image.","pos":[1975,2021]},{"pos":[2139,2313],"content":"**Note**  \nAlthough you can add multiple drivers to an image by using one command, it is often easier to troubleshoot problems by adding each driver package individually.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"Although you can add multiple drivers to an image by using one command, it is often easier to troubleshoot problems by adding each driver package individually.","pos":[11,170]}]},{"content":"Verify that the driver packages are part of the image:","pos":[2326,2380]},{"content":"Review the resulting list of drivers and verify that the list contains the driver package that you added.","pos":[2462,2567]},{"content":"Video drivers: Change the display resolution","pos":[2571,2615]},{"content":"For most graphics drivers, WinPE picks the maximum native resolution automatically.","pos":[2623,2706]},{"content":"To manually adjust the size, use an answer file and include settings for Microsoft-Windows-Setup/<bpt id=\"p1\">[</bpt>Display<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/hardware/dn915285)</ept>.","pos":[2712,2881]},{"content":"To learn more, see <bpt id=\"p1\">[</bpt>Wpeinit and Startnet.cmd: Using WinPE Startup Scripts<ept id=\"p1\">](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)</ept>.","pos":[2882,3013]},{"content":"Unmount the Windows PE image and create media","pos":[3017,3062]},{"content":"Unmount the Windows PE image.","pos":[3070,3099]},{"content":"Create bootable media, such as a USB flash drive.","pos":[3194,3243]},{"content":"Boot the media.","pos":[3315,3330]},{"content":"Windows PE starts automatically.","pos":[3331,3363]},{"content":"After the Windows PE window appears, the wpeinit command runs automatically.","pos":[3364,3440]},{"content":"This may take a few minutes.","pos":[3441,3469]},{"content":"Verify your customizations.","pos":[3470,3497]},{"content":"Troubleshooting","pos":[3501,3516]},{"content":"Windows PE won’t boot?","pos":[3524,3546]},{"content":"See the troubleshooting tips at the end of the topic: <bpt id=\"p1\">[</bpt>Install Windows PE<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=526830)</ept>.","pos":[3547,3669]},{"pos":[3675,3831],"content":"For tips on connecting to a network, see <bpt id=\"p1\">[</bpt>WinPE Network Drivers: Initializing and adding drivers<ept id=\"p1\">](winpe-network-drivers-initializing-and-adding-drivers.md)</ept>."},{"pos":[3869,3883],"content":"Related topics"},{"content":"WinPE for Windows 10","pos":[3887,3907]},{"content":"Install Windows PE","pos":[3927,3945]},{"content":"WinPE: Create USB Bootable drive","pos":[3996,4028]},{"content":"WinPE: Create a Boot CD, DVD, ISO, or VHD","pos":[4068,4109]},{"content":"WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)","pos":[4155,4208]},{"content":"WinPE: Boot in UEFI or legacy BIOS mode","pos":[4268,4307]},{"content":"WinPE: Add packages (Optional Components Reference)","pos":[4354,4405]}],"content":"---\nauthor: Justinha\nDescription: 'WinPE: Add drivers'\nms.assetid: 9eecfba3-2a0d-4c38-8cec-6d5e839ae8d4\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: 'WinPE: Add drivers'\n---\n\n# WinPE: Add drivers\n\n\nAdd drivers to Windows PE, such as graphics drivers or network drivers.\n\nDevice drivers typically include a folder that contains multiple files. These folders include a file that has the `.inf` file name extension. This file manages the other files in the device driver package. Many boot-critical drivers can be used in both the Windows image and in Windows PE.\n\nYou can also update device drivers while you're running Windows PE. For more information, see [Drvload Command-Line Options](drvload-command-line-options.md).\n\n**Get the Windows Assessment and Deployment Kit with Windows PE tools**\n\n-   Install the [Windows Assessment and Deployment Kit (Windows ADK) Technical Reference](http://go.microsoft.com/fwlink/p/?LinkId=526803), including the Windows PE feature.\n\n**Create a set of either 32-bit or 64-bit Windows PE files**\n\n1.  Click **Start**, and type **deployment**. Right-click **Deployment and Imaging Tools Environment** and then select **Run as administrator**.\n\n2.  In the **Deployment Tools and Imaging Environment**, copy the Windows PE files for the PCs you want to boot.\n\n    -   The 64-bit version can boot 64-bit UEFI and 64-bit BIOS PCs.\n\n        ``` syntax\n        copype amd64 C:\\WinPE_amd64\n        ```\n\n    -   The 32-bit version can boot 32-bit UEFI, 32-bit BIOS, and 64-bit BIOS PCs.\n\n        ``` syntax\n        copype x86 C:\\WinPE_x86\n        ```\n\n**Mount the Windows PE boot image**\n\n-   Mount the Windows PE image.\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:\"C:\\WinPE_amd64\\media\\sources\\boot.wim\" /index:1 /MountDir:\"C:\\WinPE_amd64\\mount\"\n    ```\n\n## <span id=\"Add_customizations\"></span><span id=\"add_customizations\"></span><span id=\"ADD_CUSTOMIZATIONS\"></span>Add customizations\n\n\n**Add device drivers (.inf files)**\n\n1.  Add the device driver to the Windows PE image.\n\n    ``` syntax\n    Dism /Add-Driver /Image:\"C:\\WinPE_amd64\\mount\" /Driver:\"C:\\SampleDriver\\driver.inf\"\n    ```\n\n    **Note**  \n    Although you can add multiple drivers to an image by using one command, it is often easier to troubleshoot problems by adding each driver package individually.\n\n     \n\n2.  Verify that the driver packages are part of the image:\n\n    ``` syntax\n    Dism /Get-Drivers /Image:\"C:\\WinPE_amd64\\mount\"\n    ```\n\n    Review the resulting list of drivers and verify that the list contains the driver package that you added.\n\n**Video drivers: Change the display resolution**\n\n-   For most graphics drivers, WinPE picks the maximum native resolution automatically.\n\n    To manually adjust the size, use an answer file and include settings for Microsoft-Windows-Setup/[Display](https://msdn.microsoft.com/library/windows/hardware/dn915285). To learn more, see [Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md).\n\n**Unmount the Windows PE image and create media**\n\n1.  Unmount the Windows PE image.\n\n    ``` syntax\n    Dism /Unmount-Image /MountDir:\"C:\\WinPE_amd64\\mount\" /commit\n    ```\n\n2.  Create bootable media, such as a USB flash drive.\n\n    ``` syntax\n    MakeWinPEMedia /UFD C:\\WinPE_amd64 F:\n    ```\n\n3.  Boot the media. Windows PE starts automatically. After the Windows PE window appears, the wpeinit command runs automatically. This may take a few minutes. Verify your customizations.\n\n**Troubleshooting**\n\n1.  Windows PE won’t boot? See the troubleshooting tips at the end of the topic: [Install Windows PE](http://go.microsoft.com/fwlink/?LinkId=526830).\n\n2.  For tips on connecting to a network, see [WinPE Network Drivers: Initializing and adding drivers](winpe-network-drivers-initializing-and-adding-drivers.md).\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[WinPE for Windows 10](winpe-intro.md)\n\n[Install Windows PE](http://go.microsoft.com/fwlink/?LinkId=526830)\n\n[WinPE: Create USB Bootable drive](winpe-create-usb-bootable-drive.md)\n\n[WinPE: Create a Boot CD, DVD, ISO, or VHD](winpe-create-a-boot-cd-dvd-iso-or-vhd.md)\n\n[WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)](winpe-install-on-a-hard-drive--flat-boot-or-non-ram.md)\n\n[WinPE: Boot in UEFI or legacy BIOS mode](winpe-boot-in-uefi-or-legacy-bios-mode.md)\n\n[WinPE: Add packages (Optional Components Reference)](winpe-add-packages--optional-components-reference.md)\n\n \n\n \n\n\n\n\n\n\n"}