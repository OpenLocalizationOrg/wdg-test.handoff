{"nodes":[{"content":"Enable or Disable Windows Features Using DISM","pos":[34,79]},{"content":"Enable or Disable Windows Features Using DISM","pos":[186,231]},{"content":"Enable or Disable Windows Features Using DISM","pos":[239,284]},{"content":"The Deployment Image Servicing and Management (DISM) tool is a command-line tool that is used to modify Windows® images.","pos":[287,407]},{"content":"You can use DISM to enable or disable Windows features directly from the command prompt, or by applying an answer file to the image.","pos":[408,540]},{"content":"You can enable or disable Windows features offline on a WIM or VHD file, or online on a running operating system.","pos":[541,654]},{"content":"To mount an offline image for servicing","pos":[659,698]},{"content":"Open a command prompt with administrator privileges.","pos":[704,756]},{"content":"To use DISM from an installation of the Windows Assessment and Deployment Kit (Windows ADK), locate the Windows ADK servicing folder and navigate to this directory.","pos":[762,926]},{"content":"By default, DISM is installed at C:<ph id=\"ph1\">\\\\</ph>Program Files (x86)<ph id=\"ph2\">\\\\</ph>Windows Kits<ph id=\"ph3\">\\\\</ph>10.0<ph id=\"ph4\">\\\\</ph>Assessment and Deployment Kit<ph id=\"ph5\">\\\\</ph>Deployment Tools<ph id=\"ph6\">\\\\</ph> in Windows 10, C:<ph id=\"ph7\">\\\\</ph>Program Files (x86)<ph id=\"ph8\">\\\\</ph>Windows Kits<ph id=\"ph9\">\\\\</ph>8.1<ph id=\"ph10\">\\\\</ph>Assessment and Deployment Kit<ph id=\"ph11\">\\\\</ph>Deployment Tools<ph id=\"ph12\">\\\\</ph> in Windows 8.1and C:<ph id=\"ph13\">\\\\</ph>Program Files (x86)<ph id=\"ph14\">\\\\</ph>Windows Kits<ph id=\"ph15\">\\\\</ph>8.0<ph id=\"ph16\">\\\\</ph>Assessment and Deployment Kit<ph id=\"ph17\">\\\\</ph>Deployment Tools<ph id=\"ph18\">\\\\</ph> in Windows 8.","pos":[927,1289]},{"content":"DISM is available in:","pos":[1295,1316]},{"content":"Windows 10","pos":[1326,1336]},{"content":"Windows 8.1","pos":[1345,1356]},{"content":"Windows 8","pos":[1365,1374]},{"content":"Windows Server 2016 Technical Preview","pos":[1383,1420]},{"content":"Windows Server 2012 R2","pos":[1429,1451]},{"content":"Windows Server 2012","pos":[1460,1479]},{"content":"Windows Preinstallation Environment (WinPE) for Windows 10","pos":[1488,1546]},{"content":"WinPE 5.0","pos":[1555,1564]},{"content":"WinPE 4.0","pos":[1573,1582]},{"content":"You can install DISM and other deployment and imaging tools, such as Windows System Image Manager (Windows SIM), on another supported operating system from the Windows ADK.","pos":[1588,1760]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>DISM Supported Platforms<ept id=\"p1\">](dism-supported-platforms.md)</ept>.","pos":[1761,1843]},{"content":"Use the <ph id=\"ph1\">`/Get-ImageInfo`</ph> option to retrieve the name or index number for the image that you want to modify.","pos":[1849,1956]},{"content":"An index or name value is required for most operations that specify an image file.","pos":[1957,2039]},{"content":"For example, at the command prompt type:","pos":[2045,2085]},{"content":"Mount the offline Windows image.","pos":[2177,2209]},{"content":"For example, type:","pos":[2210,2228]},{"content":"To find available Windows features in an image","pos":[2370,2416]},{"content":"List all of the features available in the operating system.","pos":[2422,2481]},{"content":"For example, type:","pos":[2482,2500]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[2561,2642]},{"content":"For example, type:","pos":[2643,2661]},{"pos":[2737,2847],"content":"You can use <ph id=\"ph1\">`&gt;featurelist.txt`</ph> to redirect the output of the command to a text file that is named featurelist."},{"content":"Review the list of features to find the feature that you want to enable, disable, remove, or restore.","pos":[2853,2954]},{"content":"Use <ph id=\"ph1\">`/Get-FeatureInfo`</ph> to list information about the specific feature you are interested in.","pos":[2960,3052]},{"content":"For example, type:","pos":[3053,3071]},{"content":"To enable Windows features","pos":[3152,3178]},{"content":"Enable a specific feature in the image.","pos":[3184,3223]},{"content":"You can use the <ph id=\"ph1\">`/All`</ph> argument to enable all of the parent features in the same command.","pos":[3224,3313]},{"content":"For example, type:","pos":[3314,3332]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[3418,3499]},{"content":"For example, type:","pos":[3500,3518]},{"content":"Optional: Get the status of the feature you have enabled.","pos":[3619,3676]},{"content":"For example, type:","pos":[3677,3695]},{"pos":[3777,3877],"content":"If the status is <bpt id=\"p1\">**</bpt>Enble Pending<ept id=\"p1\">**</ept>, you must boot the image in order to enable the feature entirely."},{"content":"To restore removed Windows features","pos":[3882,3917]},{"content":"Enable a specific feature in the image.","pos":[3923,3962]},{"content":"If you do not specify a source, DISM will look in the default location specified by group policy for the required files needed to enable the feature For more information, see <bpt id=\"p1\">[</bpt>Configure a Windows Repair Source<ept id=\"p1\">](configure-a-windows-repair-source.md)</ept>.","pos":[3963,4212]},{"content":"If the files are not found in the default location, DISM will contact Windows Update (WU) for the required files.","pos":[4218,4331]},{"content":"You can use the <ph id=\"ph1\">`/LimitAccess`</ph> argument to prevent DISM from contacting WU.","pos":[4332,4407]},{"pos":[4413,4568],"content":"If you specify multiple <ph id=\"ph1\">`/Source`</ph> arguments, the files are gathered from the first location where they are found and the rest of the locations are ignored."},{"content":"For example, type:","pos":[4574,4592]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[4739,4820]},{"content":"For example, type:","pos":[4821,4839]},{"content":"Optional: Get the status of the feature you have enabled.","pos":[4965,5022]},{"content":"For example, type:","pos":[5023,5041]},{"pos":[5123,5223],"content":"If the status is <bpt id=\"p1\">**</bpt>EnablePending<ept id=\"p1\">**</ept>, you must boot the image in order to enable the feature entirely."},{"content":"To disable Windows features","pos":[5228,5255]},{"content":"Disable a specific feature in the image.","pos":[5261,5301]},{"content":"For example, type:","pos":[5302,5320]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[5402,5483]},{"content":"For example, type:","pos":[5484,5502]},{"content":"Optional: Use <ph id=\"ph1\">`DISM /GetFeatureInfo`</ph> to get the status of the feature you have disabled.","pos":[5599,5687]},{"content":"For example, type:","pos":[5688,5706]},{"pos":[5788,5890],"content":"If the status is <bpt id=\"p1\">**</bpt>DisablePending<ept id=\"p1\">**</ept>, you must boot the image in order to disable the feature entirely."},{"content":"To remove Windows features for on-demand installation","pos":[5895,5948]},{"content":"Remove a specific feature in the image without removing the feature's manifest from the image.","pos":[5954,6048]},{"content":"This option can only be used when servicing Windows 10, Windows 8.1, Windows 8, Windows Server 2016 Technical Preview, Windows Server 2012 R2, or Windows Server 2012.","pos":[6049,6215]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Configure a Windows Repair Source<ept id=\"p1\">](configure-a-windows-repair-source.md)</ept>.","pos":[6216,6316]},{"content":"For example, type:","pos":[6322,6340]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[6430,6511]},{"content":"For example, type:","pos":[6512,6530]},{"content":"Optional: Use <ph id=\"ph1\">`DISM /GetFeatureInfo`</ph> to get the status of the feature you have disabled.","pos":[6635,6723]},{"content":"For example, type:","pos":[6724,6742]},{"content":"The status is <bpt id=\"p1\">**</bpt>Disabled<ept id=\"p1\">**</ept>.","pos":[6824,6851]},{"content":"Beginning with Windows 10, the payload is not removed from Windows client SKUs in order to support push-button reset.","pos":[6852,6969]},{"content":"The payload is removed from Windows Server SKUs.","pos":[6970,7018]},{"content":"To enable or disable Windows features by using DISM and an answer file","pos":[7023,7093]},{"pos":[7099,7344],"content":"In Windows SIM, open an existing catalog by clicking <bpt id=\"p1\">**</bpt>Select a Windows Image<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>File<ept id=\"p2\">**</ept> menu and specifying the catalog file type (.clg) in the drop-down list, or create a new catalog by clicking <bpt id=\"p3\">**</bpt>Create Catalog<ept id=\"p3\">**</ept> on the <bpt id=\"p4\">**</bpt>Tools<ept id=\"p4\">**</ept> menu."},{"pos":[7350,7429],"content":"Expand the catalog in the <bpt id=\"p1\">**</bpt>Windows Image<ept id=\"p1\">**</ept> pane, and then expand <bpt id=\"p2\">**</bpt>Packages<ept id=\"p2\">**</ept>."},{"pos":[7435,7515],"content":"Expand <bpt id=\"p1\">**</bpt>Foundation<ept id=\"p1\">**</ept>, and right-click <bpt id=\"p2\">**</bpt>Microsoft-Windows-Foundation-Package<ept id=\"p2\">**</ept>."},{"pos":[7521,7550],"content":"Click <bpt id=\"p1\">**</bpt>Add to Answer File<ept id=\"p1\">**</ept>."},{"content":"Click <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Disabled<ept id=\"p2\">**</ept> next to the features that you intend to enable or disable.","pos":[7556,7648]},{"content":"Click the arrow to select the opposite choice.","pos":[7649,7695]},{"content":"You might have to expand an item to see all its children.","pos":[7701,7758]},{"content":"You must enable the parent if any one of its children are enabled.","pos":[7759,7825]},{"pos":[7831,7946],"content":"**Note**  \nYou can't restore or remove a Windows feature for features on demand with an unattended answer file.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"You can't restore or remove a Windows feature for features on demand with an unattended answer file.","pos":[11,111]}]},{"pos":[7952,8026],"content":"Click <bpt id=\"p1\">**</bpt>Tools<ept id=\"p1\">**</ept> on the main menu, and then click <bpt id=\"p2\">**</bpt>Validate Answer File<ept id=\"p2\">**</ept>."},{"pos":[8032,8114],"content":"Correct any errors that appear in the <bpt id=\"p1\">**</bpt>Messages<ept id=\"p1\">**</ept> pane, and save the answer file."},{"content":"At the command prompt, type the following command to apply the unattended answer file to the image.","pos":[8120,8219]},{"content":"To service an offline image, specify the location of the mounted image directory.","pos":[8317,8398]},{"content":"For example, type:","pos":[8399,8417]},{"content":"To commit changes on an offline image","pos":[8529,8566]},{"content":"Commit the changes and unmount the image.","pos":[8572,8613]},{"content":"For example, type:","pos":[8614,8632]},{"pos":[8752,8766],"content":"Related topics"},{"content":"DISM - Deployment Image Servicing and Management Technical Reference for Windows","pos":[8770,8850]},{"content":"DISM Operating System Package Servicing Command-Line Options","pos":[8939,8999]},{"content":"DISM Unattended Servicing Command-Line Options","pos":[9068,9114]},{"content":"Configure a Windows Repair Source","pos":[9169,9202]}],"content":"---\nauthor: Justinha\nDescription: Enable or Disable Windows Features Using DISM\nms.assetid: a5280bba-7808-4752-92ca-7605a9ea29f0\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Enable or Disable Windows Features Using DISM\n---\n\n# Enable or Disable Windows Features Using DISM\n\n\nThe Deployment Image Servicing and Management (DISM) tool is a command-line tool that is used to modify Windows® images. You can use DISM to enable or disable Windows features directly from the command prompt, or by applying an answer file to the image. You can enable or disable Windows features offline on a WIM or VHD file, or online on a running operating system.\n\n## To mount an offline image for servicing\n\n1.  Open a command prompt with administrator privileges.\n\n2.  To use DISM from an installation of the Windows Assessment and Deployment Kit (Windows ADK), locate the Windows ADK servicing folder and navigate to this directory. By default, DISM is installed at C:\\\\Program Files (x86)\\\\Windows Kits\\\\10.0\\\\Assessment and Deployment Kit\\\\Deployment Tools\\\\ in Windows 10, C:\\\\Program Files (x86)\\\\Windows Kits\\\\8.1\\\\Assessment and Deployment Kit\\\\Deployment Tools\\\\ in Windows 8.1and C:\\\\Program Files (x86)\\\\Windows Kits\\\\8.0\\\\Assessment and Deployment Kit\\\\Deployment Tools\\\\ in Windows 8.\n\n    DISM is available in:\n\n    -   Windows 10\n    -   Windows 8.1\n    -   Windows 8\n    -   Windows Server 2016 Technical Preview\n    -   Windows Server 2012 R2\n    -   Windows Server 2012\n    -   Windows Preinstallation Environment (WinPE) for Windows 10\n    -   WinPE 5.0\n    -   WinPE 4.0\n\n    You can install DISM and other deployment and imaging tools, such as Windows System Image Manager (Windows SIM), on another supported operating system from the Windows ADK. For more information, see [DISM Supported Platforms](dism-supported-platforms.md).\n\n3.  Use the `/Get-ImageInfo` option to retrieve the name or index number for the image that you want to modify. An index or name value is required for most operations that specify an image file.\n\n    For example, at the command prompt type:\n\n    ``` syntax\n    Dism /Get-ImageInfo /ImageFile:C:\\test\\images\\install.wim\n    ```\n\n4.  Mount the offline Windows image. For example, type:\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\test\\images\\install.wim /Name:\"Base Windows Image\" /MountDir:C:\\test\\offline\n    ```\n\n## To find available Windows features in an image\n\n1.  List all of the features available in the operating system. For example, type:\n\n    ``` syntax\n    Dism /online /Get-Features\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Get-Features\n    ```\n\n    You can use `>featurelist.txt` to redirect the output of the command to a text file that is named featurelist.\n\n2.  Review the list of features to find the feature that you want to enable, disable, remove, or restore.\n\n3.  Use `/Get-FeatureInfo` to list information about the specific feature you are interested in. For example, type:\n\n    ``` syntax\n    Dism /online /Get-FeatureInfo /FeatureName:TFTP\n    ```\n\n## To enable Windows features\n\n1.  Enable a specific feature in the image. You can use the `/All` argument to enable all of the parent features in the same command. For example, type:\n\n    ``` syntax\n    Dism /online /Enable-Feature /FeatureName:TFTP /All\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Enable-Feature /FeatureName:TFTP /All\n    ```\n\n2.  Optional: Get the status of the feature you have enabled. For example, type:\n\n    ``` syntax\n    Dism /online /Get-FeatureInfo /FeatureName:TFTP\n    ```\n\n    If the status is **Enble Pending**, you must boot the image in order to enable the feature entirely.\n\n## To restore removed Windows features\n\n1.  Enable a specific feature in the image. If you do not specify a source, DISM will look in the default location specified by group policy for the required files needed to enable the feature For more information, see [Configure a Windows Repair Source](configure-a-windows-repair-source.md).\n\n    If the files are not found in the default location, DISM will contact Windows Update (WU) for the required files. You can use the `/LimitAccess` argument to prevent DISM from contacting WU.\n\n    If you specify multiple `/Source` arguments, the files are gathered from the first location where they are found and the rest of the locations are ignored.\n\n    For example, type:\n\n    ``` syntax\n    Dism /Online /Enable-Feature /FeatureName:TFTP /Source:Z:\\sources\\SxS /Source:C:\\test\\mount\\windows /LimitAccess\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Enable-Feature /FeatureName:TFTP /Source:C:\\test\\mount\\windows\n    ```\n\n2.  Optional: Get the status of the feature you have enabled. For example, type:\n\n    ``` syntax\n    Dism /online /Get-FeatureInfo /FeatureName:TFTP\n    ```\n\n    If the status is **EnablePending**, you must boot the image in order to enable the feature entirely.\n\n## To disable Windows features\n\n1.  Disable a specific feature in the image. For example, type:\n\n    ``` syntax\n    Dism /online /Disable-Feature /FeatureName:TFTP\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Disable-Feature /FeatureName:TFTP\n    ```\n\n2.  Optional: Use `DISM /GetFeatureInfo` to get the status of the feature you have disabled. For example, type:\n\n    ``` syntax\n    Dism /online /Get-FeatureInfo /FeatureName:TFTP\n    ```\n\n    If the status is **DisablePending**, you must boot the image in order to disable the feature entirely.\n\n## To remove Windows features for on-demand installation\n\n1.  Remove a specific feature in the image without removing the feature's manifest from the image. This option can only be used when servicing Windows 10, Windows 8.1, Windows 8, Windows Server 2016 Technical Preview, Windows Server 2012 R2, or Windows Server 2012. For more information, see [Configure a Windows Repair Source](configure-a-windows-repair-source.md).\n\n    For example, type:\n\n    ``` syntax\n    Dism /online /Disable-Feature /FeatureName:TFTP /Remove\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Disable-Feature /FeatureName:TFTP /Remove\n    ```\n\n2.  Optional: Use `DISM /GetFeatureInfo` to get the status of the feature you have disabled. For example, type:\n\n    ``` syntax\n    Dism /online /Get-FeatureInfo /FeatureName:TFTP\n    ```\n\n    The status is **Disabled**. Beginning with Windows 10, the payload is not removed from Windows client SKUs in order to support push-button reset. The payload is removed from Windows Server SKUs.\n\n## To enable or disable Windows features by using DISM and an answer file\n\n1.  In Windows SIM, open an existing catalog by clicking **Select a Windows Image** on the **File** menu and specifying the catalog file type (.clg) in the drop-down list, or create a new catalog by clicking **Create Catalog** on the **Tools** menu.\n\n2.  Expand the catalog in the **Windows Image** pane, and then expand **Packages**.\n\n3.  Expand **Foundation**, and right-click **Microsoft-Windows-Foundation-Package**.\n\n4.  Click **Add to Answer File**.\n\n5.  Click **Enabled** or **Disabled** next to the features that you intend to enable or disable. Click the arrow to select the opposite choice.\n\n    You might have to expand an item to see all its children. You must enable the parent if any one of its children are enabled.\n\n    **Note**  \n    You can't restore or remove a Windows feature for features on demand with an unattended answer file.\n\n6.  Click **Tools** on the main menu, and then click **Validate Answer File**.\n\n7.  Correct any errors that appear in the **Messages** pane, and save the answer file.\n\n8.  At the command prompt, type the following command to apply the unattended answer file to the image.\n\n    ``` syntax\n    Dism /online /Apply-Unattend:C:\\test\\answerfiles\\myunattend.xml\n    ```\n\n    To service an offline image, specify the location of the mounted image directory. For example, type:\n\n    ``` syntax\n    Dism /Image:C:\\test\\offline /Apply-Unattend:C:\\test\\answerfiles\\myunattend.xml\n    ```\n\n## To commit changes on an offline image\n\n-   Commit the changes and unmount the image. For example, type:\n\n    ``` syntax\n    Dism /Unmount-Image /MountDir:C:\\test\\offline /Commit\n    ```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[DISM - Deployment Image Servicing and Management Technical Reference for Windows](dism---deployment-image-servicing-and-management-technical-reference-for-windows.md)\n\n[DISM Operating System Package Servicing Command-Line Options](dism-operating-system-package-servicing-command-line-options.md)\n\n[DISM Unattended Servicing Command-Line Options](dism-unattended-servicing-command-line-options.md)\n\n[Configure a Windows Repair Source](configure-a-windows-repair-source.md)\n\n \n\n \n\n\n\n\n\n\n"}