{"nodes":[{"content":"When you boot into Manufacturing Mode, can you skip OOBE and preinstall apps to run your manufacturing tests.","pos":[35,144]},{"content":"Create a full operating system manufacturing profile","pos":[252,304]},{"content":"Create a full operating system manufacturing profile","pos":[312,364]},{"content":"When you boot into Manufacturing Mode, can you skip OOBE and preinstall apps to run your manufacturing tests.","pos":[367,476]},{"content":"Skipping OOBE can speed up manufacturing time.","pos":[477,523]},{"content":"To set this up, you add the apps that should be installed with the manufacturing profile.","pos":[525,614]},{"content":"For more info about manufacturing profiles, see <bpt id=\"p1\">[</bpt>Manufacturing Mode<ept id=\"p1\">](manufacturing-mode.md)</ept>.","pos":[615,707]},{"pos":[895,937],"content":"Add apps to a custom manufacturing profile"},{"content":"In a manufacturing mode profile, you must create a new registry key that lists the apps that should be installed with the manufacturing profile:","pos":[940,1084]},{"content":"Under the OOBEInstall registry key, you must create registry key (with REG<ph id=\"ph1\">\\_</ph>DWORD type) for each app.","pos":[1200,1301]},{"content":"The name of the registry key must match the filename of the app package.","pos":[1302,1374]},{"pos":[1376,1497],"content":"For example, to add the Settings app to the manufacturing profile, you would add a registry key named <bpt id=\"p1\">**</bpt>systemsettings<ept id=\"p1\">**</ept>."},{"content":"Here are some things to consider when adding apps to a manufacturing profile:","pos":[1499,1576]},{"content":"The manufacturing profile must not disable any Windows services.","pos":[1582,1646]},{"content":"The value of the registry key is reserved.","pos":[1651,1693]},{"content":"Only the registry key name is used.","pos":[1694,1729]},{"content":"The app can be a first or second party app, but the app package must be a part of the image.","pos":[1734,1826]},{"content":"The <ph id=\"ph1\">\\*</ph> wildcard can be used in the name of the app.","pos":[1831,1882]},{"pos":[1887,2006],"content":"If you want the normal OOBE experience (with all apps installed), create a single registry key with the name of <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\*</ph><ept id=\"p1\">**</ept>."},{"pos":[2141,2165],"content":"Find the name of the app"},{"content":"The name of the registry key must match the filename of the app package.","pos":[2167,2239]},{"content":"You can get a list of the apps that are on the device by running the following command on the device's drive root:","pos":[2240,2354]},{"content":"This command returns a list of files, similar to the following:","pos":[2394,2457]},{"pos":[2507,2627],"content":"The part of the filename after <bpt id=\"p1\">**</bpt>MPAP<ph id=\"ph1\">\\_</ph><ept id=\"p1\">**</ept> and before <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\_</ph>0xx.provxml<ept id=\"p2\">**</ept> is what you should use for the registry key name."},{"pos":[2887,2953],"content":"Add the registry keys to your custom manufacturing profile package"},{"content":"You add the registry keys to your custom manufacturing profile package like you would with any other package.","pos":[2956,3065]},{"content":"For more info about packaging, see <bpt id=\"p1\">[</bpt>Creating Phone Packages<ept id=\"p1\">](https://msdn.microsoft.com/library/dn756642)</ept>.","pos":[3066,3172]}],"content":"---\nauthor: kpacquer\nDescription: 'When you boot into Manufacturing Mode, can you skip OOBE and preinstall apps to run your manufacturing tests.'\nms.assetid: e448479f-6831-40b5-bb19-7ad4c22cdf6a\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Create a full operating system manufacturing profile\n---\n\n# Create a full operating system manufacturing profile\n\n\nWhen you boot into Manufacturing Mode, can you skip OOBE and preinstall apps to run your manufacturing tests. Skipping OOBE can speed up manufacturing time.\n\nTo set this up, you add the apps that should be installed with the manufacturing profile. For more info about manufacturing profiles, see [Manufacturing Mode](manufacturing-mode.md).\n\n## <span id=\"Add_apps_to_a_custom_manufacturing_profile\"></span><span id=\"add_apps_to_a_custom_manufacturing_profile\"></span><span id=\"ADD_APPS_TO_A_CUSTOM_MANUFACTURING_PROFILE\"></span>Add apps to a custom manufacturing profile\n\n\nIn a manufacturing mode profile, you must create a new registry key that lists the apps that should be installed with the manufacturing profile:\n\n``` syntax\nHKEY_LOCAL_MACHINE\\System\\ControlSet001\\Control\\ManufacturingMode\\<Profile Name>\\Apps\\OobeInstall\n```\n\nUnder the OOBEInstall registry key, you must create registry key (with REG\\_DWORD type) for each app. The name of the registry key must match the filename of the app package.\n\nFor example, to add the Settings app to the manufacturing profile, you would add a registry key named **systemsettings**.\n\nHere are some things to consider when adding apps to a manufacturing profile:\n\n-   The manufacturing profile must not disable any Windows services.\n-   The value of the registry key is reserved. Only the registry key name is used.\n-   The app can be a first or second party app, but the app package must be a part of the image.\n-   The \\* wildcard can be used in the name of the app.\n-   If you want the normal OOBE experience (with all apps installed), create a single registry key with the name of **\\***.\n\n### <span id=\"Find_the_name_of_the_app\"></span><span id=\"find_the_name_of_the_app\"></span><span id=\"FIND_THE_NAME_OF_THE_APP\"></span>Find the name of the app\n\nThe name of the registry key must match the filename of the app package. You can get a list of the apps that are on the device by running the following command on the device's drive root:\n\n``` syntax\ndir /S MPAP_*.provxml\n```\n\nThis command returns a list of files, similar to the following:\n\n``` syntax\nMPAP_systemsettings_001.provxml\n```\n\nThe part of the filename after **MPAP\\_** and before **\\_0xx.provxml** is what you should use for the registry key name.\n\n## <span id=\"Add_the_registry_keys_to_your_custom_manufacturing_profile_package\"></span><span id=\"add_the_registry_keys_to_your_custom_manufacturing_profile_package\"></span><span id=\"ADD_THE_REGISTRY_KEYS_TO_YOUR_CUSTOM_MANUFACTURING_PROFILE_PACKAGE\"></span>Add the registry keys to your custom manufacturing profile package\n\n\nYou add the registry keys to your custom manufacturing profile package like you would with any other package. For more info about packaging, see [Creating Phone Packages](https://msdn.microsoft.com/library/dn756642).\n\n``` syntax\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Package xmlns=\"urn:Microsoft.WindowsPhone/PackageSchema.v8.00\"\n        Owner=\"Contoso\"\n        Component=\"MfgMode\"\n        SubComponent=\"Manufacturing.FactoryTestSample\"\n        ReleaseType=\"Production\"\n        OwnerType=\"OEM\">\n\n    <Macros>\n      <Macro Id=\"MfgMode\" Value=\"$(hklm.control)\\ManufacturingMode\" />\n      <Macro Id=\"CustomProfile\" Value=\"$(MfgMode)\\CustomProfile\" />\n    </Macros>\n\n    <Components>\n        <OSComponent>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfile)\\\"/>\n            <RegKey KeyName=\"$(CustomProfile)\\Services\"/>\n            <RegKey KeyName=\"$(CustomProfile)\\Apps\"/>\n            <RegKey KeyName=\"$(CustomProfile)\\Apps\\OobeInstall\">\n                <RegValue Name=\"FactoryTestOEMSample\" Value=\"0\" Type=\"REG_DWORD\"/>\n                <RegValue Name=\"systemsettings\" Value=\"0\" Type=\"REG_DWORD\"/>\n             </RegKey>\n          </RegKeys>\n        </OSComponent>\n    </Components>\n</Package>\n```\n\n \n\n \n\n\n\n\n\n"}