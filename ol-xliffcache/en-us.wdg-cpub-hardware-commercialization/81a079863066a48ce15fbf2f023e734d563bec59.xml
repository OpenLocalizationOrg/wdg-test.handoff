{"nodes":[{"content":"Configure Multiple Hard Drives","pos":[34,64]},{"content":"Configure Multiple Hard Drives","pos":[171,201]},{"content":"Configure Multiple Hard Drives","pos":[209,239]},{"content":"If you are deploying Windows to a computer that has multiple hard drives, you can verify that the image is applied to a specific hard drive by using hardware-specific identifiers such as the location path or the hardware interrupt value.","pos":[242,479]},{"content":"The location path is a string that specifies the physical location that each drive is connected to the computer, for example: <ph id=\"ph1\">`PCIROOT(0)#PCI(0100)#ATA(C00T00L00)`</ph>.","pos":[481,645]},{"content":"When manufacturing a computer, use a consistent physical location when connecting your drives, and then use the location path string to identify each hard drive.","pos":[646,807]},{"pos":[809,1002],"content":"For BIOS-based computers or a computer that is running Virtual Disk Service (VDS), you can use the <bpt id=\"p1\">**</bpt>SELECT DISK=SYSTEM<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>SELECT DISK=NEXT<ept id=\"p2\">**</ept> commands to select the appropriate hard drive."},{"content":"In this topic:","pos":[1004,1018]},{"content":"Identifying a Drive Location Path","pos":[1025,1058]},{"content":"Selecting the System Drive","pos":[1095,1121]},{"content":"Selecting Non-System Drives","pos":[1150,1177]},{"content":"Identifying the System Drive After a Reboot","pos":[1210,1253]},{"content":"Formatting Nonsystem Drives","pos":[1302,1329]},{"content":"Identifying a Disk Location Path","pos":[1513,1545]},{"pos":[1553,1711],"content":"Use the DiskPart commands: <bpt id=\"p1\">**</bpt>list disk<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>select disk <ph id=\"ph1\">&amp;lt;</ph>disk number<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">**</ept> (Example: <bpt id=\"p3\">**</bpt>select disk 1<ept id=\"p3\">**</ept>) to navigate between the drives on your computer."},{"pos":[1717,1803],"content":"To show the location path of a selected drive, use the DiskPart command <ph id=\"ph1\">`detail disk`</ph>."},{"content":"In the following example, the location path of the selected drive is PCIROOT(0)<ph id=\"ph1\">\\#</ph>PCI(0100)<ph id=\"ph2\">\\#</ph>ATA(C00T00L00).","pos":[1809,1916]},{"pos":[2655,2671],"content":"Selecting Drives"},{"pos":[2792,2818],"content":"Selecting the System Drive"},{"pos":[2826,2926],"content":"<bpt id=\"p1\">**</bpt>BIOS-based computers<ept id=\"p1\">**</ept>: Use the command <bpt id=\"p2\">**</bpt>SELECT DISK=SYSTEM<ept id=\"p2\">**</ept> to select the default system drive."},{"content":"This command selects the drive that has an interrupt 13h value of 80h.","pos":[2932,3002]},{"content":"If the value 80h is assigned to a USB flash drive, this command selects a hard drive that has a value of 81h.","pos":[3003,3112]},{"content":"For more information, visit the following Microsoft Developer Network (MSDN) website:","pos":[3113,3198]},{"content":"Converting Drive Letters to MS-DOS INT 13H Disk Drive Numbers","pos":[3205,3266]},{"pos":[3320,3428],"content":"<bpt id=\"p1\">**</bpt>UEFI-based computers<ept id=\"p1\">**</ept>: To select a drive, use the DiskPart command <bpt id=\"p2\">**</bpt>SELECT DISK=<ph id=\"ph1\">&amp;lt;</ph>location path<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">**</ept>."},{"pos":[3434,3995],"content":"**Note**  \nDo not use the **SELECT DISK=SYSTEM** command or the GetSystemDiskNTPath API on Unified Extensible Firmware Interface (UEFI)-based computers to select the system drive. The **SELECT DISK=SYSTEM** command and the GetSystemDiskNTPath API identify the drive that the operating system was booted from as the system drive. If you boot from Windows® PE, this command selects the Windows PE drive as the system drive. If you boot from a system that has multiple drives that include an EFI system partition (ESP), this command may select the wrong drive.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"Do not use the **SELECT DISK=SYSTEM** command or the GetSystemDiskNTPath API on Unified Extensible Firmware Interface (UEFI)-based computers to select the system drive. The **SELECT DISK=SYSTEM** command and the GetSystemDiskNTPath API identify the drive that the operating system was booted from as the system drive. If you boot from Windows® PE, this command selects the Windows PE drive as the system drive. If you boot from a system that has multiple drives that include an EFI system partition (ESP), this command may select the wrong drive.","pos":[11,557],"nodes":[{"content":"Do not use the <bpt id=\"p1\">**</bpt>SELECT DISK=SYSTEM<ept id=\"p1\">**</ept> command or the GetSystemDiskNTPath API on Unified Extensible Firmware Interface (UEFI)-based computers to select the system drive.","pos":[0,168]},{"content":"The <bpt id=\"p1\">**</bpt>SELECT DISK=SYSTEM<ept id=\"p1\">**</ept> command and the GetSystemDiskNTPath API identify the drive that the operating system was booted from as the system drive.","pos":[169,317]},{"content":"If you boot from Windows® PE, this command selects the Windows PE drive as the system drive.","pos":[318,410]},{"content":"If you boot from a system that has multiple drives that include an EFI system partition (ESP), this command may select the wrong drive.","pos":[411,546]}]}]},{"pos":[4134,4161],"content":"Selecting Non-System Drives"},{"content":"Select the drive by location path.","pos":[4171,4205]},{"content":"To select a drive, use the DiskPart command <bpt id=\"p1\">**</bpt>SELECT DISK=<ph id=\"ph1\">&amp;lt;</ph>location path<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept>, where <ph id=\"ph3\">&amp;lt;</ph><bpt id=\"p2\">*</bpt>location path<ept id=\"p2\">*</ept><ph id=\"ph4\">&amp;gt;</ph> is the location path of your drive.","pos":[4208,4356]},{"content":"This command helps specify a drive by location.","pos":[4357,4404]},{"content":"Example:","pos":[4410,4418]},{"content":"Select the drive by using the \"NEXT\" drive.","pos":[4502,4545]},{"content":"Use the DiskPart command <bpt id=\"p1\">**</bpt>SELECT DISK=NEXT<ept id=\"p1\">**</ept>.","pos":[4548,4594]},{"content":"This command helps specify any remaining hard drives, regardless of location.","pos":[4595,4672]},{"content":"To select more drives, repeat the <bpt id=\"p1\">**</bpt>SELECT DISK=NEXT<ept id=\"p1\">**</ept> command to select each drive in order.","pos":[4673,4766]},{"content":"If there are no more drives to select, DiskPart returns an error.","pos":[4767,4832]},{"pos":[4838,5015],"content":"**Note**  \nThe computer maintains the context for the **SELECT DISK=NEXT** command as long as DiskPart continues running. If DISKPART exits, the computer loses this context.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"The computer maintains the context for the **SELECT DISK=NEXT** command as long as DiskPart continues running. If DISKPART exits, the computer loses this context.","pos":[11,173],"nodes":[{"content":"The computer maintains the context for the <bpt id=\"p1\">**</bpt>SELECT DISK=NEXT<ept id=\"p1\">**</ept> command as long as DiskPart continues running.","pos":[0,110]},{"content":"If DISKPART exits, the computer loses this context.","pos":[111,162]}]}]},{"content":"UEFI-based example:","pos":[5028,5047]},{"pos":[6771,6814],"content":"Identifying the System Drive After a Reboot"},{"content":"After you reboot, drive lettering may change.","pos":[6816,6861]},{"content":"You can use the following example script to select the system drive and then reassign letters to the ESP, recovery, and Windows partitions.","pos":[6862,7001]},{"pos":[7326,7354],"content":"Formatting Non-System Drives"},{"content":"This example script selects the system drive and then skips past the drive without modifying the contents of the drive.","pos":[7356,7475]},{"content":"The script then selects two non-system drives and creates a single, formatted, empty partition on each drive.","pos":[7476,7585]},{"content":"The partitions do not receive an image, so it is not necessary to specifically identify them.","pos":[7586,7679]},{"content":"UEFI-based example:","pos":[7681,7700]},{"pos":[8031,8045],"content":"Related topics"},{"content":"Hard Disk Location Path Format","pos":[8049,8079]},{"content":"DiskPart Command line syntax","pos":[8118,8146]}],"content":"---\nauthor: Justinha\nDescription: Configure Multiple Hard Drives\nms.assetid: 2cb7386a-b3f6-40dd-b084-fce52a7aed9b\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Configure Multiple Hard Drives\n---\n\n# Configure Multiple Hard Drives\n\n\nIf you are deploying Windows to a computer that has multiple hard drives, you can verify that the image is applied to a specific hard drive by using hardware-specific identifiers such as the location path or the hardware interrupt value.\n\nThe location path is a string that specifies the physical location that each drive is connected to the computer, for example: `PCIROOT(0)#PCI(0100)#ATA(C00T00L00)`. When manufacturing a computer, use a consistent physical location when connecting your drives, and then use the location path string to identify each hard drive.\n\nFor BIOS-based computers or a computer that is running Virtual Disk Service (VDS), you can use the **SELECT DISK=SYSTEM** and **SELECT DISK=NEXT** commands to select the appropriate hard drive.\n\nIn this topic:\n\n-   [Identifying a Drive Location Path](#identifyingdisklocationpath)\n-   [Selecting the System Drive](#selectingsystemdisk)\n-   [Selecting Non-System Drives](#selectingnonsystemdisks)\n-   [Identifying the System Drive After a Reboot](#exampleidentifyingsystemdiskafterreboot)\n-   [Formatting Nonsystem Drives](#exampleformattingnonsystemdisks)\n\n## <span id=\"IdentifyingDiskLocationPath\"></span><span id=\"identifyingdisklocationpath\"></span><span id=\"IDENTIFYINGDISKLOCATIONPATH\"></span>\n\n\n **Identifying a Disk Location Path**\n\n-   Use the DiskPart commands: **list disk** and **select disk &lt;disk number&gt;** (Example: **select disk 1**) to navigate between the drives on your computer.\n\n    To show the location path of a selected drive, use the DiskPart command `detail disk`.\n\n    In the following example, the location path of the selected drive is PCIROOT(0)\\#PCI(0100)\\#ATA(C00T00L00).\n\n    ``` syntax\n    DISKPART> detail disk\n\n    HITACHI HTS722016K9SA00\n    Disk ID: 5E27161A\n    Type   : ATA\n    Bus    : 0\n    Target : 0\n    LUN ID : 0\n    Location Path : PCIROOT(0)#PCI(0100)#ATA(C00T00L00)\n    Read-only  : No\n    Boot Disk  : Yes\n    PagefileDisk  : Yes\n    Hibernation File Disk  : No\n    CrashdumpDisk  : Yes\n    Clustered Disk  : No\n\n\n      Volume ###  Ltr  Label        Fs     Type        Size     Status     Info\n      ----------  ---  -----------  -----  ----------  -------  ---------  --------\n      Volume 1     C                NTFS   Partition    149 GB  Healthy    System\n\n    DISKPART>\n    ```\n\n## <span id=\"Selecting_Drives\"></span><span id=\"selecting_drives\"></span><span id=\"SELECTING_DRIVES\"></span>Selecting Drives\n\n\n<span id=\"SelectingSystemDisk\"></span><span id=\"selectingsystemdisk\"></span><span id=\"SELECTINGSYSTEMDISK\"></span>\n **Selecting the System Drive**\n\n1.  **BIOS-based computers**: Use the command **SELECT DISK=SYSTEM** to select the default system drive.\n\n    This command selects the drive that has an interrupt 13h value of 80h. If the value 80h is assigned to a USB flash drive, this command selects a hard drive that has a value of 81h. For more information, visit the following Microsoft Developer Network (MSDN) website:\n\n    [Converting Drive Letters to MS-DOS INT 13H Disk Drive Numbers](http://go.microsoft.com/fwlink/?LinkId=164574)\n\n2.  **UEFI-based computers**: To select a drive, use the DiskPart command **SELECT DISK=&lt;location path&gt;**.\n\n    **Note**  \n    Do not use the **SELECT DISK=SYSTEM** command or the GetSystemDiskNTPath API on Unified Extensible Firmware Interface (UEFI)-based computers to select the system drive. The **SELECT DISK=SYSTEM** command and the GetSystemDiskNTPath API identify the drive that the operating system was booted from as the system drive. If you boot from Windows® PE, this command selects the Windows PE drive as the system drive. If you boot from a system that has multiple drives that include an EFI system partition (ESP), this command may select the wrong drive.\n\n     \n\n<span id=\"SelectingNonSystemDisks\"></span><span id=\"selectingnonsystemdisks\"></span><span id=\"SELECTINGNONSYSTEMDISKS\"></span>\n **Selecting Non-System Drives**\n\n1.  **Select the drive by location path.** To select a drive, use the DiskPart command **SELECT DISK=&lt;location path&gt;**, where &lt;*location path*&gt; is the location path of your drive. This command helps specify a drive by location.\n\n    Example:\n\n    ``` syntax\n    SELECT DISK=PCIROOT(0)#PCI(0100)#ATA(C00T00L00)\n    ```\n\n2.  **Select the drive by using the \"NEXT\" drive.** Use the DiskPart command **SELECT DISK=NEXT**. This command helps specify any remaining hard drives, regardless of location. To select more drives, repeat the **SELECT DISK=NEXT** command to select each drive in order. If there are no more drives to select, DiskPart returns an error.\n\n    **Note**  \n    The computer maintains the context for the **SELECT DISK=NEXT** command as long as DiskPart continues running. If DISKPART exits, the computer loses this context.\n\n     \n\n    UEFI-based example:\n\n    ``` syntax\n    SELECT DISK=PCIROOT(0)#PCI(0100)#ATA(C00T00L00)\n    clean\n    convert gpt\n    rem == 1. System partition =========================\n    create partition efi size=100\n    rem    ** NOTE: For Advanced Format 4Kn drives,\n    rem               change this value to size = 260 ** \n    format quick fs=fat32 label=\"System\"\n    assign letter=\"S\"\n    rem == 2. Microsoft Reserved (MSR) partition =======\n    create partition msr size=16\n    rem == 3. Windows partition ========================\n    rem ==    a. Create the Windows partition ==========\n    create partition primary \n    rem ==    b. Create space for the recovery tools ===\n    shrink minimum=500\n    rem       ** NOTE: Update this size to match the\n    rem                size of the recovery tools \n    rem                (winre.wim)                    **\n    rem ==    c. Prepare the Windows partition ========= \n    format quick fs=ntfs label=\"Windows\"\n    assign letter=\"W\"\n    rem === 4. Recovery tools partition ================\n    create partition primary\n    format quick fs=ntfs label=\"Recovery tools\"\n    assign letter=\"R\"\n    set id=\"de94bba4-06d1-4d40-a16a-bfd50179d6ac\"\n    gpt attributes=0x8000000000000001\n    rem NON-SYSTEM DRIVE ===============================\n    SELECT DISK=NEXT\n    clean\n    convert gpt\n    rem == 1. Microsoft Reserved (MSR) partition =======\n    create partition msr size=16\n    rem == 2. Data partition ===========================\n    create partition primary\n    format quick fs=ntfs label=\"Data\"\n    assign letter=z\n    ```\n\n### <span id=\"ExampleIdentifyingSystemDiskAfterReboot\"></span><span id=\"exampleidentifyingsystemdiskafterreboot\"></span><span id=\"EXAMPLEIDENTIFYINGSYSTEMDISKAFTERREBOOT\"></span>Identifying the System Drive After a Reboot\n\nAfter you reboot, drive lettering may change. You can use the following example script to select the system drive and then reassign letters to the ESP, recovery, and Windows partitions.\n\n``` syntax\nSELECT DISK=PCIROOT(0)#PCI(0100)#ATA(C01T01L00)\nselect partition=1\nassign letter=s\nselect partition=2\nassign letter=t\nselect partition=3\nassign letter=w\n```\n\n### <span id=\"ExampleFormattingNonSystemDisks\"></span><span id=\"exampleformattingnonsystemdisks\"></span><span id=\"EXAMPLEFORMATTINGNONSYSTEMDISKS\"></span>Formatting Non-System Drives\n\nThis example script selects the system drive and then skips past the drive without modifying the contents of the drive. The script then selects two non-system drives and creates a single, formatted, empty partition on each drive. The partitions do not receive an image, so it is not necessary to specifically identify them.\n\nUEFI-based example:\n\n``` syntax\nSELECT DISK=PCIROOT(0)#PCI(0100)#ATA(C01T01L00)\nSELECT DISK=NEXT\nclean\nconvert gpt\ncreate partition msr size=16\ncreate partition primary\nformat quick fs=ntfs label=\"DataDrive1\"\nSELECT DISK=NEXT\nclean\nconvert gpt\ncreate partition primary\nformat quick fs=ntfs label=\"DataDrive2\"\n```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[Hard Disk Location Path Format](hard-disk-location-path-format.md)\n\n[DiskPart Command line syntax](http://go.microsoft.com/fwlink/?LinkId=128458)\n\n \n\n \n\n\n\n\n\n\n"}