{"nodes":[{"content":"Stack Tags","pos":[11,21]},{"content":"In the Windows速 Performance Analyzer (WPA), stack tags is a feature that lets you create labels (tags) to help you better identify which parts of the call stack(s) are affected.","pos":[35,212]},{"content":"Stack Tags","pos":[401,411]},{"content":"In the Windows速 Performance Analyzer (WPA), stack tags is a feature that lets you create labels (tags) to help you better identify which parts of the call stack(s) are affected.","pos":[414,591]},{"content":"Understanding differences between stack tags and stack frame tags","pos":[596,661]},{"content":"You can think of <bpt id=\"p1\">**</bpt>stack (frame tags)<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>stack<ept id=\"p2\">**</ept> tags as two views of the same data available in the <bpt id=\"p3\">**</bpt>Stack<ept id=\"p3\">**</ept> column.","pos":[664,787]},{"content":"You can configure a stack column to be viewed as a stack tag or stack column (frame tag) in the View Editor.","pos":[788,896]},{"content":"A call stack consists of a list of frames.","pos":[898,940]},{"content":"If a call stack is in the form of A -<ph id=\"ph1\">&amp;gt;</ph> B -<ph id=\"ph2\">&amp;gt;</ph> C, then there are three frames: A, B, and C. Stack columns (frame tags) map each and every call stack frame to a tag or defaults to module!method if no tag is present.","pos":[941,1158]},{"pos":[1160,1479],"content":"For example, call stack A -<ph id=\"ph1\">&amp;gt;</ph> B -<ph id=\"ph2\">&amp;gt;</ph> C-<ph id=\"ph3\">&amp;gt;</ph> D, in <bpt id=\"p1\">**</bpt>Stack (Frame Tags)<ept id=\"p1\">**</ept> view can become A -<ph id=\"ph4\">&amp;gt;</ph> FrameTagB -<ph id=\"ph5\">&amp;gt;</ph> FrameTagC -<ph id=\"ph6\">&amp;gt;</ph> D. Each of the frame tags can have a hierarchy based on the hierarchy of definition of the tags in the <ph id=\"ph7\">\\*</ph>.stacktags file (for example, FrameTagB's actual value can be \"HTML<ph id=\"ph8\">\\\\</ph>Script<ph id=\"ph9\">\\\\</ph>OM\")."},{"content":"A stack tag summarizes an entire call stack by using a single tag name.","pos":[1481,1552]},{"content":"For example, the bottom most mapped frame tag is typically made the stack tag unless there is priority specified for tags.","pos":[1553,1675]},{"content":"Using the same A -<ph id=\"ph1\">&amp;gt;</ph> B -<ph id=\"ph2\">&amp;gt;</ph> C -<ph id=\"ph3\">&amp;gt;</ph> D example, where frame tag view is A -<ph id=\"ph4\">&amp;gt;</ph> FrameTagB -<ph id=\"ph5\">&amp;gt;</ph> FrameTagC -<ph id=\"ph6\">&amp;gt;</ph> D, the stack tag view is just: FrameTagC.","pos":[1676,1831]},{"content":"Besides normal Tag for exactly matching module and method, you can also define HintTag with HintOperator as Callee or Caller.","pos":[1833,1958]},{"content":"For example, a HintTag with HintOperator as Callee is defined for B. The call stack A -<ph id=\"ph1\">&amp;gt;</ph> B -<ph id=\"ph2\">&amp;gt;</ph> C -<ph id=\"ph3\">&amp;gt;</ph> D in <bpt id=\"p1\">**</bpt>Stack (FrameTags)<ept id=\"p1\">**</ept> view can become A -<ph id=\"ph4\">&amp;gt;</ph> FrameTagB -<ph id=\"ph5\">&amp;gt;</ph> ModuleOfC -<ph id=\"ph6\">&amp;gt;</ph> D and its StackTag view is FrameTagB -<ph id=\"ph7\">&amp;gt;</ph> ModuleOfC.","pos":[1959,2203]},{"content":"The module of C is dynamically created as a new stack tag.","pos":[2204,2262]},{"content":"Explicitly setting the <bpt id=\"p1\">*</bpt>OnlyShowModule<ept id=\"p1\">*</ept> attribute of HintTag as false would make C as a new stack tag rather than ModuleOfC.","pos":[2263,2387]},{"content":"<bpt id=\"p1\">*</bpt>OnlyShowModule<ept id=\"p1\">*</ept> attribute is true by default.","pos":[2388,2434]},{"content":"The typical use case is to automatically attribute RPC server functions.","pos":[2435,2507]},{"content":"Their direct caller function is rpcrt4.dll!Invoke<ph id=\"ph1\">\\_</ph>epilog1<ph id=\"ph2\">\\_</ph>start.","pos":[2508,2574]},{"content":"You can define a HintTag for this common caller function to achieve this.","pos":[2575,2648]},{"content":"Adding stack tags to the Stack Tags Definition file","pos":[2653,2704]},{"content":"To add a stack tag definition to the Stack Tags Definition file, do the following:","pos":[2707,2789]},{"content":"In the menu, choose <bpt id=\"p1\">**</bpt>Trace<ept id=\"p1\">**</ept>, then select <bpt id=\"p2\">**</bpt>Trace Properties<ept id=\"p2\">**</ept>.","pos":[2795,2859]},{"content":"The <bpt id=\"p1\">**</bpt>Trace Properties<ept id=\"p1\">**</ept> tab opens.","pos":[2860,2895]},{"pos":[2901,2974],"content":"In the Stack Tags Definition area, click <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept> to the desired location."},{"pos":[2980,3071],"content":"Navigate to the area that contains the stack tags file, select it, and then click <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept>."},{"content":"Removing a stack tag from the stack tags definition file","pos":[3076,3132]},{"content":"To remove a stack tag definition from the Stack Tags Definition file, do the following:","pos":[3135,3222]},{"content":"In the menu, choose <bpt id=\"p1\">**</bpt>Trace<ept id=\"p1\">**</ept>, then select <bpt id=\"p2\">**</bpt>Trace Properties<ept id=\"p2\">**</ept>.","pos":[3228,3292]},{"content":"The <bpt id=\"p1\">**</bpt>Trace Properties<ept id=\"p1\">**</ept> tab opens.","pos":[3293,3328]},{"pos":[3334,3443],"content":"In the Stack Tags Definition area, select the stack tag definitions you want to remove then click <bpt id=\"p1\">**</bpt>Remove<ept id=\"p1\">**</ept>."},{"pos":[3449,3597],"content":"<bpt id=\"p1\">**</bpt>Warning<ept id=\"p1\">**</ept>  Make sure you want to remove the selected stack tag definition(s), as you will not have the option to cancel once you click <bpt id=\"p2\">**</bpt>Remove<ept id=\"p2\">**</ept>."},{"content":"Reloading the stack tags definition file","pos":[3609,3649]},{"content":"To reload a stack tag definition to the Stack Tags Definition file, do the following:","pos":[3652,3737]},{"content":"In the menu, choose <bpt id=\"p1\">**</bpt>Trace<ept id=\"p1\">**</ept>, then select <bpt id=\"p2\">**</bpt>Trace Properties<ept id=\"p2\">**</ept>.","pos":[3743,3807]},{"content":"The <bpt id=\"p1\">**</bpt>Trace Properties<ept id=\"p1\">**</ept> tab opens.","pos":[3808,3843]},{"content":"In the Stack Tags Definition area, click <bpt id=\"p1\">**</bpt>Reload<ept id=\"p1\">**</ept>.","pos":[3849,3901]},{"content":"You can load multiple stack tags by pressing and holding down the Shift key and left-clicking each stack tags definition.","pos":[3902,4023]},{"content":"Troubleshooting your stack tags file","pos":[4028,4064]},{"content":"To investigate issues within your stack tags file in WPA, do the following:","pos":[4067,4142]},{"content":"In the menu, click <bpt id=\"p1\">**</bpt>Window<ept id=\"p1\">**</ept>, then select <bpt id=\"p2\">**</bpt>Diagnostic Console<ept id=\"p2\">**</ept>.","pos":[4148,4214]},{"content":"The WPA display splits into two - with the <bpt id=\"p1\">**</bpt>Graph Explorer<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Analysis<ept id=\"p2\">**</ept> in the top half of the screen and the <bpt id=\"p3\">**</bpt>Diagnostic Console<ept id=\"p3\">**</ept> on the bottom half of the screen.","pos":[4215,4388]},{"content":"<bpt id=\"p1\">**</bpt>Tip<ept id=\"p1\">**</ept>  You can also access the Diagnostic Console in the lower left corner of WPA by clicking <bpt id=\"p2\">**</bpt>Diagnostic Console<ept id=\"p2\">**</ept>.","pos":[4394,4513]},{"content":"Once open, you can also drag it out to a separate window or dock it at the top or side.","pos":[4514,4601]},{"content":"The Diagnostic Console lists information about exceptions that occur during analysis workflow.","pos":[4614,4708]},{"content":"You can diagnose symbol decoding issues from this console","pos":[4709,4766]},{"content":"Related topics","pos":[4771,4785]},{"content":"Introduction to the WPA User Interface","pos":[4789,4827]},{"content":"Diagnostic Console","pos":[4874,4892]}],"content":"---\ntitle: Stack Tags\ndescription: In the Windows速 Performance Analyzer (WPA), stack tags is a feature that lets you create labels (tags) to help you better identify which parts of the call stack(s) are affected.\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 07FACEE4-E906-4267-BF48-5C3D590F67C3\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# Stack Tags\n\n\nIn the Windows速 Performance Analyzer (WPA), stack tags is a feature that lets you create labels (tags) to help you better identify which parts of the call stack(s) are affected.\n\n## Understanding differences between stack tags and stack frame tags\n\n\nYou can think of **stack (frame tags)** and **stack** tags as two views of the same data available in the **Stack** column. You can configure a stack column to be viewed as a stack tag or stack column (frame tag) in the View Editor.\n\nA call stack consists of a list of frames. If a call stack is in the form of A -&gt; B -&gt; C, then there are three frames: A, B, and C. Stack columns (frame tags) map each and every call stack frame to a tag or defaults to module!method if no tag is present.\n\nFor example, call stack A -&gt; B -&gt; C-&gt; D, in **Stack (Frame Tags)** view can become A -&gt; FrameTagB -&gt; FrameTagC -&gt; D. Each of the frame tags can have a hierarchy based on the hierarchy of definition of the tags in the \\*.stacktags file (for example, FrameTagB's actual value can be \"HTML\\\\Script\\\\OM\").\n\nA stack tag summarizes an entire call stack by using a single tag name. For example, the bottom most mapped frame tag is typically made the stack tag unless there is priority specified for tags. Using the same A -&gt; B -&gt; C -&gt; D example, where frame tag view is A -&gt; FrameTagB -&gt; FrameTagC -&gt; D, the stack tag view is just: FrameTagC.\n\nBesides normal Tag for exactly matching module and method, you can also define HintTag with HintOperator as Callee or Caller. For example, a HintTag with HintOperator as Callee is defined for B. The call stack A -&gt; B -&gt; C -&gt; D in **Stack (FrameTags)** view can become A -&gt; FrameTagB -&gt; ModuleOfC -&gt; D and its StackTag view is FrameTagB -&gt; ModuleOfC. The module of C is dynamically created as a new stack tag. Explicitly setting the *OnlyShowModule* attribute of HintTag as false would make C as a new stack tag rather than ModuleOfC. *OnlyShowModule* attribute is true by default. The typical use case is to automatically attribute RPC server functions. Their direct caller function is rpcrt4.dll!Invoke\\_epilog1\\_start. You can define a HintTag for this common caller function to achieve this.\n\n## Adding stack tags to the Stack Tags Definition file\n\n\nTo add a stack tag definition to the Stack Tags Definition file, do the following:\n\n1.  In the menu, choose **Trace**, then select **Trace Properties**. The **Trace Properties** tab opens.\n\n2.  In the Stack Tags Definition area, click **Add** to the desired location.\n\n3.  Navigate to the area that contains the stack tags file, select it, and then click **Open**.\n\n## Removing a stack tag from the stack tags definition file\n\n\nTo remove a stack tag definition from the Stack Tags Definition file, do the following:\n\n1.  In the menu, choose **Trace**, then select **Trace Properties**. The **Trace Properties** tab opens.\n\n2.  In the Stack Tags Definition area, select the stack tag definitions you want to remove then click **Remove**.\n\n    **Warning**  Make sure you want to remove the selected stack tag definition(s), as you will not have the option to cancel once you click **Remove**.\n\n     \n\n## Reloading the stack tags definition file\n\n\nTo reload a stack tag definition to the Stack Tags Definition file, do the following:\n\n1.  In the menu, choose **Trace**, then select **Trace Properties**. The **Trace Properties** tab opens.\n\n2.  In the Stack Tags Definition area, click **Reload**. You can load multiple stack tags by pressing and holding down the Shift key and left-clicking each stack tags definition.\n\n## Troubleshooting your stack tags file\n\n\nTo investigate issues within your stack tags file in WPA, do the following:\n\n-   In the menu, click **Window**, then select **Diagnostic Console**. The WPA display splits into two - with the **Graph Explorer** and **Analysis** in the top half of the screen and the **Diagnostic Console** on the bottom half of the screen.\n\n    **Tip**  You can also access the Diagnostic Console in the lower left corner of WPA by clicking **Diagnostic Console**. Once open, you can also drag it out to a separate window or dock it at the top or side.\n\n     \n\n    The Diagnostic Console lists information about exceptions that occur during analysis workflow. You can diagnose symbol decoding issues from this console\n\n## Related topics\n\n\n[Introduction to the WPA User Interface](introduction-to-the-wpa-user-interface.md)\n\n[Diagnostic Console](diagnostic-console.md)\n\n \n\n \n\n\n\n\n\n\n\n"}