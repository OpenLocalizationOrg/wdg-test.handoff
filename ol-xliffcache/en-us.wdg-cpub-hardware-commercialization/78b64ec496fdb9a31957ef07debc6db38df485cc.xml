{"nodes":[{"content":"Memory Footprint Optimization","pos":[11,40]},{"content":"The amount of memory available on a system significantly impacts the user experience.","pos":[54,139]},{"content":"Memory Footprint Optimization","pos":[328,357]},{"content":"The amount of memory available on a system significantly impacts the user experience.","pos":[360,445]},{"content":"The impact affects areas ranging from the overall responsiveness of the system to battery life.","pos":[446,541]},{"content":"Available memory is an important factor to consider when evaluating the complete experience on a low memory device where Windows relies heavily on paging and swapping of content from memory.","pos":[542,732]},{"content":"This guide walks you through the process of analyzing memory-related performance issues and identifying the root cause, whether it’s a driver or a user mode process, using the <bpt id=\"p1\">**</bpt>Windows Performance Toolkit<ept id=\"p1\">**</ept>.","pos":[734,942]},{"content":"Topics include:","pos":[943,958]},{"content":"Driver and application footprint","pos":[964,996]},{"content":"Working Sets and Resident Sets","pos":[1002,1032]},{"content":"Pool memory allocations","pos":[1038,1061]},{"content":"Heap and VirtualAlloc memory allocations","pos":[1067,1107]},{"content":"Goals","pos":[1112,1117]},{"content":"This guide will show you how to perform the following tasks:","pos":[1120,1180]},{"pos":[1186,1271],"content":"Use <bpt id=\"p1\">**</bpt>Windows Performance Recorder (WPR)<ept id=\"p1\">**</ept> to gather traces of memory-related issues."},{"content":"Use the Assessment and Deployment Kit (ADK) Memory Footprint assessment to gather a memory usage baseline.","pos":[1277,1383]},{"content":"Analyze paged/non-paged pool memory usage by drivers.","pos":[1389,1442]},{"content":"Analyze working sets and resident sets of processes.","pos":[1448,1500]},{"content":"Understand how and when memory is dynamically allocated by drivers and processes.","pos":[1506,1587]},{"content":"Tools","pos":[1592,1597]},{"content":"In the past, a kernel debugger along with a large number of cryptic commands had to be used to discover what data and file pages currently occupy physical memory.","pos":[1600,1762]},{"content":"Now, you can use the <bpt id=\"p1\">**</bpt>Windows Performance Toolkit (WPT)<ept id=\"p1\">**</ept> to collect and display this information in a more understandable and actionable manner through built-in Windows instrumentation.","pos":[1763,1950]},{"pos":[1952,2062],"content":"<bpt id=\"p1\">**</bpt>WPT<ept id=\"p1\">**</ept> consists of the <bpt id=\"p2\">**</bpt>Windows Performance Analyzer (WPA)<ept id=\"p2\">**</ept> and the <bpt id=\"p3\">**</bpt>Windows Performance Recorder (WPR)<ept id=\"p3\">**</ept>."},{"content":"The Windows Assessment Toolkit in the ADK can also be used to obtain a memory footprint assessment.","pos":[2064,2163]},{"content":"This assessment creates a snapshot of memory use during a series of system reboots and immediately after the desktop is visible.","pos":[2164,2292]},{"content":"It does not evaluate memory use during ordinary computer operations.","pos":[2293,2361]},{"pos":[2363,2484],"content":"The ADK <bpt id=\"p1\">**</bpt>Windows Assessment Console (WAC)<ept id=\"p1\">**</ept> is the tool used to run assessments and generate visual performance reports."},{"content":"Terminology","pos":[2489,2500]},{"content":"Term","pos":[2505,2509]},{"content":"Definition","pos":[2539,2549]},{"content":"Sharable pages","pos":[3045,3059]},{"content":"Pages that one or more processes can use.","pos":[3077,3118]},{"content":"Examples include code pages within executable images (.dll, .exe, and .cpl) or data file pages (.txt, .doc, etc.).","pos":[3119,3233]},{"content":"Private pages","pos":[3314,3327]},{"content":"Pages used exclusively by a single process and most commonly contain dynamically allocated data such as Heap or VirtualAlloc.","pos":[3346,3471]},{"content":"Process Working Set","pos":[3583,3602]},{"content":"Set of pages recently referenced by a process and contains both private and shared pages.","pos":[3615,3704]},{"content":"Process Private Working Set","pos":[3852,3879]},{"content":"Set of private non-sharable pages recently referenced by a process.","pos":[3884,3951]},{"content":"Available","pos":[4121,4130]},{"content":"Amount of memory immediately available for use by processes on the system.","pos":[4153,4227]},{"content":"This metric is composed of pages on the Standby list that do not need to be written to persistent storage before they can be repurposed by other processes.","pos":[4228,4383]},{"content":"Exercises","pos":[4393,4402]},{"content":"This guide consists of the following exercises.","pos":[4405,4452]},{"content":"Exercise 1 - Identify Processes with Large Working Sets","pos":[4459,4514]},{"content":"Exercise 2 - Track User Mode Process Allocations","pos":[4567,4615]},{"content":"Exercise 3 - Track Driver Footprint and Dynamic Allocations During Boot","pos":[4668,4739]}],"content":"---\ntitle: Memory Footprint Optimization\ndescription: The amount of memory available on a system significantly impacts the user experience.\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 8ECD1B28-D98A-406D-8920-BC205D3A1729\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# Memory Footprint Optimization\n\n\nThe amount of memory available on a system significantly impacts the user experience. The impact affects areas ranging from the overall responsiveness of the system to battery life. Available memory is an important factor to consider when evaluating the complete experience on a low memory device where Windows relies heavily on paging and swapping of content from memory.\n\nThis guide walks you through the process of analyzing memory-related performance issues and identifying the root cause, whether it’s a driver or a user mode process, using the **Windows Performance Toolkit**. Topics include:\n\n-   Driver and application footprint\n\n-   Working Sets and Resident Sets\n\n-   Pool memory allocations\n\n-   Heap and VirtualAlloc memory allocations\n\n## Goals\n\n\nThis guide will show you how to perform the following tasks:\n\n-   Use **Windows Performance Recorder (WPR)** to gather traces of memory-related issues.\n\n-   Use the Assessment and Deployment Kit (ADK) Memory Footprint assessment to gather a memory usage baseline.\n\n-   Analyze paged/non-paged pool memory usage by drivers.\n\n-   Analyze working sets and resident sets of processes.\n\n-   Understand how and when memory is dynamically allocated by drivers and processes.\n\n## Tools\n\n\nIn the past, a kernel debugger along with a large number of cryptic commands had to be used to discover what data and file pages currently occupy physical memory. Now, you can use the **Windows Performance Toolkit (WPT)** to collect and display this information in a more understandable and actionable manner through built-in Windows instrumentation.\n\n**WPT** consists of the **Windows Performance Analyzer (WPA)** and the **Windows Performance Recorder (WPR)**.\n\nThe Windows Assessment Toolkit in the ADK can also be used to obtain a memory footprint assessment. This assessment creates a snapshot of memory use during a series of system reboots and immediately after the desktop is visible. It does not evaluate memory use during ordinary computer operations.\n\nThe ADK **Windows Assessment Console (WAC)** is the tool used to run assessments and generate visual performance reports.\n\n## Terminology\n\n\n| Term                            | Definition                                                                                                                                                                                                                             |\n|---------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\n| **Sharable pages**              | Pages that one or more processes can use. Examples include code pages within executable images (.dll, .exe, and .cpl) or data file pages (.txt, .doc, etc.).                                                                           |\n| **Private pages**               | Pages used exclusively by a single process and most commonly contain dynamically allocated data such as Heap or VirtualAlloc.                                                                                                          |\n| **Process Working Set**         | Set of pages recently referenced by a process and contains both private and shared pages.                                                                                                                                              |\n| **Process Private Working Set** | Set of private non-sharable pages recently referenced by a process.                                                                                                                                                                    |\n| **Available**                   | Amount of memory immediately available for use by processes on the system. This metric is composed of pages on the Standby list that do not need to be written to persistent storage before they can be repurposed by other processes. |\n\n \n\n## Exercises\n\n\nThis guide consists of the following exercises.\n\n-   [Exercise 1 - Identify Processes with Large Working Sets](memory-footprint-optimization-exercise-1.md)\n\n-   [Exercise 2 - Track User Mode Process Allocations](memory-footprint-optimization-exercise-2.md)\n\n-   [Exercise 3 - Track Driver Footprint and Dynamic Allocations During Boot](memory-footprint-optimization-exercise-3.md)\n\n \n\n \n\n\n\n\n\n\n"}