{"nodes":[{"content":"Loading Symbols","pos":[11,26]},{"content":"Loading Symbols","pos":[40,55]},{"content":"Loading Symbols","pos":[244,259]},{"content":"You can set the following user preferences in Windows Performance Analyzer (WPA):","pos":[262,343]},{"content":"Load Symbols","pos":[351,363]},{"content":"Configure Symbol Paths","pos":[373,395]},{"pos":[399,490],"content":"To change these options, open a recording and then select the option on the <bpt id=\"p1\">**</bpt>Trace<ept id=\"p1\">**</ept> menu."},{"content":"In this article:","pos":[492,508]},{"content":"Managed Symbols","pos":[515,530]},{"content":"Relative Paths and Embedded Environment Variables","pos":[547,596]},{"content":"SymCache Path","pos":[615,628]},{"content":"Symbol Path","pos":[651,662]},{"pos":[708,723],"content":"Managed Symbols"},{"content":"Symbol resolutions and stacks for managed processes are supported on the following systems:","pos":[726,817]},{"content":"With .NET Framework 4.5 or a later release on Windows 8 or later release","pos":[823,895]},{"content":"With .NET Framework 4.0 or a later release on x86 machines","pos":[901,959]},{"content":"When you capture a trace by using WPR, WPR enables all providers that are required to resolve managed symbols in the trace.","pos":[961,1084]},{"content":"WPR creates a folder next to the saved trace that contains PDB files of these managed symbols.","pos":[1085,1179]},{"content":"When WPA opens the trace, WPA looks for this folder and automatically adds it to the symbol path.","pos":[1180,1277]},{"content":"If WPR was not used to generate the trace, any symbols for .NET Framework programs might not decode completely or decode at all.","pos":[1278,1406]},{"content":"JavaScript symbols","pos":[1411,1429]},{"content":"Symbols resolution and stacks for JavaScript processes are supported on systems that are running the following software:","pos":[1432,1552]},{"content":"Windows 7 together with Internet Explorer 10 or later version","pos":[1558,1619]},{"content":"Applications that use JavaScript on Windows 8","pos":[1625,1670]},{"content":"WP enables the required providers to decode symbols for JavaScript code on supported systems.","pos":[1672,1765]},{"content":"The JavaScript method addresses and stack frames will decode to a JavaScript file name, method name, line number and column number.","pos":[1766,1897]},{"pos":[1931,1980],"content":"Relative Paths and Embedded Environment Variables"},{"content":"The <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt><ph id=\"ph4\">\\_</ph>NT<ph id=\"ph5\">\\_</ph>SYMCACHE<ph id=\"ph6\">\\_</ph>PATH<ept id=\"p2\">**</ept> environment variables can use relative paths, absolute paths, network share paths, or embedded environment variables.","pos":[1983,2156]},{"content":"WPA converts relative paths to absolute paths when you first set the relative paths.","pos":[2157,2241]},{"content":"WPA converts relative paths that WPA loads from environment variables when the program starts.","pos":[2242,2336]},{"content":"WPA converts relative paths that you enter in the <bpt id=\"p1\">**</bpt>Configure Symbol Paths<ept id=\"p1\">**</ept> dialog box when you close the dialog box.","pos":[2338,2456]},{"content":"Changes to the current directory do not affect relative paths that you have already set.","pos":[2457,2545]},{"content":"The <bpt id=\"p1\">**</bpt>Configure Symbol Paths<ept id=\"p1\">**</ept> dialog box shows the currently set paths when you first open the dialog box so that you can see the way that WPA expanded any relative paths.","pos":[2546,2718]},{"content":"WPA expands embedded environment variables at the same time that it expands relative paths.","pos":[2720,2811]},{"content":"Because WPA captures environment variables when the program starts, changes to the environment variables that are outside a currently running instance of WPA do not appear in that instance.","pos":[2812,3001]},{"pos":[3003,3211],"content":"Other programs that use the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMCACHE<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable, such as <bpt id=\"p2\">**</bpt>WinDbg<ept id=\"p2\">**</ept> or <bpt id=\"p3\">**</bpt>Microsoft Visual Studio<ept id=\"p3\">**</ept>, might not handle relative paths or embedded environment variables in the same way."},{"pos":[3249,3262],"content":"SymCache Path"},{"content":"WPA uses SymCache files to cache symbol information from program database (PDB) files in a way that is compact and easy to access.","pos":[3265,3395]},{"content":"After WPA populates a SymCache folder with the symbols for a trace, reloading the symbols for that trace is much faster.","pos":[3396,3516]},{"content":"If a SymCache file becomes too large or is no longer needed, you can safely delete that SymCache file.","pos":[3517,3619]},{"content":"WPA repopulates the SymCache folder with new files as needed.","pos":[3620,3681]},{"content":"You can also copy SymCache files to another computer or share the files over a network to expedite symbol loading on different computers.","pos":[3682,3819]},{"content":"If you use the <bpt id=\"p1\">**</bpt>Configure Symbol Paths<ept id=\"p1\">**</ept> dialog box to set the <bpt id=\"p2\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMCACHE<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p2\">**</ept> environment variable to a folder that WPA cannot access, the <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept> button does not close the dialog box.","pos":[3821,4015]},{"content":"However, you do not receive an error message.","pos":[4016,4061]},{"content":"If the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMCACHE<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable is unassigned or empty, WPA creates a SymCache folder at the root of the drive that contains the WPA executable file.","pos":[4063,4233]},{"content":"If the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMCACHE<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable is running on a network share, the variable creates a SymCache folder at the root of the drive that contains the Program Files folder.","pos":[4234,4421]},{"content":"This is usually drive C.","pos":[4422,4446]},{"content":"SymCache Examples","pos":[4452,4469]},{"pos":[4471,4547],"content":"The following command puts the SymCache file in the <bpt id=\"p1\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>SymCache<ept id=\"p1\">**</ept> folder:"},{"pos":[4577,4780],"content":"The following command puts the SymCache file in the <bpt id=\"p1\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>SymCache folder<ept id=\"p1\">**</ept>, searches the <bpt id=\"p2\">**</bpt><ph id=\"ph2\">\\\\\\\\</ph>network<ph id=\"ph3\">\\\\</ph>SymCache<ept id=\"p2\">**</ept> folder for symbols, and then processes the <bpt id=\"p3\">**</bpt><ph id=\"ph4\">\\_</ph>NT<ph id=\"ph5\">\\_</ph>SYMBOL<ph id=\"ph6\">\\_</ph>PATH<ept id=\"p3\">**</ept> environment variable:"},{"content":"This example copies any symbols that the example finds in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\\\\\\\</ph>network<ph id=\"ph2\">\\\\</ph>SymCache<ept id=\"p1\">**</ept> folder into the <bpt id=\"p2\">**</bpt>C:<ph id=\"ph3\">\\\\</ph>SymCache<ept id=\"p2\">**</ept> folder.","pos":[4829,4957]},{"content":"This enables the user to create a large SymCache folder and then copy only the files that the user needs for a specific trace into the designated folder.","pos":[4958,5111]},{"content":"To search multiple alternative SymCache folders, append the folders to the search path by using an asterisk (<ph id=\"ph1\">\\*</ph>) separator.","pos":[5113,5236]},{"content":"When WPA finds a SymCache file in one of the alternative locations, WPA copies the file only to the first SymCache folder in the path.","pos":[5237,5371]},{"content":"WPA also puts newly created SymCache files into the first SymCache folder in the path.","pos":[5372,5458]},{"content":"To disable copying and writing but still use the hierarchical search feature, you should leave the first position in the path empty, as shown in the following example:","pos":[5460,5627]},{"content":"When you issue this command, WPA searches the <ph id=\"ph1\">\\\\</ph><bpt id=\"p1\">**</bpt><ph id=\"ph2\">\\\\</ph>network<ph id=\"ph3\">\\\\</ph>SymCache<ept id=\"p1\">**</ept> folder.","pos":[5665,5744]},{"content":"However, WPA does not copy the results or write the generated SymCache files to a different folder.","pos":[5745,5844]},{"pos":[5880,5891],"content":"Symbol Path"},{"pos":[5894,6003],"content":"For basic information about <bpt id=\"p1\">**</bpt>the <ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable, see the following MSDN articles:"},{"content":"Using SymSrv","pos":[6010,6022]},{"content":"Symbol Paths","pos":[6079,6091]},{"content":"Symbol loading in WPA depends on the paths that the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable specifies (excluding symbols that WPA has already cached in the SymCache folder).","pos":[6143,6320]},{"content":"WPA searches the paths sequentially, starting on the left.","pos":[6321,6379]},{"content":"However, loading symbols from a PDB file in one of these paths can be time-consuming, especially if the PDB exists on a remote computer.","pos":[6380,6516]},{"content":"We therefore recommend that you put network paths after any local paths and that you use a local PDB cache for any remote symbol server.","pos":[6517,6653]},{"content":"However, even if all the symbols are stored locally, WPA can become unresponsive during the time that it loads symbols.","pos":[6654,6773]},{"content":"WPA returns to an interactive state after it finishes loading symbols.","pos":[6774,6844]},{"pos":[6846,6948],"content":"When the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable is not set, WPA uses the following default value:"},{"content":"The semicolons (;) separate the different paths.","pos":[7027,7075]},{"content":"The first path is the period (.).","pos":[7076,7109]},{"content":"WPA maps this path to the current folder when WPA loads the trace.","pos":[7110,7176]},{"content":"See the <bpt id=\"p1\">[</bpt>SymCache Path<ept id=\"p1\">](#symcachepath)</ept> section of this article for more information about the way that WPA processes relative paths.","pos":[7177,7309]},{"content":"The second path is the following:","pos":[7311,7344]},{"content":"You must also set the NGEN PB path:","pos":[7420,7455]},{"content":"When you specify this path, WPA downloads symbols from the Microsoft public symbol server and caches the PDB files in the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\\\</ph>Symbols<ept id=\"p1\">**</ept> folder (this folder is relative to the Windows Performance Toolkit installation folder)..","pos":[7560,7785]},{"content":"Therefore, WPA puts the Symbols folder next to the SymCache folder.","pos":[7786,7853]},{"content":"However, if the SymCache folder is on a network share, WPA creates the Symbols folder at the root of the drive that holds the Program Files folder.","pos":[7854,8001]},{"content":"This is usually drive C.","pos":[8002,8026]},{"content":"If you do not want to search and load symbols from PDB files, you can set the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable to a local folder that does not contain symbols, such as a period (.).","pos":[8028,8220]},{"content":"Do not leave the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable empty.","pos":[8221,8288]},{"content":"If you leave the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable empty, WPA uses the default.","pos":[8289,8378]},{"content":"When WPA opens a recording, WPA looks for a folder that has the same name as the trace that uses the <bpt id=\"p1\">**</bpt>.ngenpdb<ept id=\"p1\">**</ept> extension.","pos":[8380,8504]},{"content":"If WPA finds this folder, WPA appends the folder to the end of the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable.","pos":[8505,8616]},{"content":"Windows Performance Recorder (WPR) automatically creates a folder that contains PDB files for managed code that WPR captured during the recording.","pos":[8617,8763]},{"content":"For example, if you open the <bpt id=\"p1\">**</bpt>C:<ph id=\"ph1\">\\\\</ph>trace.etl<ept id=\"p1\">**</ept> recording in WPA, WPA searches for the <bpt id=\"p2\">**</bpt>C:<ph id=\"ph2\">\\\\</ph>trace.etl.ngenpdb<ept id=\"p2\">**</ept> folder.","pos":[8764,8883]},{"content":"If this folder exists, WPA adds the folder to the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">\\_</ph>NT<ph id=\"ph2\">\\_</ph>SYMBOL<ph id=\"ph3\">\\_</ph>PATH<ept id=\"p1\">**</ept> environment variable.","pos":[8884,8978]},{"content":"Related topics","pos":[8983,8997]},{"content":"WPA Features","pos":[9001,9013]},{"content":"Load Symbols or Configure Symbol Paths","pos":[9034,9072]},{"content":"Using CLR 4.0 NGEN PDB Support","pos":[9119,9149]},{"content":"Common In-Depth Analysis Issues","pos":[9187,9218]}],"content":"---\ntitle: Loading Symbols\ndescription: Loading Symbols\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: db27f063-0ae8-4762-8df4-66e3d14e55ed\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# Loading Symbols\n\n\nYou can set the following user preferences in Windows Performance Analyzer (WPA):\n\n-   **Load Symbols**\n\n-   **Configure Symbol Paths**\n\nTo change these options, open a recording and then select the option on the **Trace** menu.\n\nIn this article:\n\n-   [Managed Symbols](#mansym)\n\n-   [Relative Paths and Embedded Environment Variables](#relative)\n\n-   [SymCache Path](#symcachepath)\n\n-   [Symbol Path](#symbolpath)\n\n## <a href=\"\" id=\"mansym\"></a>Managed Symbols\n\n\nSymbol resolutions and stacks for managed processes are supported on the following systems:\n\n-   With .NET Framework 4.5 or a later release on Windows 8 or later release\n\n-   With .NET Framework 4.0 or a later release on x86 machines\n\nWhen you capture a trace by using WPR, WPR enables all providers that are required to resolve managed symbols in the trace. WPR creates a folder next to the saved trace that contains PDB files of these managed symbols. When WPA opens the trace, WPA looks for this folder and automatically adds it to the symbol path. If WPR was not used to generate the trace, any symbols for .NET Framework programs might not decode completely or decode at all.\n\n## JavaScript symbols\n\n\nSymbols resolution and stacks for JavaScript processes are supported on systems that are running the following software:\n\n-   Windows 7 together with Internet Explorer 10 or later version\n\n-   Applications that use JavaScript on Windows 8\n\nWP enables the required providers to decode symbols for JavaScript code on supported systems. The JavaScript method addresses and stack frames will decode to a JavaScript file name, method name, line number and column number.\n\n## <a href=\"\" id=\"relative\"></a>Relative Paths and Embedded Environment Variables\n\n\nThe **\\_NT\\_SYMBOL\\_PATH** and **\\_NT\\_SYMCACHE\\_PATH** environment variables can use relative paths, absolute paths, network share paths, or embedded environment variables. WPA converts relative paths to absolute paths when you first set the relative paths. WPA converts relative paths that WPA loads from environment variables when the program starts.\n\nWPA converts relative paths that you enter in the **Configure Symbol Paths** dialog box when you close the dialog box. Changes to the current directory do not affect relative paths that you have already set. The **Configure Symbol Paths** dialog box shows the currently set paths when you first open the dialog box so that you can see the way that WPA expanded any relative paths.\n\nWPA expands embedded environment variables at the same time that it expands relative paths. Because WPA captures environment variables when the program starts, changes to the environment variables that are outside a currently running instance of WPA do not appear in that instance.\n\nOther programs that use the **\\_NT\\_SYMCACHE\\_PATH** environment variable, such as **WinDbg** or **Microsoft Visual Studio**, might not handle relative paths or embedded environment variables in the same way.\n\n## <a href=\"\" id=\"symcachepath\"></a>SymCache Path\n\n\nWPA uses SymCache files to cache symbol information from program database (PDB) files in a way that is compact and easy to access. After WPA populates a SymCache folder with the symbols for a trace, reloading the symbols for that trace is much faster. If a SymCache file becomes too large or is no longer needed, you can safely delete that SymCache file. WPA repopulates the SymCache folder with new files as needed. You can also copy SymCache files to another computer or share the files over a network to expedite symbol loading on different computers.\n\nIf you use the **Configure Symbol Paths** dialog box to set the **\\_NT\\_SYMCACHE\\_PATH** environment variable to a folder that WPA cannot access, the **OK** button does not close the dialog box. However, you do not receive an error message.\n\nIf the **\\_NT\\_SYMCACHE\\_PATH** environment variable is unassigned or empty, WPA creates a SymCache folder at the root of the drive that contains the WPA executable file. If the **\\_NT\\_SYMCACHE\\_PATH** environment variable is running on a network share, the variable creates a SymCache folder at the root of the drive that contains the Program Files folder. This is usually drive C.\n\n### SymCache Examples\n\nThe following command puts the SymCache file in the **C:\\\\SymCache** folder:\n\n``` syntax\nC:\\SymCache\n```\n\nThe following command puts the SymCache file in the **C:\\\\SymCache folder**, searches the **\\\\\\\\network\\\\SymCache** folder for symbols, and then processes the **\\_NT\\_SYMBOL\\_PATH** environment variable:\n\n``` syntax\nC:\\SymCache*\\\\network\\SymCache\n```\n\nThis example copies any symbols that the example finds in the **\\\\\\\\network\\\\SymCache** folder into the **C:\\\\SymCache** folder. This enables the user to create a large SymCache folder and then copy only the files that the user needs for a specific trace into the designated folder.\n\nTo search multiple alternative SymCache folders, append the folders to the search path by using an asterisk (\\*) separator. When WPA finds a SymCache file in one of the alternative locations, WPA copies the file only to the first SymCache folder in the path. WPA also puts newly created SymCache files into the first SymCache folder in the path.\n\nTo disable copying and writing but still use the hierarchical search feature, you should leave the first position in the path empty, as shown in the following example:\n\n``` syntax\n*\\\\network\\SymCache\n```\n\nWhen you issue this command, WPA searches the \\\\**\\\\network\\\\SymCache** folder. However, WPA does not copy the results or write the generated SymCache files to a different folder.\n\n## <a href=\"\" id=\"symbolpath\"></a>Symbol Path\n\n\nFor basic information about **the \\_NT\\_SYMBOL\\_PATH** environment variable, see the following MSDN articles:\n\n-   [Using SymSrv](http://go.microsoft.com/fwlink/p/?linkid=226201)\n\n-   [Symbol Paths](http://go.microsoft.com/fwlink/p/?linkid=226202)\n\nSymbol loading in WPA depends on the paths that the **\\_NT\\_SYMBOL\\_PATH** environment variable specifies (excluding symbols that WPA has already cached in the SymCache folder). WPA searches the paths sequentially, starting on the left. However, loading symbols from a PDB file in one of these paths can be time-consuming, especially if the PDB exists on a remote computer. We therefore recommend that you put network paths after any local paths and that you use a local PDB cache for any remote symbol server. However, even if all the symbols are stored locally, WPA can become unresponsive during the time that it loads symbols. WPA returns to an interactive state after it finishes loading symbols.\n\nWhen the **\\_NT\\_SYMBOL\\_PATH** environment variable is not set, WPA uses the following default value:\n\n``` syntax\n .;SRV*\\Symbols* http://msdl.microsoft.com/download/symbols;\n```\n\nThe semicolons (;) separate the different paths. The first path is the period (.). WPA maps this path to the current folder when WPA loads the trace. See the [SymCache Path](#symcachepath) section of this article for more information about the way that WPA processes relative paths.\n\nThe second path is the following:\n\n``` syntax\n SRV*\\Symbols* http://msdl.microsoft.com/download/symbols\n```\n\nYou must also set the NGEN PB path:\n\n``` syntax\nset _NT_SYMBOL_PATH=srv*C:\\Symbols.NGEN;srv*http://msdl.microsoft.com/download/symbols\n```\n\nWhen you specify this path, WPA downloads symbols from the Microsoft public symbol server and caches the PDB files in the **\\\\Symbols** folder (this folder is relative to the Windows Performance Toolkit installation folder).. Therefore, WPA puts the Symbols folder next to the SymCache folder. However, if the SymCache folder is on a network share, WPA creates the Symbols folder at the root of the drive that holds the Program Files folder. This is usually drive C.\n\nIf you do not want to search and load symbols from PDB files, you can set the **\\_NT\\_SYMBOL\\_PATH** environment variable to a local folder that does not contain symbols, such as a period (.). Do not leave the **\\_NT\\_SYMBOL\\_PATH** environment variable empty. If you leave the **\\_NT\\_SYMBOL\\_PATH** environment variable empty, WPA uses the default.\n\nWhen WPA opens a recording, WPA looks for a folder that has the same name as the trace that uses the **.ngenpdb** extension. If WPA finds this folder, WPA appends the folder to the end of the **\\_NT\\_SYMBOL\\_PATH** environment variable. Windows Performance Recorder (WPR) automatically creates a folder that contains PDB files for managed code that WPR captured during the recording. For example, if you open the **C:\\\\trace.etl** recording in WPA, WPA searches for the **C:\\\\trace.etl.ngenpdb** folder. If this folder exists, WPA adds the folder to the **\\_NT\\_SYMBOL\\_PATH** environment variable.\n\n## Related topics\n\n\n[WPA Features](wpa-features.md)\n\n[Load Symbols or Configure Symbol Paths](load-symbols-or-configure-symbol-paths.md)\n\n[Using CLR 4.0 NGEN PDB Support](using-clr-40-ngen-pdb-support.md)\n\n[Common In-Depth Analysis Issues](../assessments/common-in-depth-analysis-issues.md)\n\n \n\n \n\n\n\n\n\n\n\n"}