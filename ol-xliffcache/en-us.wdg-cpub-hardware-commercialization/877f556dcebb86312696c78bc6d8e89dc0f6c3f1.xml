{"nodes":[{"content":"ResetConfig XML reference","pos":[34,59]},{"content":"ResetConfig XML reference","pos":[166,191]},{"content":"ResetConfig XML reference","pos":[199,224]},{"content":"This reference describes all XML elements that are used to author the ResetConfig.xml file, used to configure Windows Recovery Environment push-button reset features.","pos":[227,393]},{"pos":[470,475],"content":"Reset"},{"pos":[478,551],"content":"The <ph id=\"ph1\">`Reset`</ph> XML element can contain the elements: <ph id=\"ph2\">`Run`</ph> and <ph id=\"ph3\">`SystemDisk`</ph>."},{"pos":[655,658],"content":"Run"},{"pos":[661,743],"content":"The <ph id=\"ph1\">`Run`</ph> XML element is used to add custom scripts to push-button reset features."},{"content":"You can specify up to four <ph id=\"ph1\">`Run`</ph> elements in a single ResetConfig.xml file.","pos":[745,820]},{"content":"Each <ph id=\"ph1\">`Run`</ph> element must contain a different <bpt id=\"p1\">*</bpt><ph id=\"ph2\">\\[</ph>ExtPoint<ph id=\"ph3\">\\]</ph><ept id=\"p1\">*</ept> value for the <ph id=\"ph4\">`Phase`</ph> attribute.","pos":[821,912]},{"pos":[914,1002],"content":"The following table describes the valid elements that can be added to the <ph id=\"ph1\">`Run`</ph> element:"},{"content":"Element","pos":[1120,1127]},{"content":"Description","pos":[1150,1161]},{"content":"Each <ph id=\"ph1\">&lt;code&gt;Run&lt;/code&gt;</ph> element defines the extensibility point to be used, the script that is executed at that extensibility point, and estimated time duration in minutes.","pos":[1308,1478]},{"content":"The <ph id=\"ph1\">&lt;code&gt;Phase&lt;/code&gt;</ph> attribute is required.","pos":[1486,1531]},{"content":"It accepts only the following values for <ph id=\"ph1\">&lt;em&gt;</ph>[ExtPoint]<ph id=\"ph2\">&lt;/em&gt;</ph>:","pos":[1532,1593]},{"content":".","pos":[1650,1651]},{"content":"Runs the specified program at extensibility point A.","pos":[1652,1704]},{"content":".","pos":[1760,1761]},{"content":"Runs the specified program at extensibility point B","pos":[1762,1813]},{"content":".","pos":[1871,1872]},{"content":"Runs the specified program at extensibility point C","pos":[1873,1924]},{"content":".","pos":[1982,1983]},{"content":"Runs the specified program at extensibility point D","pos":[1984,2035]},{"content":"You can specify up to four <ph id=\"ph1\">&lt;code&gt;Run&lt;/code&gt;</ph> sections in a single ResetConfig.xml file.","pos":[2054,2140]},{"content":"However, each <ph id=\"ph1\">&lt;code&gt;Run&lt;/code&gt;</ph> section must contain a different value for the phase attribute.","pos":[2141,2235]},{"content":"Specifies the location of the script for a particular <ph id=\"ph1\">&lt;code&gt;Run&lt;/code&gt;</ph> section.","pos":[2336,2415]},{"content":"The path must be the relative path of the script from the folder which contains ResetConfig.xml (usually this is C:\\Recovery\\OEM).","pos":[2423,2553]},{"content":"Specifies the estimated time, in minutes, that you expect the custom script to run.","pos":[2657,2740]},{"content":"This estimate is used to display progress information in the GUI.","pos":[2741,2806]},{"content":"The duration must be an integer and must be between 1 and 5.","pos":[2814,2874]},{"content":"Specifies the command-line parameters to use when you run the custom script or executable file.","pos":[2976,3071]},{"content":"The value is treated as a string, and can contain multiple parameters.","pos":[3072,3142]},{"content":"does not support empty elements.","pos":[3169,3201]},{"content":"If your script does not require parameters, then do not include this element.","pos":[3202,3279]},{"content":"For examples, see <bpt id=\"p1\">[</bpt>Using ResetConfig.xml<ept id=\"p1\">](#usingresetconfig-xml)</ept> later in this topic.","pos":[3280,3365]},{"pos":[3506,3516],"content":"SystemDisk"},{"content":"The <ph id=\"ph1\">`SystemDisk`</ph> element customizes bare metal recovery functionality.","pos":[3519,3589]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Create Media to Run Push-Button Reset Features<ept id=\"p1\">](create-media-to-run-push-button-reset-features-s14.md)</ept>.","pos":[3590,3720]},{"content":"You can specify one <ph id=\"ph1\">`SystemDisk`</ph> section.","pos":[3722,3763]},{"content":"Here's the required and optional elements:","pos":[3764,3806]},{"content":"Element","pos":[3924,3931]},{"content":"Description","pos":[3954,3965]},{"content":"Required.","pos":[4082,4091]},{"content":"Specifies the minimum required size for the primary hard drive, in megabytes.","pos":[4092,4169]},{"content":"Bare metal recovery won't proceed if the system disk doesn't meet this size requirement.","pos":[4177,4265]},{"content":"Required.","pos":[4380,4389]},{"content":"Path to Diskpart script relative to C:\\Recovery\\OEM.","pos":[4390,4442]},{"content":"The script should assume that all existing partitions have been deleted, and the system disk has focus in Diskpart.","pos":[4443,4558]},{"content":"For example, if the recovery scripts are located at <ph id=\"ph1\">&lt;code&gt;C:\\Recovery\\OEM\\Scripts\\RecreatePartitions.dps&lt;/code&gt;</ph>, use the value <ph id=\"ph2\">&lt;code&gt;\\Scripts\\RecreatePartitions.dps&lt;/code&gt;</ph>.","pos":[4566,4738]},{"content":"Required.","pos":[4845,4854]},{"content":"The partition to which the OS should be restored.","pos":[4855,4904]},{"content":"The ESP or active partition must be on the same disk as the OS.","pos":[4905,4968]},{"content":"Optional.","pos":[5081,5090]},{"content":"The index of the image within install.wim to be applied during bare metal recovery.","pos":[5091,5174]},{"content":"This element is optional and is only needed on manufacturer-created recovery media","pos":[5175,5257]},{"content":"Optional.","pos":[5371,5380]},{"content":"Specifies the partition where the Windows RE boot image is installed.","pos":[5381,5450]},{"content":"The <ph id=\"ph1\">&lt;code&gt;WindowsREPartition&lt;/code&gt;</ph> and <ph id=\"ph2\">&lt;code&gt;WindowsREPath&lt;/code&gt;</ph> elements are optional, but they must be used together.","pos":[5458,5579]},{"content":"If only one of these elements is present, your user won't be able to repartition the hard drive.","pos":[5580,5676]},{"content":"Optional.","pos":[5786,5795]},{"content":"Specifies the folder path where the Winre.wim boot image is copied and staged, relative to the root of the partition specified in the <ph id=\"ph1\">&lt;code&gt;WindowsREPartition&lt;/code&gt;</ph> element.","pos":[5796,5970]},{"content":"The <ph id=\"ph1\">&lt;code&gt;WindowsREPartition&lt;/code&gt;</ph> and <ph id=\"ph2\">&lt;code&gt;WindowsREPath&lt;/code&gt;</ph> elements are optional, but they must be used together.","pos":[5978,6099]},{"content":"If only one of these elements is present, your user won't be able to repartition the hard drive.","pos":[6100,6196]},{"content":"Optional.","pos":[6299,6308]},{"content":"Specifies whether the recovery image should be applied with per-file compression enabled.","pos":[6309,6398]},{"content":"This element is optional and is only needed on manufacturer-created recovery media.","pos":[6399,6482]},{"content":"accepts the following values:","pos":[6511,6540]},{"content":": Files applied from the image are compressed individually.","pos":[6571,6630]},{"content":"(default value): Compression is not used.","pos":[6659,6700]},{"content":"This setting is deprecated in Windows 10.","pos":[6826,6867]},{"content":"This setting is deprecated in Windows 10.","pos":[6980,7021]},{"content":"This setting is deprecated in Windows 10.","pos":[7136,7177]},{"content":"This setting is deprecated in Windows 10.","pos":[7280,7321]},{"pos":[7440,7461],"content":"Using ResetConfig.xml"},{"content":"If you use a text editor to author your .xml files, you must save the document with an .xml file name extension, and use UTF-8 encoding.","pos":[7464,7600]},{"content":"You must not use ANSI coding.","pos":[7601,7630]},{"content":"These files should be placed in the folder C:<ph id=\"ph1\">\\\\</ph>Recovery<ph id=\"ph2\">\\\\</ph>OEM, and will automatically be detected by Push-button reset features.","pos":[7632,7759]},{"pos":[7842,7849],"content":"Example"},{"content":"This is a code example for the ResetConfig.xml file.","pos":[7852,7904]},{"pos":[8885,8899],"content":"Related topics"},{"content":"Push-Button Reset Overview","pos":[8903,8929]},{"content":"Create Media to Run Push-Button Reset Features","pos":[8964,9010]}],"content":"---\nauthor: Justinha\nDescription: ResetConfig XML reference\nms.assetid: dc9f16c9-d094-49d6-9aaf-3a02c381ccc0\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: ResetConfig XML reference\n---\n\n# ResetConfig XML reference\n\n\nThis reference describes all XML elements that are used to author the ResetConfig.xml file, used to configure Windows Recovery Environment push-button reset features.\n\n## <span id=\"Reset\"></span><span id=\"reset\"></span><span id=\"RESET\"></span>Reset\n\n\nThe `Reset` XML element can contain the elements: `Run` and `SystemDisk`.\n\n## <span id=\"ResetConfigRun\"></span><span id=\"resetconfigrun\"></span><span id=\"RESETCONFIGRUN\"></span>Run\n\n\nThe `Run` XML element is used to add custom scripts to push-button reset features.\n\nYou can specify up to four `Run` elements in a single ResetConfig.xml file. Each `Run` element must contain a different *\\[ExtPoint\\]* value for the `Phase` attribute.\n\nThe following table describes the valid elements that can be added to the `Run` element:\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Element</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>Run Phase=&quot;[ExtPoint]&quot;&quot;</code></p></td>\n<td align=\"left\"><p>Each <code>Run</code> element defines the extensibility point to be used, the script that is executed at that extensibility point, and estimated time duration in minutes.</p>\n<p>The <code>Phase</code> attribute is required. It accepts only the following values for <em>[ExtPoint]</em>:</p>\n<ul>\n<li><p><code>BasicReset_BeforeImageApply</code>. Runs the specified program at extensibility point A.</p></li>\n<li><p><code>BasicReset_AfterImageApply</code>. Runs the specified program at extensibility point B</p></li>\n<li><p><code>FactoryReset_AfterDiskFormat</code>. Runs the specified program at extensibility point C</p></li>\n<li><p><code>FactoryReset_AfterImageApply</code>. Runs the specified program at extensibility point D</p></li>\n</ul>\n<p>You can specify up to four <code>Run</code> sections in a single ResetConfig.xml file. However, each <code>Run</code> section must contain a different value for the phase attribute.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>Path</code></p></td>\n<td align=\"left\"><p>Specifies the location of the script for a particular <code>Run</code> section.</p>\n<p>The path must be the relative path of the script from the folder which contains ResetConfig.xml (usually this is C:\\Recovery\\OEM).</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>Duration</code></p></td>\n<td align=\"left\"><p>Specifies the estimated time, in minutes, that you expect the custom script to run. This estimate is used to display progress information in the GUI.</p>\n<p>The duration must be an integer and must be between 1 and 5.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>Param</code></p></td>\n<td align=\"left\"><p>Specifies the command-line parameters to use when you run the custom script or executable file. The value is treated as a string, and can contain multiple parameters.</p>\n<p><code>Param</code> does not support empty elements. If your script does not require parameters, then do not include this element. For examples, see [Using ResetConfig.xml](#usingresetconfig-xml) later in this topic.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <span id=\"resetconfig.xml_sysdisk_options\"></span><span id=\"RESETCONFIG.XML_SYSDISK_OPTIONS\"></span>SystemDisk\n\n\nThe `SystemDisk` element customizes bare metal recovery functionality. For more information, see [Create Media to Run Push-Button Reset Features](create-media-to-run-push-button-reset-features-s14.md).\n\nYou can specify one `SystemDisk` section. Here's the required and optional elements:\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Element</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><code>MinSize</code>\n<p></p></td>\n<td align=\"left\"><p>Required. Specifies the minimum required size for the primary hard drive, in megabytes.</p>\n<p>Bare metal recovery won't proceed if the system disk doesn't meet this size requirement.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>DiskpartScriptPath</code></p></td>\n<td align=\"left\"><p>Required. Path to Diskpart script relative to C:\\Recovery\\OEM. The script should assume that all existing partitions have been deleted, and the system disk has focus in Diskpart.</p>\n<p>For example, if the recovery scripts are located at <code>C:\\Recovery\\OEM\\Scripts\\RecreatePartitions.dps</code>, use the value <code>\\Scripts\\RecreatePartitions.dps</code>.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>OSPartition</code></p></td>\n<td align=\"left\"><p>Required. The partition to which the OS should be restored. The ESP or active partition must be on the same disk as the OS.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>RestoreFromIndex</code></p></td>\n<td align=\"left\"><p>Optional. The index of the image within install.wim to be applied during bare metal recovery. This element is optional and is only needed on manufacturer-created recovery media</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>WindowsREPartition</code></p></td>\n<td align=\"left\"><p>Optional. Specifies the partition where the Windows RE boot image is installed.</p>\n<p>The <code>WindowsREPartition</code> and <code>WindowsREPath</code> elements are optional, but they must be used together. If only one of these elements is present, your user won't be able to repartition the hard drive.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>WindowsREPath</code></p></td>\n<td align=\"left\"><p>Optional. Specifies the folder path where the Winre.wim boot image is copied and staged, relative to the root of the partition specified in the <code>WindowsREPartition</code> element.</p>\n<p>The <code>WindowsREPartition</code> and <code>WindowsREPath</code> elements are optional, but they must be used together. If only one of these elements is present, your user won't be able to repartition the hard drive.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>Compact</code></p></td>\n<td align=\"left\"><p>Optional. Specifies whether the recovery image should be applied with per-file compression enabled. This element is optional and is only needed on manufacturer-created recovery media.</p>\n<p><code>Compact</code> accepts the following values:</p>\n<ul>\n<li><code>True</code>: Files applied from the image are compressed individually.</li>\n<li><code>False</code> (default value): Compression is not used.</li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>RecoveryImagePartition</code></p></td>\n<td align=\"left\"><p>This setting is deprecated in Windows 10.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>RecoveryImagePath</code></p></td>\n<td align=\"left\"><p>This setting is deprecated in Windows 10.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>RecoveryImageIndex</code></p></td>\n<td align=\"left\"><p>This setting is deprecated in Windows 10.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>WIMBoot</code></p></td>\n<td align=\"left\"><p>This setting is deprecated in Windows 10.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <span id=\"usingresetconfig.xml\"></span><span id=\"USINGRESETCONFIG.XML\"></span>Using ResetConfig.xml\n\n\nIf you use a text editor to author your .xml files, you must save the document with an .xml file name extension, and use UTF-8 encoding. You must not use ANSI coding.\n\nThese files should be placed in the folder C:\\\\Recovery\\\\OEM, and will automatically be detected by Push-button reset features.\n\n## <span id=\"Example\"></span><span id=\"example\"></span><span id=\"EXAMPLE\"></span>Example\n\n\nThis is a code example for the ResetConfig.xml file.\n\n``` syntax\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Reset>\n <Run Phase=\"BasicReset_BeforeImageApply\">\n   <Path>Fabrikam\\CopyFiles.cmd</Path>\n   <Duration>2</Duration>\n </Run>\n <Run Phase=\"BasicReset_AfterImageApply\">\n   <Path>Fabrikam\\InstallDrivers.cmd</Path>\n   <Param>/allDrivers</Param>\n   <Duration>2</Duration>\n </Run>\n <Run Phase=\"FactoryReset_AfterDiskFormat\">\n   <Path>Fabrikam\\FixPartitions.exe</Path>\n   <Duration>2</Duration>\n </Run>\n <Run Phase=\"FactoryReset_AfterImageApply\">\n   <Path>Fabrikam\\InstallDrivers.cmd</Path>\n   <Param>/allDrivers</Param>\n   <Duration>2</Duration>\n </Run>\n <SystemDisk>\n   <MinSize>75000</MinSize>\n   <DiskpartScriptPath>Fabrikam\\CreatePartition.txt </DiskpartScriptPath>\n   <OSPartition>4</OSPartition>\n   <RestoreFromIndex>2</RestoreFromIndex>\n   <WindowsREPartition>1</WindowsREPartition>\n   <WindowsREPath>Recovery\\WindowsRE</WindowsREPath>\n   <Compact>False</Compact>\n </SystemDisk>\n</Reset>\n```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[Push-Button Reset Overview](push-button-reset-overview.md)\n\n[Create Media to Run Push-Button Reset Features](create-media-to-run-push-button-reset-features-s14.md)\n\n \n\n \n\n\n\n\n\n\n"}