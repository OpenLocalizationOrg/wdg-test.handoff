{"nodes":[{"content":"WPR Command-Line Options","pos":[11,35]},{"content":"WPR Command-Line Options","pos":[49,73]},{"content":"WPR Command-Line Options","pos":[262,286]},{"content":"Windows Performance Recorder (WPR) offers a simple command line interface.","pos":[289,363]},{"content":"The full complexity of WPR is embedded in the recording profiles.","pos":[364,429]},{"content":"WPR requires Windows 7 or later version operating system.","pos":[431,488]},{"content":"Syntax:","pos":[492,499]},{"pos":[503,797],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> {<bpt id=\"p2\">**</bpt>-profiles<ept id=\"p2\">**</ept> <ph id=\"ph1\">\\[</ph><bpt id=\"p3\">*</bpt><ph id=\"ph2\">&amp;lt;</ph>path<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p3\">*</ept> <ph id=\"ph4\">\\[</ph> …<ph id=\"ph5\">\\]\\] | </ph><bpt id=\"p4\">**</bpt>-start<ept id=\"p4\">**</ept> <bpt id=\"p5\">*</bpt><ph id=\"ph6\">&amp;lt;</ph>arguments<ph id=\"ph7\">&amp;gt;</ph><ept id=\"p5\">*</ept><ph id=\"ph8\"> | </ph><bpt id=\"p6\">**</bpt>-stop<ept id=\"p6\">**</ept> <bpt id=\"p7\">*</bpt><ph id=\"ph9\">&amp;lt;</ph>arguments<ph id=\"ph10\">&amp;gt;</ph><ept id=\"p7\">*</ept><ph id=\"ph11\"> | </ph><bpt id=\"p8\">**</bpt>-cancel<ept id=\"p8\">**</ept><ph id=\"ph12\"> | </ph><bpt id=\"p9\">**</bpt>-status<ept id=\"p9\">**</ept> <bpt id=\"p10\">*</bpt><ph id=\"ph13\">&amp;lt;</ph>arguments<ph id=\"ph14\">&amp;gt;</ph><ept id=\"p10\">*</ept><ph id=\"ph15\"> | </ph><bpt id=\"p11\">**</bpt>-log<ept id=\"p11\">**</ept> <bpt id=\"p12\">*</bpt><ph id=\"ph16\">&amp;lt;</ph>argument<ph id=\"ph17\">&amp;gt;</ph><ept id=\"p12\">*</ept><ph id=\"ph18\"> | </ph><bpt id=\"p13\">**</bpt>-purgecache<ept id=\"p13\">**</ept><ph id=\"ph19\"> | </ph><bpt id=\"p14\">**</bpt>-help<ept id=\"p14\">**</ept> <bpt id=\"p15\">*</bpt><ph id=\"ph20\">&amp;lt;</ph>arguments<ph id=\"ph21\">&amp;gt;</ph><ept id=\"p15\">*</ept><ph id=\"ph22\"> | </ph><bpt id=\"p16\">**</bpt>-profiledetails<ept id=\"p16\">**</ept><ph id=\"ph23\"> | </ph><bpt id=\"p17\">**</bpt>-disablepagingexecutive<ept id=\"p17\">**</ept>}"},{"content":"The following sections describe the command-line options:","pos":[799,856]},{"content":"Profiles","pos":[863,871]},{"content":"Start","pos":[890,895]},{"content":"Stop","pos":[911,915]},{"content":"Cancel","pos":[930,936]},{"content":"Status","pos":[953,959]},{"content":"Profiledetails","pos":[976,990]},{"content":"Providers","pos":[1007,1016]},{"content":"Disablepagingexecutive","pos":[1033,1055]},{"content":"Log","pos":[1083,1086]},{"content":"Purgecache","pos":[1100,1110]},{"content":"Remarks","pos":[1126,1133]},{"content":"Note","pos":[1144,1148]},{"content":"If you start WPR from the command line while another application is recording (such as Xperf or an application that uses NT Kernel Logger, such as logman or PerfTrace), WPR fails to start recording and returns the following error:","pos":[1153,1383]},{"content":"In this case, you must cancel the other recording before you can start a new recording by using WPR.","pos":[1429,1529]},{"content":"Profiles","pos":[1537,1545]},{"content":"Use this option to list the WPR profiles that the recording uses.","pos":[1548,1613]},{"content":"Syntax:","pos":[1617,1624]},{"pos":[1628,1666],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-profiles<ept id=\"p2\">**</ept> <ph id=\"ph1\">\\[</ph><bpt id=\"p3\">*</bpt><ph id=\"ph2\">&amp;lt;</ph>path<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p3\">*</ept>"},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[1670,1758]},{"content":"Argument","pos":[1863,1871]},{"content":"Description","pos":[1881,1892]},{"content":"path","pos":[1953,1957]},{"content":"To see built-in profiles, omit the argument.","pos":[1983,2027]},{"content":"To list the profiles that are defined in a profile definition file, specify the path and name of that file.","pos":[2035,2142]},{"content":"Example:","pos":[2150,2158]},{"content":"Start","pos":[2340,2345]},{"content":"Use this option to start a recording by using one or more profiles.","pos":[2348,2415]},{"content":"Syntax:","pos":[2419,2426]},{"pos":[2430,2831],"content":"<bpt id=\"p1\">**</bpt>wpr -start<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>profile<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">*</ept><ph id=\"ph3\">\\]</ph> <bpt id=\"p3\">**</bpt><ph id=\"ph4\">\\[</ph>-start<ept id=\"p3\">**</ept> <ph id=\"ph5\">&amp;lt;</ph><bpt id=\"p4\">*</bpt>profilen<ept id=\"p4\">*</ept><ph id=\"ph6\">&amp;gt;\\]</ph> <ph id=\"ph7\">\\[</ph><bpt id=\"p5\">**</bpt>-filemode<ept id=\"p5\">**</ept><ph id=\"ph8\">\\]</ph> <ph id=\"ph9\">\\[</ph><bpt id=\"p6\">**</bpt>-recordtempto<ept id=\"p6\">**</ept> <ph id=\"ph10\">&amp;lt;</ph><bpt id=\"p7\">*</bpt>temp folder path<ept id=\"p7\">*</ept><ph id=\"ph11\">&amp;gt;\\]\\[</ph><bpt id=\"p8\">**</bpt>-onoffscenario<ept id=\"p8\">**</ept> <ph id=\"ph12\">&amp;lt;</ph><bpt id=\"p9\">*</bpt>OnOff Transition Type<ept id=\"p9\">*</ept><ph id=\"ph13\">&amp;gt;\\]</ph> <ph id=\"ph14\">\\[</ph><bpt id=\"p10\">**</bpt>-onoffresultspath<ept id=\"p10\">**</ept> <ph id=\"ph15\">&amp;lt;</ph><bpt id=\"p11\">*</bpt>path to which the trace files are saved<ept id=\"p11\">*</ept><ph id=\"ph16\">&amp;gt;\\]\\[</ph><bpt id=\"p12\">**</bpt>-onoffproblemdescription<ept id=\"p12\">**</ept> <ph id=\"ph17\">&amp;lt;</ph><bpt id=\"p13\">*</bpt>description of the scenario<ept id=\"p13\">*</ept><ph id=\"ph18\">&amp;gt;\\]</ph> <ph id=\"ph19\">\\[</ph><bpt id=\"p14\">**</bpt>-numiterations<ept id=\"p14\">**</ept> <ph id=\"ph20\">&amp;lt;</ph><bpt id=\"p15\">*</bpt>number of iterations for OnOff tracing<ept id=\"p15\">*</ept>"},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[2839,2927]},{"content":"Argument","pos":[3032,3040]},{"content":"Description","pos":[3050,3061]},{"content":"profile<ph id=\"ph1\">&amp;gt;&lt;/em&gt;</ph> or <ph id=\"ph2\">&lt;em&gt;&amp;lt;</ph>profilen","pos":[3122,3158]},{"content":"Specifies either a built-in profile or the path to a user-defined profile.","pos":[3184,3258]},{"content":"You can specify up to 64 profiles on a single command line.","pos":[3266,3325]},{"content":"Each profile is specified in the following way:","pos":[3326,3373]},{"content":"profile_name","pos":[3536,3548]},{"content":"Each profile can define either light or verbose versions, or both versions.","pos":[3574,3649]},{"content":"If neither option is specified, the verbose version is used unless the profile includes only a light version.","pos":[3650,3759]},{"content":"For proper syntax, see the preceding code sample for <ph id=\"ph1\">&lt;em&gt;&amp;lt;</ph>profile<ph id=\"ph2\">&amp;gt;&lt;/em&gt;</ph> or <ph id=\"ph3\">&lt;em&gt;&amp;lt;</ph>profilen<ph id=\"ph4\">&amp;gt;&lt;/em&gt;</ph>.","pos":[3760,3867]},{"content":"-filemode","pos":[3911,3920]},{"content":"Specifies that recording is done in file mode.","pos":[3942,3988]},{"content":"(The default mode is memory.)","pos":[3989,4018]},{"content":"By using this option, the data is recorded to an unbounded file, which can grow in size until it fills the disk.","pos":[4026,4138]},{"content":"-onoffresultspath","pos":[4183,4200]},{"content":"Path to which the trace files are saved.","pos":[4222,4262]},{"content":"-onoffproblemdescription","pos":[4306,4330]},{"content":"Description of the scenario.","pos":[4352,4380]},{"content":"-onoffscenario","pos":[4425,4439]},{"content":"Specifies one of the on/off transition types.","pos":[4461,4506]},{"content":"These are: Boot, FastStartup, Shutdown, RebootCycle, Standby, or Hibernate.","pos":[4507,4582]},{"content":"-numiterations","pos":[4626,4640]},{"content":"Sets the number of iterations for <ph id=\"ph1\">&lt;em&gt;</ph>OnOff<ph id=\"ph2\">&lt;/em&gt;</ph> recording.","pos":[4662,4721]},{"content":"By default, the settings from the built-in or custom profile file are used by default.","pos":[4722,4808]},{"content":"Stop","pos":[4849,4853]},{"content":"Use this option to stop the current recording and save it to the file that is specified by the argument.","pos":[4856,4960]},{"content":"Syntax:","pos":[4964,4971]},{"pos":[4975,5033],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-stop<ept id=\"p2\">**</ept> <bpt id=\"p3\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>file<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p3\">*</ept> <bpt id=\"p4\">*</bpt><ph id=\"ph3\">&amp;lt;</ph>problem description<ept id=\"p4\">*</ept>"},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[5039,5127]},{"content":"Argument","pos":[5232,5240]},{"content":"Description","pos":[5250,5261]},{"content":"file","pos":[5322,5326]},{"content":"Specifies the event trace log (ETL) file to which WPR saves the recording.","pos":[5352,5426]},{"content":"This argument is required.","pos":[5427,5453]},{"content":"problem description","pos":[5502,5521]},{"content":"Specifies the problem description.","pos":[5547,5581]},{"content":"Although this argument is optional, we recommended that you use it.","pos":[5582,5649]},{"content":"Cancel","pos":[5690,5696]},{"content":"Use this option to cancel the current recording without saving the recorded data.","pos":[5699,5780]},{"content":"If no instance is currently active, an error is returned.","pos":[5781,5838]},{"content":"Syntax:","pos":[5842,5849]},{"pos":[5853,5872],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-cancel<ept id=\"p2\">**</ept>"},{"content":"This option takes no arguments.","pos":[5874,5905]},{"content":"Status","pos":[5910,5916]},{"content":"Use this option to display status information about the current WPR recording.","pos":[5919,5997]},{"content":"Syntax:","pos":[6001,6008]},{"pos":[6012,6073],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-status<ept id=\"p2\">**</ept> <ph id=\"ph1\">\\[</ph><bpt id=\"p3\">*</bpt>profiles<ept id=\"p3\">*</ept><ph id=\"ph2\">\\]</ph> <ph id=\"ph3\">\\[</ph><bpt id=\"p4\">*</bpt>collectors<ept id=\"p4\">*</ept> <ph id=\"ph4\">\\[</ph><bpt id=\"p5\">*</bpt>details<ept id=\"p5\">*</ept>"},{"content":"If no recording is currently active, a message displays that WPR is not recording.","pos":[6079,6161]},{"content":"If a recording is currently active and no arguments are used, the following status information displays:","pos":[6162,6266]},{"content":"If you supply arguments together with the <bpt id=\"p1\">**</bpt>–status<ept id=\"p1\">**</ept> option, the information listed above displays together with data that is specific to that option.","pos":[6408,6559]},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[6560,6648]},{"content":"Argument","pos":[6753,6761]},{"content":"Description and Example Output","pos":[6771,6801]},{"content":"profiles","pos":[6858,6866]},{"content":"This argument lists each profile that is being used in the current WPR recording.","pos":[6888,6969]},{"content":"Example:","pos":[6985,6993]},{"content":"collectors","pos":[7195,7205]},{"content":"Lists collector information.","pos":[7227,7255]},{"content":"If buffers have been lost, those buffers are listed.","pos":[7256,7308]},{"content":"Example:","pos":[7324,7332]},{"pos":[7421,7652],"content":"Collector Name          : NT Kernel Logger Buffer Size (KB)        : 1024 Events Lost             : 0 System Keywords CSwitch ProcessThread SampledProfile System Stacks CSwitch SampledProfile"},{"content":"Collector Name          : WPR_initiated_WPR Event Collector Buffer Size (KB)        : 1024 Events Lost             : 0 Providers Microsoft-Windows-Shell-Core: 0x1000000000000: 0x04 Microsoft-Windows-Win32k: 0x1000000402000: 0xff : Stack CaptureState Providers on Save Microsoft-Windows-Win32k: 0x80000: 0xff","pos":[7654,7985]},{"content":"details","pos":[8043,8050]},{"content":"Lists additional information about each collector.","pos":[8067,8117]},{"pos":[8185,8199],"content":"Profiledetails"},{"content":"Use this option to display detailed information about a profile or set of profiles.","pos":[8202,8285]},{"content":"To specify multiple profiles, use the following syntax where <ph id=\"ph1\">`profile`</ph><bpt id=\"p1\">*</bpt>n<ept id=\"p1\">*</ept> refers to the name of each profile.","pos":[8286,8395]},{"content":"Syntax:","pos":[8399,8406]},{"content":"Providers","pos":[8516,8525]},{"content":"Use this option to display detailed information about providers.","pos":[8528,8592]},{"content":"Providers refer to the Event Tracing for Windows (ETW) components that expose events to Windows Performance Recorder (WPR).","pos":[8593,8716]},{"content":"To display information about providers, use the following syntax where <ph id=\"ph1\">`providers`</ph>** refers to all installed/known and registered providers.","pos":[8717,8857]},{"content":"Syntax:","pos":[8861,8868]},{"pos":[8931,8953],"content":"Disablepagingexecutive"},{"pos":[8956,9032],"content":"Use this option to turn <bpt id=\"p1\">**</bpt>Disable Paging Executive<ept id=\"p1\">**</ept> settings <bpt id=\"p2\">*</bpt>On<ept id=\"p2\">*</ept> or <bpt id=\"p3\">*</bpt>Off<ept id=\"p3\">*</ept>."},{"content":"Syntax:","pos":[9036,9043]},{"content":"Note","pos":[9089,9093]},{"content":"To correctly capture event stacks on 64-bit systems that are running Windows 7, <bpt id=\"p1\">*</bpt>disablepagingexecutive<ept id=\"p1\">*</ept> should be set to <bpt id=\"p2\">*</bpt>On<ept id=\"p2\">*</ept>, and the system must be rebooted before you start performance recording.","pos":[9098,9297]},{"content":"For 32-bit systems that are running Windows 7 and for all systems that are running Windows 8 or higher, you can operate performance recording without setting <bpt id=\"p1\">*</bpt>disablepagingexecutive<ept id=\"p1\">*</ept> to <bpt id=\"p2\">*</bpt>On<ept id=\"p2\">*</ept>.","pos":[9298,9489]},{"content":"Log","pos":[9497,9500]},{"content":"Use this option to append and configure debug logging to the event log.","pos":[9503,9574]},{"content":"Syntax:","pos":[9578,9585]},{"pos":[9589,9637],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-log<ept id=\"p2\">**</ept> {<bpt id=\"p3\">*</bpt>enabled<ept id=\"p3\">*</ept><ph id=\"ph1\">|</ph><bpt id=\"p4\">*</bpt>disabled<ept id=\"p4\">*</ept><ph id=\"ph2\">|</ph><bpt id=\"p5\">*</bpt>remove<ept id=\"p5\">*</ept>}"},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[9639,9727]},{"content":"Argument","pos":[9832,9840]},{"content":"Description","pos":[9850,9861]},{"content":"enabled","pos":[9918,9925]},{"content":"Enables debug logging to the event log.","pos":[9947,9986]},{"content":"disabled","pos":[10031,10039]},{"content":"Disables debug logging to the event log.","pos":[10061,10101]},{"content":"remove","pos":[10145,10151]},{"content":"Uninstalls the WPR debug logging provider manifest from the system.","pos":[10173,10240]},{"pos":[10307,10317],"content":"Purgecache"},{"content":"Use this option to purge the managed symbols cache.","pos":[10320,10371]},{"content":"Syntax:","pos":[10375,10382]},{"pos":[10386,10409],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-purgecache<ept id=\"p2\">**</ept>"},{"content":"This option takes no arguments.","pos":[10411,10442]},{"content":"Help","pos":[10447,10451]},{"content":"Use this option to display on-line help in the Command Prompt window.","pos":[10454,10523]},{"pos":[10525,10631],"content":"<bpt id=\"p1\">**</bpt>wpr<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>-help<ept id=\"p2\">**</ept> <ph id=\"ph1\">\\[</ph>{<bpt id=\"p3\">*</bpt>log<ept id=\"p3\">*</ept><ph id=\"ph2\">|</ph><bpt id=\"p4\">*</bpt>profiles<ept id=\"p4\">*</ept><ph id=\"ph3\">|</ph><bpt id=\"p5\">*</bpt>profiledetails<ept id=\"p5\">*</ept><ph id=\"ph4\">\\\\</ph><bpt id=\"p6\">*</bpt>disablepagingexecutive<ept id=\"p6\">*</ept><ph id=\"ph5\">\\\\</ph><bpt id=\"p7\">*</bpt>start<ept id=\"p7\">*</ept><ph id=\"ph6\">|</ph><bpt id=\"p8\">*</bpt>status<ept id=\"p8\">*</ept><ph id=\"ph7\">|</ph><bpt id=\"p9\">*</bpt>stop<ept id=\"p9\">*</ept>}"},{"content":"The following table describes the available arguments that you can apply to this option.","pos":[10635,10723]},{"content":"Argument","pos":[10828,10836]},{"content":"Description","pos":[10846,10857]},{"content":"cancel","pos":[10914,10920]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;–cancel&lt;/code&gt;</ph> command-line arguments.","pos":[10942,10996]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Cancel<ept id=\"p1\">](#cancel)</ept>.","pos":[10997,11041]},{"content":"disablepagingexecutive","pos":[11086,11108]},{"content":"Describes <ph id=\"ph1\">&lt;em&gt;</ph>–disablepagingexecutive<ph id=\"ph2\">&lt;/em&gt;</ph> command-line argument.","pos":[11130,11195]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Disablepagingexecutive<ept id=\"p1\">](#disablepagingexec)</ept>.","pos":[11196,11267]},{"content":"log","pos":[11311,11314]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;-log&lt;/code&gt;</ph> command-line arguments.","pos":[11336,11387]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Log<ept id=\"p1\">](#log)</ept>.","pos":[11388,11426]},{"content":"profiledetails","pos":[11471,11485]},{"content":"Describes <ph id=\"ph1\">&lt;em&gt;</ph>–profiledetails<ph id=\"ph2\">&lt;/em&gt;</ph> command-line argument.","pos":[11507,11564]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Profiledetails<ept id=\"p1\">](#prodet)</ept>.","pos":[11565,11617]},{"content":"profiles","pos":[11661,11669]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;-profiles&lt;/code&gt;</ph> command-line arguments.","pos":[11691,11747]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Profiles<ept id=\"p1\">](#profiles)</ept>.","pos":[11748,11796]},{"content":"providers","pos":[11841,11850]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;-providers&lt;/code&gt;</ph> command-line arguments.","pos":[11872,11929]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Providers<ept id=\"p1\">](#providers)</ept>.","pos":[11930,11980]},{"content":"purgecache","pos":[12024,12034]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;–purgecache&lt;/code&gt;</ph> command-line arguments.","pos":[12056,12114]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Purgecache<ept id=\"p1\">](#purge)</ept>.","pos":[12115,12162]},{"content":"start","pos":[12207,12212]},{"content":"Presents descriptions of <ph id=\"ph1\">&lt;code&gt;-start&lt;/code&gt;</ph> command-line arguments.","pos":[12234,12302]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Start<ept id=\"p1\">](#start)</ept>.","pos":[12303,12345]},{"content":"status","pos":[12389,12395]},{"content":"Presents descriptions of <ph id=\"ph1\">&lt;code&gt;-status&lt;/code&gt;</ph> command-line arguments.","pos":[12417,12486]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Status<ept id=\"p1\">](#status)</ept>.","pos":[12487,12531]},{"content":"stop","pos":[12576,12580]},{"content":"Describes <ph id=\"ph1\">&lt;code&gt;-stop&lt;/code&gt;</ph> command-line arguments.","pos":[12602,12654]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Stop<ept id=\"p1\">](#stop)</ept>","pos":[12655,12694]},{"pos":[12759,12766],"content":"Remarks"},{"content":"Each time that WPR saves a trace that was captured when managed applications were running on the system, WPR saves managed symbols next to the trace file.","pos":[12769,12923]},{"content":"This feature enables performance analysis of managed applications.","pos":[12924,12990]},{"content":"Generating managed symbols is a resource- and time-consuming operation.","pos":[12992,13063]},{"content":"WPR automatically creates a managed symbol cache to expedite the generation of managed symbols.","pos":[13064,13159]},{"content":"When WPR needs managed symbols, it first checks this cache and uses any available and appropriate symbols instead of regenerating them.","pos":[13160,13295]},{"content":"The default managed symbol cache location is C:<ph id=\"ph1\">\\\\</ph>ProgramData<ph id=\"ph2\">\\\\</ph>WindowsPerformanceRecorder<ph id=\"ph3\">\\\\</ph>NGenPdbs<ph id=\"ph4\">\\_</ph>Cache.","pos":[13297,13403]},{"content":"Related topics","pos":[13408,13422]},{"content":"WPR Reference","pos":[13426,13439]}],"content":"---\ntitle: WPR Command-Line Options\ndescription: WPR Command-Line Options\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 3c69c8df-6ce3-49a0-b17f-e2b60016b72a\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# WPR Command-Line Options\n\n\nWindows Performance Recorder (WPR) offers a simple command line interface. The full complexity of WPR is embedded in the recording profiles.\n\nWPR requires Windows 7 or later version operating system.\n\n**Syntax:**\n\n**wpr** {**-profiles** \\[*&lt;path&gt;* \\[ …\\]\\] | **-start** *&lt;arguments&gt;* | **-stop** *&lt;arguments&gt;* | **-cancel** | **-status** *&lt;arguments&gt;* | **-log** *&lt;argument&gt;* | **-purgecache** | **-help** *&lt;arguments&gt;* | **-profiledetails** | **-disablepagingexecutive**}\n\nThe following sections describe the command-line options:\n\n-   [Profiles](#profiles)\n\n-   [Start](#start)\n\n-   [Stop](#stop)\n\n-   [Cancel](#cancel)\n\n-   [Status](#status)\n\n-   [Profiledetails](#prodet)\n\n-   [Providers](#prodet)\n\n-   [Disablepagingexecutive](#disablepagingexec)\n\n-   [Log](#log)\n\n-   [Purgecache](#purge)\n\n-   [Remarks](#rem)\n\n**Note**  \nIf you start WPR from the command line while another application is recording (such as Xperf or an application that uses NT Kernel Logger, such as logman or PerfTrace), WPR fails to start recording and returns the following error:\n\n`The event collector was already running.`\n\nIn this case, you must cancel the other recording before you can start a new recording by using WPR.\n\n \n\n## Profiles\n\n\nUse this option to list the WPR profiles that the recording uses.\n\n**Syntax:**\n\n**wpr** **-profiles** \\[*&lt;path&gt;*\\]\n\nThe following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>&lt;path&gt;</em></p></td>\n<td><p>To see built-in profiles, omit the argument.</p>\n<p>To list the profiles that are defined in a profile definition file, specify the path and name of that file.</p>\n<p>Example:</p>\n<p><code>wpr -profiles</code></p>\n<p><code>wpr -profiles “c:\\Users\\User1\\Documents\\WPR Files\\Custom Profiles\\CustomProfile1.wprp”</code></p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## Start\n\n\nUse this option to start a recording by using one or more profiles.\n\n**Syntax:**\n\n**wpr -start** *&lt;profile&gt;*\\] **\\[-start** &lt;*profilen*&gt;\\] \\[**-filemode**\\] \\[**-recordtempto** &lt;*temp folder path*&gt;\\]\\[**-onoffscenario** &lt;*OnOff Transition Type*&gt;\\] \\[**-onoffresultspath** &lt;*path to which the trace files are saved*&gt;\\]\\[**-onoffproblemdescription** &lt;*description of the scenario*&gt;\\] \\[**-numiterations** &lt;*number of iterations for OnOff tracing*&gt;\\]\n\nThe following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>&lt;profile&gt;</em> or <em>&lt;profilen&gt;</em></p></td>\n<td><p>Specifies either a built-in profile or the path to a user-defined profile.</p>\n<p>You can specify up to 64 profiles on a single command line. Each profile is specified in the following way:</p>\n<pre class=\"syntax\" space=\"preserve\"><code>&lt;profile&gt; :=&lt;profile_name&gt;[.{light|verbose}] </code></pre></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>&lt;profile_name&gt;</em></p></td>\n<td><p>Each profile can define either light or verbose versions, or both versions. If neither option is specified, the verbose version is used unless the profile includes only a light version. For proper syntax, see the preceding code sample for <em>&lt;profile&gt;</em> or <em>&lt;profilen&gt;</em>.</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>-filemode</em></p></td>\n<td><p>Specifies that recording is done in file mode. (The default mode is memory.)</p>\n<p>By using this option, the data is recorded to an unbounded file, which can grow in size until it fills the disk.</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>-onoffresultspath</em></p></td>\n<td><p>Path to which the trace files are saved.</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>-onoffproblemdescription</em></p></td>\n<td><p>Description of the scenario.</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>-onoffscenario</em></p></td>\n<td><p>Specifies one of the on/off transition types. These are: Boot, FastStartup, Shutdown, RebootCycle, Standby, or Hibernate.</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>-numiterations</em></p></td>\n<td><p>Sets the number of iterations for <em>OnOff</em> recording. By default, the settings from the built-in or custom profile file are used by default.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## Stop\n\n\nUse this option to stop the current recording and save it to the file that is specified by the argument.\n\n**Syntax:**\n\n**wpr** **-stop** *&lt;file&gt;* *&lt;problem description*&gt;\n\nThe following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>&lt;file&gt;</em></p></td>\n<td><p>Specifies the event trace log (ETL) file to which WPR saves the recording. This argument is required.</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>&lt;problem description&gt;</em></p></td>\n<td><p>Specifies the problem description. Although this argument is optional, we recommended that you use it.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## Cancel\n\n\nUse this option to cancel the current recording without saving the recorded data. If no instance is currently active, an error is returned.\n\n**Syntax:**\n\n**wpr** **-cancel**\n\nThis option takes no arguments.\n\n## Status\n\n\nUse this option to display status information about the current WPR recording.\n\n**Syntax:**\n\n**wpr** **-status** \\[*profiles*\\] \\[*collectors* \\[*details*\\]\\]\n\nIf no recording is currently active, a message displays that WPR is not recording. If a recording is currently active and no arguments are used, the following status information displays:\n\n`WPR recording is in progress...`\n\n`Time since start        : 00:04:27`\n\n`Dropped event           : 0`\n\n`Logging mode            : Memory`\n\nIf you supply arguments together with the **–status** option, the information listed above displays together with data that is specific to that option. The following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description and Example Output</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>profiles</em></p></td>\n<td><p>This argument lists each profile that is being used in the current WPR recording.</p>\n<p><strong>Example:</strong></p>\n<p><code>Recording system activity using the following set of profiles:</code></p>\n<p><code>Profile                 : CPU.Verbose.Memory</code></p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>collectors</em></p></td>\n<td><p>Lists collector information. If buffers have been lost, those buffers are listed.</p>\n<p><strong>Example:</strong></p>\n<pre class=\"syntax\" space=\"preserve\"><code>Actively recording collectors:\n\nCollector Name          : NT Kernel Logger\nBuffer Size (KB)        : 1024\nEvents Lost             : 0\nSystem Keywords\n        CSwitch\n        ProcessThread\n        SampledProfile\nSystem Stacks\n        CSwitch\n        SampledProfile\n\nCollector Name          : WPR_initiated_WPR Event Collector\nBuffer Size (KB)        : 1024\nEvents Lost             : 0\nProviders\n        Microsoft-Windows-Shell-Core: 0x1000000000000: 0x04\n        Microsoft-Windows-Win32k: 0x1000000402000: 0xff : Stack\nCaptureState Providers on Save\n        Microsoft-Windows-Win32k: 0x80000: 0xff</code></pre></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em></em>details</p></td>\n<td><p>Lists additional information about each collector.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"prodet\"></a>Profiledetails\n\n\nUse this option to display detailed information about a profile or set of profiles. To specify multiple profiles, use the following syntax where `profile`*n* refers to the name of each profile.\n\n**Syntax:**\n\n`wpr -profiledetails profile1+profile2..+profilen [-filemode] -onoffscenario <OnOff Transition Type>`\n\n## Providers\n\n\nUse this option to display detailed information about providers. Providers refer to the Event Tracing for Windows (ETW) components that expose events to Windows Performance Recorder (WPR). To display information about providers, use the following syntax where `providers`** refers to all installed/known and registered providers.\n\n**Syntax:**\n\n`wpr -providers`\n\n## <a href=\"\" id=\"disablepagingexec\"></a>Disablepagingexecutive\n\n\nUse this option to turn **Disable Paging Executive** settings *On* or *Off*.\n\n**Syntax:**\n\n`wpr -disablepagingexecutive <on/off>`\n\n**Note**  \nTo correctly capture event stacks on 64-bit systems that are running Windows 7, *disablepagingexecutive* should be set to *On*, and the system must be rebooted before you start performance recording. For 32-bit systems that are running Windows 7 and for all systems that are running Windows 8 or higher, you can operate performance recording without setting *disablepagingexecutive* to *On*.\n\n \n\n## Log\n\n\nUse this option to append and configure debug logging to the event log.\n\n**Syntax:**\n\n**wpr** **-log** {*enabled*|*disabled*|*remove*}\n\nThe following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>enabled</em></p></td>\n<td><p>Enables debug logging to the event log.</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>disabled</em></p></td>\n<td><p>Disables debug logging to the event log.</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>remove</em></p></td>\n<td><p>Uninstalls the WPR debug logging provider manifest from the system.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"purge\"></a>Purgecache\n\n\nUse this option to purge the managed symbols cache.\n\n**Syntax:**\n\n**wpr** **-purgecache**\n\nThis option takes no arguments.\n\n## Help\n\n\nUse this option to display on-line help in the Command Prompt window.\n\n**wpr** **-help** \\[{*log*|*profiles*|*profiledetails*\\\\*disablepagingexecutive*\\\\*start*|*status*|*stop*}\\]\n\nThe following table describes the available arguments that you can apply to this option.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Argument</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p><em>cancel</em></p></td>\n<td><p>Describes <code>–cancel</code> command-line arguments. For more information, see [Cancel](#cancel).</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>disablepagingexecutive</em></p></td>\n<td><p>Describes <em>–disablepagingexecutive</em> command-line argument. For more information, see [Disablepagingexecutive](#disablepagingexec).</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>log</em></p></td>\n<td><p>Describes <code>-log</code> command-line arguments. For more information, see [Log](#log).</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>profiledetails</em></p></td>\n<td><p>Describes <em>–profiledetails</em> command-line argument. For more information, see [Profiledetails](#prodet).</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>profiles</em></p></td>\n<td><p>Describes <code>-profiles</code> command-line arguments. For more information, see [Profiles](#profiles).</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>providers</em></p></td>\n<td><p>Describes <code>-providers</code> command-line arguments. For more information, see [Providers](#providers).</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>purgecache</em></p></td>\n<td><p>Describes <code>–purgecache</code> command-line arguments. For more information, see [Purgecache](#purge).</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>start</em></p></td>\n<td><p>Presents descriptions of <code>-start</code> command-line arguments. For more information, see [Start](#start).</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p><em>status</em></p></td>\n<td><p>Presents descriptions of <code>-status</code> command-line arguments. For more information, see [Status](#status).</p></td>\n</tr>\n<tr class=\"even\">\n<td><p><em>stop</em></p></td>\n<td><p>Describes <code>-stop</code> command-line arguments. For more information, see [Stop](#stop)</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"rem\"></a>Remarks\n\n\nEach time that WPR saves a trace that was captured when managed applications were running on the system, WPR saves managed symbols next to the trace file. This feature enables performance analysis of managed applications.\n\nGenerating managed symbols is a resource- and time-consuming operation. WPR automatically creates a managed symbol cache to expedite the generation of managed symbols. When WPR needs managed symbols, it first checks this cache and uses any available and appropriate symbols instead of regenerating them.\n\nThe default managed symbol cache location is C:\\\\ProgramData\\\\WindowsPerformanceRecorder\\\\NGenPdbs\\_Cache.\n\n## Related topics\n\n\n[WPR Reference](wpr-reference.md)\n\n \n\n \n\n\n\n\n\n\n\n"}