{"nodes":[{"content":"You can use two different tools to build a customized mobile image (FFU image) in Windows 10:","pos":[18,111]},{"content":"Build a mobile image using ImgGen","pos":[202,235]},{"content":"Build a mobile image using ImgGen","pos":[261,294]},{"content":"You can use two different tools to build a customized mobile image (FFU image) in Windows 10:","pos":[297,390]},{"content":"Using ImgGen.cmd, which is a command file that runs the classic imaging tool, ImageApp.exe.","pos":[396,487]},{"content":"This tool was also available earlier releases of Windows 10 Mobile including Windows Phone 8.1 and the various GDRs.","pos":[488,604]},{"content":"Using the Windows Imaging and Configuration Designer (ICD) command-line interface, which is new for Windows 10.","pos":[610,721]},{"content":"In this walkthrough, we'll show how to use ImgGen.cmd to build the custom mobile image.","pos":[723,810]},{"content":"In another walkthrough, we'll go through how to create another mobile image that includes the customizations we've done so far in addition to other customizations available only through Windows Provisioning by using the Windows ICD CLI.","pos":[811,1047]},{"content":"To build a customized image using ImgGen","pos":[1051,1091]},{"pos":[1099,1173],"content":"Open a <bpt id=\"p1\">**</bpt>Developer Command Prompt for VS2015<ept id=\"p1\">**</ept> window as an administrator."},{"content":"If you are running Windows 8.1, complete the following steps to set the USN journal registry size to 1 Mb on your development PC.","pos":[1179,1308]},{"content":"Otherwise, skip to the next step.","pos":[1309,1342]},{"content":"Change the USN minimum size registry key by running the following command:","pos":[1352,1426]},{"content":"reg add HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>SYSTEM<ph id=\"ph4\">\\\\</ph>CurrentControlSet<ph id=\"ph5\">\\\\</ph>Control<ph id=\"ph6\">\\\\</ph>FileSystem /v NtfsAllowUsnMinSize1Mb  /t REG<ph id=\"ph7\">\\_</ph>DWORD  /d 1","pos":[1438,1561]},{"content":"Reboot the PC before proceeding to the next step.","pos":[1573,1622]},{"content":"Run ImgGen.cmd by using the following command.","pos":[1628,1674]},{"pos":[1680,1801],"content":"<bpt id=\"p1\">**</bpt>ImgGen<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt>TestFlash.ffuContosoTestOEMInput.xml<ept id=\"p2\">*</ept> <bpt id=\"p3\">**</bpt>\"%WPDKCONTENTROOT%<ph id=\"ph1\">\\\\</ph>MSPackages\"<ept id=\"p3\">**</ept> <bpt id=\"p4\">*</bpt>MobileCustomizations.xml 10.0.0.1<ept id=\"p4\">*</ept>"},{"content":"This command will build an image that will be called TestFlash.ffu.","pos":[1807,1874]},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  This command assumes you've gone through the rest of the walkthroughs in this section.","pos":[1880,1976]},{"content":"For more information about the command-line syntax for ImgGen.cmd, see Using <bpt id=\"p1\">*</bpt>ImgGen.cmd to generate the image<ept id=\"p1\">*</ept> in <bpt id=\"p2\">[</bpt>Build a mobile image using ImgGen.cmd<ept id=\"p2\">](https://msdn.microsoft.com/library/windows/hardware/dn756630)</ept>.","pos":[1977,2194]},{"content":"Once the image is built, you'll need to sign it so it can be flashed to a mobile device.","pos":[2203,2291]}],"content":"---\nDescription: 'You can use two different tools to build a customized mobile image (FFU image) in Windows 10:'\nms.assetid: c29e417c-90a5-4928-b416-aa940efe68ab\nMSHAttr: 'PreferredLib:/library'\ntitle: Build a mobile image using ImgGen\nauthor: CelesteDG\n---\n\n# Build a mobile image using ImgGen\n\n\nYou can use two different tools to build a customized mobile image (FFU image) in Windows 10:\n\n-   Using ImgGen.cmd, which is a command file that runs the classic imaging tool, ImageApp.exe. This tool was also available earlier releases of Windows 10 Mobile including Windows Phone 8.1 and the various GDRs.\n\n-   Using the Windows Imaging and Configuration Designer (ICD) command-line interface, which is new for Windows 10.\n\nIn this walkthrough, we'll show how to use ImgGen.cmd to build the custom mobile image. In another walkthrough, we'll go through how to create another mobile image that includes the customizations we've done so far in addition to other customizations available only through Windows Provisioning by using the Windows ICD CLI.\n\n**To build a customized image using ImgGen**\n\n1.  Open a **Developer Command Prompt for VS2015** window as an administrator.\n\n2.  If you are running Windows 8.1, complete the following steps to set the USN journal registry size to 1 Mb on your development PC. Otherwise, skip to the next step.\n\n    1.  Change the USN minimum size registry key by running the following command:\n\n        **reg add HKEY\\_LOCAL\\_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Control\\\\FileSystem /v NtfsAllowUsnMinSize1Mb  /t REG\\_DWORD  /d 1**\n\n    2.  Reboot the PC before proceeding to the next step.\n\n3.  Run ImgGen.cmd by using the following command.\n\n    **ImgGen** *TestFlash.ffuContosoTestOEMInput.xml* **\"%WPDKCONTENTROOT%\\\\MSPackages\"** *MobileCustomizations.xml 10.0.0.1*\n\n    This command will build an image that will be called TestFlash.ffu.\n\n    **Note**  This command assumes you've gone through the rest of the walkthroughs in this section. For more information about the command-line syntax for ImgGen.cmd, see Using *ImgGen.cmd to generate the image* in [Build a mobile image using ImgGen.cmd](https://msdn.microsoft.com/library/windows/hardware/dn756630).\n\n     \n\nOnce the image is built, you'll need to sign it so it can be flashed to a mobile device.\n\n \n\n \n\n\n\n"}