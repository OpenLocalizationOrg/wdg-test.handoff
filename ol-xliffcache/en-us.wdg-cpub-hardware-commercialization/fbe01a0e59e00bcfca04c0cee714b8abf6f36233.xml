{"nodes":[{"content":"DISM Configuration List and WimScript.ini Files","pos":[35,82]},{"content":"DISM Configuration List and WimScript.ini Files","pos":[191,238]},{"content":"DISM Configuration List and WimScript.ini Files","pos":[247,294]},{"content":"The Deployment Image Servicing and Management (DISM) tool is a command-line tool that you can use to capture and apply Windows images.","pos":[297,431]},{"content":"You can create a configuration list file to determine the following:","pos":[432,500]},{"pos":[506,634],"content":"Which files and folders must be excluded from the capture process when you use the <bpt id=\"p1\">**</bpt>/Capture-Image<ept id=\"p1\">**</ept> option with the DISM tool."},{"pos":[640,763],"content":"Which folders, files, and file types must be excluded from the compression process when you use the <bpt id=\"p1\">**</bpt>/Compress<ept id=\"p1\">**</ept> argument."},{"pos":[765,1070],"content":"If you name your configuration list file <bpt id=\"p1\">**</bpt>wimscript.ini<ept id=\"p1\">**</ept> and store it in your DISM directory (where the DISM.exe file is located), it will automatically run when you use the <bpt id=\"p2\">**</bpt>/Capture-Image<ept id=\"p2\">**</ept> option (with or without the <bpt id=\"p3\">**</bpt>/Compress<ept id=\"p3\">**</ept> argument) without requiring you to use the <bpt id=\"p4\">**</bpt>/ConfigFile<ept id=\"p4\">**</ept> argument."},{"content":"The <bpt id=\"p1\">**</bpt>/ConfigFile<ept id=\"p1\">**</ept> argument enables you to customize specific compression, capture, and boundary alignment actions for each file and folder when you capture an image using DISM.exe.","pos":[1072,1254]},{"content":"You can create a configuration list (.ini) file by using a text editor, such as Notepad.","pos":[1255,1343]},{"pos":[1507,1541],"content":"Creating a Configuration List File"},{"content":"The following sections appear in the DISM configuration list file.","pos":[1544,1610]},{"content":"Section","pos":[1728,1735]},{"content":"Description","pos":[1758,1769]},{"content":"Enables you to define the files and folders to exclude when you use the <ph id=\"ph1\">&lt;strong&gt;</ph>/Capture-Image<ph id=\"ph2\">&lt;/strong&gt;</ph> option.","pos":[1893,2004]},{"content":"Enables you to override the default exclusion list when you use the <ph id=\"ph1\">&lt;strong&gt;</ph>/Capture-Image<ph id=\"ph2\">&lt;/strong&gt;</ph> option.","pos":[2121,2228]},{"content":"Enables you to define the specific files and folders, and also to specify file types, to exclude when you use the <ph id=\"ph1\">&lt;strong&gt;</ph>/Compress<ph id=\"ph2\">&lt;/strong&gt;</ph> argument.","pos":[2350,2500]},{"content":"Note","pos":[2533,2537]},{"content":"You can use file or folder matching to exclude a file from compression.","pos":[2552,2623]},{"content":"You can provide a full path match, or you can use wildcard characters (*).","pos":[2624,2698]},{"content":"For example, you can use <ph id=\"ph1\">&lt;strong&gt;</ph>\\WINDOWS\\inf<ph id=\"ph2\">\\*</ph>.pnf<ph id=\"ph3\">&lt;/strong&gt;</ph> to match a specific type of file, or <ph id=\"ph4\">&lt;strong&gt;</ph>\\WINDOWS\\inf<ph id=\"ph5\">\\*&lt;/strong&gt;</ph> to match a whole folder.","pos":[2699,2853]},{"pos":[3040,3062],"content":"Default Exclusion List"},{"content":"By default, the DISM.exe tool will exclude the following files.","pos":[3064,3127]},{"pos":[3467,3492],"content":"Exclusion List Guidelines"},{"content":"You can only use wildcard characters in the last component in a file path that does not begin with a backslash.","pos":[3498,3609]},{"content":"For example:","pos":[3610,3622]},{"content":"You can use a preceding backslash to limit file-matching and directory-matching relative to the root directory.","pos":[3671,3782]},{"content":"For example, you can use this exclusion list:","pos":[3783,3828]},{"content":"This list will exclude the following files and directories when you capture the \"C:<ph id=\"ph1\">\\\\</ph>\" drive:","pos":[3894,3987]},{"content":"However, DISM will not exclude files or directories that are contained in the following example.","pos":[4057,4153]},{"content":"You can override the default exclusion list by using the <ph id=\"ph1\">`[ExclusionException]`</ph> section.","pos":[4233,4321]},{"content":"For example:","pos":[4322,4334]},{"pos":[4440,4596],"content":"If an explicit <ph id=\"ph1\">`[ExclusionException]`</ph> section is provided in the WIM configuration file, it will always take precedence over the <ph id=\"ph2\">`[Exclusion List]`</ph> section."},{"pos":[4602,4705],"content":"You cannot override the default compression exclusion list by using the <ph id=\"ph1\">`[ExclusionException]`</ph> section."},{"pos":[4851,4879],"content":"Using the Configuration File"},{"content":"If you create a custom-named configuration file and store it outside the DISM directory, you can use the DISM command to run the file.","pos":[4882,5016]},{"content":"At a command prompt, open the DISM directory.","pos":[5017,5062]},{"content":"For example:","pos":[5063,5075]},{"content":"or","pos":[5199,5201]},{"content":"where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>configuration list<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> provides the complete directory location for the configuration file.","pos":[5324,5427]},{"content":"For example, <ph id=\"ph1\">`c:\\imaging\\configuration_list.ini`</ph>.","pos":[5428,5477]},{"content":"You must use either the <bpt id=\"p1\">**</bpt>/Capture-Image<ept id=\"p1\">**</ept> option to create a new .wim file or the <bpt id=\"p2\">**</bpt>/Append-Image<ept id=\"p2\">**</ept> option to append an existing .wim file.","pos":[5478,5618]},{"pos":[5656,5670],"content":"Related topics"},{"content":"DISM Image Management Command-Line Options","pos":[5674,5716]}],"content":"---\nauthor: Justinha\nDescription: 'DISM Configuration List and WimScript.ini Files'\nms.assetid: 8e765558-4138-4215-bf53-09e46666a718\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: 'DISM Configuration List and WimScript.ini Files'\n---\n\n# DISM Configuration List and WimScript.ini Files\n\n\nThe Deployment Image Servicing and Management (DISM) tool is a command-line tool that you can use to capture and apply Windows images. You can create a configuration list file to determine the following:\n\n-   Which files and folders must be excluded from the capture process when you use the **/Capture-Image** option with the DISM tool.\n\n-   Which folders, files, and file types must be excluded from the compression process when you use the **/Compress** argument.\n\nIf you name your configuration list file **wimscript.ini** and store it in your DISM directory (where the DISM.exe file is located), it will automatically run when you use the **/Capture-Image** option (with or without the **/Compress** argument) without requiring you to use the **/ConfigFile** argument.\n\nThe **/ConfigFile** argument enables you to customize specific compression, capture, and boundary alignment actions for each file and folder when you capture an image using DISM.exe. You can create a configuration list (.ini) file by using a text editor, such as Notepad.\n\n## <span id=\"Creating_a_Configuration_List_File\"></span><span id=\"creating_a_configuration_list_file\"></span><span id=\"CREATING_A_CONFIGURATION_LIST_FILE\"></span>Creating a Configuration List File\n\n\nThe following sections appear in the DISM configuration list file.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Section</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>[ExclusionList]</code></p></td>\n<td align=\"left\"><p>Enables you to define the files and folders to exclude when you use the <strong>/Capture-Image</strong> option.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><code>[ExclusionException]</code></p></td>\n<td align=\"left\"><p>Enables you to override the default exclusion list when you use the <strong>/Capture-Image</strong> option.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><code>[CompressionExclusionList]</code></p></td>\n<td align=\"left\"><p>Enables you to define the specific files and folders, and also to specify file types, to exclude when you use the <strong>/Compress</strong> argument.</p>\n<div class=\"alert\">\n<strong>Note</strong>  \n<p>You can use file or folder matching to exclude a file from compression. You can provide a full path match, or you can use wildcard characters (*). For example, you can use <strong>\\WINDOWS\\inf\\*.pnf</strong> to match a specific type of file, or <strong>\\WINDOWS\\inf\\*</strong> to match a whole folder.</p>\n</div>\n<div>\n \n</div></td>\n</tr>\n</tbody>\n</table>\n\n \n\n### <span id=\"Default_Exclusion_List\"></span><span id=\"default_exclusion_list\"></span><span id=\"DEFAULT_EXCLUSION_LIST\"></span>Default Exclusion List\n\nBy default, the DISM.exe tool will exclude the following files.\n\n``` syntax\n[ExclusionList]\n\\$ntfs.log\n\\hiberfil.sys\n\\pagefile.sys\n\\swapfile.sys\n\"\\System Volume Information\"\n\\RECYCLER\n\\Windows\\CSC\n\n[CompressionExclusionList]\n*.mp3\n*.zip\n*.cab\n\\WINDOWS\\inf\\*.pnf\n```\n\n### <span id=\"Exclusion_List_Guidelines\"></span><span id=\"exclusion_list_guidelines\"></span><span id=\"EXCLUSION_LIST_GUIDELINES\"></span>Exclusion List Guidelines\n\n-   You can only use wildcard characters in the last component in a file path that does not begin with a backslash. For example:\n\n    ``` syntax\n    myfolder\\*.txt\n    ```\n\n-   You can use a preceding backslash to limit file-matching and directory-matching relative to the root directory. For example, you can use this exclusion list:\n\n    ``` syntax\n    \\myfolder\n    \\folder\\subfolder\n    ```\n\n    This list will exclude the following files and directories when you capture the \"C:\\\\\" drive:\n\n    ``` syntax\n    C:\\myfolder\n    C:\\folder\\subfolder\n    ```\n\n    However, DISM will not exclude files or directories that are contained in the following example.\n\n    ``` syntax\n    C:\\main\\myfolder\n    C:\\data\\folder\\subfolder\n    ```\n\n-   You can override the default exclusion list by using the `[ExclusionException]` section. For example:\n\n    ``` syntax\n    [ExclusionException]\n    \\pagefile.sys\n    \"\\System Volume Information\"\n    ```\n\n-   If an explicit `[ExclusionException]` section is provided in the WIM configuration file, it will always take precedence over the `[Exclusion List]` section.\n\n-   You cannot override the default compression exclusion list by using the `[ExclusionException]` section.\n\n## <span id=\"Using_the_Configuration_File\"></span><span id=\"using_the_configuration_file\"></span><span id=\"USING_THE_CONFIGURATION_FILE\"></span>Using the Configuration File\n\n\nIf you create a custom-named configuration file and store it outside the DISM directory, you can use the DISM command to run the file. At a command prompt, open the DISM directory. For example:\n\n``` syntax\nDism /Capture-Image /ImageFile:install.wim /CaptureDir:D:\\ /Name:Drive-D /ConfigFile:<configuration list>\n```\n\nor\n\n``` syntax\nDism /Append-Image /ImageFile:install.wim /CaptureDir:D:\\ /Name:Drive-D /ConfigFile:<configuration list>\n```\n\nwhere *&lt;configuration list&gt;* provides the complete directory location for the configuration file. For example, `c:\\imaging\\configuration_list.ini`. You must use either the **/Capture-Image** option to create a new .wim file or the **/Append-Image** option to append an existing .wim file.\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[DISM Image Management Command-Line Options](dism-image-management-command-line-options-s14.md)\n\n \n\n \n\n\n\n\n\n\n"}