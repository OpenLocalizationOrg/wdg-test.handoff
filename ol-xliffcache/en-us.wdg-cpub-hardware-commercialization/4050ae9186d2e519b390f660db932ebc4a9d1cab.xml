{"nodes":[{"content":"Mount and Modify a Windows Image Using DISM","pos":[34,77]},{"content":"Mount and Modify a Windows Image Using DISM","pos":[184,227]},{"content":"Mount and Modify a Windows Image Using DISM","pos":[235,278]},{"content":"You can use the Deployment Image Servicing and Management (DISM) tool to mount a Windows image from a WIM or VHD file.","pos":[281,399]},{"content":"Mounting an image maps the contents of the image to a directory so that you can service the image using DISM without booting into the image.","pos":[400,540]},{"content":"You can also perform common file operations, such as copying, pasting, and editing on a mounted image.","pos":[541,643]},{"content":"Note","pos":[647,651]},{"content":"DISM cannot mount a Windows image from a VHD on Windows Vista with Service Pack 1 (SP1) or Windows Server 2008.","pos":[656,767]},{"content":"You must attach the VHD using the DiskPart tool before you can use DISM to service the image.","pos":[768,861]},{"content":"When you service VHD images that have been attached using the DiskPart tool, the changes are automatically committed with each operation and cannot be discarded.","pos":[862,1023]},{"content":"You can mount and modify multiple images on a single computer.","pos":[1028,1090]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Deployment Image Servicing and Management (DISM) Best Practices<ept id=\"p1\">](deployment-image-servicing-and-management--dism--best-practices.md)</ept>.","pos":[1091,1251]},{"pos":[1364,1381],"content":"Mounting an Image"},{"content":"You can mount an image using the <bpt id=\"p1\">**</bpt>/optimize<ept id=\"p1\">**</ept> option to reduce initial mount time.","pos":[1384,1467]},{"content":"However, When using the <bpt id=\"p1\">**</bpt>/optimize<ept id=\"p1\">**</ept> option, processes that are ordinarily performed during a mount will instead be completed the first time that you access a directory.","pos":[1468,1638]},{"content":"As a result, there may be an increase in the time that is required to access a directory for the first time after mounting an image using the <bpt id=\"p1\">**</bpt>/optimize<ept id=\"p1\">**</ept> option.","pos":[1639,1802]},{"content":"To mount an image","pos":[1806,1823]},{"content":"Open a command prompt with administrator privileges.","pos":[1831,1883]},{"content":"If you are using a version of Windows other than Windows 8, use the Deployment Tools Cmd Prompt installed with the ADK or navigate to the DISM directory on your local computer.","pos":[1884,2060]},{"content":"Mount the image.","pos":[2066,2082]},{"pos":[2207,2292],"content":"**Note**  \nTo mount a Windows image from a VHD file, you must specify `/index:1`.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"To mount a Windows image from a VHD file, you must specify <ph id=\"ph1\">`/index:1`</ph>.","pos":[11,81]}]},{"content":"You can also add options to mount the image with read-only permissions or to reduce the initial mount time with the <bpt id=\"p1\">**</bpt>/Optimize<ept id=\"p1\">**</ept> option.","pos":[2305,2442]},{"content":"For example,","pos":[2443,2455]},{"pos":[2600,2790],"content":"For more information about the options available for the <bpt id=\"p1\">**</bpt>/Mount-Image<ept id=\"p1\">**</ept> option in DISM, see <bpt id=\"p2\">[</bpt>DISM Image Management Command-Line Options<ept id=\"p2\">](dism-image-management-command-line-options-s14.md)</ept>."},{"pos":[2906,2924],"content":"Modifying an Image"},{"content":"After you mount an image, you can browse the directory of the image.","pos":[2927,2995]},{"content":"You can review the file and folder structure, and add, edit, or delete files and folders.","pos":[2996,3085]},{"content":"You can also use the DISM tool to add and remove drivers and packages, including language packs, enumerate drivers and packages, modify configuration settings, and more.","pos":[3087,3256]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Service a Windows Image Using DISM<ept id=\"p1\">](service-a-windows-image-using-dism.md)</ept>.","pos":[3257,3359]},{"content":"To view and modify an image","pos":[3363,3390]},{"content":"On your technician computer open the mounted directory.","pos":[3398,3453]},{"content":"For example,","pos":[3454,3466]},{"content":"Delete, edit, or add additional files and folders to the location where they must appear after they have been applied to the destination computer.","pos":[3521,3667]},{"content":"For example, C:<ph id=\"ph1\">\\\\</ph>program<ph id=\"ph2\">\\_</ph>files<ph id=\"ph3\">\\\\</ph>application<ph id=\"ph4\">\\_</ph>name.","pos":[3668,3719]},{"pos":[3725,3925],"content":"**Important**  \nIf you must add an application or a device, verify that you included all of the required files. Although you can add application files and folders, you cannot install applications.","leadings":["","    "],"nodes":[{"content":"Important","pos":[2,11]},{"content":"If you must add an application or a device, verify that you included all of the required files. Although you can add application files and folders, you cannot install applications.","pos":[16,196],"nodes":[{"content":"If you must add an application or a device, verify that you included all of the required files.","pos":[0,95]},{"content":"Although you can add application files and folders, you cannot install applications.","pos":[96,180]}]}]},{"pos":[4084,4114],"content":"Committing Changes to an Image"},{"content":"You can commit changes to an image without unmounting the image.","pos":[4117,4181]},{"content":"To commit changes to an image","pos":[4185,4214]},{"content":"At the command prompt, type:","pos":[4222,4250]},{"content":"Use <bpt id=\"p1\">**</bpt>/CheckIntegrity<ept id=\"p1\">**</ept> to detect and track .wim file corruption when you commit changes to the image.","pos":[4329,4431]},{"content":"When you apply or mount the image, use <bpt id=\"p1\">**</bpt>/CheckIntegrity<ept id=\"p1\">**</ept> again to stop the operation if file corruption was detected.","pos":[4432,4551]},{"content":"<bpt id=\"p1\">**</bpt>/CheckIntegrity<ept id=\"p1\">**</ept> cannot be used with virtual hard disk (VHD) files.","pos":[4552,4622]},{"pos":[4741,4760],"content":"Unmounting an Image"},{"content":"After you modify an image, you must unmount it.","pos":[4763,4810]},{"content":"If you mounted your image with the default read/write permissions, you can commit your changes.","pos":[4811,4906]},{"content":"This makes your modifications a permanent part of the image.","pos":[4907,4967]},{"content":"To unmount an image","pos":[4971,4990]},{"content":"Open a command prompt with administrator privileges.","pos":[4998,5050]},{"content":"If you are using a version of Windows other than Windows 8, use the Deployment Tools Cmd Prompt installed with the ADK or navigate to the DISM directory on your local computer.","pos":[5051,5227]},{"content":"For Windows 10:","pos":[5233,5248]},{"pos":[5377,5426],"content":"where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>architecture<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> can be x86 or amd64."},{"content":"Unmount the image.","pos":[5432,5450]},{"content":"where <ph id=\"ph1\">`C:\\test\\offline`</ph> is the location of the mount directory.","pos":[5538,5601]},{"content":"If you do not specify the parameters to unmount, this option lists all of the mounted images but does not perform the unmount action.","pos":[5602,5735]},{"pos":[5741,5859],"content":"**Important**  \nYou must use either the **/commit** or **/discard** argument when you use the **/unmount** option.","leadings":["","    "],"nodes":[{"content":"Important","pos":[2,11]},{"content":"You must use either the <bpt id=\"p1\">**</bpt>/commit<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>/discard<ept id=\"p2\">**</ept> argument when you use the <bpt id=\"p3\">**</bpt>/unmount<ept id=\"p3\">**</ept> option.","pos":[16,114]}]},{"content":"After modifying an image, you can apply the image from a network share or from local media, such as a CD/DVD or a USB flash drive (UFD).","pos":[5868,6004]},{"pos":[6111,6126],"content":"Troubleshooting"},{"content":"If the DISM commands in this topic fail, try the following:","pos":[6131,6190]},{"content":"Make sure that you are using the Windows 10 version of DISM that is installed with the Windows ADK.","pos":[6198,6297]},{"pos":[6303,6502],"content":"If you are using a Windows 8.1, Windows 8, or Windows 7 PC, use the <bpt id=\"p1\">**</bpt>Deployment and Imaging Tools Environment<ept id=\"p1\">**</ept> to access the tools that are installed with the Windows 10 version of the Windows ADK."},{"content":"Don’t mount images to protected folders, such as your User<ph id=\"ph1\">\\\\</ph>Documents folder.","pos":[6508,6585]},{"content":"If DISM processes are interrupted, consider temporarily disconnecting from the network and disabling virus protection.","pos":[6591,6709]},{"content":"If DISM processes are interrupted, consider running the commands from the Windows Preinstallation Environment (WinPE) instead.","pos":[6715,6841]},{"pos":[6879,6893],"content":"Related topics"},{"content":"DISM Image Management Command-Line Options","pos":[6897,6939]},{"content":"Service a Windows Image Using DISM","pos":[6994,7028]}],"content":"---\nauthor: Justinha\nDescription: Mount and Modify a Windows Image Using DISM\nms.assetid: f48b4681-bc59-4eb1-89c9-0163594467f7\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Mount and Modify a Windows Image Using DISM\n---\n\n# Mount and Modify a Windows Image Using DISM\n\n\nYou can use the Deployment Image Servicing and Management (DISM) tool to mount a Windows image from a WIM or VHD file. Mounting an image maps the contents of the image to a directory so that you can service the image using DISM without booting into the image. You can also perform common file operations, such as copying, pasting, and editing on a mounted image.\n\n**Note**  \nDISM cannot mount a Windows image from a VHD on Windows Vista with Service Pack 1 (SP1) or Windows Server 2008. You must attach the VHD using the DiskPart tool before you can use DISM to service the image. When you service VHD images that have been attached using the DiskPart tool, the changes are automatically committed with each operation and cannot be discarded.\n\n \n\nYou can mount and modify multiple images on a single computer. For more information, see [Deployment Image Servicing and Management (DISM) Best Practices](deployment-image-servicing-and-management--dism--best-practices.md).\n\n## <span id=\"Mounting_an_Image\"></span><span id=\"mounting_an_image\"></span><span id=\"MOUNTING_AN_IMAGE\"></span>Mounting an Image\n\n\nYou can mount an image using the **/optimize** option to reduce initial mount time. However, When using the **/optimize** option, processes that are ordinarily performed during a mount will instead be completed the first time that you access a directory. As a result, there may be an increase in the time that is required to access a directory for the first time after mounting an image using the **/optimize** option.\n\n**To mount an image**\n\n1.  Open a command prompt with administrator privileges. If you are using a version of Windows other than Windows 8, use the Deployment Tools Cmd Prompt installed with the ADK or navigate to the DISM directory on your local computer.\n\n2.  Mount the image.\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\test\\images\\myimage.wim /index:1 /MountDir:C:\\test\\offline\n    ```\n\n    **Note**  \n    To mount a Windows image from a VHD file, you must specify `/index:1`.\n\n     \n\n    You can also add options to mount the image with read-only permissions or to reduce the initial mount time with the **/Optimize** option. For example,\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\test\\images\\myimage.wim /index:1 /MountDir:C:\\test\\offline /ReadOnly /Optimize\n    ```\n\n    For more information about the options available for the **/Mount-Image** option in DISM, see [DISM Image Management Command-Line Options](dism-image-management-command-line-options-s14.md).\n\n## <span id=\"Modifying_an_Image\"></span><span id=\"modifying_an_image\"></span><span id=\"MODIFYING_AN_IMAGE\"></span>Modifying an Image\n\n\nAfter you mount an image, you can browse the directory of the image. You can review the file and folder structure, and add, edit, or delete files and folders.\n\nYou can also use the DISM tool to add and remove drivers and packages, including language packs, enumerate drivers and packages, modify configuration settings, and more. For more information, see [Service a Windows Image Using DISM](service-a-windows-image-using-dism.md).\n\n**To view and modify an image**\n\n1.  On your technician computer open the mounted directory. For example,\n\n    ``` syntax\n    cd C:\\mounted_images\n    ```\n\n2.  Delete, edit, or add additional files and folders to the location where they must appear after they have been applied to the destination computer. For example, C:\\\\program\\_files\\\\application\\_name.\n\n    **Important**  \n    If you must add an application or a device, verify that you included all of the required files. Although you can add application files and folders, you cannot install applications.\n\n     \n\n## <span id=\"Committing_Changes_to_an_Image\"></span><span id=\"committing_changes_to_an_image\"></span><span id=\"COMMITTING_CHANGES_TO_AN_IMAGE\"></span>Committing Changes to an Image\n\n\nYou can commit changes to an image without unmounting the image.\n\n**To commit changes to an image**\n\n-   At the command prompt, type:\n\n    ``` syntax\n    Dism /Commit-Image /MountDir:C:\\test\\offline\n    ```\n\n    Use **/CheckIntegrity** to detect and track .wim file corruption when you commit changes to the image. When you apply or mount the image, use **/CheckIntegrity** again to stop the operation if file corruption was detected. **/CheckIntegrity** cannot be used with virtual hard disk (VHD) files.\n\n## <span id=\"Unmounting_an_Image\"></span><span id=\"unmounting_an_image\"></span><span id=\"UNMOUNTING_AN_IMAGE\"></span>Unmounting an Image\n\n\nAfter you modify an image, you must unmount it. If you mounted your image with the default read/write permissions, you can commit your changes. This makes your modifications a permanent part of the image.\n\n**To unmount an image**\n\n1.  Open a command prompt with administrator privileges. If you are using a version of Windows other than Windows 8, use the Deployment Tools Cmd Prompt installed with the ADK or navigate to the DISM directory on your local computer.\n\n    For Windows 10:\n\n    ``` syntax\n    cd C:\\Program Files (x86)\\Windows Kits\\10.0\\Assessment and Deployment Kit\\ <architecture>\\DISM\n    ```\n\n    where *&lt;architecture&gt;* can be x86 or amd64.\n\n2.  Unmount the image.\n\n    ``` syntax\n    Dism /Unmount-Image /MountDir:C:\\test\\offline /commit\n    ```\n\n    where `C:\\test\\offline` is the location of the mount directory. If you do not specify the parameters to unmount, this option lists all of the mounted images but does not perform the unmount action.\n\n    **Important**  \n    You must use either the **/commit** or **/discard** argument when you use the **/unmount** option.\n\n     \n\nAfter modifying an image, you can apply the image from a network share or from local media, such as a CD/DVD or a USB flash drive (UFD).\n\n## <span id=\"Troubleshooting\"></span><span id=\"troubleshooting\"></span><span id=\"TROUBLESHOOTING\"></span>Troubleshooting\n\n\n**If the DISM commands in this topic fail, try the following:**\n\n1.  Make sure that you are using the Windows 10 version of DISM that is installed with the Windows ADK.\n\n2.  If you are using a Windows 8.1, Windows 8, or Windows 7 PC, use the **Deployment and Imaging Tools Environment** to access the tools that are installed with the Windows 10 version of the Windows ADK.\n\n3.  Don’t mount images to protected folders, such as your User\\\\Documents folder.\n\n4.  If DISM processes are interrupted, consider temporarily disconnecting from the network and disabling virus protection.\n\n5.  If DISM processes are interrupted, consider running the commands from the Windows Preinstallation Environment (WinPE) instead.\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[DISM Image Management Command-Line Options](dism-image-management-command-line-options-s14.md)\n\n[Service a Windows Image Using DISM](service-a-windows-image-using-dism.md)\n\n \n\n \n\n\n\n\n\n\n"}