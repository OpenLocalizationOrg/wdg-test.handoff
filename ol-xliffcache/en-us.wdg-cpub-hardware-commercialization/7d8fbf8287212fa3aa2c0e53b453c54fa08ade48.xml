{"nodes":[{"content":"Debugging Power Problems with Standby","pos":[11,48]},{"content":"After you have developed your Modern Standby system using the proper power management guidance, you have to test and validate that the power floor is optimized to deliver great battery life in standby.","pos":[62,263]},{"content":"Debugging Power Problems with Standby","pos":[452,489]},{"content":"After you have developed your Modern Standby system using the proper power management guidance, you have to test and validate that the power floor is optimized to deliver great battery life in standby.","pos":[492,693]},{"content":"You might need to break down the system to isolate a power offender.","pos":[694,762]},{"content":"This lab provides a deeper dive on useful tools like <bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>WPA<ept id=\"p2\">**</ept>, and will guide you through various case studies that illustrate commonly encountered problems.","pos":[764,939]},{"content":"Topics include:","pos":[940,955]},{"content":"Impact of USB devices","pos":[961,982]},{"content":"Firmware problems and missing constraints","pos":[988,1029]},{"content":"Driver issues","pos":[1035,1048]},{"content":"Identifying spurious wake sources","pos":[1054,1087]},{"content":"Goals","pos":[1092,1097]},{"content":"This guide will show you how to perform the following tasks:","pos":[1100,1160]},{"pos":[1166,1234],"content":"Interpret data from <bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> reports and <bpt id=\"p2\">**</bpt>WPA DRIPS<ept id=\"p2\">**</ept> plugins"},{"content":"Identify common issues that can impact the power floor","pos":[1240,1294]},{"content":"Terminology","pos":[1299,1310]},{"content":"<bpt id=\"p1\">**</bpt>Deepest runtime idle platform state (DRIPS)<ept id=\"p1\">**</ept>: The system is said to be in <bpt id=\"p2\">**</bpt>DRIPS<ept id=\"p2\">**</ept> when the system is consuming the lowest amount of power possible, limited by the system’s power floor.","pos":[1317,1506]},{"content":"When the screen is turned off, the Modern Standby session starts and the system goes through multiple phases to move into a low-power state.","pos":[1507,1647]},{"content":"When the system is in the lowest-power state, the system is in <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept>.","pos":[1648,1721]},{"content":"The system is not in <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept> when it is performing tasks like receiving emails, updating live tiles with fresh content, receiving VoIP calls, or any other background task that requires system resources.","pos":[1722,1926]},{"content":"The more time the system spends in <bpt id=\"p1\">**</bpt>DRIPS<ept id=\"p1\">**</ept> before the screen is turned back on, the longer the battery life.","pos":[1927,2037]},{"pos":[2128,2239],"content":"<bpt id=\"p1\">**</bpt>Activators<ept id=\"p1\">**</ept>: Software components that are allowed to perform work in the background while in Modern Standby."},{"content":"Tools","pos":[2244,2249]},{"content":"The <bpt id=\"p1\">**</bpt>Windows Performance Toolkit<ept id=\"p1\">**</ept> consists of two independent tools: <bpt id=\"p2\">**</bpt>Windows Performance Recorder (WPR)<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Windows Performance Analyzer (WPA)<ept id=\"p3\">**</ept>.","pos":[2252,2405]},{"content":"<bpt id=\"p1\">**</bpt>WPR<ept id=\"p1\">**</ept> is a powerful recording tool that creates Event Tracing for Windows (ETW) recordings.","pos":[2406,2499]},{"content":"You can run <bpt id=\"p1\">**</bpt>WPR<ept id=\"p1\">**</ept> from the user interface (UI) or from the command line (CL).","pos":[2500,2579]},{"content":"<bpt id=\"p1\">**</bpt>WPR<ept id=\"p1\">**</ept> provides built-in profiles that you can use to select the events you want to record.","pos":[2580,2672]},{"content":"<bpt id=\"p1\">**</bpt>WPA<ept id=\"p1\">**</ept> is a powerful analysis tool that combines a flexible UI with extensive graphing capabilities and data tables that can be pivoted and have full text search capabilities.","pos":[2673,2849]},{"content":"<bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> is a Windows diagnostics tool that supports Modern Standby (connected or disconnected).","pos":[2851,2953]},{"content":"It monitors a Modern Standby PC’s behavior and provides actionable diagnostics on Modern Standby battery life.","pos":[2954,3064]},{"content":"It’s available only on Modern Standby capable PCs.","pos":[3065,3115]},{"content":"<bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> generates a summary of top issues that cause poor Modern Standby battery life.","pos":[3116,3209]},{"pos":[3211,3310],"content":"To obtain a <bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> report, type the following command into an Administrator Command Prompt:"},{"pos":[3353,3478],"content":"The built-in <bpt id=\"p1\">**</bpt>powercfg.exe<ept id=\"p1\">**</ept> utility will create an HTML file named sleepstudy-report.html in the current working directory."},{"content":"Note","pos":[3482,3486]},{"content":"All the exercises in this guide use pre-generated <bpt id=\"p1\">**</bpt>SleepStudy<ept id=\"p1\">**</ept> reports, so you won't need to generate any <bpt id=\"p2\">**</bpt>SleepStudy<ept id=\"p2\">**</ept> reports for this guide.","pos":[3491,3637]},{"content":"Exercises","pos":[3645,3654]},{"content":"This guide consists of the following exercises.","pos":[3657,3704]},{"content":"Exercise 1 - Identify Problems with Spurious Wakes","pos":[3711,3761]},{"content":"Exercise 2 - Identify Problems with Missing Drivers","pos":[3816,3867]},{"content":"Exercise 3 - Identify Problems with Missing Constraints","pos":[3922,3977]},{"content":"Exercise 4 - Identify Problems with USB Devices","pos":[4032,4079]}],"content":"---\ntitle: Debugging Power Problems with Standby\ndescription: After you have developed your Modern Standby system using the proper power management guidance, you have to test and validate that the power floor is optimized to deliver great battery life in standby.\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 5A43DECA-DF16-4CE2-BE21-4077D362C8D7\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# Debugging Power Problems with Standby\n\n\nAfter you have developed your Modern Standby system using the proper power management guidance, you have to test and validate that the power floor is optimized to deliver great battery life in standby. You might need to break down the system to isolate a power offender.\n\nThis lab provides a deeper dive on useful tools like **SleepStudy** and **WPA**, and will guide you through various case studies that illustrate commonly encountered problems. Topics include:\n\n-   Impact of USB devices\n\n-   Firmware problems and missing constraints\n\n-   Driver issues\n\n-   Identifying spurious wake sources\n\n## Goals\n\n\nThis guide will show you how to perform the following tasks:\n\n-   Interpret data from **SleepStudy** reports and **WPA DRIPS** plugins\n\n-   Identify common issues that can impact the power floor\n\n## Terminology\n\n\n-   **Deepest runtime idle platform state (DRIPS)**: The system is said to be in **DRIPS** when the system is consuming the lowest amount of power possible, limited by the system’s power floor. When the screen is turned off, the Modern Standby session starts and the system goes through multiple phases to move into a low-power state. When the system is in the lowest-power state, the system is in **DRIPS**. The system is not in **DRIPS** when it is performing tasks like receiving emails, updating live tiles with fresh content, receiving VoIP calls, or any other background task that requires system resources. The more time the system spends in **DRIPS** before the screen is turned back on, the longer the battery life.\n\n    ``` syntax\n    Total standby session time = DRIPS time + non-DRIPS time\n    ```\n\n-   **Activators**: Software components that are allowed to perform work in the background while in Modern Standby.\n\n## Tools\n\n\nThe **Windows Performance Toolkit** consists of two independent tools: **Windows Performance Recorder (WPR)** and **Windows Performance Analyzer (WPA)**. **WPR** is a powerful recording tool that creates Event Tracing for Windows (ETW) recordings. You can run **WPR** from the user interface (UI) or from the command line (CL). **WPR** provides built-in profiles that you can use to select the events you want to record. **WPA** is a powerful analysis tool that combines a flexible UI with extensive graphing capabilities and data tables that can be pivoted and have full text search capabilities.\n\n**SleepStudy** is a Windows diagnostics tool that supports Modern Standby (connected or disconnected). It monitors a Modern Standby PC’s behavior and provides actionable diagnostics on Modern Standby battery life. It’s available only on Modern Standby capable PCs. **SleepStudy** generates a summary of top issues that cause poor Modern Standby battery life.\n\nTo obtain a **SleepStudy** report, type the following command into an Administrator Command Prompt:\n\n``` syntax\npowercfg.exe /SleepStudy\n```\n\nThe built-in **powercfg.exe** utility will create an HTML file named sleepstudy-report.html in the current working directory.\n\n**Note**  \nAll the exercises in this guide use pre-generated **SleepStudy** reports, so you won't need to generate any **SleepStudy** reports for this guide.\n\n \n\n## Exercises\n\n\nThis guide consists of the following exercises.\n\n-   [Exercise 1 - Identify Problems with Spurious Wakes](debugging-problems-with-standby-exercise-1.md)\n\n-   [Exercise 2 - Identify Problems with Missing Drivers](debugging-problems-with-standby-exercise-2.md)\n\n-   [Exercise 3 - Identify Problems with Missing Constraints](debugging-problems-with-standby-exercise-3.md)\n\n-   [Exercise 4 - Identify Problems with USB Devices](debugging-problems-with-standby-exercise-4.md)\n\n \n\n \n\n\n\n\n\n\n"}