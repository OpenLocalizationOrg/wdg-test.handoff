{"nodes":[{"content":"Multilingual Windows Image Creation","pos":[34,69]},{"content":"Multilingual Windows Image Creation","pos":[176,211]},{"content":"Multilingual Windows Image Creation","pos":[219,254]},{"content":"This walkthrough describes how to use the Windows Assessment and Deployment Kit (Windows ADK) to create and deploy multilingual versions of Windows 10.","pos":[257,408]},{"content":"It describes how to create a multilingual Windows image to help reduce the number of Windows images that need to be maintained for different regions.","pos":[409,558]},{"content":"You can deploy images that are created by using this process from a network share, from a server, or from media.","pos":[559,671]},{"content":"This walkthrough describes how to add language packs and other update packages to an offline Windows image and Windows recovery image.","pos":[673,807]},{"content":"You then boot Windows to audit mode and add applications and drivers.","pos":[808,877]},{"content":"You then capture the installation to an image and use the newly captured master image for testing purposes.","pos":[878,985]},{"content":"After you test the image, you use it to create regional images by removing unnecessary language resources.","pos":[986,1092]},{"content":"You can then deploy these regional images.","pos":[1093,1135]},{"content":"The process described in this walkthrough is primarily intended for OEMs who want to reduce the number of Windows images that they maintain.","pos":[1137,1277]},{"content":"By adding language packs to an offline image, you can decrease Windows installation time and reduce the number of images that you maintain.","pos":[1278,1417]},{"content":"However, because multiple language packs are added to a single image, the size of the Windows image is increased.","pos":[1418,1531]},{"content":"IT Professionals who want to reduce the size of their overall image should instead use the process described in <bpt id=\"p1\">[</bpt>Add Multilingual Support to a Windows Distribution<ept id=\"p1\">](add-multilingual-support-to-a-windows-distribution.md)</ept>.","pos":[1533,1753]},{"content":"This process describes how to copy the lp.cab file to the Windows distribution, reducing the overall image size.","pos":[1754,1866]},{"content":"In this guide:","pos":[1868,1882]},{"content":"Step 1: Add language packs to a Windows image","pos":[1889,1934]},{"content":"Step 2 (optional): Add language packs to Windows Setup","pos":[1952,2006]},{"content":"Step 3: Test the Windows Installation","pos":[2024,2061]},{"content":"Step 4: Boot to audit mode, add applications and run sysprep","pos":[2076,2136]},{"content":"Step 5: Capture the image","pos":[2156,2181]},{"content":"Step 6: Create regional images by removing language packs","pos":[2198,2255]},{"pos":[2368,2380],"content":"Requirements"},{"content":"To complete this walkthrough, you should have a working knowledge of common desktop deployment technologies and processes.","pos":[2383,2505]},{"content":"You should also have a basic understanding of the Windows Imaging (.wim) file format.","pos":[2506,2591]},{"content":"The steps in this guide assume that you use a single Windows image within the .wim file.","pos":[2592,2680]},{"content":"If you want to reduce the number of images you maintain, you can use the lowest edition of Windows available in your .wim file, and then use DISM to upgrade to a higher edition of Windows.","pos":[2681,2869]},{"content":"If you want to maintain multiple images, you can repeat the steps in this guide for each Windows image in the .wim file, to create multiple editions of the regional Windows image.","pos":[2870,3049]},{"content":"Before you begin, make sure you have the following items:","pos":[3051,3108]},{"content":"Windows installation media (DVD or Windows installation files) for multiple languages.","pos":[3114,3200]},{"content":"This guide uses EN-US, De-DE and FR-FR media.","pos":[3201,3246]},{"pos":[3252,3298],"content":"One or more language packs (<bpt id=\"p1\">**</bpt>lp.cab<ept id=\"p1\">**</ept> files)."},{"content":"A technician computer that has the Windows Assessment and Deployment Kit (Windows ADK) installed.","pos":[3304,3401]},{"content":"A test computer that you can use to install and test Windows.","pos":[3407,3468]},{"pos":[3525,3570],"content":"Step 1: Add language packs to a Windows image"},{"content":"In this step, you will use Deployment Image Servicing and Management (DISM) to add language packs to a Windows image.","pos":[3573,3690]},{"content":"After you add language packs, you can add update packages.","pos":[3691,3749]},{"content":"The Windows image that you start with can be in any language.","pos":[3750,3811]},{"content":"For example, you can start with an English (en-US) image, and add support for French (fr-FR) and German (de-DE).","pos":[3812,3924]},{"content":"When you add language packs to the Windows image, the user is presented with a dialog box to choose their preferred language during Out-Of-Box Experience (OOBE).","pos":[3926,4087]},{"content":"By using this method, the sizes of the Windows images are larger; however, installation time is faster, and you can ensure that any updates you add to the Windows image apply to the languages installed to that image.","pos":[4089,4305]},{"content":"Use this method if you want to install Windows as quickly as possible.","pos":[4306,4376]},{"content":"Important","pos":[4380,4389]},{"content":"The Windows image must be a recently installed and captured image.","pos":[4394,4460]},{"content":"This ensures that the Windows image does not have any pending online actions.","pos":[4461,4538]},{"content":"Always install language packs before you install updates.","pos":[4540,4597]},{"content":"If you install an update (hotfix, general distribution release <ph id=\"ph1\">\\[</ph>GDR<ph id=\"ph2\">\\]</ph>, limited distribution release <ph id=\"ph3\">\\[</ph>LDR<ph id=\"ph4\">\\]</ph>, or service pack <ph id=\"ph5\">\\[</ph>SP<ph id=\"ph6\">\\]</ph>) that contains language-dependent resources before you install a language pack, the language-specific changes contained in the update are not applied.","pos":[4598,4881]},{"content":"Packages that have language pack dependencies can be identified by using the <ph id=\"ph1\">`Dism /Get-PackageInfo`</ph> command.","pos":[4882,4991]},{"content":"In the “Custom Properties” section of the report, look for the Dependency = “Language Pack” key/value pair.","pos":[4992,5099]},{"content":"If language packs are installed after an LDR or GDR package that has this attribute, the update must be reinstalled.","pos":[5100,5216]},{"content":"To add language packs to a Windows image","pos":[5223,5263]},{"content":"Open an elevated Deployment Tools command prompt.","pos":[5271,5320]},{"content":"Type the following commands to create the following folders:","pos":[5326,5386]},{"content":"Copy the entire contents of the en-US Windows DVD to C:<ph id=\"ph1\">\\\\</ph>my<ph id=\"ph2\">\\_</ph>Distribution.","pos":[5587,5661]},{"content":"For example:","pos":[5662,5674]},{"content":"Copy each language pack (<bpt id=\"p1\">**</bpt>Lp.cab<ept id=\"p1\">**</ept>) to the technician computer.","pos":[5750,5814]},{"content":"For example:","pos":[5815,5827]},{"content":"Type the following command to retrieve the name or index number for the image that you want to modify:","pos":[5962,6064]},{"content":"Note the index or name value of the image that you want to modify.","pos":[6168,6234]},{"content":"Use DISM to mount the Windows image.","pos":[6240,6276]},{"content":"For example:","pos":[6277,6289]},{"content":"Use DISM to mount the Windows recovery environment image that exists in the Windows image.","pos":[6427,6517]},{"content":"For example:","pos":[6518,6530]},{"content":"Add language packs to the mounted offline Windows image.","pos":[6680,6736]},{"content":"You can add multiple packages on one command line.","pos":[6737,6787]},{"content":"Add language packs to the mounted offline Windows recovery image.","pos":[6948,7013]},{"content":"The language packs that are used for the Windows recovery image are the same lp.cab files used with Windows PE.","pos":[7014,7125]},{"content":"Use the language packs for Windows PE that are installed with the Windows ADK.","pos":[7126,7204]},{"content":"For example:","pos":[7205,7217]},{"content":"This process can take several minutes.","pos":[7634,7672]},{"content":"(Optional) Add additional optional components and language packs to the Windows recovery image.","pos":[7678,7773]},{"content":"If you want to install additional optional components to the recovery image, you must install the language-neutral cab file first, and then add the language specific cab files.","pos":[7774,7950]},{"content":"For example, run the following command to add the WinPE-WinReCfg.cab optional component:","pos":[7951,8039]},{"content":"We recommend adding language packs for the following optional components that are included with Windows recovery image:","pos":[8693,8812]},{"content":"WinPE-WinReCfg","pos":[8822,8836]},{"content":"WinPE-Rejuv","pos":[8846,8857]},{"content":"WinPE-EnhancedStorage","pos":[8867,8888]},{"content":"WinPE-Scripting","pos":[8898,8913]},{"content":"WinPE-SecureStartup","pos":[8923,8942]},{"content":"WinPE-SRT","pos":[8952,8961]},{"content":"WinPE-WDS-Tools","pos":[8971,8986]},{"content":"WinPE-WMI","pos":[8996,9005]},{"content":"WinPE-HTA","pos":[9015,9024]},{"content":"Configure the default language settings to use in the Windows image.","pos":[9030,9098]},{"content":"Configure the default language settings to use in the Windows recovery image.","pos":[9180,9257]},{"content":"Recreate the lang.ini file.","pos":[9337,9364]},{"content":"Verify that the languages are installed and the correct language is configured as the default.","pos":[9473,9567]},{"content":"The output for the Windows image should be similar to the following:","pos":[9715,9783]},{"content":"The output for the Windows recovery image should be similar to the following:","pos":[10596,10673]},{"content":"Unmount the images, committing the changes.","pos":[11304,11347]},{"content":"Note that you must unmount the Windows recovery image before you unmounts and commit the Windows image.","pos":[11348,11451]},{"pos":[11648,11702],"content":"Step 2 (optional): Add language packs to Windows Setup"},{"content":"In this step, you add multiple language support to Windows Setup.","pos":[11705,11770]},{"content":"This allows an end user to run Windows Setup and select a specific language that you install.","pos":[11771,11864]},{"content":"You add language packs to the default boot.wim file, and then copy language resources into your Windows distribution.","pos":[11865,11982]},{"content":"Note","pos":[11986,11990]},{"content":"This step is optional.","pos":[11995,12017]},{"content":"If you complete this step, you can run Windows Setup in a language other than the language that you choose for the operating system.","pos":[12018,12150]},{"content":"However, this does not cover adding font support for all languages.","pos":[12151,12218]},{"content":"To add language packs to the default boot image","pos":[12225,12272]},{"content":"Open a Deployment Tools command prompt with elevated permissions.","pos":[12280,12345]},{"content":"Use DISM to mount index 2 of the Boot.wim file.","pos":[12351,12398]},{"content":"For example,","pos":[12399,12411]},{"content":"Add Windows PE language packs and Windows Setup optional components to the mounted image for each language you want to support.","pos":[12543,12670]},{"content":"For example:","pos":[12671,12683]},{"content":"Add the Windows PE Setup optional components.","pos":[13099,13144]},{"content":"For example:","pos":[13145,13157]},{"pos":[13586,13744],"content":"**Note**  \nThese Windows Setup language packs are for the client editions of Windows only. For Windows Server, you must use winpe-setup-server .cab files.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"These Windows Setup language packs are for the client editions of Windows only. For Windows Server, you must use winpe-setup-server .cab files.","pos":[11,154],"nodes":[{"content":"These Windows Setup language packs are for the client editions of Windows only.","pos":[0,79]},{"content":"For Windows Server, you must use winpe-setup-server .cab files.","pos":[80,143]}]}]},{"content":"Add the Windows PE language specific optional components.","pos":[13757,13814]},{"content":"For example:","pos":[13815,13827]},{"content":"In your Windows distribution, copy the language-specific Setup resources from each language specific Windows distribution to the Sources folder in your distribution share.","pos":[14702,14873]},{"content":"For example, insert the Windows DVD for Fr-FR in your DVD drive (E:) and copy the Fr-FR sources folder to your Windows distribution.","pos":[14874,15006]},{"content":"Use DISM to mount the Windows image.","pos":[15263,15299]},{"content":"For example:","pos":[15300,15312]},{"content":"Get the language settings that are configured in the Windows image by using the /Get-Intl parameter.","pos":[15450,15550]},{"content":"For example","pos":[15551,15562]},{"content":"Change the default language, locale, and other international settings by using the /set-allInlt parameter.","pos":[15676,15782]},{"content":"Recreate the lang.ini file.","pos":[15861,15888]},{"content":"The Lang.ini file must be re-created each time you add or remove language resources from your distribution, and when you add or remove language packs from your Windows image.","pos":[15889,16063]},{"content":"Copy the lang.ini file from the Windows distribution to the boot.wim file.","pos":[16172,16246]},{"content":"The Lang.ini file used in the Boot.wim file must match the Lang.ini file for the operating-system image.","pos":[16247,16351]},{"content":"Use DISM to unmount the Windows boot image and commit the changes.","pos":[16459,16525]},{"content":"You must also unmount the Windows image.","pos":[16526,16566]},{"content":"Because none of the files have changed in the Windows image, you can discard the changes.","pos":[16567,16656]},{"content":"For example,","pos":[16657,16669]},{"pos":[16861,16898],"content":"Step 3: Test the Windows Installation"},{"content":"In this step, you install Windows, selecting a language during Windows Setup, and verifying that multiple languages are installed.","pos":[16901,17031]},{"content":"To boot a computer without an operating system, you must create bootable Windows PE media.","pos":[17033,17123]},{"content":"This walkthrough provides instructions on creating Windows PE on a bootable USB drive.","pos":[17124,17210]},{"content":"For additional options, see <bpt id=\"p1\">[</bpt>WinPE: Create USB Bootable drive<ept id=\"p1\">](winpe-create-usb-bootable-drive.md)</ept>.","pos":[17211,17310]},{"content":"To install Windows","pos":[17314,17332]},{"content":"Create a Windows PE image on your technician computer.","pos":[17340,17394]},{"content":"For example:","pos":[17395,17407]},{"content":"The following directories are created:","pos":[17469,17507]},{"content":"C:<ph id=\"ph1\">\\\\</ph>winpe<ph id=\"ph2\">\\_</ph>amd64<ph id=\"ph3\">\\\\</ph>media","pos":[17517,17540]},{"content":"C:<ph id=\"ph1\">\\\\</ph>winpe<ph id=\"ph2\">\\_</ph>amd64<ph id=\"ph3\">\\\\</ph>mount","pos":[17550,17573]},{"pos":[17579,17776],"content":"If you need to add boot-critical drivers or other optional components to Windows PE, see <bpt id=\"p1\">[</bpt>WinPE: Add packages (Optional Components Reference)<ept id=\"p1\">](winpe-add-packages--optional-components-reference.md)</ept>."},{"content":"Insert a USB drive into the technician computer and run the following command:","pos":[17782,17860]},{"pos":[17932,17979],"content":"Where <bpt id=\"p1\">*</bpt>F<ept id=\"p1\">*</ept> is the drive letter of the USB drive."},{"content":"Windows PE is copied to the USB drive.","pos":[17985,18023]},{"content":"Copy the contents of the Windows distribution to another USB drive that has sufficient free space.","pos":[18029,18127]},{"content":"Depending on the size of your install.wim file, you might need to format the USB drive as NTFS to support files that are larger than 4 GB.","pos":[18128,18266]},{"content":"For example,","pos":[18272,18284]},{"pos":[18371,18419],"content":"Where <bpt id=\"p1\">*</bpt>G<ept id=\"p1\">*</ept> is the letter of the second USB drive."},{"content":"Insert the Windows PE USB drive into your test computer.","pos":[18425,18481]},{"content":"Boot the test computer, ensuring that the Windows PE USB drive is configured to boot first.","pos":[18482,18573]},{"content":"You might need to change the boot options of the computer in the firmware.","pos":[18574,18648]},{"content":"After the Windows PE command line prompt appears, insert the USB drive that contains your Windows distribution on the test computer.","pos":[18654,18786]},{"content":"Identify the drives, volumes, and drive letters on the test computer.","pos":[18792,18861]},{"content":"From the Windows PE command prompt, type:","pos":[18862,18903]},{"content":"Identify the drive letter of the USB drive that contains your Windows distribution.","pos":[18964,19047]},{"content":"This example uses “F:<ph id=\"ph1\">\\\\</ph>”.","pos":[19048,19073]},{"content":"Exit diskpart.","pos":[19074,19088]},{"content":"Install Windows by running Windows Setup.","pos":[19127,19168]},{"content":"Windows Setup starts and you are prompted to select your language (French, German, or English).","pos":[19231,19326]},{"content":"Select one of the languages and proceed with the installation.","pos":[19327,19389]},{"content":"Verify that the correct language appears during installation.","pos":[19390,19451]},{"pos":[19513,19573],"content":"Step 4: Boot to audit mode, add applications and run sysprep"},{"content":"In this step, you install your Windows image on a test computer and boot it to audit mode.","pos":[19576,19666]},{"content":"While the computer is running in audit mode, you add applications that must be installed online, and test the operating system.","pos":[19667,19794]},{"content":"After applications are added and the computer is tested, you run the sysprep tool to prepare the image to be deployed to a computer that will ship to an end user.","pos":[19795,19957]},{"content":"To boot to audit mode","pos":[19961,19982]},{"content":"Do one of the following to boot a test computer to audit mode:","pos":[19990,20052]},{"pos":[20062,20136],"content":"For an attended installation, at the OOBE screen, press <bpt id=\"p1\">**</bpt>CTRL+SHIFT+F3<ept id=\"p1\">**</ept>."},{"content":"In an unattended installation, use an answer file with the Microsoft-Windows-Deployment<ph id=\"ph1\">\\\\</ph>Reseal<ph id=\"ph2\">\\\\</ph>Mode configured to <bpt id=\"p1\">**</bpt>Audit<ept id=\"p1\">**</ept>.","pos":[20146,20272]},{"content":"This setting should appear in the <bpt id=\"p1\">**</bpt>oobeSystem<ept id=\"p1\">**</ept> configuration pass.","pos":[20273,20341]},{"pos":[20351,20413],"content":"Run the <bpt id=\"p1\">**</bpt>sysprep /audit<ept id=\"p1\">**</ept> command in a Command Prompt window."},{"pos":[20419,20519],"content":"For more information, see <bpt id=\"p1\">[</bpt>Understanding Audit Mode<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=148031)</ept>."},{"content":"Install Microsoft Office or other applications, and test the computer.","pos":[20525,20595]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Customize Windows in Audit Mode<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=148032)</ept>.","pos":[20596,20703]},{"content":"Prepare the computer for deployment by doing one of the following:","pos":[20709,20775]},{"pos":[20785,20879],"content":"From audit mode, run the <bpt id=\"p1\">**</bpt>Sysprep<ept id=\"p1\">**</ept> command with the <bpt id=\"p2\">**</bpt>/oobe /shutdown /generalize<ept id=\"p2\">**</ept> options."},{"content":"In unattended installations, configure the Microsoft-Windows-Deployment<ph id=\"ph1\">\\\\</ph>Reseal<ph id=\"ph2\">\\\\</ph>Mode setting to <bpt id=\"p1\">**</bpt>oobe<ept id=\"p1\">**</ept>.","pos":[20889,20995]},{"content":"For more information on this setting, see the Windows Unattended Setup Reference (Unattend.chm).","pos":[20996,21092]},{"pos":[21098,21201],"content":"For more information, see <bpt id=\"p1\">[</bpt>Sysprep Technical Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=148028)</ept>."},{"content":"After Sysprep is finished, the test computer shuts down.","pos":[21207,21263]},{"pos":[21318,21358],"content":"Step 5: Capture the Windows installation"},{"content":"In this step, you capture your Windows image from the test computer and store it for use as your master image.","pos":[21361,21471]},{"content":"To capture the image","pos":[21475,21495]},{"content":"Start your test computer by booting to Windows PE.","pos":[21503,21553]},{"content":"Identify the drives, volumes, and drive letters on the test computer.","pos":[21559,21628]},{"content":"From the Windows PE command prompt, type:","pos":[21629,21670]},{"content":"Identify the drive letter of the USB drive that contains your Windows distribution.","pos":[21731,21814]},{"content":"Exit diskpart.","pos":[21815,21829]},{"content":"At the Windows PE command prompt, capture the Windows image.","pos":[21868,21928]},{"content":"This example uses E:<ph id=\"ph1\">\\\\</ph> as the location of the Windows installation.","pos":[21929,21996]},{"content":"For example:","pos":[21997,22009]},{"content":"Copy the image to a USB drive or to a network share.","pos":[22124,22176]},{"content":"For example:","pos":[22177,22189]},{"pos":[22263,22304],"content":"Where <bpt id=\"p1\">*</bpt>G<ept id=\"p1\">*</ept> is the letter of the USB drive."},{"pos":[22369,22426],"content":"Step 6: Create regional images by removing language packs"},{"content":"In this step, you create a regional Windows image by removing language packs from your image while it is offline.","pos":[22429,22542]},{"content":"This image contains only the languages that are necessary for deployment in a certain region.","pos":[22543,22636]},{"content":"Important","pos":[22640,22649]},{"content":"You should not remove a language pack from an offline Windows image if there are pending online actions.","pos":[22654,22758]},{"content":"The Windows image should be a recently installed and captured image.","pos":[22759,22827]},{"content":"This will ensure that the Windows image does not have any pending online actions that require a reboot.","pos":[22828,22931]},{"content":"To remove a language pack","pos":[22938,22963]},{"content":"Locate the Windows image that you intend to remove languages from, and copy it to your technician computer.","pos":[22971,23078]},{"content":"For example:","pos":[23079,23091]},{"content":"Open the Deployment Tools command prompt with elevated permissions.","pos":[23183,23250]},{"content":"Type the following command to mount the Windows image.","pos":[23256,23310]},{"content":"Optional: Type the following command to list the packages that are installed in the offline image.","pos":[23565,23663]},{"content":"You can use <ph id=\"ph1\">`&gt; packagelist.txt`</ph> to output the list to a text file named PackageList.","pos":[23786,23870]},{"content":"Note the package identity of the language pack you want to remove.","pos":[23871,23937]},{"content":"Remove a language pack from the image.","pos":[23943,23981]},{"content":"You can remove multiple .cab files using one command-line statement.","pos":[23982,24050]},{"pos":[24056,24245],"content":"**Note**  \nYou can specify the package identity using the **/PackageName** option, or you can point to the original source of the package using the **/PackagePath** option. For example:","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"You can specify the package identity using the **/PackageName** option, or you can point to the original source of the package using the **/PackagePath** option. For example:","pos":[11,185],"nodes":[{"content":"You can specify the package identity using the <bpt id=\"p1\">**</bpt>/PackageName<ept id=\"p1\">**</ept> option, or you can point to the original source of the package using the <bpt id=\"p2\">**</bpt>/PackagePath<ept id=\"p2\">**</ept> option.","pos":[0,161]},{"content":"For example:","pos":[162,174]}]}]},{"pos":[24563,24717],"content":"For more information, see <bpt id=\"p1\">[</bpt>DISM Operating System Package Servicing Command-Line Options<ept id=\"p1\">](dism-operating-system-package-servicing-command-line-options.md)</ept>."},{"content":"If you added additional optional components to the Recovery image, remove the language-specific optional components and change the default language settings.","pos":[24723,24880]},{"content":"For example:","pos":[24881,24893]},{"content":"Optional.","pos":[25137,25146]},{"content":"If you added additional language support to the boot.wim file, remove the language specific resources and optional components from the boot.wim file.","pos":[25147,25296]},{"content":"For example:","pos":[25297,25309]},{"content":"Recreate the lang.ini file and change the default language settings by running the following command:","pos":[26160,26261]},{"content":"Optional.","pos":[26439,26448]},{"content":"If you removed languages from the boot.wim file, copy the updated lang.ini file to the boot image.","pos":[26449,26547]},{"content":"After you have updated the lang.ini file in the boot.wim, unmounts the boot.wim file.","pos":[26548,26633]},{"content":"Type the following command to commit the changes and unmount the images.","pos":[26719,26791]}],"content":"---\nauthor: Justinha\nDescription: Multilingual Windows Image Creation\nms.assetid: 5bec65d1-44b0-484c-a5b6-959f221a4290\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Multilingual Windows Image Creation\n---\n\n# Multilingual Windows Image Creation\n\n\nThis walkthrough describes how to use the Windows Assessment and Deployment Kit (Windows ADK) to create and deploy multilingual versions of Windows 10. It describes how to create a multilingual Windows image to help reduce the number of Windows images that need to be maintained for different regions. You can deploy images that are created by using this process from a network share, from a server, or from media.\n\nThis walkthrough describes how to add language packs and other update packages to an offline Windows image and Windows recovery image. You then boot Windows to audit mode and add applications and drivers. You then capture the installation to an image and use the newly captured master image for testing purposes. After you test the image, you use it to create regional images by removing unnecessary language resources. You can then deploy these regional images.\n\nThe process described in this walkthrough is primarily intended for OEMs who want to reduce the number of Windows images that they maintain. By adding language packs to an offline image, you can decrease Windows installation time and reduce the number of images that you maintain. However, because multiple language packs are added to a single image, the size of the Windows image is increased.\n\nIT Professionals who want to reduce the size of their overall image should instead use the process described in [Add Multilingual Support to a Windows Distribution](add-multilingual-support-to-a-windows-distribution.md). This process describes how to copy the lp.cab file to the Windows distribution, reducing the overall image size.\n\nIn this guide:\n\n-   [Step 1: Add language packs to a Windows image](#addlang)\n\n-   [Step 2 (optional): Add language packs to Windows Setup](#optlang)\n\n-   [Step 3: Test the Windows Installation](#test)\n\n-   [Step 4: Boot to audit mode, add applications and run sysprep](#bootaudit)\n\n-   [Step 5: Capture the image](#imagex)\n\n-   [Step 6: Create regional images by removing language packs](#removepacks)\n\n## <span id=\"Requirements\"></span><span id=\"requirements\"></span><span id=\"REQUIREMENTS\"></span>Requirements\n\n\nTo complete this walkthrough, you should have a working knowledge of common desktop deployment technologies and processes. You should also have a basic understanding of the Windows Imaging (.wim) file format. The steps in this guide assume that you use a single Windows image within the .wim file. If you want to reduce the number of images you maintain, you can use the lowest edition of Windows available in your .wim file, and then use DISM to upgrade to a higher edition of Windows. If you want to maintain multiple images, you can repeat the steps in this guide for each Windows image in the .wim file, to create multiple editions of the regional Windows image.\n\nBefore you begin, make sure you have the following items:\n\n-   Windows installation media (DVD or Windows installation files) for multiple languages. This guide uses EN-US, De-DE and FR-FR media.\n\n-   One or more language packs (**lp.cab** files).\n\n-   A technician computer that has the Windows Assessment and Deployment Kit (Windows ADK) installed.\n\n-   A test computer that you can use to install and test Windows.\n\n## <span id=\"addlang\"></span><span id=\"ADDLANG\"></span>Step 1: Add language packs to a Windows image\n\n\nIn this step, you will use Deployment Image Servicing and Management (DISM) to add language packs to a Windows image. After you add language packs, you can add update packages. The Windows image that you start with can be in any language. For example, you can start with an English (en-US) image, and add support for French (fr-FR) and German (de-DE).\n\nWhen you add language packs to the Windows image, the user is presented with a dialog box to choose their preferred language during Out-Of-Box Experience (OOBE).\n\nBy using this method, the sizes of the Windows images are larger; however, installation time is faster, and you can ensure that any updates you add to the Windows image apply to the languages installed to that image. Use this method if you want to install Windows as quickly as possible.\n\n**Important**  \nThe Windows image must be a recently installed and captured image. This ensures that the Windows image does not have any pending online actions.\n\nAlways install language packs before you install updates. If you install an update (hotfix, general distribution release \\[GDR\\], limited distribution release \\[LDR\\], or service pack \\[SP\\]) that contains language-dependent resources before you install a language pack, the language-specific changes contained in the update are not applied. Packages that have language pack dependencies can be identified by using the `Dism /Get-PackageInfo` command. In the “Custom Properties” section of the report, look for the Dependency = “Language Pack” key/value pair. If language packs are installed after an LDR or GDR package that has this attribute, the update must be reinstalled.\n\n \n\n**To add language packs to a Windows image**\n\n1.  Open an elevated Deployment Tools command prompt.\n\n2.  Type the following commands to create the following folders:\n\n    ``` syntax\n    Mkdir C:\\mount\\windows\n    Mkdir C:\\mount\\winre \n    Mkdir C:\\mount\\boot\n    Mkdir C:\\LanguagePack\\fr-fr\n    Mkdir C:\\LanguagePack\\de-de\n    Mkdir C:\\my_Distribution \n    ```\n\n3.  Copy the entire contents of the en-US Windows DVD to C:\\\\my\\_Distribution. For example:\n\n    ``` syntax\n    xcopy e:\\windows C:\\my_distribution /s /e\n    ```\n\n4.  Copy each language pack (**Lp.cab**) to the technician computer. For example:\n\n    ``` syntax\n    xcopy H:\\LPs\\Fr-FR\\lp.cab C:\\LanguagePack\\fr-fr \n    xcopy H:\\LPs\\De-DE\\lp.cab C:\\LanguagePack\\de-de\n    ```\n\n5.  Type the following command to retrieve the name or index number for the image that you want to modify:\n\n    ``` syntax\n    Dism /Get-ImageInfo /ImageFile:C:\\my_distribution\\sources\\install.wim\n    ```\n\n    Note the index or name value of the image that you want to modify.\n\n6.  Use DISM to mount the Windows image. For example:\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\my_distribution\\sources\\install.wim /Index:1 /MountDir:C:\\mount\\windows\n    ```\n\n7.  Use DISM to mount the Windows recovery environment image that exists in the Windows image. For example:\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\mount\\windows\\Windows\\System32\\recovery\\winre.wim /Index:1 /MountDir:C:\\mount\\winre\n    ```\n\n8.  Add language packs to the mounted offline Windows image. You can add multiple packages on one command line.\n\n    ``` syntax\n    Dism /Add-Package /image:C:/mount/windows /PackagePath:C:\\LanguagePack\\de-DE\\LP.cab /PackagePath:C:\\Languagepack\\fr-FR\\LP.cab \n    ```\n\n9.  Add language packs to the mounted offline Windows recovery image. The language packs that are used for the Windows recovery image are the same lp.cab files used with Windows PE. Use the language packs for Windows PE that are installed with the Windows ADK. For example:\n\n    ``` syntax\n    Dism /image:C:/mount/winre /Add-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\de-de\\lp.cab\"\n\n    Dism /image:C:/mount/winre /Add-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\lp.cab\"\n    ```\n\n    This process can take several minutes.\n\n10. (Optional) Add additional optional components and language packs to the Windows recovery image. If you want to install additional optional components to the recovery image, you must install the language-neutral cab file first, and then add the language specific cab files. For example, run the following command to add the WinPE-WinReCfg.cab optional component:\n\n    ``` syntax\n    Dism /image:C:/mount/winre /Add-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\WinPE-WinReCfg.cab\"\n\n    Dism /image:C:/mount/winre /Add-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\de-de\\WinPE-WinReCfg_de-de.cab\" \n\n    Dism /image:C:/mount/winre /Add-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-WinReCfg_fr-fr.cab\"\n    ```\n\n    We recommend adding language packs for the following optional components that are included with Windows recovery image:\n\n    -   WinPE-WinReCfg\n\n    -   WinPE-Rejuv\n\n    -   WinPE-EnhancedStorage\n\n    -   WinPE-Scripting\n\n    -   WinPE-SecureStartup\n\n    -   WinPE-SRT\n\n    -   WinPE-WDS-Tools\n\n    -   WinPE-WMI\n\n    -   WinPE-HTA\n\n11. Configure the default language settings to use in the Windows image.\n\n    ``` syntax\n    Dism /image:C:\\mount\\windows /set-allIntl:fr-fr\n    ```\n\n12. Configure the default language settings to use in the Windows recovery image.\n\n    ``` syntax\n    Dism /image:C:\\mount\\winre /set-allIntl:fr-fr\n    ```\n\n13. Recreate the lang.ini file.\n\n    ``` syntax\n    Dism /image:C:\\mount\\windows /gen-langini /distribution:C:\\my_distribution\n    ```\n\n14. Verify that the languages are installed and the correct language is configured as the default.\n\n    ``` syntax\n    Dism /image:C:\\mount\\windows /get-intl /distribution:C:\\my_distribution \n    Dism /image:C:\\mount\\winre /get-intl\n    ```\n\n    The output for the Windows image should be similar to the following:\n\n    ``` syntax\n    Reporting offline international settings.\n\n    Default system UI language : fr-FR\n    System locale : fr-FR\n    Default time zone : Pacific Standard Time\n    User locale for default user : fr-FR\n    Location : France (GEOID = 84)\n    Active keyboard(s) : 040c:0000040c\n    Keyboard layered driver : PC/AT Enhanced Keyboard (101/102-Key)\n\n    Installed language(s): de-DE\n      Type : Fully localized language.\n    Installed language(s): en-US\n      Type : Fully localized language.\n    Installed language(s): fr-FR\n      Type : Fully localized language.\n\n    Reporting distribution languages.\n\n    The default language in the distribution is:\n    en-US\n\n    The other available languages in the distribution are:\n    No languages found\n\n    The operation completed successfully.\n    ```\n\n    The output for the Windows recovery image should be similar to the following:\n\n    ``` syntax\n    Reporting offline international settings.\n\n    Default system UI language : fr-FR\n    System locale : fr-FR\n    Default time zone : Pacific Standard Time\n    User locale for default user : fr-FR\n    Location : France (GEOID = 84)\n    Active keyboard(s) : 040c:0000040c\n    Keyboard layered driver : PC/AT Enhanced Keyboard (101/102-Key)\n\n    Installed language(s): de-DE\n      Type : Fully localized language.\n    Installed language(s): en-US\n      Type : Fully localized language.\n    Installed language(s): fr-FR\n      Type : Fully localized language.\n\n    The operation completed successfully.\n    ```\n\n15. Unmount the images, committing the changes. Note that you must unmount the Windows recovery image before you unmounts and commit the Windows image.\n\n    ``` syntax\n    DISM /unmount-image /mountdir:C:\\mount\\winre /commit\n    DISM /unmount-image /mountdir:C:\\mount\\windows /commit\n    ```\n\n## <span id=\"optlang\"></span><span id=\"OPTLANG\"></span>Step 2 (optional): Add language packs to Windows Setup\n\n\nIn this step, you add multiple language support to Windows Setup. This allows an end user to run Windows Setup and select a specific language that you install. You add language packs to the default boot.wim file, and then copy language resources into your Windows distribution.\n\n**Note**  \nThis step is optional. If you complete this step, you can run Windows Setup in a language other than the language that you choose for the operating system. However, this does not cover adding font support for all languages.\n\n \n\n**To add language packs to the default boot image**\n\n1.  Open a Deployment Tools command prompt with elevated permissions.\n\n2.  Use DISM to mount index 2 of the Boot.wim file. For example,\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\my_distribution\\sources\\boot.wim /Index:2 /MountDir:C:\\mount\\boot\n    ```\n\n3.  Add Windows PE language packs and Windows Setup optional components to the mounted image for each language you want to support. For example:\n\n    ``` syntax\n    DISM /add-package /image:C:\\mount\\boot /packagepath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\lp.cab\" \n\n    DISM /add-package /image:C:\\mount\\boot /packagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\de-de\\lp.cab\"\n    ```\n\n4.  Add the Windows PE Setup optional components. For example:\n\n    ``` syntax\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\WinPE-Setup.cab\" \n\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\WinPE-Setup-client.cab\"\n    ```\n\n    **Note**  \n    These Windows Setup language packs are for the client editions of Windows only. For Windows Server, you must use winpe-setup-server .cab files.\n\n     \n\n5.  Add the Windows PE language specific optional components. For example:\n\n    ``` syntax\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-Setup_fr-fr.cab\"\n\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-Setup-client_fr-fr.cab\"\n\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\de-de\\WinPE-Setup_de-de.cab\"\n\n    DISM /add-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\de-de\\WinPE-Setup-client_de-de.cab\"\n    ```\n\n6.  In your Windows distribution, copy the language-specific Setup resources from each language specific Windows distribution to the Sources folder in your distribution share. For example, insert the Windows DVD for Fr-FR in your DVD drive (E:) and copy the Fr-FR sources folder to your Windows distribution.\n\n    ``` syntax\n    Mkdir C:\\my_distribution\\sources\\fr-fr \n    Mkdir C:\\my_distribution\\sources\\de-de\n\n    xcopy E:\\sources\\fr-fr C:\\my_distribution\\sources\\fr-fr /cherkyi \n    xcopy E:\\sources\\de-de C:\\my_distribution\\sources\\de-de /cherkyi\n    ```\n\n7.  Use DISM to mount the Windows image. For example:\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:C:\\my_distribution\\sources\\install.wim /Index:1 /MountDir:C:\\mount\\windows\n    ```\n\n8.  Get the language settings that are configured in the Windows image by using the /Get-Intl parameter. For example\n\n    ``` syntax\n    Dism /image:C:\\mount\\windows /Get-Intl\n    Dism /image:C:\\mount\\winre /Get-Intl\n    ```\n\n9.  Change the default language, locale, and other international settings by using the /set-allInlt parameter.\n\n    ``` syntax\n    Dism /image:C:\\mount\\boot /set-allIntl:fr-fr\n    ```\n\n10. Recreate the lang.ini file. The Lang.ini file must be re-created each time you add or remove language resources from your distribution, and when you add or remove language packs from your Windows image.\n\n    ``` syntax\n    Dism /image:C:\\mount\\windows /Gen-Langini /distribution:C:\\my_distribution\n    ```\n\n11. Copy the lang.ini file from the Windows distribution to the boot.wim file. The Lang.ini file used in the Boot.wim file must match the Lang.ini file for the operating-system image.\n\n    ``` syntax\n    Xcopy C:\\my_distribution\\sources\\lang.ini C:\\mount\\winre\\sources\\lang.ini\n    ```\n\n12. Use DISM to unmount the Windows boot image and commit the changes. You must also unmount the Windows image. Because none of the files have changed in the Windows image, you can discard the changes. For example,\n\n    ``` syntax\n    Dism /Unmount-image /MountDir:C:\\mount\\boot /Commit \n    Dism /Unmount-image /MountDir:C:\\mount\\Windows /Discard\n    ```\n\n## <span id=\"test\"></span><span id=\"TEST\"></span>Step 3: Test the Windows Installation\n\n\nIn this step, you install Windows, selecting a language during Windows Setup, and verifying that multiple languages are installed.\n\nTo boot a computer without an operating system, you must create bootable Windows PE media. This walkthrough provides instructions on creating Windows PE on a bootable USB drive. For additional options, see [WinPE: Create USB Bootable drive](winpe-create-usb-bootable-drive.md).\n\n**To install Windows**\n\n1.  Create a Windows PE image on your technician computer. For example:\n\n    ``` syntax\n    Copype amd64 C:\\winpe_amd64\n    ```\n\n    The following directories are created:\n\n    -   C:\\\\winpe\\_amd64\\\\media\n\n    -   C:\\\\winpe\\_amd64\\\\mount\n\n    If you need to add boot-critical drivers or other optional components to Windows PE, see [WinPE: Add packages (Optional Components Reference)](winpe-add-packages--optional-components-reference.md).\n\n2.  Insert a USB drive into the technician computer and run the following command:\n\n    ``` syntax\n    Makewinpemedia /ufd C:\\winpe_amd64 F:\n    ```\n\n    Where *F* is the drive letter of the USB drive.\n\n    Windows PE is copied to the USB drive.\n\n3.  Copy the contents of the Windows distribution to another USB drive that has sufficient free space. Depending on the size of your install.wim file, you might need to format the USB drive as NTFS to support files that are larger than 4 GB.\n\n    For example,\n\n    ``` syntax\n    Xcopy C:\\my_distribution G:\\my_distribution /cherkyi\n    ```\n\n    Where *G* is the letter of the second USB drive.\n\n4.  Insert the Windows PE USB drive into your test computer. Boot the test computer, ensuring that the Windows PE USB drive is configured to boot first. You might need to change the boot options of the computer in the firmware.\n\n5.  After the Windows PE command line prompt appears, insert the USB drive that contains your Windows distribution on the test computer.\n\n6.  Identify the drives, volumes, and drive letters on the test computer. From the Windows PE command prompt, type:\n\n    ``` syntax\n    Diskpart \n    List volume \n    ```\n\n    Identify the drive letter of the USB drive that contains your Windows distribution. This example uses “F:\\\\”. Exit diskpart.\n\n    ``` syntax\n    exit\n    ```\n\n7.  Install Windows by running Windows Setup.\n\n    ``` syntax\n    F:\\my_distribution\\setup.exe\n    ```\n\n    Windows Setup starts and you are prompted to select your language (French, German, or English). Select one of the languages and proceed with the installation. Verify that the correct language appears during installation.\n\n## <span id=\"bootaudit\"></span><span id=\"BOOTAUDIT\"></span> Step 4: Boot to audit mode, add applications and run sysprep\n\n\nIn this step, you install your Windows image on a test computer and boot it to audit mode. While the computer is running in audit mode, you add applications that must be installed online, and test the operating system. After applications are added and the computer is tested, you run the sysprep tool to prepare the image to be deployed to a computer that will ship to an end user.\n\n**To boot to audit mode**\n\n1.  Do one of the following to boot a test computer to audit mode:\n\n    -   For an attended installation, at the OOBE screen, press **CTRL+SHIFT+F3**.\n\n    -   In an unattended installation, use an answer file with the Microsoft-Windows-Deployment\\\\Reseal\\\\Mode configured to **Audit**. This setting should appear in the **oobeSystem** configuration pass.\n\n    -   Run the **sysprep /audit** command in a Command Prompt window.\n\n    For more information, see [Understanding Audit Mode](http://go.microsoft.com/fwlink/?LinkId=148031).\n\n2.  Install Microsoft Office or other applications, and test the computer. For more information, see [Customize Windows in Audit Mode](http://go.microsoft.com/fwlink/?LinkId=148032).\n\n3.  Prepare the computer for deployment by doing one of the following:\n\n    -   From audit mode, run the **Sysprep** command with the **/oobe /shutdown /generalize** options.\n\n    -   In unattended installations, configure the Microsoft-Windows-Deployment\\\\Reseal\\\\Mode setting to **oobe**. For more information on this setting, see the Windows Unattended Setup Reference (Unattend.chm).\n\n    For more information, see [Sysprep Technical Reference](http://go.microsoft.com/fwlink/?LinkId=148028).\n\n    After Sysprep is finished, the test computer shuts down.\n\n## <span id=\"imagex\"></span><span id=\"IMAGEX\"></span>Step 5: Capture the Windows installation\n\n\nIn this step, you capture your Windows image from the test computer and store it for use as your master image.\n\n**To capture the image**\n\n1.  Start your test computer by booting to Windows PE.\n\n2.  Identify the drives, volumes, and drive letters on the test computer. From the Windows PE command prompt, type:\n\n    ``` syntax\n    Diskpart \n    List volume \n    ```\n\n    Identify the drive letter of the USB drive that contains your Windows distribution. Exit diskpart.\n\n    ``` syntax\n    exit\n    ```\n\n3.  At the Windows PE command prompt, capture the Windows image. This example uses E:\\\\ as the location of the Windows installation. For example:\n\n    ``` syntax\n    dism /Capture-Image /CaptureDir:E:\\ /ImageFile:E:\\MyInstall.wim /Name:\"Fabrikam\"\n    ```\n\n4.  Copy the image to a USB drive or to a network share. For example:\n\n    ``` syntax\n    xcopy E:\\MyInstall.wim G:\\MyInstall.wim\n    ```\n\n    Where *G* is the letter of the USB drive.\n\n## <span id=\"removepacks\"></span><span id=\"REMOVEPACKS\"></span>Step 6: Create regional images by removing language packs\n\n\nIn this step, you create a regional Windows image by removing language packs from your image while it is offline. This image contains only the languages that are necessary for deployment in a certain region.\n\n**Important**  \nYou should not remove a language pack from an offline Windows image if there are pending online actions. The Windows image should be a recently installed and captured image. This will ensure that the Windows image does not have any pending online actions that require a reboot.\n\n \n\n**To remove a language pack**\n\n1.  Locate the Windows image that you intend to remove languages from, and copy it to your technician computer. For example:\n\n    ``` syntax\n    xcopy F:\\sources\\MyInstall.wim C:\\my_images\\MyInstall.wim\n    ```\n\n2.  Open the Deployment Tools command prompt with elevated permissions.\n\n3.  Type the following command to mount the Windows image.\n\n    ``` syntax\n    Dism /mount-image /ImageFile:C:\\my_images\\MyInstall.wim /Name:\"Fabrikam\" /MountDir:C:\\mount\\windows \n    Dism /Mount-Image /ImageFile:C:\\mount\\windows\\Windows\\System32\\recovery\\winre.wim /Index:1 /MountDir:C:\\mount\\winre\n    ```\n\n4.  Optional: Type the following command to list the packages that are installed in the offline image.\n\n    ``` syntax\n    Dism /Image:C:\\mount\\windows /Get-Packages \n    Dism /Image:C:\\mount\\winre /Get-Packages\n    ```\n\n    You can use `> packagelist.txt` to output the list to a text file named PackageList. Note the package identity of the language pack you want to remove.\n\n5.  Remove a language pack from the image. You can remove multiple .cab files using one command-line statement.\n\n    **Note**  \n    You can specify the package identity using the **/PackageName** option, or you can point to the original source of the package using the **/PackagePath** option. For example:\n\n    ``` syntax\n    Dism /Image:C:\\mount\\windows /Remove-Package /PackagePath:C:\\LanguagePack\\fr-fr\\LP.cab \n    Dism /Image:C:\\mount\\winre /Remove-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\lp.cab\"\n    ```\n\n    For more information, see [DISM Operating System Package Servicing Command-Line Options](dism-operating-system-package-servicing-command-line-options.md).\n\n6.  If you added additional optional components to the Recovery image, remove the language-specific optional components and change the default language settings. For example:\n\n    ``` syntax\n    Dism /image:C:/mount/winre /Remove-Package /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-WinReCfg_fr-fr.cab\"\n    ```\n\n7.  Optional. If you added additional language support to the boot.wim file, remove the language specific resources and optional components from the boot.wim file. For example:\n\n    ``` syntax\n    Dism /mount-image /ImageFile:C:\\my_distribution\\boot.wim /index:2 /MountDir:C:\\mount\\boot  \n\n    Dism /remove-package /image:C:\\mount\\boot /packagepath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\lp.cab\" \n\n    Dism /remove-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-Setup_fr-fr.cab\"\n\n    Dism /remove-package /image:C:\\mount\\boot /PackagePath:\"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\fr-fr\\WinPE-Setup-client_fr-fr.cab\" \n\n    Dism /image:C:\\mount\\boot /set-allIntl:de-de\n\n    rmdir C:\\my_distribution\\sources\\fr-fr /s\n\n    ```\n\n8.  Recreate the lang.ini file and change the default language settings by running the following command:\n\n    ``` syntax\n    Dism /image:C:\\mount\\winre /Set-AllIntl:de-de\n    Dism /image:C:\\mount/windows /Gen-LangINI /distribution:C:\\my_distribution /Set-AllIntl:de-DE\n    ```\n\n9.  Optional. If you removed languages from the boot.wim file, copy the updated lang.ini file to the boot image. After you have updated the lang.ini file in the boot.wim, unmounts the boot.wim file.\n\n    ``` syntax\n    Dism /unmount-image /MountDir:C:\\mount\\boot /Commit\n    ```\n\n10. Type the following command to commit the changes and unmount the images.\n\n    ``` syntax\n    Dism /unmount-image /MountDir:C:\\mount\\winre /Commit \n    Dism /unmount-image /MountDir:C:\\mount\\windows /Commit\n    ```\n\n \n\n \n\n\n\n\n\n"}