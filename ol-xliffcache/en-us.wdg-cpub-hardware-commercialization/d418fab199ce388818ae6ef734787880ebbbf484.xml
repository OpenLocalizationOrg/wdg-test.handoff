{"nodes":[{"content":"Develop MMOS test applications","pos":[34,64]},{"content":"Develop MMOS test applications","pos":[171,201]},{"content":"Develop MMOS test applications","pos":[209,239]},{"content":"Developing user-mode tests in MMOS is very similar to developing user-mode applications.","pos":[242,330]},{"pos":[464,488],"content":"Test development in MMOS"},{"content":"Use the following steps to create, deploy, and test a MMOS test application.","pos":[491,567]},{"content":"Create an app.","pos":[573,587]},{"content":"Add code to test the desired component and display or send those results as desired.","pos":[593,677]},{"content":"For example, this sample code can be used to display a console message in MMOS.","pos":[678,757]},{"content":"Build the test application in Visual Studio.","pos":[1113,1157]},{"content":"Locate the binaries generated when you built the app.","pos":[1163,1216]},{"content":"Typically they are in a subdirectory of the projects folder, such as <bpt id=\"p1\">*</bpt><ph id=\"ph1\">\\\\</ph>MyProject<ph id=\"ph2\">\\\\</ph>arm<ph id=\"ph3\">\\\\</ph>debug<ph id=\"ph4\">\\\\</ph><ept id=\"p1\">*</ept>.","pos":[1217,1314]},{"content":"Sign the executable by using the sign.cmd script in the “%WPDKCONTENTROOT%<ph id=\"ph1\">\\\\</ph>Tools<ph id=\"ph2\">\\\\</ph>bin<ph id=\"ph3\">\\\\</ph>i386” folder, as shown in the example below.","pos":[1320,1452]},{"content":"To test your app, copy it to the device in the C:<ph id=\"ph1\">\\\\</ph>Data<ph id=\"ph2\">\\\\</ph>test directory by using FTP and run it via Telnet.","pos":[1521,1628]},{"content":"For more info, see <bpt id=\"p1\">[</bpt>Deploy and test a user-mode test application in MMOS<ept id=\"p1\">](deploy-and-test-a-user-mode-test-application-in-mmos.md)</ept>.","pos":[1629,1760]},{"pos":[1873,1890],"content":"Libraries in MMOS"},{"content":"Adding a lib in MMOS is similar to adding a lib in the production OS.","pos":[1893,1962]},{"content":"Currently, this default lib location for the kit is configured in Visual Studio.","pos":[1963,2043]},{"content":"To add a lib in Visual Studio, select <bpt id=\"p1\">**</bpt>Project<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Configuration Properties<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>VC++ Directories<ept id=\"p4\">**</ept> <ph id=\"ph4\">&amp;gt;</ph> <bpt id=\"p5\">**</bpt>Include Directories<ept id=\"p5\">**</ept>.","pos":[2156,2315]},{"content":"To use the MMOS libraries, append the following directory to the path.","pos":[2316,2386]},{"content":"Add the arm directory.","pos":[2435,2457]},{"content":"In Visual Studio, select <bpt id=\"p1\">**</bpt>Project<ept id=\"p1\">**</ept> <ph id=\"ph1\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Configuration Properties<ept id=\"p3\">**</ept> <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p4\">**</bpt>Linker<ept id=\"p4\">**</ept> <ph id=\"ph4\">&amp;gt;</ph> <bpt id=\"p5\">**</bpt>General<ept id=\"p5\">**</ept> <ph id=\"ph5\">&amp;gt;</ph> <bpt id=\"p6\">**</bpt>Additional Library Directories<ept id=\"p6\">**</ept>.","pos":[2458,2622]},{"content":"To use the MMOS libraries, append the following directories to the path.","pos":[2623,2695]},{"pos":[2857,2873],"content":"Security in MMOS"},{"content":"In development environments, user-mode test binaries can be test signed (not production signed).","pos":[2876,2972]},{"content":"Use the process described in <bpt id=\"p1\">[</bpt>Sign binaries and packages<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/hardware/dn789217)</ept> to test sign the binaries.","pos":[2973,3119]},{"content":"If the test binaries are not signed and code integrity checking is active as it normally is, you will receive an error message similar to the following in the debug window.","pos":[3121,3293]}],"content":"---\nauthor: kpacquer\nDescription: Develop MMOS test applications\nms.assetid: 1149e3d6-79d9-443e-9561-c030069eb79a\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Develop MMOS test applications\n---\n\n# Develop MMOS test applications\n\n\nDeveloping user-mode tests in MMOS is very similar to developing user-mode applications.\n\n## <span id=\"Test_development_in_MMOS\"></span><span id=\"test_development_in_mmos\"></span><span id=\"TEST_DEVELOPMENT_IN_MMOS\"></span>Test development in MMOS\n\n\nUse the following steps to create, deploy, and test a MMOS test application.\n\n1.  Create an app.\n\n2.  Add code to test the desired component and display or send those results as desired. For example, this sample code can be used to display a console message in MMOS.\n\n    ``` syntax\n#include <stdio.h>\n#include <Windows.h>\n\n    int main()\n    {\n        int i = 0;\n        for(;;)\n        {    \n            wprintf(L\"Test\");\n            Sleep(500);\n            if (i == 12)\n            {\n                wprintf(L\"Done\");\n                break;\n            }\n            i++;\n        }\n        return 0;\n    }\n    ```\n\n3.  Build the test application in Visual Studio.\n\n4.  Locate the binaries generated when you built the app. Typically they are in a subdirectory of the projects folder, such as *\\\\MyProject\\\\arm\\\\debug\\\\*.\n\n5.  Sign the executable by using the sign.cmd script in the “%WPDKCONTENTROOT%\\\\Tools\\\\bin\\\\i386” folder, as shown in the example below.\n\n    ``` syntax\n    sign.cmd ApplicationForDrivers.exe\n    ```\n\n6.  To test your app, copy it to the device in the C:\\\\Data\\\\test directory by using FTP and run it via Telnet. For more info, see [Deploy and test a user-mode test application in MMOS](deploy-and-test-a-user-mode-test-application-in-mmos.md).\n\n## <span id=\"Libraries_in_MMOS\"></span><span id=\"libraries_in_mmos\"></span><span id=\"LIBRARIES_IN_MMOS\"></span>Libraries in MMOS\n\n\nAdding a lib in MMOS is similar to adding a lib in the production OS. Currently, this default lib location for the kit is configured in Visual Studio.\n\n``` syntax\n$(WPDKInstallDir)lib\\$(KitOs)\\wp_um\\$(Platform)\n$(WPDKInstallDir)Tools\\WPE\\CRT\\lib\\$(Platform)\n```\n\nTo add a lib in Visual Studio, select **Project** &gt; **Properties** &gt; **Configuration Properties** &gt; **VC++ Directories** &gt; **Include Directories**. To use the MMOS libraries, append the following directory to the path.\n\n``` syntax\n$(WPDKContentRoot)include\\mmos\n```\n\nAdd the arm directory. In Visual Studio, select **Project** &gt; **Properties** &gt; **Configuration Properties** &gt; **Linker** &gt; **General** &gt; **Additional Library Directories**. To use the MMOS libraries, append the following directories to the path.\n\n``` syntax\n$(WPDKContentRoot)lib\\win8\\mmos\\arm\n```\n\n## <span id=\"Security_in_MMOS\"></span><span id=\"security_in_mmos\"></span><span id=\"SECURITY_IN_MMOS\"></span>Security in MMOS\n\n\nIn development environments, user-mode test binaries can be test signed (not production signed). Use the process described in [Sign binaries and packages](https://msdn.microsoft.com/library/windows/hardware/dn789217) to test sign the binaries.\n\nIf the test binaries are not signed and code integrity checking is active as it normally is, you will receive an error message similar to the following in the debug window.\n\n``` syntax\n* This is not a failure in CI, but a problem with the failing binary.\n* Please contact the binary owner for getting the binary correctly signed.\n```\n\n \n\n \n\n\n\n\n\n"}