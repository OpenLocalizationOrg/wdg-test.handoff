{"nodes":[{"content":"UpdateHeapTrace","pos":[11,26]},{"content":"UpdateHeapTrace","pos":[40,55]},{"content":"UpdateHeapTrace","pos":[244,259]},{"content":"Some information relates to pre-released product which may be substantially modified before it's commercially released.","pos":[264,383]},{"content":"Microsoft makes no warranties, express or implied, with respect to the information provided here.","pos":[384,481]},{"content":"This function updates an existing heap tracing session with a new set of PIDs, stackwalking events, or other ETW session changes.","pos":[485,614]},{"content":"Parameters","pos":[957,967]},{"content":"<bpt id=\"p1\">*</bpt>TraceHandle<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>out","pos":[1008,1027]},{"content":"Stores a handle to an event tracing session.","pos":[1032,1076]},{"content":"This parameter is set to zero if the handle is not valid.","pos":[1077,1134]},{"content":"This parameter should not be compared to INVALID<ph id=\"ph1\">\\_</ph>HANDLE<ph id=\"ph2\">\\_</ph>VALUE.","pos":[1135,1199]},{"content":"Do not use this handle if the function fails.","pos":[1200,1245]},{"content":"<bpt id=\"p1\">*</bpt>Properties<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>in, out","pos":[1288,1310]},{"content":"A pointer to an <bpt id=\"p1\">[</bpt>EVENT<ph id=\"ph1\">\\_</ph>TRACE<ph id=\"ph2\">\\_</ph>PROPERTIES<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/aa363784.aspx)</ept> structure with updated properties for the session.","pos":[1315,1474]},{"content":"Refer to the <bpt id=\"p1\">[</bpt>ControlTrace<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/desktop/aa363696.aspx)</ept> function with ControlCode EVENT<ph id=\"ph1\">\\_</ph>TRACE<ph id=\"ph2\">\\_</ph>CONTROL<ph id=\"ph3\">\\_</ph>UPDATE for details about which members of this structure can be specified.","pos":[1475,1692]},{"content":"<bpt id=\"p1\">*</bpt>wszSessionName<ept id=\"p1\">*</ept><ph id=\"ph1\">\\[</ph>in","pos":[1733,1753]},{"content":"The name of the heap tracing session to update.","pos":[1758,1805]},{"content":"This should be the same name that was passed to StartHeapTrace.","pos":[1806,1869]},{"content":"<bpt id=\"p1\">*</bpt>Pids<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>in","pos":[1901,1912]},{"content":"An array of process IDs to enable heap tracing on.","pos":[1917,1967]},{"content":"<bpt id=\"p1\">*</bpt>cPids<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>in, out","pos":[2005,2022]},{"content":"The size of the Pids array.","pos":[2027,2054]},{"content":"<bpt id=\"p1\">*</bpt>StackTracingEventIds<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>in","pos":[2102,2129]},{"content":"An array of <bpt id=\"p1\">[</bpt>STACK<ph id=\"ph1\">\\_</ph>TRACING<ph id=\"ph2\">\\_</ph>EVENT<ph id=\"ph3\">\\_</ph>ID<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/hardware/dn631805.aspx)</ept> structures specifying which heap events stack walking should be enabled for.","pos":[2134,2317]},{"content":"Can be NULL.","pos":[2318,2330]},{"content":"<bpt id=\"p1\">*</bpt>cStackTracingEventIds<ept id=\"p1\">*</ept> <ph id=\"ph1\">\\[</ph>in","pos":[2379,2407]},{"content":"The size of the StackTracingEventIds array.","pos":[2412,2455]},{"content":"Return Value","pos":[2460,2472]},{"content":"ERROR<ph id=\"ph1\">\\_</ph>SUCCESS indicates success.","pos":[2475,2508]},{"content":"Possible error values are described in the following table.","pos":[2510,2569]},{"content":"Error Value","pos":[2674,2685]},{"content":"Description","pos":[2695,2706]},{"content":"ERROR_ALREADY_EXISTS","pos":[2759,2779]},{"content":"Only a single instance of the kernel logger runs on the system.","pos":[2796,2859]},{"content":"If this function attempts to start after another component has started kernel logging, this error is possibly returned.","pos":[2860,2979]},{"content":"ERROR_INVALID_FLAGS","pos":[3020,3039]},{"content":"Possibly indicates that there are invalid trace flags in <ph id=\"ph1\">&lt;strong&gt;</ph>Properties.EnableFlags<ph id=\"ph2\">&lt;/strong&gt;</ph>.","pos":[3056,3153]},{"content":"ERROR_OUT_OF_MEMORY","pos":[3193,3212]},{"content":"Possibly indicates failure to allocate memory for EVENT_TRACE_PROPERTIES.","pos":[3229,3302]},{"content":"If the function fails for a reason other than those listed, a system error code is returned.","pos":[3340,3432]},{"content":"Remarks","pos":[3437,3444]},{"content":"None","pos":[3447,3451]},{"content":"Related topics","pos":[3456,3470]},{"content":"Functions","pos":[3474,3483]},{"content":"StartHeapTrace","pos":[3505,3519]}],"content":"---\ntitle: UpdateHeapTrace\ndescription: UpdateHeapTrace\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 5cbff080-bdaa-412d-8412-22013f2717fb\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# UpdateHeapTrace\n\n\n\\[Some information relates to pre-released product which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.\\]\n\nThis function updates an existing heap tracing session with a new set of PIDs, stackwalking events, or other ETW session changes.\n\n``` syntax\nULONG\nWINAPI\nUpdateHeapTrace(\n    _Inout_ PEVENT_TRACE_PROPERTIES Properties,\n    _In_z_ LPCWSTR wszSessionName,\n    _In_reads_opt_(cPids) const ULONG Pids[],\n    _In_  ULONG cPids,\n    _In_reads_opt_(cStackTracingEventIds) const STACK_TRACING_EVENT_ID StackTracingEventIds[],\n    _In_  ULONG cStackTracingEventIds\n    );\n```\n\n## Parameters\n\n\n<a href=\"\" id=\"tracehandle--out-\"></a>*TraceHandle* \\[out\\]  \nStores a handle to an event tracing session. This parameter is set to zero if the handle is not valid. This parameter should not be compared to INVALID\\_HANDLE\\_VALUE. Do not use this handle if the function fails.\n\n<a href=\"\" id=\"properties--in--out-\"></a>*Properties* \\[in, out\\]  \nA pointer to an [EVENT\\_TRACE\\_PROPERTIES](https://msdn.microsoft.com/library/windows/desktop/aa363784.aspx) structure with updated properties for the session. Refer to the [ControlTrace](https://msdn.microsoft.com/library/windows/desktop/aa363696.aspx) function with ControlCode EVENT\\_TRACE\\_CONTROL\\_UPDATE for details about which members of this structure can be specified.\n\n<a href=\"\" id=\"wszsessionname-in-\"></a>*wszSessionName*\\[in\\]  \nThe name of the heap tracing session to update. This should be the same name that was passed to StartHeapTrace.\n\n<a href=\"\" id=\"pids--in-\"></a>*Pids* \\[in\\]  \nAn array of process IDs to enable heap tracing on.\n\n<a href=\"\" id=\"cpids--in--out-\"></a>*cPids* \\[in, out\\]  \nThe size of the Pids array.\n\n<a href=\"\" id=\"stacktracingeventids--in-\"></a>*StackTracingEventIds* \\[in\\]  \nAn array of [STACK\\_TRACING\\_EVENT\\_ID](https://msdn.microsoft.com/library/windows/hardware/dn631805.aspx) structures specifying which heap events stack walking should be enabled for. Can be NULL.\n\n<a href=\"\" id=\"cstacktracingeventids--in-\"></a>*cStackTracingEventIds* \\[in\\]  \nThe size of the StackTracingEventIds array.\n\n## Return Value\n\n\nERROR\\_SUCCESS indicates success.\n\nPossible error values are described in the following table.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>Error Value</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td><p>ERROR_ALREADY_EXISTS</p></td>\n<td><p>Only a single instance of the kernel logger runs on the system. If this function attempts to start after another component has started kernel logging, this error is possibly returned.</p></td>\n</tr>\n<tr class=\"even\">\n<td><p>ERROR_INVALID_FLAGS</p></td>\n<td><p>Possibly indicates that there are invalid trace flags in <strong>Properties.EnableFlags</strong>.</p></td>\n</tr>\n<tr class=\"odd\">\n<td><p>ERROR_OUT_OF_MEMORY</p></td>\n<td><p>Possibly indicates failure to allocate memory for EVENT_TRACE_PROPERTIES.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\nIf the function fails for a reason other than those listed, a system error code is returned.\n\n## Remarks\n\n\nNone\n\n## Related topics\n\n\n[Functions](functions-wpa.md)\n\n[StartHeapTrace](startheaptrace.md)\n\n \n\n \n\n\n\n\n\n\n\n"}