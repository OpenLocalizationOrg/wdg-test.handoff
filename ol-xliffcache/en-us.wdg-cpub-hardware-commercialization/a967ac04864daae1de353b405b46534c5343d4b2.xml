{"nodes":[{"content":"You can add manufacturing profiles to your device by using a package.","pos":[35,104]},{"content":"Create a custom manufacturing profile package","pos":[212,257]},{"content":"Create a custom manufacturing profile package","pos":[265,310]},{"content":"You can add manufacturing profiles to your device by using a package.","pos":[313,382]},{"content":"For more info on creating packages, see <bpt id=\"p1\">[</bpt>Creating packages<ept id=\"p1\">](https://msdn.microsoft.com/library/dn756642)</ept> .","pos":[383,489]},{"content":"In some cases, you may need to create a custom profile.","pos":[490,545]},{"content":"For example, perhaps you want to fine tune what Microsoft services are running for performance or functionality reasons or perhaps you want to have more than one manufacturing profile.","pos":[546,730]},{"content":"When creating new custom profiles, you should start by copying the provided default profile and customizing it to suit your needs.","pos":[731,861]},{"content":"For example, if you wanted to create a new custom profile for factory testing that is a copy of the default profile but also starts your factory test service, it may look like this:","pos":[863,1044]},{"content":"You can then create the package by using pkggen.exe (included with the Windows Driver Kit):","pos":[6805,6896]}],"content":"---\nauthor: kpacquer\nDescription: 'You can add manufacturing profiles to your device by using a package.'\nms.assetid: 9925eedf-a49e-4545-b071-72d10925f080\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Create a custom manufacturing profile package\n---\n\n# Create a custom manufacturing profile package\n\n\nYou can add manufacturing profiles to your device by using a package. For more info on creating packages, see [Creating packages](https://msdn.microsoft.com/library/dn756642) . In some cases, you may need to create a custom profile. For example, perhaps you want to fine tune what Microsoft services are running for performance or functionality reasons or perhaps you want to have more than one manufacturing profile. When creating new custom profiles, you should start by copying the provided default profile and customizing it to suit your needs.\n\nFor example, if you wanted to create a new custom profile for factory testing that is a copy of the default profile but also starts your factory test service, it may look like this:\n\n``` syntax\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<Package xmlns=\"urn:Microsoft.WindowsPhone/PackageSchema.v8.00\"\n        Owner=\"Contoso\"\n        Component=\"MfgMode\"\n        SubComponent=\"ManufacturingModeServices\"\n        ReleaseType=\"Production\"\n        OwnerType=\"OEM\">\n\n    <Macros>\n      <Macro Id=\"MfgMode\" Value=\"$(hklm.control)\\ManufacturingMode\" />\n      <Macro Id=\"CustomProfileServices\" Value=\"$(MfgMode)\\CustomProfile\\Services\" />\n    </Macros>\n\n    <Components>\n        <OSComponent>\n         <!-- Overrides copied from default profile -->\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\*\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000003\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\AccountProvSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>              \n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\adss\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\AudioSrv\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\BFE\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\BrokerInfrastructure\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\cellusermodeinterconnect\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\DcomLaunch\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\DHCP\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\Fusion\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\KeepWifiOnSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000003\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\LaunchAppSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\MPSSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\NETACT\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\nsi\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\Power\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\ProfSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\RpcEptMapper\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\RpcSs\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\SamSs\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\SecMgr\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\SirepSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000004\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\SystemEventsBroker\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\TestSirepSvc\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n         <!-- Custom overrides for OEM services -->\n          <RegKeys>\n            <RegKey KeyName=\"$(CustomProfileServices)\\OEMFactoryTestService\">\n              <RegValue Name=\"Start\" Type=\"REG_DWORD\" Value=\"00000002\" />\n            </RegKey>\n          </RegKeys>\n        </OSComponent>\n    </Components>\n</Package>\n```\n\nYou can then create the package by using pkggen.exe (included with the Windows Driver Kit):\n\n``` syntax\npkggen.exe example.pkg.xml /config:pkggen.cfg.xml\n```\n\n \n\n \n\n\n\n\n\n"}