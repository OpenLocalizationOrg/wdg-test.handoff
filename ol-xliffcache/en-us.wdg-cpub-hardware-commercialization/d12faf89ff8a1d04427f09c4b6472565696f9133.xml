{"nodes":[{"content":"WinPE: Mount and Customize","pos":[35,61]},{"content":"WinPE: Mount and Customize","pos":[170,196]},{"content":"WinPE: Mount and Customize","pos":[205,231]},{"content":"Add drivers to Windows Preinstallation Environment (WinPE), such as graphics drivers or network drivers.","pos":[234,338]},{"content":"Common customizations:","pos":[340,362]},{"content":"<bpt id=\"p1\">[</bpt>Add device drivers (.inf files)<ept id=\"p1\">](winpe-add-drivers.md)</ept>.","pos":[368,424]},{"content":"You can customize device drivers, such as drivers that support network cards or storage devices.","pos":[425,521]},{"pos":[526,754],"content":"<bpt id=\"p1\">[</bpt>Add packages (.cab files, also known as WinPE optional components)<ept id=\"p1\">](winpe-add-packages--optional-components-reference.md)</ept> Add languages, hotfixes, or support for features like PowerShell and the HTML Application Language (HTA)."},{"content":"<bpt id=\"p1\">[</bpt>Add a language<ept id=\"p1\">](winpe-add-packages--optional-components-reference.md)</ept>.","pos":[759,830]},{"content":"To run WinPE in multiple languages, add the packages (optional components) for those languages.","pos":[831,926]},{"content":"Add files and folders.","pos":[931,953]},{"content":"These can be added directly to the WinPE image.","pos":[954,1001]},{"content":"<bpt id=\"p1\">[</bpt>Add a newer version of DISM<ept id=\"p1\">](copy-dism-to-another-computer.md)</ept>.","pos":[1006,1070]},{"content":"When new versions of Windows require features from the latest version of DISM, you can add DISM directly into WinPE.","pos":[1071,1187]},{"content":"<bpt id=\"p1\">[</bpt>Add a startup script<ept id=\"p1\">](#addstartupscript)</ept>.","pos":[1192,1234]},{"content":"Examples include setting up a network connection, or adding a custom application, such as diagnostic software.","pos":[1235,1345]},{"content":"<bpt id=\"p1\">[</bpt>Add an app<ept id=\"p1\">](#addapp)</ept>.","pos":[1350,1372]},{"content":"Note, WinPE only supports legacy apps.","pos":[1373,1411]},{"content":"<bpt id=\"p1\">[</bpt>Add temporary storage (scratch space)<ept id=\"p1\">](#scratchspace)</ept>.","pos":[1416,1471]},{"content":"If your application requires temporary file storage, you can reserve extra memory space in RAM.","pos":[1472,1567]},{"content":"Replace the background image","pos":[1573,1601]},{"content":"Add answer file settings","pos":[1623,1647]},{"content":"Get the Windows Assessment and Deployment Kit with Windows PE tools","pos":[1676,1743]},{"pos":[1751,1924],"content":"Install the <bpt id=\"p1\">[</bpt>Windows Assessment and Deployment Kit (Windows ADK) Technical Reference<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=526803)</ept>, including the <bpt id=\"p2\">**</bpt>Windows PE<ept id=\"p2\">**</ept> feature."},{"content":"Create a set of either 32-bit or 64-bit Windows PE files","pos":[1928,1984]},{"content":"Click <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, and type <bpt id=\"p2\">**</bpt>deployment<ept id=\"p2\">**</ept>.","pos":[1992,2033]},{"content":"Right-click <bpt id=\"p1\">**</bpt>Deployment and Imaging Tools Environment<ept id=\"p1\">**</ept> and then select <bpt id=\"p2\">**</bpt>Run as administrator<ept id=\"p2\">**</ept>.","pos":[2034,2132]},{"pos":[2138,2241],"content":"In the <bpt id=\"p1\">**</bpt>Deployment Tools and Imaging Environment<ept id=\"p1\">**</ept>, copy the WinPE files for the PCs you want to boot."},{"content":"The 64-bit version can boot 64-bit UEFI and 64-bit BIOS PCs.","pos":[2251,2311]},{"content":"The 32-bit version of WinPE can boot 32-bit UEFI, 32-bit BIOS, and 64-bit BIOS PCs.","pos":[2389,2472]},{"content":"Mount the Windows PE boot image","pos":[2540,2571]},{"content":"Mount the WinPE image.","pos":[2579,2601]},{"pos":[2856,2874],"content":"Add customizations"},{"content":"Add device drivers (.inf files)","pos":[2879,2910]},{"content":"Add the device driver to the WinPE image.","pos":[2918,2959]},{"content":"Although you can add multiple drivers to an image by using one command, it is often easier to troubleshoot problems by adding each driver package individually.","pos":[3077,3236]},{"pos":[3242,3331],"content":"To learn more about drivers, see <bpt id=\"p1\">[</bpt>Add device drivers (.inf files)<ept id=\"p1\">](winpe-add-drivers.md)</ept>."},{"content":"Add packages/languages/optional components/.cab files","pos":[3335,3388]},{"content":"Add the optional component into WinPE.","pos":[3396,3434]},{"content":"To add optional components, you need to add both the optional component and its associated language packs.","pos":[3435,3541]},{"pos":[3978,4127],"content":"To learn more about adding packages, see <bpt id=\"p1\">[</bpt>WinPE: Add packages (Optional Components Reference)<ept id=\"p1\">](winpe-add-packages--optional-components-reference.md)</ept>."},{"content":"Add files and folders","pos":[4131,4152]},{"content":"Copy files and folders into the C:<ph id=\"ph1\">\\\\</ph>WinPE<ph id=\"ph2\">\\_</ph>amd64<ph id=\"ph3\">\\\\</ph>mount folder.","pos":[4160,4223]},{"content":"These files will show up in the X:<ph id=\"ph1\">\\\\</ph> folder in WinPE.","pos":[4224,4277]},{"content":"Don't add too many files, as these will slow down WinPE and can fill up the available memory in the default RAMDisk environment.","pos":[4283,4411]},{"pos":[4521,4541],"content":"Add a startup script"},{"content":"Modify the Startnet.cmd script to include your customized commands.","pos":[4549,4616]},{"content":"This file is located at <ph id=\"ph1\">`C:\\WinPE_amd64\\mount\\Windows\\System32\\Startnet.cmd`</ph>.","pos":[4617,4694]},{"content":"You can also call other batch files or command line scripts from this file.","pos":[4700,4775]},{"content":"For Plug and Play or networking support, make sure that you include a call to <bpt id=\"p1\">**</bpt>wpeinit<ept id=\"p1\">**</ept> in your customized Startnet.cmd script.","pos":[4781,4910]},{"content":"For more info, see <bpt id=\"p1\">[</bpt>Wpeinit and Startnet.cmd: Using WinPE Startup Scripts<ept id=\"p1\">](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)</ept>.","pos":[4911,5042]},{"pos":[5122,5132],"content":"Add an app"},{"content":"Create an app directory inside the mounted WinPE image.","pos":[5140,5195]},{"content":"Copy the necessary app files to the local WinPE directory.","pos":[5271,5329]},{"content":"Test the app later by booting WinPE and running the application from the X: directory.","pos":[5419,5505]},{"content":"If your app requires temporary storage, or if WinPE becomes unresponsive when it runs an app, you may need to increase the amount of temporary storage (scratch space) allocated to WinPE.","pos":[5579,5765]},{"content":"To automatically launch a shell or application that runs when WinPE starts, add the path location to the Winpeshl.ini file.","pos":[5771,5894]},{"content":"For more info, see <bpt id=\"p1\">[</bpt>Winpeshl.ini Reference: Launching an app when WinPE starts<ept id=\"p1\">](winpeshlini-reference-launching-an-app-when-winpe-starts.md)</ept>.","pos":[5895,6036]},{"pos":[6134,6171],"content":"Add temporary storage (scratch space)"},{"content":"WinPE reserves memory on the X: drive to unpack the WinPE files, plus additional temporary file storage, known as scratch space, that can be used by your applications.","pos":[6179,6346]},{"content":"By default, this is 512MB for PCs with more than 1GB of RAM, otherwise the default is 32MB.","pos":[6347,6438]},{"content":"Valid values are 32, 64, 128, 256, or 512.","pos":[6439,6481]},{"pos":[6664,6692],"content":"Replace the background image"},{"content":"If you've got multiple versions of WinPE, you can set the background image so you can instantly tell which version of WinPE is running.","pos":[6700,6835]},{"content":"Change the security permissions of the WinPE background image file (<ph id=\"ph1\">`\\windows\\system32\\winpe.jpg`</ph>).","pos":[6841,6940]},{"content":"This allows you to modify or delete the file.","pos":[6941,6986]},{"pos":[6996,7069],"content":"In Windows Explorer, navigate to <ph id=\"ph1\">`C:\\WinPE_amd64\\mount\\windows\\system32`</ph>."},{"pos":[7079,7217],"content":"Right-click the <ph id=\"ph1\">`C:\\WinPE_amd64\\mount\\windows\\system32\\winpe.jpg`</ph> file, and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Security<ept id=\"p2\">**</ept> tab <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Advanced<ept id=\"p3\">**</ept>."},{"content":"Next to Owner, select <bpt id=\"p1\">**</bpt>Change<ept id=\"p1\">**</ept>.","pos":[7227,7260]},{"content":"Change the owner to <bpt id=\"p1\">**</bpt>Administrators<ept id=\"p1\">**</ept>.","pos":[7261,7300]},{"content":"Apply the changes, and exit the Properties window to save changes.","pos":[7310,7376]},{"pos":[7386,7524],"content":"Right-click the <ph id=\"ph1\">`C:\\WinPE_amd64\\mount\\windows\\system32\\winpe.jpg`</ph> file, and select <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept> <ph id=\"ph2\">&amp;gt;</ph> <bpt id=\"p2\">**</bpt>Security<ept id=\"p2\">**</ept> tab <ph id=\"ph3\">&amp;gt;</ph> <bpt id=\"p3\">**</bpt>Advanced<ept id=\"p3\">**</ept>."},{"pos":[7534,7601],"content":"Modify the permissions for <bpt id=\"p1\">**</bpt>Administrators<ept id=\"p1\">**</ept> to allow full access."},{"content":"Apply the changes, and exit the Properties window to save changes.","pos":[7611,7677]},{"pos":[7683,7737],"content":"Replace the <ph id=\"ph1\">`winpe.jpg`</ph> file with your own image file."},{"pos":[7862,7886],"content":"Add answer file settings"},{"content":"Some WinPE settings can be managed by using an answer file, such as firewall, network, and display settings.","pos":[7894,8002]},{"content":"Create an answer file, name it unattend.xml, and add it to the root of the WinPE media to process these settings.","pos":[8003,8116]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Wpeinit and Startnet.cmd: Using WinPE Startup Scripts<ept id=\"p1\">](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)</ept>.","pos":[8117,8255]},{"content":"Unmount the Windows PE image and create media","pos":[8259,8304]},{"content":"Unmount the WinPE image.","pos":[8312,8336]},{"content":"Create bootable media, such as a USB flash drive.","pos":[8431,8480]},{"content":"Boot the media.","pos":[8552,8567]},{"content":"WinPE starts automatically.","pos":[8568,8595]},{"content":"After the WinPE window appears, the wpeinit command runs automatically.","pos":[8596,8667]},{"content":"This may take a few minutes.","pos":[8668,8696]},{"content":"Verify your customizations.","pos":[8697,8724]},{"pos":[8831,8846],"content":"Troubleshooting"},{"content":"WinPE won’t boot?","pos":[8853,8870]},{"content":"See the troubleshooting tips at the end of the topic: <bpt id=\"p1\">[</bpt>WinPE: Create USB Bootable drive<ept id=\"p1\">](winpe-create-usb-bootable-drive.md)</ept>","pos":[8871,8995]},{"pos":[9000,9156],"content":"For tips on connecting to a network, see <bpt id=\"p1\">[</bpt>WinPE Network Drivers: Initializing and adding drivers<ept id=\"p1\">](winpe-network-drivers-initializing-and-adding-drivers.md)</ept>."},{"content":"If the WinPE image becomes unserviceable, you may need to clean up the images before you can mount the image again.","pos":[9161,9276]},{"content":"For information, see <bpt id=\"p1\">[</bpt>Repair a Windows Image<ept id=\"p1\">](repair-a-windows-image.md)</ept>.","pos":[9277,9350]},{"pos":[9503,9533],"content":"To delete a working directory:"},{"content":"In some cases, you may not be able to recover the mounted image.","pos":[9535,9599]},{"content":"DISM protects you from accidentally deleting the working directory, so you may have to try the following steps to get access to delete the mounted directory.","pos":[9600,9757]},{"content":"Try each of the following steps:","pos":[9758,9790]},{"content":"Try remounting the image:","pos":[9796,9821]},{"content":"Try unmounting the image, discarding the changes:","pos":[9894,9943]},{"content":"Try cleaning up the resources associated with the mounted image:","pos":[10025,10089]},{"pos":[10181,10195],"content":"Related topics"},{"content":"WinPE for Windows 10","pos":[10199,10219]},{"content":"WinPE: Create USB Bootable drive","pos":[10239,10271]},{"content":"WinPE: Create a Boot CD, DVD, ISO, or VHD","pos":[10311,10352]},{"content":"WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)","pos":[10398,10451]},{"content":"WinPE: Boot in UEFI or legacy BIOS mode","pos":[10511,10550]},{"content":"WinPE: Add packages (Optional Components Reference)","pos":[10597,10648]}],"content":"---\nauthor: Justinha\nDescription: 'WinPE: Mount and Customize'\nms.assetid: 5d5c13e8-8754-4fff-afd1-dcc3fb757bb9\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: 'WinPE: Mount and Customize'\n---\n\n# WinPE: Mount and Customize\n\n\nAdd drivers to Windows Preinstallation Environment (WinPE), such as graphics drivers or network drivers.\n\nCommon customizations:\n\n-   [Add device drivers (.inf files)](winpe-add-drivers.md). You can customize device drivers, such as drivers that support network cards or storage devices.\n-   [Add packages (.cab files, also known as WinPE optional components)](winpe-add-packages--optional-components-reference.md) Add languages, hotfixes, or support for features like PowerShell and the HTML Application Language (HTA).\n-   [Add a language](winpe-add-packages--optional-components-reference.md). To run WinPE in multiple languages, add the packages (optional components) for those languages.\n-   Add files and folders. These can be added directly to the WinPE image.\n-   [Add a newer version of DISM](copy-dism-to-another-computer.md). When new versions of Windows require features from the latest version of DISM, you can add DISM directly into WinPE.\n-   [Add a startup script](#addstartupscript). Examples include setting up a network connection, or adding a custom application, such as diagnostic software.\n-   [Add an app](#addapp). Note, WinPE only supports legacy apps.\n-   [Add temporary storage (scratch space)](#scratchspace). If your application requires temporary file storage, you can reserve extra memory space in RAM.\n-   [Replace the background image](#addwallpaper)\n-   [Add answer file settings](#addanswerfilesettings)\n\n**Get the Windows Assessment and Deployment Kit with Windows PE tools**\n\n-   Install the [Windows Assessment and Deployment Kit (Windows ADK) Technical Reference](http://go.microsoft.com/fwlink/p/?LinkId=526803), including the **Windows PE** feature.\n\n**Create a set of either 32-bit or 64-bit Windows PE files**\n\n1.  Click **Start**, and type **deployment**. Right-click **Deployment and Imaging Tools Environment** and then select **Run as administrator**.\n\n2.  In the **Deployment Tools and Imaging Environment**, copy the WinPE files for the PCs you want to boot.\n\n    -   The 64-bit version can boot 64-bit UEFI and 64-bit BIOS PCs.\n\n        ``` syntax\n        copype amd64 C:\\WinPE_amd64\n        ```\n\n    -   The 32-bit version of WinPE can boot 32-bit UEFI, 32-bit BIOS, and 64-bit BIOS PCs.\n\n        ``` syntax\n        copype x86 C:\\WinPE_x86\n        ```\n\n**Mount the Windows PE boot image**\n\n-   Mount the WinPE image.\n\n    ``` syntax\n    Dism /Mount-Image /ImageFile:\"C:\\WinPE_amd64\\media\\sources\\boot.wim\" /index:1 /MountDir:\"C:\\WinPE_amd64\\mount\"\n    ```\n\n## <span id=\"Add_customizations\"></span><span id=\"add_customizations\"></span><span id=\"ADD_CUSTOMIZATIONS\"></span>Add customizations\n\n\n**Add device drivers (.inf files)**\n\n-   Add the device driver to the WinPE image.\n\n    ``` syntax\n    Dism /Add-Driver /Image:\"C:\\WinPE_amd64\\mount\" /Driver:\"C:\\SampleDriver\\driver.inf\"\n    ```\n\n    Although you can add multiple drivers to an image by using one command, it is often easier to troubleshoot problems by adding each driver package individually.\n\n    To learn more about drivers, see [Add device drivers (.inf files)](winpe-add-drivers.md).\n\n**Add packages/languages/optional components/.cab files**\n\n-   Add the optional component into WinPE. To add optional components, you need to add both the optional component and its associated language packs.\n\n    ``` syntax\n    Dism /Add-Package /Image:\"C:\\WinPE_amd64\\mount\" /PackagePath:\"C:\\Program Files\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\WinPE-HTA.cab\"  \n\n    Dism /Add-Package /Image:\"C:\\WinPE_amd64\\mount\" /PackagePath:\"C:\\Program Files\\Windows Kits\\10\\Assessment and Deployment Kit\\Windows Preinstallation Environment\\amd64\\WinPE_OCs\\en-us\\WinPE-HTA_en-us.cab\"\n    ```\n\n    To learn more about adding packages, see [WinPE: Add packages (Optional Components Reference)](winpe-add-packages--optional-components-reference.md).\n\n**Add files and folders**\n\n-   Copy files and folders into the C:\\\\WinPE\\_amd64\\\\mount folder. These files will show up in the X:\\\\ folder in WinPE.\n\n    Don't add too many files, as these will slow down WinPE and can fill up the available memory in the default RAMDisk environment.\n\n<span id=\"AddStartupScript\"></span><span id=\"addstartupscript\"></span><span id=\"ADDSTARTUPSCRIPT\"></span>\n**Add a startup script**\n\n-   Modify the Startnet.cmd script to include your customized commands. This file is located at `C:\\WinPE_amd64\\mount\\Windows\\System32\\Startnet.cmd`.\n\n    You can also call other batch files or command line scripts from this file.\n\n    For Plug and Play or networking support, make sure that you include a call to **wpeinit** in your customized Startnet.cmd script. For more info, see [Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md).\n\n<span id=\"AddApp\"></span><span id=\"addapp\"></span><span id=\"ADDAPP\"></span>\n**Add an app**\n\n1.  Create an app directory inside the mounted WinPE image.\n\n    ``` syntax\n    md \"C:\\WinPE_amd64\\mount\\windows\\<MyApp>\"\n    ```\n\n2.  Copy the necessary app files to the local WinPE directory.\n\n    ``` syntax\n    Xcopy C:\\<MyApp> \"C:\\WinPE_amd64\\mount\\windows\\<MyApp>\"\n    ```\n\n3.  Test the app later by booting WinPE and running the application from the X: directory.\n\n    ``` syntax\n    X:\\Windows\\System32> X:\\Windows\\<MyApp>\n    ```\n\n    If your app requires temporary storage, or if WinPE becomes unresponsive when it runs an app, you may need to increase the amount of temporary storage (scratch space) allocated to WinPE.\n\n4.  To automatically launch a shell or application that runs when WinPE starts, add the path location to the Winpeshl.ini file. For more info, see [Winpeshl.ini Reference: Launching an app when WinPE starts](winpeshlini-reference-launching-an-app-when-winpe-starts.md).\n\n<span id=\"ScratchSpace\"></span><span id=\"scratchspace\"></span><span id=\"SCRATCHSPACE\"></span>\n**Add temporary storage (scratch space)**\n\n-   WinPE reserves memory on the X: drive to unpack the WinPE files, plus additional temporary file storage, known as scratch space, that can be used by your applications. By default, this is 512MB for PCs with more than 1GB of RAM, otherwise the default is 32MB. Valid values are 32, 64, 128, 256, or 512.\n\n    ``` syntax\n    Dism /Set-ScratchSpace:256 /Image:\"C:\\WinPE_amd64\\mount\"\n    ```\n\n<span id=\"AddWallpaper\"></span><span id=\"addwallpaper\"></span><span id=\"ADDWALLPAPER\"></span>\n**Replace the background image**\n\n1.  If you've got multiple versions of WinPE, you can set the background image so you can instantly tell which version of WinPE is running.\n\n    Change the security permissions of the WinPE background image file (`\\windows\\system32\\winpe.jpg`). This allows you to modify or delete the file.\n\n    1.  In Windows Explorer, navigate to `C:\\WinPE_amd64\\mount\\windows\\system32`.\n\n    2.  Right-click the `C:\\WinPE_amd64\\mount\\windows\\system32\\winpe.jpg` file, and select **Properties** &gt; **Security** tab &gt; **Advanced**.\n\n    3.  Next to Owner, select **Change**. Change the owner to **Administrators**.\n\n    4.  Apply the changes, and exit the Properties window to save changes.\n\n    5.  Right-click the `C:\\WinPE_amd64\\mount\\windows\\system32\\winpe.jpg` file, and select **Properties** &gt; **Security** tab &gt; **Advanced**.\n\n    6.  Modify the permissions for **Administrators** to allow full access.\n\n    7.  Apply the changes, and exit the Properties window to save changes.\n\n2.  Replace the `winpe.jpg` file with your own image file.\n\n<span id=\"AddAnswerFileSettings\"></span><span id=\"addanswerfilesettings\"></span><span id=\"ADDANSWERFILESETTINGS\"></span>\n**Add answer file settings**\n\n-   Some WinPE settings can be managed by using an answer file, such as firewall, network, and display settings. Create an answer file, name it unattend.xml, and add it to the root of the WinPE media to process these settings. For more information, see [Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md).\n\n**Unmount the Windows PE image and create media**\n\n1.  Unmount the WinPE image.\n\n    ``` syntax\n    Dism /Unmount-Image /MountDir:\"C:\\WinPE_amd64\\mount\" /commit\n    ```\n\n2.  Create bootable media, such as a USB flash drive.\n\n    ``` syntax\n    MakeWinPEMedia /UFD C:\\WinPE_amd64 F:\n    ```\n\n3.  Boot the media. WinPE starts automatically. After the WinPE window appears, the wpeinit command runs automatically. This may take a few minutes. Verify your customizations.\n\n## <span id=\"Troubleshooting\"></span><span id=\"troubleshooting\"></span><span id=\"TROUBLESHOOTING\"></span>Troubleshooting\n\n\n-   WinPE won’t boot? See the troubleshooting tips at the end of the topic: [WinPE: Create USB Bootable drive](winpe-create-usb-bootable-drive.md)\n-   For tips on connecting to a network, see [WinPE Network Drivers: Initializing and adding drivers](winpe-network-drivers-initializing-and-adding-drivers.md).\n-   If the WinPE image becomes unserviceable, you may need to clean up the images before you can mount the image again. For information, see [Repair a Windows Image](repair-a-windows-image.md).\n\n### <span id=\"To_delete_a_working_directory_\"></span><span id=\"to_delete_a_working_directory_\"></span><span id=\"TO_DELETE_A_WORKING_DIRECTORY_\"></span>To delete a working directory:\n\nIn some cases, you may not be able to recover the mounted image. DISM protects you from accidentally deleting the working directory, so you may have to try the following steps to get access to delete the mounted directory. Try each of the following steps:\n\n1.  Try remounting the image:\n\n    ``` syntax\n    dism /Remount-Image /MountDir:C:\\mount\n    ```\n\n2.  Try unmounting the image, discarding the changes:\n\n    ``` syntax\n    dism /Unmount-Image /MountDir:C:\\mount /discard\n    ```\n\n3.  Try cleaning up the resources associated with the mounted image:\n\n    ``` syntax\n    dism /Cleanup-Mountpoints\n    ```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[WinPE for Windows 10](winpe-intro.md)\n\n[WinPE: Create USB Bootable drive](winpe-create-usb-bootable-drive.md)\n\n[WinPE: Create a Boot CD, DVD, ISO, or VHD](winpe-create-a-boot-cd-dvd-iso-or-vhd.md)\n\n[WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)](winpe-install-on-a-hard-drive--flat-boot-or-non-ram.md)\n\n[WinPE: Boot in UEFI or legacy BIOS mode](winpe-boot-in-uefi-or-legacy-bios-mode.md)\n\n[WinPE: Add packages (Optional Components Reference)](winpe-add-packages--optional-components-reference.md)\n\n \n\n \n\n\n\n\n\n\n"}