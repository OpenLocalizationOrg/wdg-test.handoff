{"nodes":[{"content":"Recording for Heap Analysis","pos":[11,38]},{"content":"Recording for Heap Analysis","pos":[52,79]},{"content":"Recording for Heap Analysis","pos":[268,295]},{"content":"Windows Performance Recorder (WPR) enables heap analysis for all processes on the system.","pos":[298,387]},{"content":"To enable heap tracing for a desktop app","pos":[391,431]},{"pos":[439,514],"content":"From the <bpt id=\"p1\">**</bpt>More options<ept id=\"p1\">**</ept> dropdown menu, select the <bpt id=\"p2\">**</bpt>Heap usage<ept id=\"p2\">**</ept> profile."},{"pos":[520,706],"content":"Add a registry entry for the process by running the following command from an elevated command prompt window, replacing <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>process<ph id=\"ph2\">\\_</ph>name<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p1\">*</ept> with the name of the process to be traced:"},{"content":"reg add \"HKLM<ph id=\"ph1\">\\\\</ph>Software<ph id=\"ph2\">\\\\</ph>Microsoft<ph id=\"ph3\">\\\\</ph>Windows NT<ph id=\"ph4\">\\\\</ph>CurrentVersion<ph id=\"ph5\">\\\\</ph>Image File Execution Options<ph id=\"ph6\">\\\\&amp;lt;</ph>process<ph id=\"ph7\">\\_</ph>name<ph id=\"ph8\">&amp;gt;</ph>\" /v TracingFlags /t REG<ph id=\"ph9\">\\_</ph>DWORD /d 1 /f","pos":[714,868]},{"content":"To enable heap tracing for a Windows Store app","pos":[874,920]},{"pos":[928,1003],"content":"From the <bpt id=\"p1\">**</bpt>More options<ept id=\"p1\">**</ept> dropdown menu, select the <bpt id=\"p2\">**</bpt>Heap usage<ept id=\"p2\">**</ept> profile."},{"pos":[1009,1342],"content":"If you want to trace a packaged application that is hosted in a process (such as WWAHost.exe), add a registry entry for the process by running the following command from an elevated command prompt window, replacing <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>process<ph id=\"ph2\">\\_</ph>name<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt><ph id=\"ph4\">&amp;lt;</ph>package full name<ph id=\"ph5\">&amp;gt;</ph><ept id=\"p2\">*</ept>, and <bpt id=\"p3\">*</bpt><ph id=\"ph6\">&amp;lt;</ph>package-relative app ID<ph id=\"ph7\">&amp;gt;</ph><ept id=\"p3\">*</ept> with your app information:"},{"content":"reg add \"HKLM<ph id=\"ph1\">\\\\</ph>Software<ph id=\"ph2\">\\\\</ph>Microsoft<ph id=\"ph3\">\\\\</ph>Windows NT<ph id=\"ph4\">\\\\</ph>CurrentVersion<ph id=\"ph5\">\\\\</ph>Image File Execution Options<ph id=\"ph6\">\\\\&amp;lt;</ph>process<ph id=\"ph7\">\\_</ph>name<ph id=\"ph8\">&amp;gt;\\\\&amp;lt;</ph>package full name<ph id=\"ph9\">&amp;gt;</ph>!<ph id=\"ph10\">&amp;lt;</ph>package-relative app ID<ph id=\"ph11\">&amp;gt;</ph>\" /v TracingFlags /t REG<ph id=\"ph12\">\\_</ph>DWORD /d 1 /f","pos":[1350,1563]},{"pos":[1571,1827],"content":"**Note**  \nThis combination (package full name + app ID) is not an app user model ID (package family name + app ID). The IFEO processing routines use the full name so that they can apply different behavior to different versions of a single package/app.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"This combination (package full name + app ID) is not an app user model ID (package family name + app ID). The IFEO processing routines use the full name so that they can apply different behavior to different versions of a single package/app.","pos":[11,252],"nodes":[{"content":"This combination (package full name + app ID) is not an app user model ID (package family name + app ID).","pos":[0,105]},{"content":"The IFEO processing routines use the full name so that they can apply different behavior to different versions of a single package/app.","pos":[106,241]}]}]},{"content":"Related topics","pos":[1839,1853]},{"content":"WPR Common Scenarios","pos":[1857,1877]},{"content":"Image File Execution Options","pos":[1931,1959]}],"content":"---\ntitle: Recording for Heap Analysis\ndescription: Recording for Heap Analysis\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 9acc8558-67ef-471a-af69-1173cb49bdb4\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# Recording for Heap Analysis\n\n\nWindows Performance Recorder (WPR) enables heap analysis for all processes on the system.\n\n**To enable heap tracing for a desktop app**\n\n1.  From the **More options** dropdown menu, select the **Heap usage** profile.\n\n2.  Add a registry entry for the process by running the following command from an elevated command prompt window, replacing *&lt;process\\_name&gt;* with the name of the process to be traced:\n\n    **reg add \"HKLM\\\\Software\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Image File Execution Options\\\\&lt;process\\_name&gt;\" /v TracingFlags /t REG\\_DWORD /d 1 /f**\n\n**To enable heap tracing for a Windows Store app**\n\n1.  From the **More options** dropdown menu, select the **Heap usage** profile.\n\n2.  If you want to trace a packaged application that is hosted in a process (such as WWAHost.exe), add a registry entry for the process by running the following command from an elevated command prompt window, replacing *&lt;process\\_name&gt;*, *&lt;package full name&gt;*, and *&lt;package-relative app ID&gt;* with your app information:\n\n    **reg add \"HKLM\\\\Software\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Image File Execution Options\\\\&lt;process\\_name&gt;\\\\&lt;package full name&gt;!&lt;package-relative app ID&gt;\" /v TracingFlags /t REG\\_DWORD /d 1 /f**\n\n    **Note**  \n    This combination (package full name + app ID) is not an app user model ID (package family name + app ID). The IFEO processing routines use the full name so that they can apply different behavior to different versions of a single package/app.\n\n     \n\n## Related topics\n\n\n[WPR Common Scenarios](windows-performance-recorder-common-scenarios.md)\n\n[Image File Execution Options](http://go.microsoft.com/fwlink/p/?LinkId=268419)\n\n \n\n \n\n\n\n\n\n\n\n"}