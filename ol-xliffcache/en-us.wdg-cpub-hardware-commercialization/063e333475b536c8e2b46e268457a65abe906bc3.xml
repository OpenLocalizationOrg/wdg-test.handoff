{"nodes":[{"content":"Repair a Windows Image","pos":[34,56]},{"content":"Repair a Windows Image","pos":[163,185]},{"content":"Repair a Windows Image","pos":[193,215]},{"content":"Repair a Windows image using DISM.","pos":[218,252]},{"content":"You can repair offline Windows image in a WIM or VHD file, or an online Windows image.","pos":[253,339]},{"content":"An online Windows image will also attempt to repair itself if it becomes unserviceable.","pos":[340,427]},{"content":"The repair source for this operation is the same source that is used for Features on Demand and is determined by Group Policy settings.","pos":[428,563]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Configure a Windows Repair Source<ept id=\"p1\">](configure-a-windows-repair-source.md)</ept>.","pos":[564,664]},{"content":"When you use the DISM tool to repair an online or offline image, you can use the <bpt id=\"p1\">*</bpt>/Source<ept id=\"p1\">*</ept> argument with the <bpt id=\"p2\">*</bpt>/RestoreHealth<ept id=\"p2\">*</ept> argument to specify additional repair source locations to use to search for the required files.","pos":[665,886]},{"pos":[888,1002],"content":"For a quick check of an online image, you may be able to use the command: <ph id=\"ph1\">`sfc /scannow`</ph> to scan and repair files."},{"pos":[1004,1096],"content":"For a more extensive check that can repair issues with the store, use <ph id=\"ph1\">`DISM /Cleanup-Image`</ph>."},{"content":"To check if an image is repairable","pos":[1100,1134]},{"content":"Scan the image to check for corruption.","pos":[1142,1181]},{"content":"This operation will take several minutes.","pos":[1182,1223]},{"content":"For example, at a command prompt, type the following command:","pos":[1224,1285]},{"content":"Check the image to see whether any corruption has been detected.","pos":[1359,1423]},{"content":"For example, at a command prompt, type:","pos":[1424,1463]},{"content":"When you use the <bpt id=\"p1\">*</bpt>/CheckHealth<ept id=\"p1\">*</ept> sfc argument, the DISM tool will report whether the image is healthy, repairable, or non-repairable.","pos":[1534,1666]},{"content":"If the image is non-repairable, you should discard the image and start again.","pos":[1667,1744]},{"content":"If the image is repairable, you can use the <bpt id=\"p1\">*</bpt>/RestoreHealth<ept id=\"p1\">*</ept> argument to repair the image.","pos":[1745,1835]},{"content":"To repair an image","pos":[1839,1857]},{"content":"Use the <bpt id=\"p1\">*</bpt>/RestoreHealth<ept id=\"p1\">*</ept> argument to repair the image.","pos":[1865,1919]},{"content":"For example, to repair an offline image using a mounted image as a repair source, at a command prompt, type the following command:","pos":[1920,2050]},{"content":"Or to repair an online image using some of your own sources instead of Windows Update, type:","pos":[2167,2259]},{"content":"If you do not specify a <bpt id=\"p1\">*</bpt>/Source<ept id=\"p1\">*</ept> for the repair files, the default location for Features on Demand is used.","pos":[2379,2487]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Configure a Windows Repair Source<ept id=\"p1\">](configure-a-windows-repair-source.md)</ept>.","pos":[2488,2588]},{"content":"If you specify more than one <bpt id=\"p1\">*</bpt>/Source<ept id=\"p1\">*</ept>, the files are copied from the first location where they are found and the rest of the locations are ignored.","pos":[2589,2737]},{"content":"You can use <bpt id=\"p1\">*</bpt>/LimitAccess<ept id=\"p1\">*</ept> to prevent the DISM tool from using Windows Update as a repair source or as a backup repair source for online images.","pos":[2738,2882]},{"pos":[3043,3076],"content":"Repairing images during servicing"},{"content":"In some cases, an image can be corrupted while modifying it with DISM.","pos":[3079,3149]},{"content":"Use <bpt id=\"p1\">*</bpt>/Cleanup-MountPoints<ept id=\"p1\">*</ept> to repair it.","pos":[3150,3190]},{"content":"This command will not unmount images that are already mounted, nor will it delete images that can be recovered using the /Remount-Image command.","pos":[3191,3335]},{"pos":[3415,3429],"content":"Related topics"},{"content":"Use the System File Checker tool to repair missing or corrupted system files","pos":[3433,3509]},{"content":"DISM Operating System Package Servicing Command-Line Options","pos":[3562,3622]},{"content":"Configure a Windows Repair Source","pos":[3691,3724]}],"content":"---\nauthor: Justinha\nDescription: Repair a Windows Image\nms.assetid: 4ca60b08-6801-4af4-a504-3e88ec0c8fb8\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Repair a Windows Image\n---\n\n# Repair a Windows Image\n\n\nRepair a Windows image using DISM. You can repair offline Windows image in a WIM or VHD file, or an online Windows image. An online Windows image will also attempt to repair itself if it becomes unserviceable. The repair source for this operation is the same source that is used for Features on Demand and is determined by Group Policy settings. For more information, see [Configure a Windows Repair Source](configure-a-windows-repair-source.md). When you use the DISM tool to repair an online or offline image, you can use the */Source* argument with the */RestoreHealth* argument to specify additional repair source locations to use to search for the required files.\n\nFor a quick check of an online image, you may be able to use the command: `sfc /scannow` to scan and repair files.\n\nFor a more extensive check that can repair issues with the store, use `DISM /Cleanup-Image`.\n\n**To check if an image is repairable**\n\n1.  Scan the image to check for corruption. This operation will take several minutes. For example, at a command prompt, type the following command:\n\n    ``` syntax\n    Dism /Online /Cleanup-Image /ScanHealth\n    ```\n\n2.  Check the image to see whether any corruption has been detected. For example, at a command prompt, type:\n\n    ``` syntax\n    Dism /Online /Cleanup-Image /CheckHealth\n    ```\n\nWhen you use the */CheckHealth* sfc argument, the DISM tool will report whether the image is healthy, repairable, or non-repairable. If the image is non-repairable, you should discard the image and start again. If the image is repairable, you can use the */RestoreHealth* argument to repair the image.\n\n**To repair an image**\n\n-   Use the */RestoreHealth* argument to repair the image. For example, to repair an offline image using a mounted image as a repair source, at a command prompt, type the following command:\n\n    ``` syntax\n    Dism /Image:C:\\offline /Cleanup-Image /RestoreHealth /Source:c:\\test\\mount\\windows\n    ```\n\n    Or to repair an online image using some of your own sources instead of Windows Update, type:\n\n    ``` syntax\n    Dism /Online /Cleanup-Image /RestoreHealth /Source:c:\\test\\mount\\windows /LimitAccess\n    ```\n\n    If you do not specify a */Source* for the repair files, the default location for Features on Demand is used. For more information, see [Configure a Windows Repair Source](configure-a-windows-repair-source.md). If you specify more than one */Source*, the files are copied from the first location where they are found and the rest of the locations are ignored. You can use */LimitAccess* to prevent the DISM tool from using Windows Update as a repair source or as a backup repair source for online images.\n\n## <span id=\"Repairing_images_during_servicing\"></span><span id=\"repairing_images_during_servicing\"></span><span id=\"REPAIRING_IMAGES_DURING_SERVICING\"></span>Repairing images during servicing\n\n\nIn some cases, an image can be corrupted while modifying it with DISM. Use */Cleanup-MountPoints* to repair it. This command will not unmount images that are already mounted, nor will it delete images that can be recovered using the /Remount-Image command.\n\n``` syntax\nDism /Cleanup-Mountpoints\n```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[Use the System File Checker tool to repair missing or corrupted system files](http://go.microsoft.com/fwlink/p/?LinkId=717888)\n\n[DISM Operating System Package Servicing Command-Line Options](dism-operating-system-package-servicing-command-line-options.md)\n\n[Configure a Windows Repair Source](configure-a-windows-repair-source.md)\n\n \n\n \n\n\n\n\n\n\n"}