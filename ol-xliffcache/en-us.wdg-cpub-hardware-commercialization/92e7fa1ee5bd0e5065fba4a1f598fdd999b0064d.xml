{"nodes":[{"content":"3. Profile Definitions","pos":[11,33]},{"content":"3. Profile Definitions","pos":[238,260]},{"content":"Windows Performance Recorder (WPR) recording profiles are stored in an XML file that has a .wprp extension.","pos":[263,370]},{"content":"<bpt id=\"p1\">*</bpt>Profile definitions<ept id=\"p1\">*</ept> bring together the collector and provider definitions in the .wprp file.","pos":[371,465]},{"content":"In this article:","pos":[467,483]},{"content":"Profiles","pos":[490,498]},{"content":"Collectors Element","pos":[517,535]},{"content":"Profile Definition Example","pos":[556,582]},{"content":"Profiles","pos":[600,608]},{"content":"You define a WPR profile by using <ph id=\"ph1\">`(&lt;Profile&gt; … &lt;/Profile&gt;`</ph> XML tags that refer to collector and provider definition XML tags that you define in either the same .wprp file or by using inheritance in another .wprp file.","pos":[611,829]},{"content":"Each profile definition XML tag must have the following attributes:","pos":[830,897]},{"content":"<bpt id=\"p1\">**</bpt>Id<ept id=\"p1\">**</ept>: Unique identifier of the profile definition.","pos":[903,955]},{"content":"Use the following profile identifier construction:","pos":[956,1006]},{"pos":[1016,1071],"content":"<bpt id=\"p1\">*</bpt>Name<ept id=\"p1\">*</ept><ph id=\"ph1\">&amp;gt;</ph>.<ph id=\"ph2\">&amp;lt;</ph><bpt id=\"p2\">*</bpt>DetailLevel<ept id=\"p2\">*</ept><ph id=\"ph3\">&amp;gt;</ph>.<ph id=\"ph4\">&amp;lt;</ph><bpt id=\"p3\">*</bpt>LoggingMode<ept id=\"p3\">*</ept><ph id=\"ph5\">&amp;gt;</ph>."},{"pos":[1077,1133],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept>: String that indicates the name of the profile."},{"pos":[1139,1279],"content":"<bpt id=\"p1\">**</bpt>DetailLevel<ept id=\"p1\">**</ept>: Attribute that specifies whether a profile definition is used for timing tracing (<bpt id=\"p2\">*</bpt>Light<ept id=\"p2\">*</ept>) or analysis tracing (<bpt id=\"p3\">*</bpt>Verbose<ept id=\"p3\">*</ept>)."},{"content":"<bpt id=\"p1\">**</bpt>LoggingMode<ept id=\"p1\">**</ept>: Attribute that specifies whether the profile logs events to a sequential file or to circular memory buffers.","pos":[1285,1410]},{"content":"All profiles must have both a file and a memory version in the same .wprp file.","pos":[1411,1490]},{"pos":[1496,1567],"content":"<bpt id=\"p1\">**</bpt>Description<ept id=\"p1\">**</ept>: Textual description of the profile that the user sees."},{"content":"WPR supports performance recording for both file and memory logging modes for each .wprp file except for <bpt id=\"p1\">*</bpt>on/off profiles<ept id=\"p1\">*</ept>.","pos":[1569,1692]},{"content":"You must log on/off profiles to a file, but you must define both a file and a memory version.","pos":[1693,1786]},{"content":"Because a single profile definition can support only one logging mode, there can be two or four profile definitions in a .wprp file, one for each combination of logging mode and detail level.","pos":[1787,1978]},{"content":"All profile definitions in a single .wprp file must have the same <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> attribute.","pos":[1979,2064]},{"pos":[2070,2120],"content":"<bpt id=\"p1\">*</bpt>Name<ept id=\"p1\">*</ept><ph id=\"ph1\">&amp;gt;</ph>.<ph id=\"ph2\">&amp;lt;</ph><bpt id=\"p2\">*</bpt>DetailLevel<ept id=\"p2\">*</ept><ph id=\"ph3\">&amp;gt;</ph>.<ph id=\"ph4\">&amp;lt;</ph><bpt id=\"p3\">*</bpt>LoggingMode<ept id=\"p3\">*</ept>"},{"content":"The following code example shows <bpt id=\"p1\">**</bpt>Example1.wprp<ept id=\"p1\">**</ept>.","pos":[2126,2177]},{"content":"This file contains two profile definitions.","pos":[2178,2221]},{"content":"The ellipsis (…) represents the body of the profile.","pos":[2222,2274]},{"content":"The following code example shows <bpt id=\"p1\">**</bpt>Example2.wprp<ept id=\"p1\">**</ept>.","pos":[2592,2643]},{"content":"This file contains four profile definitions.","pos":[2644,2688]},{"content":"The ellipsis (…) represents the body of the profile.","pos":[2689,2741]},{"pos":[3385,3403],"content":"Collectors Element"},{"content":"The <bpt id=\"p1\">**</bpt>Collectors<ept id=\"p1\">**</ept> element contains references to previously defined system and event collectors.","pos":[3406,3503]},{"content":"The <bpt id=\"p1\">[</bpt>SystemCollectorId<ept id=\"p1\">](systemcollectorid.md)</ept> and <bpt id=\"p2\">[</bpt>EventCollectorId<ept id=\"p2\">](eventcollectorid.md)</ept> elements identify these collectors.","pos":[3504,3629]},{"content":"Each <bpt id=\"p1\">**</bpt>SystemCollectorId<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>EventCollectorId<ept id=\"p2\">**</ept> element contains a mandatory <bpt id=\"p3\">**</bpt>Value<ept id=\"p3\">**</ept> attribute that specifies the <bpt id=\"p4\">**</bpt>Id<ept id=\"p4\">**</ept> attribute of the collector that is to be used.","pos":[3631,3804]},{"content":"Each <bpt id=\"p1\">**</bpt>SystemCollectorId<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>EventCollectorId<ept id=\"p2\">**</ept> element also contains a list of either <bpt id=\"p3\">[</bpt>SystemProviderId<ept id=\"p3\">](systemproviderid.md)</ept> or <bpt id=\"p4\">[</bpt>EventCollectorId<ept id=\"p4\">](eventcollectorid.md)</ept> elements.","pos":[3805,3988]},{"content":"These elements have similar syntax.","pos":[3989,4024]},{"content":"However, these elements refer to previously-defined system and event providers.","pos":[4025,4104]},{"content":"You can also define collectors and providers inside the profile definition.","pos":[4106,4181]},{"pos":[4216,4242],"content":"Profile Definition Example"},{"content":"The following code example shows a complete profile definition.","pos":[4245,4308]},{"content":"Related topics","pos":[5139,5153]},{"content":"Authoring Recording Profiles","pos":[5157,5185]},{"content":"2. System and Event Provider Definitions","pos":[5222,5262]},{"content":"Logging Mode","pos":[5310,5322]},{"content":"Detail Level","pos":[5343,5355]},{"content":"ProblemCategories","pos":[5376,5393]},{"content":"SystemCollectorId","pos":[5419,5436]},{"content":"HeapEventProviderId","pos":[5462,5481]}],"content":"---\ntitle: 3. Profile Definitions\ndescription: 3.\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 1d072198-f631-463a-886c-b69a48c1acd1\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# 3. Profile Definitions\n\n\nWindows Performance Recorder (WPR) recording profiles are stored in an XML file that has a .wprp extension. *Profile definitions* bring together the collector and provider definitions in the .wprp file.\n\nIn this article:\n\n-   [Profiles](#profiles)\n\n-   [Collectors Element](#collectors)\n\n-   [Profile Definition Example](#profdefex)\n\n## Profiles\n\n\nYou define a WPR profile by using `(<Profile> … </Profile>` XML tags that refer to collector and provider definition XML tags that you define in either the same .wprp file or by using inheritance in another .wprp file. Each profile definition XML tag must have the following attributes:\n\n-   **Id**: Unique identifier of the profile definition. Use the following profile identifier construction:\n\n    &lt;*Name*&gt;.&lt;*DetailLevel*&gt;.&lt;*LoggingMode*&gt;.\n\n-   **Name**: String that indicates the name of the profile.\n\n-   **DetailLevel**: Attribute that specifies whether a profile definition is used for timing tracing (*Light*) or analysis tracing (*Verbose*).\n\n-   **LoggingMode**: Attribute that specifies whether the profile logs events to a sequential file or to circular memory buffers. All profiles must have both a file and a memory version in the same .wprp file.\n\n-   **Description**: Textual description of the profile that the user sees.\n\nWPR supports performance recording for both file and memory logging modes for each .wprp file except for *on/off profiles*. You must log on/off profiles to a file, but you must define both a file and a memory version. Because a single profile definition can support only one logging mode, there can be two or four profile definitions in a .wprp file, one for each combination of logging mode and detail level. All profile definitions in a single .wprp file must have the same **Name** attribute.\n\n&lt;*Name*&gt;.&lt;*DetailLevel*&gt;.&lt;*LoggingMode*&gt;\n\nThe following code example shows **Example1.wprp**. This file contains two profile definitions. The ellipsis (…) represents the body of the profile.\n\n``` syntax\n<Profile\n  Id=\"Example1.Verbose.File\"\n  Name=\"Example1\"\n  DetailLevel=\"Verbose\"\n  LoggingMode=\"File\"\n  Description=\"Example1 profile\">\n…\n</Profile>\n<Profile\n  Id=\"Example1.Verbose.Memory\"\n  Name=\"Example1\"\n  DetailLevel=\"Verbose\"\n  LoggingMode=\"Memory\"\n  Description=\"Example1 profile\">\n…\n</Profile>\n```\n\nThe following code example shows **Example2.wprp**. This file contains four profile definitions. The ellipsis (…) represents the body of the profile.\n\n``` syntax\n<Profile\n  Id=\"Example2.Verbose.File\"\n  Name=\"Example2\"\n  DetailLevel=\"Verbose\"\n  LoggingMode=\"File\"\n  Description=\"Example2 profile\">\n…\n</Profile>\n<Profile\n  Id=\"Example2.Light.File\"\n  Name=\"Example2\"\n  DetailLevel=\"Light\"\n  LoggingMode=\"File\"\n  Description=\"Example2 profile\">\n…\n</Profile>\n<Profile\n  Id=\"Example2.Verbose.Memory\"\n  Name=\"Example2\"\n  DetailLevel=\"Verbose\"\n  LoggingMode=\"Memory\"\n  Description=\"Example2 profile\">\n…\n</Profile>\n<Profile\n  Id=\"Example2.Light.Memory\"\n  Name=\"Example2\"\n  DetailLevel=\"Light\"\n  LoggingMode=\"Memory\"\n  Description=\"Example2 profile\">\n…\n</Profile>\n```\n\n## <a href=\"\" id=\"collectors\"></a>Collectors Element\n\n\nThe **Collectors** element contains references to previously defined system and event collectors. The [SystemCollectorId](systemcollectorid.md) and [EventCollectorId](eventcollectorid.md) elements identify these collectors.\n\nEach **SystemCollectorId** and **EventCollectorId** element contains a mandatory **Value** attribute that specifies the **Id** attribute of the collector that is to be used. Each **SystemCollectorId** and **EventCollectorId** element also contains a list of either [SystemProviderId](systemproviderid.md) or [EventCollectorId](eventcollectorid.md) elements. These elements have similar syntax. However, these elements refer to previously-defined system and event providers.\n\nYou can also define collectors and providers inside the profile definition.\n\n## <a href=\"\" id=\"profdefex\"></a>Profile Definition Example\n\n\nThe following code example shows a complete profile definition.\n\n``` syntax\n<Profile\n  Id=\"Example.Light.File\"\n  Name=\"Example\"\n  DetailLevel=\"Light\"\n  LoggingMode=\"File\"\n  Description=\"Example profile\">\n  <ProblemCategories> \n    <ProblemCategory\n      Value=\"First Level Triage\"/>\n  </ProblemCategories> \n  <Collectors> \n    <SystemCollectorId\n      Value=\"WPRSystemCollector\">\n      <!--Enables the system provider for this system collector. --> \n      <SystemProviderId\n        Value=\"system-provider\"/>\n    </SystemCollectorId> \n    <EventCollectorId\n      Value=\"WPREventCollector\">\n      <EventProviders> \n      <!--Enables two event providers for this event collector. --> \n        <EventProviderId\n          Value=\"Win32K-provider\"/>\n        <EventProviderId\n          Value=\"Search-Core-provider\"/>\n      </EventProviders> \n    </EventCollectorId> \n  </Collectors>\n</Profile>\n```\n\n## Related topics\n\n\n[Authoring Recording Profiles](authoring-recording-profiles.md)\n\n[2. System and Event Provider Definitions](2-system-and-event-provider-definitions.md)\n\n[Logging Mode](logging-mode.md)\n\n[Detail Level](detail-level.md)\n\n[ProblemCategories](problemcategories.md)\n\n[SystemCollectorId](systemcollectorid.md)\n\n[HeapEventProviderId](heapeventproviderid.md)\n\n \n\n \n\n\n\n\n\n\n\n"}