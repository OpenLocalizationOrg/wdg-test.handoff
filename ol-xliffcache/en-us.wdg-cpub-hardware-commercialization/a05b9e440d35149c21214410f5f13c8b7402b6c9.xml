{"nodes":[{"content":"heap","pos":[11,15]},{"content":"heap","pos":[29,33]},{"content":"heap","pos":[222,226]},{"pos":[229,344],"content":"Writes a text file containing the following information in tabular form based on the output file specified by <ph id=\"ph1\">`-o`</ph>:"},{"content":"Alloc number","pos":[350,362]},{"content":"Alloc size, in KB","pos":[368,385]},{"content":"Out number","pos":[391,401]},{"content":"Out size, in KB","pos":[407,422]},{"content":"Realloc number","pos":[428,442]},{"content":"Extents size, in KB","pos":[448,467]},{"content":"Out Ext size, in KB","pos":[473,492]},{"content":"Heap handle","pos":[498,509]},{"content":"Options","pos":[763,770]},{"content":"<bpt id=\"p1\">**</bpt>-pid<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>processId<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">*</ept>","pos":[809,836]},{"content":"Shows statistics only for the specified process identifier.","pos":[839,898]},{"content":"If not specified, shows statistics for all processes.","pos":[899,952]},{"content":"<bpt id=\"p1\">**</bpt>-stacks<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">\\[</ph>s <ph id=\"ph2\">\\[</ph>o|oc|t|tc|rc<ph id=\"ph3\">\\]\\]</ph><ept id=\"p2\">*</ept>","pos":[1000,1035]},{"content":"Displays the allocations, aggregated by stacks.","pos":[1038,1085]},{"content":"This is the default behavior.","pos":[1086,1115]},{"content":"Sorts by outstanding size (<bpt id=\"p1\">*</bpt>so<ept id=\"p1\">*</ept>), outstanding count (<bpt id=\"p2\">*</bpt>soc<ept id=\"p2\">*</ept>, total size (<bpt id=\"p3\">*</bpt>st<ept id=\"p3\">*</ept>), reallocation count (<bpt id=\"p4\">*</bpt>src<ept id=\"p4\">*</ept>, and total count (<bpt id=\"p5\">*</bpt>stc<ept id=\"p5\">*</ept>).","pos":[1117,1247]},{"content":"The default is <bpt id=\"p1\">*</bpt>so<ept id=\"p1\">*</ept>.","pos":[1248,1268]},{"content":"<bpt id=\"p1\">**</bpt>-frames<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">\\[</ph>s <ph id=\"ph2\">\\[</ph>o|oc|t|tc|rc<ph id=\"ph3\">\\]\\]</ph><ept id=\"p2\">*</ept>","pos":[1316,1351]},{"content":"Similar to <ph id=\"ph1\">`-stacks`</ph>, but the aggregation is by top stack frame, instead of by the entire stack.","pos":[1354,1450]},{"content":"-images","pos":[1482,1489]},{"content":"Similar to <ph id=\"ph1\">`-stacks`</ph> and <ph id=\"ph2\">`-frames`</ph>, but the aggregation is by image name of the top stack frame.","pos":[1494,1590]},{"content":"<bpt id=\"p1\">**</bpt>-range<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>T1 T2<ept id=\"p2\">*</ept>","pos":[1624,1641]},{"content":"Use event data from times <bpt id=\"p1\">*</bpt>T1<ept id=\"p1\">*</ept> through <bpt id=\"p2\">*</bpt>T2<ept id=\"p2\">*</ept>, both in microseconds.","pos":[1644,1710]},{"content":"<bpt id=\"p1\">**</bpt>-lifetime<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>T1 T2<ept id=\"p2\">*</ept>","pos":[1747,1767]},{"content":"Include only allocations with a lifetime, in microseconds, greater than or equal to <bpt id=\"p1\">*</bpt>T1<ept id=\"p1\">*</ept> and less than <bpt id=\"p2\">*</bpt>T2<ept id=\"p2\">*</ept>.","pos":[1770,1878]},{"content":"<bpt id=\"p1\">**</bpt>-size<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>S1 S2<ept id=\"p2\">*</ept>","pos":[1911,1927]},{"content":"Include only allocations of sizes greater than or equal to <bpt id=\"p1\">*</bpt>S1<ept id=\"p1\">*</ept> and less than <bpt id=\"p2\">*</bpt>S2<ept id=\"p2\">*</ept>, in bytes.","pos":[1930,2023]},{"content":"<bpt id=\"p1\">**</bpt>-cullframes<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>Frame1 Frame2 … FrameN<ept id=\"p2\">*</ept>","pos":[2079,2118]},{"content":"Removes any top stack frames from the report that match any of the specified frames.","pos":[2121,2205]},{"content":"The parameter format is <ph id=\"ph1\">`[image!][symbol]`</ph>.","pos":[2206,2249]},{"content":"The names are not case-sensitive.","pos":[2250,2283]},{"content":"<bpt id=\"p1\">**</bpt>-requireframes<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt>Frame1 Frame2 … FrameN<ept id=\"p2\">*</ept>","pos":[2342,2384]},{"content":"Requires that each stack have at least one frame that matches at least one of the specified frames.","pos":[2387,2486]},{"content":"This test occurs before any explicit frame culling with <ph id=\"ph1\">`-cullframes`</ph>.","pos":[2487,2557]},{"content":"<bpt id=\"p1\">**</bpt>-cullLists<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>fileName<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">*</ept>","pos":[2600,2632]},{"content":"Frames in the specified file are to be excluded from the result.","pos":[2635,2699]},{"content":"If a stack does not include such a frame, the stack is excluded.","pos":[2700,2764]},{"content":"Frames have the same format as for <ph id=\"ph1\">`-cullFrames`</ph>.","pos":[2765,2814]},{"content":"The names are not case-sensitive.","pos":[2815,2848]},{"content":"<bpt id=\"p1\">**</bpt>-top<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>n<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p2\">*</ept>","pos":[2878,2897]},{"content":"Limits the number of allocations displayed.","pos":[2900,2943]},{"content":"-totals","pos":[2975,2982]},{"content":"Displays only the totals of the allocation events.","pos":[2987,3037]},{"content":"Remarks","pos":[3042,3049]},{"content":"This action can take several minutes to complete on a large trace due to the heavy sorting and matching performed.","pos":[3052,3166]},{"pos":[3168,3276],"content":"For information on how to capture heap data, see <bpt id=\"p1\">[</bpt>Enabling Heap Data Capture<ept id=\"p1\">](enabling-heap-data-capture.md)</ept>"},{"content":"Related topics","pos":[3281,3295]},{"content":"Xperf Actions","pos":[3299,3312]},{"content":"Time and Timestamp Formats","pos":[3334,3360]}],"content":"---\ntitle: heap\ndescription: heap\nMSHAttr:\n- 'PreferredSiteName:MSDN'\n- 'PreferredLib:/library/windows/hardware'\nms.assetid: 5a8b4c32-9a36-4668-831a-8dc6fa9e2c5d\nms.prod: W10\nms.mktglfcycl: operate\nms.sitesec: msdn\n---\n\n# heap\n\n\nWrites a text file containing the following information in tabular form based on the output file specified by `-o`:\n\n-   Alloc number\n\n-   Alloc size, in KB\n\n-   Out number\n\n-   Out size, in KB\n\n-   Realloc number\n\n-   Extents size, in KB\n\n-   Out Ext size, in KB\n\n-   Heap handle\n\n``` syntax\n-a heap [-pid <processId>] [-stacks] [-frames] [-images] [-range T1 T2] [-lifetime T1 T2] [-size S1 S2] [-cullframes Frame1 Frame2 ... FrameN] [-requireframes Frame1 Frame2 ... FrameN] [-cullLists cullfuncs.txt] [-top <n>] [-totals]\n```\n\n## Options\n\n\n<a href=\"\" id=\"-pid-processid-\"></a>**-pid***&lt;processId&gt;*  \nShows statistics only for the specified process identifier. If not specified, shows statistics for all processes.\n\n<a href=\"\" id=\"-stacks-s--o-oc-t-tc-rc--\"></a>**-stacks***\\[s \\[o|oc|t|tc|rc\\]\\]*  \nDisplays the allocations, aggregated by stacks. This is the default behavior.\n\nSorts by outstanding size (*so*), outstanding count (*soc*, total size (*st*), reallocation count (*src*, and total count (*stc*). The default is *so*.\n\n<a href=\"\" id=\"-frames-s--o-oc-t-tc-rc--\"></a>**-frames***\\[s \\[o|oc|t|tc|rc\\]\\]*  \nSimilar to `-stacks`, but the aggregation is by top stack frame, instead of by the entire stack.\n\n<a href=\"\" id=\"-images\"></a>**-images**  \nSimilar to `-stacks` and `-frames`, but the aggregation is by image name of the top stack frame.\n\n<a href=\"\" id=\"-ranget1-t2\"></a>**-range***T1 T2*  \nUse event data from times *T1* through *T2*, both in microseconds.\n\n<a href=\"\" id=\"-lifetimet1-t2\"></a>**-lifetime***T1 T2*  \nInclude only allocations with a lifetime, in microseconds, greater than or equal to *T1* and less than *T2*.\n\n<a href=\"\" id=\"-sizes1-s2\"></a>**-size***S1 S2*  \nInclude only allocations of sizes greater than or equal to *S1* and less than *S2*, in bytes.\n\n<a href=\"\" id=\"-cullframesframe1-frame2---framen\"></a>**-cullframes***Frame1 Frame2 … FrameN*  \nRemoves any top stack frames from the report that match any of the specified frames. The parameter format is `[image!][symbol]`. The names are not case-sensitive.\n\n<a href=\"\" id=\"-requireframesframe1-frame2---framen\"></a>**-requireframes***Frame1 Frame2 … FrameN*  \nRequires that each stack have at least one frame that matches at least one of the specified frames. This test occurs before any explicit frame culling with `-cullframes`.\n\n<a href=\"\" id=\"-culllists-filename-\"></a>**-cullLists***&lt;fileName&gt;*  \nFrames in the specified file are to be excluded from the result. If a stack does not include such a frame, the stack is excluded. Frames have the same format as for `-cullFrames`. The names are not case-sensitive.\n\n<a href=\"\" id=\"-top-n-\"></a>**-top***&lt;n&gt;*  \nLimits the number of allocations displayed.\n\n<a href=\"\" id=\"-totals\"></a>**-totals**  \nDisplays only the totals of the allocation events.\n\n## Remarks\n\n\nThis action can take several minutes to complete on a large trace due to the heavy sorting and matching performed.\n\nFor information on how to capture heap data, see [Enabling Heap Data Capture](enabling-heap-data-capture.md)\n\n## Related topics\n\n\n[Xperf Actions](xperf-actions.md)\n\n[Time and Timestamp Formats](time-and-timestamp-formats.md)\n\n \n\n \n\n\n\n\n\n\n\n"}