{"nodes":[{"content":"Install Windows 10 using a previous version of Windows PE","pos":[34,91]},{"content":"Install Windows 10 using a previous version of Windows PE","pos":[198,255]},{"content":"Install Windows 10 using a previous version of Windows PE","pos":[263,320]},{"content":"To install some features of Windows 10, such as Compact OS, you'll need the Windows 10 version of DISM.","pos":[323,426]},{"content":"You can include the latest version DISM in your Windows Preinstallation Environment (WinPE) image, or run it from a separate location, such as on a removable drive.","pos":[428,592]},{"content":"If you include it with WinPE, it will add roughly 4MB to the size of your DISM image.","pos":[593,678]},{"content":"You'll need to install and configure the drivers needed for DISM, including the wimmount.sys and wofadk.sys drivers, each time you boot WinPE.","pos":[680,822]},{"content":"To add DISM into your Windows PE image","pos":[826,864]},{"content":"On your technician PC, install the Windows ADK for Windows 10.","pos":[872,934]},{"content":"Mount WinPE.","pos":[939,951]},{"content":"For WinPE 3.x, mount the file: <ph id=\"ph1\">\\\\</ph>sources<ph id=\"ph2\">\\\\</ph>winpe.wim.","pos":[952,1004]},{"content":"For WinPE 4.x and 5.x, mount the file: <ph id=\"ph1\">\\\\</ph>sources<ph id=\"ph2\">\\\\</ph>boot.wim.","pos":[1005,1064]},{"content":"Copy the DISM folder from the Windows ADK into a new folder in the mounted WinPE image.","pos":[1240,1327]},{"content":"<bpt id=\"p1\">**</bpt>Important<ept id=\"p1\">**</ept>   Don't overwrite the existing DISM files from the <bpt id=\"p2\">**</bpt>system32<ept id=\"p2\">**</ept> folder in the WinPE image.","pos":[1529,1633]},{"content":"Instead, create a new folder on the host computer to copy the Windows ADK files into.","pos":[1634,1719]},{"content":"Unmount WinPE.","pos":[1732,1746]},{"content":"Create WinPE bootable media, or replace the WinPE image file on your existing removable media.","pos":[1841,1935]},{"content":"Install and use DISM from WinPE","pos":[2005,2036]},{"content":"Boot your destination device to WinPE.","pos":[2044,2082]},{"pos":[2087,2228],"content":"Install and configure DISM's required drivers by using either <bpt id=\"p1\">**</bpt>WimMountAdkSetupAmd64.exe /Install<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>WimMountAdkSetupX86.exe /Install<ept id=\"p2\">**</ept>."},{"content":"For the default (RAMDisk) version of WinPE, you'll need to run this command each time you boot WinPE.","pos":[2308,2409]},{"content":"To learn how to run this command automatically when WinPE boots, see <bpt id=\"p1\">[</bpt>Wpeinit and Startnet.cmd: Using WinPE Startup Scripts<ept id=\"p1\">](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)</ept>.","pos":[2410,2591]},{"content":"Verify that the Windows 10 version of DISM is installed.","pos":[2597,2653]},{"content":"The output shows the build number, for example:","pos":[2707,2754]},{"content":"Run DISM commands from the new folder.","pos":[2861,2899]},{"pos":[3049,3063],"content":"Related topics"},{"content":"DISM Supported Platforms","pos":[3067,3091]},{"content":"WinPE: Mount and Customize","pos":[3124,3150]}],"content":"---\nauthor: Justinha\nDescription: Install Windows 10 using a previous version of Windows PE\nms.assetid: 8abda3c5-0689-4a61-ae3e-7fa51c7e2028\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: Install Windows 10 using a previous version of Windows PE\n---\n\n# Install Windows 10 using a previous version of Windows PE\n\n\nTo install some features of Windows 10, such as Compact OS, you'll need the Windows 10 version of DISM.\n\nYou can include the latest version DISM in your Windows Preinstallation Environment (WinPE) image, or run it from a separate location, such as on a removable drive. If you include it with WinPE, it will add roughly 4MB to the size of your DISM image.\n\nYou'll need to install and configure the drivers needed for DISM, including the wimmount.sys and wofadk.sys drivers, each time you boot WinPE.\n\n**To add DISM into your Windows PE image**\n\n1.  On your technician PC, install the Windows ADK for Windows 10.\n2.  Mount WinPE. For WinPE 3.x, mount the file: \\\\sources\\\\winpe.wim. For WinPE 4.x and 5.x, mount the file: \\\\sources\\\\boot.wim.\n\n    ``` syntax\n    md \"C:\\WinPE_amd64\\mount\"\n\n    Dism /Mount-Image /ImageFile:\"C:\\WinPE_amd64\\media\\sources\\boot.wim\" /index:1 /MountDir:\"C:\\WinPE_amd64\\mount\"\n    ```\n\n3.  Copy the DISM folder from the Windows ADK into a new folder in the mounted WinPE image.\n\n    ``` syntax\n    md C:\\WinPE_amd64\\mount\\DISM\n\n    robocopy \"C:\\Program Files (x86)\\Windows Kits\\10\\Assessment and Deployment Kit\\Deployment Tools\\amd64\\DISM\" C:\\WinPE_amd64\\mount\\DISM\n    ```\n\n    **Important**   Don't overwrite the existing DISM files from the **system32** folder in the WinPE image. Instead, create a new folder on the host computer to copy the Windows ADK files into.\n\n     \n\n4.  Unmount WinPE.\n\n    ``` syntax\n    Dism /Unmount-Image /MountDir:\"C:\\WinPE_amd64\\mount\" /commit\n    ```\n\n5.  Create WinPE bootable media, or replace the WinPE image file on your existing removable media.\n\n    ``` syntax\n    MakeWinPEMedia /UFD C:\\WinPE_amd64 F:\n    ```\n\n**Install and use DISM from WinPE**\n\n1.  Boot your destination device to WinPE.\n2.  Install and configure DISM's required drivers by using either **WimMountAdkSetupAmd64.exe /Install** or **WimMountAdkSetupX86.exe /Install**.\n\n    ``` syntax\n    X:\\DISM\\WimMountAdkSetupAmd64.exe /Install /q\n    ```\n\n    For the default (RAMDisk) version of WinPE, you'll need to run this command each time you boot WinPE. To learn how to run this command automatically when WinPE boots, see [Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md).\n\n3.  Verify that the Windows 10 version of DISM is installed.\n\n    ``` syntax\n    X:\\DISM\\Dism.exe /?\n    ```\n\n    The output shows the build number, for example:\n\n    ``` syntax\n    Deployment Image Servicing and Management tool\n    Version: 10.0.10122.0\n    ```\n\n4.  Run DISM commands from the new folder.\n\n    ``` syntax\n    X:\\DISM\\Dism.exe /Apply-Image /ImageFile:install.wim /Index:1 /ApplyDir:W: /Compact\n    ```\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[DISM Supported Platforms](dism-supported-platforms.md)\n\n[WinPE: Mount and Customize](winpe-mount-and-customize.md)\n\n \n\n \n\n\n\n\n\n\n"}