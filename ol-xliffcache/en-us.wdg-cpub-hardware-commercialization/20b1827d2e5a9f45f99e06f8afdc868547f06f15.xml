{"nodes":[{"content":"WinPE Network Drivers: Initializing and adding drivers","pos":[35,89]},{"content":"WinPE Network Drivers: Initializing and adding drivers","pos":[198,252]},{"content":"WinPE Network Drivers: Initializing and adding drivers","pos":[261,315]},{"content":"The Wpeutil command initializes the Windows PE (WinPE) network drivers as soon as WinPE boots.","pos":[318,412]},{"content":"The default WinPE image includes support for many popular network adapters, and supports many of the same networking commands as in Windows.Windows PE includes a basic set of network drivers for many popular network adapters, and supports many of the same networking commands as in Windows.","pos":[413,703]},{"content":"The supported methods of connecting to file servers are TCP/IP and NetBIOS over TCP/IP.","pos":[705,792]},{"content":"Windows PE doesn't support other methods, like the Internetwork Packet Exchange/Sequenced Packet Exchange (IPX/SPX) network protocol.","pos":[793,926]},{"content":"Windows PE supports Distributed File System (DFS) name resolution for stand-alone namespaces only.","pos":[928,1026]},{"content":"It doesn't support domain namespaces.","pos":[1027,1064]},{"content":"Stand-alone DFS namespaces allow for a DFS namespace that exists only on the local PC and therefore doesn't use Active Directory® Domain Services (AD DS).","pos":[1065,1219]},{"content":"Connecting to an IPv4 network from Windows PE on an IPv6 network is not supported.","pos":[1221,1303]},{"content":"To connect to another PC or shared folder on a network","pos":[1307,1361]},{"content":"While in Windows PE, you can connect (or map) to a shared network folder by using the <bpt id=\"p1\">[</bpt>net use<ept id=\"p1\">](http://technet.microsoft.com/library/bb490717.aspx)</ept> command.","pos":[1369,1525]},{"content":"If you’re connecting to a domain-joined PC, Windows PE prompts for a username and password.","pos":[1526,1617]},{"pos":[1677,1861],"content":"You can also host Windows PE from a network by using Preboot Execution Environment (PXE), which is part of <bpt id=\"p1\">[</bpt>Windows Deployment Services<ept id=\"p1\">](http://technet.microsoft.com/library/hh831764)</ept>."},{"content":"Troubleshooting networking problems","pos":[1865,1900]},{"content":"Try adding a driver for your network device.","pos":[1908,1952]},{"pos":[1958,2112],"content":"We recommend <bpt id=\"p1\">[</bpt>WinPE: Mount and Customize<ept id=\"p1\">](winpe-mount-and-customize.md)</ept>, especially for any driver that requires a reboot during the installation process."},{"content":"You may also be able to use the <bpt id=\"p1\">[</bpt>Drvload Command-Line Options<ept id=\"p1\">](drvload-command-line-options.md)</ept> to load some drivers while Windows PE is running.","pos":[2118,2263]},{"content":"However, any updates made to the registry during the installation process will not persist after a reboot, even when Windows PE is running in a <bpt id=\"p1\">[</bpt>WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)<ept id=\"p1\">](winpe-install-on-a-hard-drive--flat-boot-or-non-ram.md)</ept>.","pos":[2264,2520]},{"content":"Run <bpt id=\"p1\">[</bpt>Wpeinit and Startnet.cmd: Using WinPE Startup Scripts<ept id=\"p1\">](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)</ept> to initialize the network.","pos":[2526,2668]},{"content":"By default, wpeinit runs when Windows PE starts.","pos":[2669,2717]},{"content":"In some cases, you may need to configure firewall settings on the PC that you are trying to connect to.","pos":[2723,2826]},{"content":"Windows PE supports <bpt id=\"p1\">[</bpt>IPSec configuration<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?linkid=81713)</ept>.","pos":[2827,2917]},{"content":"Note, you cannot join Windows PE to a domain, or run Windows PE as a server.","pos":[2923,2999]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>WinPE for Windows 10<ept id=\"p1\">](winpe-intro.md)</ept>.","pos":[3000,3065]},{"content":"To connect to a wired network using 802.1x authentication protocols","pos":[3069,3136]},{"pos":[3144,3232],"content":"Create a custom Windows PE image that includes the <bpt id=\"p1\">**</bpt>WinPE-Dot3Svc<ept id=\"p1\">**</ept> optional component."},{"content":"Boot a PC to Windows PE.","pos":[3238,3262]},{"content":"Start the dot3svc service.","pos":[3268,3294]},{"content":"Add a LAN profile.","pos":[3346,3364]},{"content":"For example:","pos":[3365,3377]},{"content":"Sample LAN Profile:","pos":[3461,3480]},{"content":"Link the EAP User Data with the profile.","pos":[6427,6467]},{"content":"For example:","pos":[6468,6480]},{"content":"Sample EAP User Data file:","pos":[6604,6630]},{"pos":[8215,8422],"content":"For more info, see <bpt id=\"p1\">[</bpt>How to enable computer-only authentication for an 802.1X-based network in Windows Vista, in Windows Server 2008, and in Windows XP Service Pack 3<ept id=\"p1\">](http://support.microsoft.com/kb/929847)</ept>."},{"pos":[8460,8474],"content":"Related topics"},{"content":"WinPE for Windows 10","pos":[8478,8498]},{"content":"WinPE: Mount and Customize","pos":[8518,8544]},{"content":"Wpeinit and Startnet.cmd: Using WinPE Startup Scripts","pos":[8578,8631]},{"content":"Drvload Command-Line Options","pos":[8691,8719]}],"content":"---\nauthor: Justinha\nDescription: 'WinPE Network Drivers: Initializing and adding drivers'\nms.assetid: 36eba03c-ba15-4b34-b1cb-fd83cad08d63\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: 'WinPE Network Drivers: Initializing and adding drivers'\n---\n\n# WinPE Network Drivers: Initializing and adding drivers\n\n\nThe Wpeutil command initializes the Windows PE (WinPE) network drivers as soon as WinPE boots. The default WinPE image includes support for many popular network adapters, and supports many of the same networking commands as in Windows.Windows PE includes a basic set of network drivers for many popular network adapters, and supports many of the same networking commands as in Windows.\n\nThe supported methods of connecting to file servers are TCP/IP and NetBIOS over TCP/IP. Windows PE doesn't support other methods, like the Internetwork Packet Exchange/Sequenced Packet Exchange (IPX/SPX) network protocol.\n\nWindows PE supports Distributed File System (DFS) name resolution for stand-alone namespaces only. It doesn't support domain namespaces. Stand-alone DFS namespaces allow for a DFS namespace that exists only on the local PC and therefore doesn't use Active Directory® Domain Services (AD DS).\n\nConnecting to an IPv4 network from Windows PE on an IPv6 network is not supported.\n\n**To connect to another PC or shared folder on a network**\n\n1.  While in Windows PE, you can connect (or map) to a shared network folder by using the [net use](http://technet.microsoft.com/library/bb490717.aspx) command. If you’re connecting to a domain-joined PC, Windows PE prompts for a username and password.\n\n    ``` syntax\n    net use n: \\\\server\\share\n    ```\n\n2.  You can also host Windows PE from a network by using Preboot Execution Environment (PXE), which is part of [Windows Deployment Services](http://technet.microsoft.com/library/hh831764).\n\n**Troubleshooting networking problems**\n\n1.  Try adding a driver for your network device.\n\n    We recommend [WinPE: Mount and Customize](winpe-mount-and-customize.md), especially for any driver that requires a reboot during the installation process.\n\n    You may also be able to use the [Drvload Command-Line Options](drvload-command-line-options.md) to load some drivers while Windows PE is running. However, any updates made to the registry during the installation process will not persist after a reboot, even when Windows PE is running in a [WinPE: Install on a Hard Drive (Flat Boot or Non-RAM)](winpe-install-on-a-hard-drive--flat-boot-or-non-ram.md).\n\n2.  Run [Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md) to initialize the network. By default, wpeinit runs when Windows PE starts.\n\n3.  In some cases, you may need to configure firewall settings on the PC that you are trying to connect to. Windows PE supports [IPSec configuration](http://go.microsoft.com/fwlink/p/?linkid=81713).\n\n4.  Note, you cannot join Windows PE to a domain, or run Windows PE as a server. For more information, see [WinPE for Windows 10](winpe-intro.md).\n\n**To connect to a wired network using 802.1x authentication protocols**\n\n1.  Create a custom Windows PE image that includes the **WinPE-Dot3Svc** optional component.\n\n2.  Boot a PC to Windows PE.\n\n3.  Start the dot3svc service.\n\n    ``` syntax\n    net start dot3svc\n    ```\n\n4.  Add a LAN profile. For example:\n\n    ``` syntax\n    netsh lan add profile=\"G:\\EthernetLANProfile.xml\"\n    ```\n\n    Sample LAN Profile:\n\n    ``` syntax\n    <?xml version=\"1.0\"?>\n    <!-- Sample LAN profile: EthernetLANProfile.xml\" -->\n    <LANProfile xmlns=\"http://www.microsoft.com/networking/LAN/profile/v1\">\n      <MSM>\n        <security>\n          <OneXEnforced>false</OneXEnforced>\n          <OneXEnabled>true</OneXEnabled>\n          <OneX xmlns=\"http://www.microsoft.com/networking/OneX/v1\">\n            <cacheUserData>true</cacheUserData>\n            <authMode>user</authMode>\n            <EAPConfig><EapHostConfig \n              xmlns=\"http://www.microsoft.com/provisioning/EapHostConfig\"><EapMethod><Type \n              xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">25</Type><VendorId \n              xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</VendorId><VendorType \n              xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</VendorType><AuthorId \n              xmlns=\"http://www.microsoft.com/provisioning/EapCommon\">0</AuthorId></EapMethod><Config \n              xmlns=\"http://www.microsoft.com/provisioning/EapHostConfig\"><Eap \n              xmlns=\"http://www.microsoft.com/provisioning/BaseEapConnectionPropertiesV1\">\n            <Type>25</Type><EapType \n              xmlns=\"http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV1\">\n            <ServerValidation>\n              <DisableUserPromptForServerValidation>false</DisableUserPromptForServerValidation>\n              <ServerNames></ServerNames>\n              <TrustedRootCA>1a 2b 3c 4d 56 78 90 aa bb cc dd ee ff 1a 2b 3c 4d 5e 6f</TrustedRootCA>\n              </ServerValidation><FastReconnect>true</FastReconnect>\n              <InnerEapOptional>false</InnerEapOptional><Eap \n                xmlns=\"http://www.microsoft.com/provisioning/BaseEapConnectionPropertiesV1\">\n              <Type>26</Type><EapType \n                xmlns=\"http://www.microsoft.com/provisioning/MsChapV2ConnectionPropertiesV1\">\n              <UseWinLogonCredentials>false</UseWinLogonCredentials></EapType></Eap>\n              <EnableQuarantineChecks>false</EnableQuarantineChecks>\n              <RequireCryptoBinding>false</RequireCryptoBinding><PeapExtensions>\n              <PerformServerValidation \n                xmlns=\"http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV2\">false\n              </PerformServerValidation><AcceptServerName \n                xmlns=\"http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV2\">false\n                </AcceptServerName><PeapExtensionsV2 \n                xmlns=\"http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV2\">\n              <AllowPromptingWhenServerCANotFound \n                xmlns=\"http://www.microsoft.com/provisioning/MsPeapConnectionPropertiesV3\">true\n              </AllowPromptingWhenServerCANotFound></PeapExtensionsV2></PeapExtensions></EapType>\n            </Eap></Config></EapHostConfig></EAPConfig>\n          </OneX>\n        </security>\n      </MSM>\n    </LANProfile>\n    ```\n\n5.  Link the EAP User Data with the profile. For example:\n\n    ``` syntax\n    netsh lan set eapuserdata filename=\"g:\\EAP_UserData.xml\" alluser=yes Interface=\"ethernet\"\n    ```\n\n    Sample EAP User Data file:\n\n    ``` syntax\n    <?xml version=\"1.0\"?>\n    <!-- Sample EAP user data: EAP_UserData.xml\" -->\n    <EapHostUserCredentials \n      xmlns=\"http://www.microsoft.com/provisioning/EapHostUserCredentials\" \n      xmlns:eapCommon=\"http://www.microsoft.com/provisioning/EapCommon\" \n      xmlns:baseEap=\"http://www.microsoft.com/provisioning/BaseEapMethodUserCredentials\">\n      <EapMethod>\n        <eapCommon:Type>25</eapCommon:Type>\n        <eapCommon:AuthorId>0</eapCommon:AuthorId>\n      </EapMethod>\n      <Credentials>\n        xmlns:eapUser=\"http://www.microsoft.com/provisioning/EapUserPropertiesV1\" \n        xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n        xmlns:baseEap=\"http://www.microsoft.com/provisioning/BaseEapUserPropertiesV1\" \n        xmlns:MsPeap=\"http://www.microsoft.com/provisioning/MsPeapUserPropertiesV1\" \n        xmlns:MsChapV2=\"http://www.microsoft.com/provisioning/MsChapV2UserPropertiesV1\">\n        <baseEap:Eap>\n          <baseEap:Type>25</baseEap:Type>\n          <MsPeap:EapType>\n            <MsPeap:RoutingIdentity>onex\\administrator</MsPeap:RoutingIdentity>\n            <baseEap:Eap>\n              <baseEap:Type>26</baseEap:Type>\n              <MsChapV2:EapType>\n                <MsChapV2:Username>actualuser</MsChapV2:Username>\n                <MsChapV2:Password>actualpassword</MsChapV2:Password>\n                <MsChapV2:LogonDomain>actualdomain</MsChapV2:LogonDomain>\n              </MsChapV2:EapType>\n            </baseEap:Eap>\n          </MsPeap:EapType>\n        </baseEap:Eap>\n      </Credentials>\n    </EapHostUserCredentials>\n    ```\n\n6.  For more info, see [How to enable computer-only authentication for an 802.1X-based network in Windows Vista, in Windows Server 2008, and in Windows XP Service Pack 3](http://support.microsoft.com/kb/929847).\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[WinPE for Windows 10](winpe-intro.md)\n\n[WinPE: Mount and Customize](winpe-mount-and-customize.md)\n\n[Wpeinit and Startnet.cmd: Using WinPE Startup Scripts](wpeinit-and-startnetcmd-using-winpe-startup-scripts.md)\n\n[Drvload Command-Line Options](drvload-command-line-options.md)\n\n \n\n \n\n\n\n\n\n\n"}