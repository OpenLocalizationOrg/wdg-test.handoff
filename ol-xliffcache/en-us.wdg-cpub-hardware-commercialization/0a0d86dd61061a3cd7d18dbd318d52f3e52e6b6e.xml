{"nodes":[{"content":"You can use the Windows Imaging and Configuration Designer (ICD) UI to create a new Windows 10 Mobile image and customize it by adding settings and some assets.","pos":[18,178]},{"content":"Use the Windows ICD UI to customize and build a mobile image","pos":[269,329]},{"content":"Use the Windows ICD UI to customize and build a mobile image","pos":[355,415]},{"content":"You can use the Windows Imaging and Configuration Designer (ICD) UI to create a new Windows 10 Mobile image and customize it by adding settings and some assets.","pos":[418,578]},{"content":"This imaging method requires a pre-installed OS kit so you must have all the necessary Microsoft OS packages and feature manifest files in your default install path.","pos":[580,745]},{"content":"A configuration data file (BSP.config.xml), which contains information about the hardware component packages for your board support package (BSP), is also required.","pos":[746,910]},{"content":"For the BSP.config.xml file, you can:","pos":[911,948]},{"content":"Use the BSP.config.xml file you downloaded as part of the BSP kit, or,","pos":[954,1024]},{"content":"Generate your own BSP.config.xml by running the BSP kit configuration tools from the SoC vendor and selecting your component drivers.","pos":[1030,1163]},{"pos":[1302,1347],"content":"Build a mobile image using the Windows ICD UI"},{"content":"This walkthrough shows how to use the Windows ICD UI to customize, build, and flash a mobile image.","pos":[1350,1449]},{"pos":[1455,1531],"content":"From the Windows ICD Start page, select <bpt id=\"p1\">**</bpt>New Windows image customization<ept id=\"p1\">**</ept>."},{"pos":[1537,1603],"content":"Or, you can also select <bpt id=\"p1\">**</bpt>New Project...<ept id=\"p1\">**</ept> from the <bpt id=\"p2\">**</bpt>File<ept id=\"p2\">**</ept> menu."},{"content":"In the <bpt id=\"p1\">**</bpt>Enter Project Details<ept id=\"p1\">**</ept> window, specify a <bpt id=\"p2\">**</bpt>Name<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Location<ept id=\"p3\">**</ept> for your project.","pos":[1609,1703]},{"content":"Optionally, you can also enter a brief <bpt id=\"p1\">**</bpt>Description<ept id=\"p1\">**</ept> to describe your project.","pos":[1704,1784]},{"pos":[1790,1805],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."},{"content":"If you created the project from the Start page, skip this step.","pos":[1811,1874]},{"pos":[1880,2011],"content":"In the <bpt id=\"p1\">**</bpt>Select project workflow<ept id=\"p1\">**</ept> window, select <bpt id=\"p2\">**</bpt>Imaging<ept id=\"p2\">**</ept> from the list of available project workflows and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[2017,2150],"content":"In the <bpt id=\"p1\">**</bpt>Select imaging source format<ept id=\"p1\">**</ept> window, select <bpt id=\"p2\">**</bpt>The Windows image is based on Microsoft packages<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"content":"You will be prompted to specify a BSP.config.xml file.","pos":[2156,2210]},{"pos":[2216,2366],"content":"In the <bpt id=\"p1\">**</bpt>Select hardware component drivers<ept id=\"p1\">**</ept> window, click <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> to launch File Explorer and search for the location of your BSP.config.xml file."},{"pos":[2372,2389],"content":"Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept>."},{"content":"This loads all the customizations that you can configure based on the Windows edition that you selected.","pos":[2395,2499]},{"content":"Once all the available customizations are loaded, you can see the <bpt id=\"p1\">**</bpt>Customizations Page<ept id=\"p1\">**</ept>.","pos":[2500,2590]},{"pos":[2596,2713],"content":"In the <bpt id=\"p1\">**</bpt>Customizations Page<ept id=\"p1\">**</ept>, select the settings you want to customize from the <bpt id=\"p2\">**</bpt>Available Customizations<ept id=\"p2\">**</ept> pane."},{"content":"For this walkthrough, see <bpt id=\"p1\">[</bpt>Configure customizations in the Windows ICD UI<ept id=\"p1\">](#configure-customizations-in-the-windows-icd-ui)</ept> for a list of the settings we're using as examples.","pos":[2719,2894]},{"content":"Once you're done configuring the settings, proceed to the next step.","pos":[2895,2963]},{"content":"Although optional, export a provisioning package to encapsulate the settings you just configured and allow you to reuse all or most of the customizations for another project.","pos":[2969,3143]},{"pos":[3149,3279],"content":"To do this, click the <bpt id=\"p1\">**</bpt>Export<ept id=\"p1\">**</ept> dropdown in the main menu, select <bpt id=\"p2\">**</bpt>Provisioning Package<ept id=\"p2\">**</ept>, add the required package information."},{"pos":[3289,3358],"content":"<bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> - Name to use for the package, for example, <bpt id=\"p2\">*</bpt>Contoso<ph id=\"ph1\">\\_</ph>ppkg<ept id=\"p2\">*</ept>."},{"pos":[3367,3404],"content":"<bpt id=\"p1\">**</bpt>ID<ept id=\"p1\">**</ept> - Auto-generated package GUID."},{"content":"<bpt id=\"p1\">**</bpt>Owner<ept id=\"p1\">**</ept> - Package owner.","pos":[3413,3439]},{"content":"Set to <bpt id=\"p1\">*</bpt>OEM<ept id=\"p1\">*</ept>.","pos":[3440,3453]},{"content":"<bpt id=\"p1\">**</bpt>Version<ept id=\"p1\">**</ept> - Version info.","pos":[3462,3489]},{"content":"This is pre-populated with the latest package version number or \"1.0\".","pos":[3490,3560]},{"content":"Leave it set to the default, <bpt id=\"p1\">*</bpt>1.0<ept id=\"p1\">*</ept>, although you can set it to any version that you want.","pos":[3561,3650]},{"content":"<bpt id=\"p1\">**</bpt>Rank<ept id=\"p1\">**</ept> - Package rank, which is a value between 0 and 99 (inclusive).","pos":[3659,3730]},{"content":"Leave it set to the default, <bpt id=\"p1\">*</bpt>0<ept id=\"p1\">*</ept>.","pos":[3731,3764]},{"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> until you get to the <bpt id=\"p2\">**</bpt>Build the provisioning package<ept id=\"p2\">**</ept> screen.","pos":[3770,3848]},{"content":"Click <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> to build the package and then click <bpt id=\"p2\">**</bpt>Finish<ept id=\"p2\">**</ept>.","pos":[3849,3912]},{"pos":[3918,3979],"content":"Select <bpt id=\"p1\">**</bpt>Create<ept id=\"p1\">**</ept> from the main menu and then choose <bpt id=\"p2\">**</bpt>FFU<ept id=\"p2\">**</ept>."},{"pos":[3985,4057],"content":"In the <bpt id=\"p1\">**</bpt>Select image type<ept id=\"p1\">**</ept> screen, choose <bpt id=\"p2\">**</bpt>Test<ept id=\"p2\">**</ept> for the image type."},{"content":"Although there are other image types, a Test image type is good when your image is not yet final and you are still testing various components in your image.","pos":[4063,4219]},{"content":"The image is also unlocked and doesn't contain any security enforcements.","pos":[4220,4293]},{"pos":[4299,4314],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."},{"pos":[4320,4426],"content":"In the <bpt id=\"p1\">**</bpt>Describe the image<ept id=\"p1\">**</ept> screen, select the languages that you want to include as part of your image."},{"pos":[4432,4671],"content":"If you went through <bpt id=\"p1\">[</bpt>Part 1: Classic mobile deployment<ept id=\"p1\">](lab-1--classic-mobile-deployment.md)</ept>, the settings in this step are similar to how you would set the device languages in <bpt id=\"p2\">[</bpt>Configure the OEMInput file<ept id=\"p2\">](configure-the-oeminput-file.md)</ept>."},{"pos":[4681,4771],"content":"<bpt id=\"p1\">**</bpt>User Interface Languages<ept id=\"p1\">**</ept> - These are the display language(s) to install on the device."},{"pos":[4781,4836],"content":"Select <bpt id=\"p1\">*</bpt>en-gb<ept id=\"p1\">*</ept>, <bpt id=\"p2\">*</bpt>en-us<ept id=\"p2\">*</ept>, <bpt id=\"p3\">*</bpt>es-es<ept id=\"p3\">*</ept>, <bpt id=\"p4\">*</bpt>fr-fr<ept id=\"p4\">*</ept>, and <bpt id=\"p5\">*</bpt>zh-cn<ept id=\"p5\">*</ept>."},{"pos":[4846,4981],"content":"<bpt id=\"p1\">**</bpt>Keyboard Languages<ept id=\"p1\">**</ept> - These are additional keyboard languages to use for text correction and suggestions while typing on the device."},{"pos":[4991,5006],"content":"Select <bpt id=\"p1\">*</bpt>en-us<ept id=\"p1\">*</ept>."},{"pos":[5016,5110],"content":"<bpt id=\"p1\">**</bpt>Speech Languages<ept id=\"p1\">**</ept> - These are the speech languages that you want to install on your device."},{"pos":[5120,5135],"content":"Select <bpt id=\"p1\">*</bpt>en-us<ept id=\"p1\">*</ept>."},{"content":"Because we selected multiple languages in <bpt id=\"p1\">**</bpt>User Interface Languages<ept id=\"p1\">**</ept>, we need to select the default display language that the device will use when it is first turned on by the user.","pos":[5141,5324]},{"content":"To do this, choose <bpt id=\"p1\">**</bpt>Boot Language<ept id=\"p1\">**</ept> and select the default device language that you want to set.","pos":[5325,5422]},{"content":"For example, set this to <bpt id=\"p1\">*</bpt>en-us<ept id=\"p1\">*</ept>.","pos":[5423,5456]},{"content":"To set the country or region, choose <bpt id=\"p1\">**</bpt>Boot Locale<ept id=\"p1\">**</ept> and select the locale for the default region or country.","pos":[5462,5571]},{"content":"Any locale can be used as the regional format, but only the country (GeoID) value is used.","pos":[5572,5662]},{"content":"For example, set this to <bpt id=\"p1\">*</bpt>en-us<ept id=\"p1\">*</ept>.","pos":[5663,5696]},{"pos":[5702,5717],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."},{"pos":[5723,5834],"content":"To change the location where the files are saved, click <bpt id=\"p1\">**</bpt>Browse...<ept id=\"p1\">**</ept> under <bpt id=\"p2\">**</bpt>Select where to save the files<ept id=\"p2\">**</ept>."},{"content":"You may change the location where the files are saved, but typically the default location is fine.","pos":[5840,5938]},{"content":"Optional.","pos":[5944,5953]},{"content":"If you created a CAF file by following <bpt id=\"p1\">[</bpt>Configure customization settings<ept id=\"p1\">](configure-customization-settings.md)</ept>, you can include this by selecting <bpt id=\"p2\">**</bpt>Browse...<ept id=\"p2\">**</ept> under <bpt id=\"p3\">**</bpt>Customization answer file (optional)<ept id=\"p3\">**</ept> and specifying the location where you saved the CAF.","pos":[5954,6213]},{"pos":[6219,6288],"content":"For example, <bpt id=\"p1\">*</bpt>C:<ph id=\"ph1\">\\\\</ph>Contoso<ph id=\"ph2\">\\\\</ph>Customizations<ph id=\"ph3\">\\\\</ph>MobileCustomizations.xml<ept id=\"p1\">*</ept>."},{"pos":[6294,6430],"content":"To change the default location where you want to save the image, click <bpt id=\"p1\">**</bpt>Browse...<ept id=\"p1\">**</ept> to launch File Explorer and specify a new location."},{"pos":[6436,6480],"content":"To use the default location, click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."},{"content":"Click <bpt id=\"p1\">**</bpt>Build<ept id=\"p1\">**</ept> to start building the image.","pos":[6486,6530]},{"content":"The project information is displayed in the build page and the progress bar indicates the build status.","pos":[6531,6634]},{"content":"If you need to cancel the build, click <bpt id=\"p1\">**</bpt>Cancel<ept id=\"p1\">**</ept>.","pos":[6640,6690]},{"content":"This cancels the current build process, closes the wizard, and takes you back to the <bpt id=\"p1\">**</bpt>Customizations Page<ept id=\"p1\">**</ept>.","pos":[6691,6800]},{"content":"During the image build process, a lot of what's happening during the build process is shown in the build output window.","pos":[6806,6925]},{"content":"This window shows:","pos":[6926,6944]},{"content":"Warnings that might appear while the image is building.","pos":[6954,7009]},{"content":"Verbose build messages to indicate the phases within the image build process.","pos":[7019,7096]},{"content":"Error messages such as when the input files have schema errors or when the image fails to build.","pos":[7106,7202]},{"content":"If your build fails, an error message will be displayed.","pos":[7208,7264]},{"content":"You can review the build log to identify the issue by clicking <bpt id=\"p1\">**</bpt>View in Notepad<ept id=\"p1\">**</ept>.","pos":[7265,7348]},{"content":"If your build is successful, the name of the image and its location will be displayed.","pos":[7354,7440]},{"content":"If you choose, you can build the image again by picking a different image type, selecting different languages, and then starting another build.","pos":[7450,7593]},{"content":"To do this, click <bpt id=\"p1\">**</bpt>Back<ept id=\"p1\">**</ept> to select what you want to change, and then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept> to start another build.","pos":[7594,7703]},{"content":"Boot the device into image or FFU download mode.","pos":[7713,7761]},{"content":"To force your phone into image or FFU download mode manually, press and release the power button to reboot the phone and then immediately press and hold the volume up button.","pos":[7762,7936]},{"content":"Note that this option is available only after an initial FFU has been flashed to the phone.","pos":[7937,8028]},{"content":"If this doesn't work, check and follow the device flashing instructions provided by the SoC vendor.","pos":[8038,8137]},{"content":"If you are ready to flash the built image to your device, click <bpt id=\"p1\">**</bpt>Flash<ept id=\"p1\">**</ept> and select the target device to flash the FFU.","pos":[8147,8267]},{"content":"If you don't find the device listed in the list of available target device(s), click <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept>.","pos":[8268,8365]},{"pos":[8375,8574],"content":"If you want to flash the image to the device later, follow the steps in <bpt id=\"p1\">[</bpt>Deploy an image to a mobile device<ept id=\"p1\">](#deploy-an-image-to-a-mobile-device)</ept> when you are ready to flash the image to your device."},{"content":"It will take a few minutes for the image to be fully flashed to the device.","pos":[8584,8659]},{"content":"Once flashing is done, go through device setup and verify that your customizations appear as part of the image.","pos":[8660,8771]},{"pos":[8781,8878],"content":"If you are done, click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept> to close the wizard and go back to the <bpt id=\"p2\">**</bpt>Customizations Page<ept id=\"p2\">**</ept>."},{"pos":[9013,9059],"content":"Configure customizations in the Windows ICD UI"},{"content":"<bpt id=\"p1\">**</bpt>Note<ept id=\"p1\">**</ept>  When configuring customizations using Windows ICD, do not use the <bpt id=\"p2\">**</bpt>Image time settings<ept id=\"p2\">**</ept>, use the <bpt id=\"p3\">**</bpt>Runtime settings<ept id=\"p3\">**</ept> instead.","pos":[9062,9200]},{"content":"If you configure the image-time settings, this will cause an error due to a settings collision if the setting is configured in both WPAF and MCSF CAF.","pos":[9201,9351]},{"pos":[9356,9564],"content":"If you haven't done so already, you must first create the LayoutModification.xml files as shown in <bpt id=\"p1\">[</bpt>Configure the Start layout<ept id=\"p1\">](configure-the-start-layout.md)</ept> before proceeding with the steps in this section."},{"content":"To configure the Start layout","pos":[9568,9597]},{"pos":[9605,9741],"content":"In the <bpt id=\"p1\">**</bpt>Available customizations<ept id=\"p1\">**</ept> pane in Windows ICD, expand <bpt id=\"p2\">**</bpt>Runtime settings<ept id=\"p2\">**</ept>, select <bpt id=\"p3\">**</bpt>Start<ept id=\"p3\">**</ept>, and then select <bpt id=\"p4\">**</bpt>StartLayout<ept id=\"p4\">**</ept>."},{"pos":[9747,9806],"content":"In the middle pane, click <bpt id=\"p1\">**</bpt>Browse<ept id=\"p1\">**</ept> to open File Explorer."},{"pos":[9812,9962],"content":"In the File Explorer window, navigate to the location where you saved LayoutModification1.xml from step 1; for example, <bpt id=\"p1\">*</bpt>C:<ph id=\"ph1\">\\\\</ph>Contoso<ph id=\"ph2\">\\\\</ph>Customizations<ept id=\"p1\">*</ept>."},{"pos":[9968,10023],"content":"Select LayoutModification1.xml and then click <bpt id=\"p1\">**</bpt>Open<ept id=\"p1\">**</ept>."},{"pos":[10029,10138],"content":"This sets the value of <bpt id=\"p1\">**</bpt>StartLayout<ept id=\"p1\">**</ept> and the setting should appear in the <bpt id=\"p2\">**</bpt>Selected customizations<ept id=\"p2\">**</ept> page."},{"content":"Enterprise policies and enrollment settings are some of the customizations available only through Windows Provisioning.","pos":[10140,10259]},{"content":"Here, we'll configure a few of these policies to include as part of the image.","pos":[10260,10338]},{"content":"For more information about the other policies that you can configure, see <bpt id=\"p1\">[</bpt>Policies<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/hardware/dn965797)</ept> (for the Windows Provisioning settings).","pos":[10339,10526]},{"content":"Note that the Windows Provisioning settings topics do not provide a detailed description of each policy; instead, each topic links to the more detailed information in <bpt id=\"p1\">[</bpt>Policy CSP<ept id=\"p1\">](https://msdn.microsoft.com/library/windows/hardware/dn904962)</ept>.","pos":[10527,10769]},{"content":"To set policies","pos":[10773,10788]},{"pos":[10796,10891],"content":"In the <bpt id=\"p1\">**</bpt>Available customizations<ept id=\"p1\">**</ept> pane, expand <bpt id=\"p2\">**</bpt>Runtime settings<ept id=\"p2\">**</ept>, and select <bpt id=\"p3\">**</bpt>Policies<ept id=\"p3\">**</ept>."},{"pos":[10897,10974],"content":"Find <bpt id=\"p1\">**</bpt>Policies/DeviceLock<ept id=\"p1\">**</ept> and set <bpt id=\"p2\">**</bpt>MaxInactivityTimeDeviceLock<ept id=\"p2\">**</ept> to \"15\"."},{"content":"This specifies that after the device has been idle for 15 minutes, the device will become PIN or password locked.","pos":[10980,11093]},{"pos":[11099,11173],"content":"Find <bpt id=\"p1\">**</bpt>Policies/DeviceLock<ept id=\"p1\">**</ept> and set <bpt id=\"p2\">**</bpt>ScreenTimeoutWhileLocked<ept id=\"p2\">**</ept> to \"15\"."},{"content":"This specifies the duration, in seconds, for the screen timeout while on the lock screen.","pos":[11179,11268]},{"content":"For this example, the duration is 15 seconds.","pos":[11269,11314]},{"pos":[11478,11512],"content":"Deploy an image to a mobile device"},{"content":"Follow these steps if you deferred flashing the image to the device after it was built.","pos":[11515,11602]},{"content":"Boot the device into image or FFU download mode.","pos":[11608,11656]},{"content":"To force your phone into image or FFU download mode manually, press and release the power button to reboot the phone and then immediately press and hold the volume up button.","pos":[11657,11831]},{"content":"Note that this option is available only after an initial FFU has been flashed to the phone.","pos":[11832,11923]},{"content":"If this doesn't work, check and follow the device flashing instructions provided by the SoC vendor.","pos":[11929,12028]},{"content":"Using a USB cable, connect your phone to the host computer.","pos":[12034,12093]},{"pos":[12099,12212],"content":"Click <bpt id=\"p1\">**</bpt>Deploy<ept id=\"p1\">**</ept> from the main menu and choose <bpt id=\"p2\">**</bpt>To USB connected device<ept id=\"p2\">**</ept> to deploy the FFU image to the device."},{"pos":[12218,12390],"content":"In the <bpt id=\"p1\">**</bpt>Select an FFU image<ept id=\"p1\">**</ept> window, click <bpt id=\"p2\">**</bpt>Browse...<ept id=\"p2\">**</ept> to launch File Explorer and select the FFU that you want to flash to your target device, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"content":"Choose the target device or drive from the list.","pos":[12396,12444]},{"content":"If your device or drive is not listed, click <bpt id=\"p1\">**</bpt>Refresh<ept id=\"p1\">**</ept>.","pos":[12445,12502]},{"pos":[12508,12523],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept>."},{"pos":[12529,12610],"content":"In the <bpt id=\"p1\">**</bpt>Deploy to device<ept id=\"p1\">**</ept> window, choose <bpt id=\"p2\">**</bpt>Flash<ept id=\"p2\">**</ept> to start flashing the image."},{"pos":[12616,12666],"content":"Click <bpt id=\"p1\">**</bpt>Finish<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Deployment<ept id=\"p2\">**</ept> page."}],"content":"---\nDescription: 'You can use the Windows Imaging and Configuration Designer (ICD) UI to create a new Windows 10 Mobile image and customize it by adding settings and some assets.'\nms.assetid: bf897b96-2ab4-42c0-b825-34e7979b3761\nMSHAttr: 'PreferredLib:/library'\ntitle: Use the Windows ICD UI to customize and build a mobile image\nauthor: CelesteDG\n---\n\n# Use the Windows ICD UI to customize and build a mobile image\n\n\nYou can use the Windows Imaging and Configuration Designer (ICD) UI to create a new Windows 10 Mobile image and customize it by adding settings and some assets.\n\nThis imaging method requires a pre-installed OS kit so you must have all the necessary Microsoft OS packages and feature manifest files in your default install path. A configuration data file (BSP.config.xml), which contains information about the hardware component packages for your board support package (BSP), is also required. For the BSP.config.xml file, you can:\n\n-   Use the BSP.config.xml file you downloaded as part of the BSP kit, or,\n\n-   Generate your own BSP.config.xml by running the BSP kit configuration tools from the SoC vendor and selecting your component drivers.\n\n## <span id=\"to_build_a_mobile_image_using_the_windows_icd_ui\"></span><span id=\"TO_BUILD_A_MOBILE_IMAGE_USING_THE_WINDOWS_ICD_UI\"></span>Build a mobile image using the Windows ICD UI\n\n\nThis walkthrough shows how to use the Windows ICD UI to customize, build, and flash a mobile image.\n\n1.  From the Windows ICD Start page, select **New Windows image customization**.\n\n    Or, you can also select **New Project...** from the **File** menu.\n\n2.  In the **Enter Project Details** window, specify a **Name** and **Location** for your project. Optionally, you can also enter a brief **Description** to describe your project.\n\n3.  Click **Next**.\n\n4.  If you created the project from the Start page, skip this step.\n\n    In the **Select project workflow** window, select **Imaging** from the list of available project workflows and then click **Next**.\n\n5.  In the **Select imaging source format** window, select **The Windows image is based on Microsoft packages**, and then click **Next**.\n\n    You will be prompted to specify a BSP.config.xml file.\n\n6.  In the **Select hardware component drivers** window, click **Browse** to launch File Explorer and search for the location of your BSP.config.xml file.\n\n7.  Click **Finish**.\n\n    This loads all the customizations that you can configure based on the Windows edition that you selected. Once all the available customizations are loaded, you can see the **Customizations Page**.\n\n8.  In the **Customizations Page**, select the settings you want to customize from the **Available Customizations** pane.\n\n    For this walkthrough, see [Configure customizations in the Windows ICD UI](#configure-customizations-in-the-windows-icd-ui) for a list of the settings we're using as examples. Once you're done configuring the settings, proceed to the next step.\n\n9.  Although optional, export a provisioning package to encapsulate the settings you just configured and allow you to reuse all or most of the customizations for another project.\n\n    To do this, click the **Export** dropdown in the main menu, select **Provisioning Package**, add the required package information.\n\n    -   **Name** - Name to use for the package, for example, *Contoso\\_ppkg*.\n    -   **ID** - Auto-generated package GUID.\n    -   **Owner** - Package owner. Set to *OEM*.\n    -   **Version** - Version info. This is pre-populated with the latest package version number or \"1.0\". Leave it set to the default, *1.0*, although you can set it to any version that you want.\n    -   **Rank** - Package rank, which is a value between 0 and 99 (inclusive). Leave it set to the default, *0*.\n\n    Click **Next** until you get to the **Build the provisioning package** screen. Click **Build** to build the package and then click **Finish**.\n\n10. Select **Create** from the main menu and then choose **FFU**.\n\n11. In the **Select image type** screen, choose **Test** for the image type.\n\n    Although there are other image types, a Test image type is good when your image is not yet final and you are still testing various components in your image. The image is also unlocked and doesn't contain any security enforcements.\n\n12. Click **Next**.\n\n13. In the **Describe the image** screen, select the languages that you want to include as part of your image.\n\n    If you went through [Part 1: Classic mobile deployment](lab-1--classic-mobile-deployment.md), the settings in this step are similar to how you would set the device languages in [Configure the OEMInput file](configure-the-oeminput-file.md).\n\n    -   **User Interface Languages** - These are the display language(s) to install on the device.\n\n        Select *en-gb*, *en-us*, *es-es*, *fr-fr*, and *zh-cn*.\n\n    -   **Keyboard Languages** - These are additional keyboard languages to use for text correction and suggestions while typing on the device.\n\n        Select *en-us*.\n\n    -   **Speech Languages** - These are the speech languages that you want to install on your device.\n\n        Select *en-us*.\n\n14. Because we selected multiple languages in **User Interface Languages**, we need to select the default display language that the device will use when it is first turned on by the user. To do this, choose **Boot Language** and select the default device language that you want to set. For example, set this to *en-us*.\n\n15. To set the country or region, choose **Boot Locale** and select the locale for the default region or country. Any locale can be used as the regional format, but only the country (GeoID) value is used. For example, set this to *en-us*.\n\n16. Click **Next**.\n\n17. To change the location where the files are saved, click **Browse...** under **Select where to save the files**.\n\n    You may change the location where the files are saved, but typically the default location is fine.\n\n18. Optional. If you created a CAF file by following [Configure customization settings](configure-customization-settings.md), you can include this by selecting **Browse...** under **Customization answer file (optional)** and specifying the location where you saved the CAF.\n\n    For example, *C:\\\\Contoso\\\\Customizations\\\\MobileCustomizations.xml*.\n\n19. To change the default location where you want to save the image, click **Browse...** to launch File Explorer and specify a new location.\n\n    To use the default location, click **Next**.\n\n20. Click **Build** to start building the image. The project information is displayed in the build page and the progress bar indicates the build status.\n\n    If you need to cancel the build, click **Cancel**. This cancels the current build process, closes the wizard, and takes you back to the **Customizations Page**.\n\n21. During the image build process, a lot of what's happening during the build process is shown in the build output window. This window shows:\n\n    -   Warnings that might appear while the image is building.\n\n    -   Verbose build messages to indicate the phases within the image build process.\n\n    -   Error messages such as when the input files have schema errors or when the image fails to build.\n\n    If your build fails, an error message will be displayed. You can review the build log to identify the issue by clicking **View in Notepad**.\n\n    If your build is successful, the name of the image and its location will be displayed.\n\n    -   If you choose, you can build the image again by picking a different image type, selecting different languages, and then starting another build. To do this, click **Back** to select what you want to change, and then click **Next** to start another build.\n\n    -   Boot the device into image or FFU download mode. To force your phone into image or FFU download mode manually, press and release the power button to reboot the phone and then immediately press and hold the volume up button. Note that this option is available only after an initial FFU has been flashed to the phone.\n\n        If this doesn't work, check and follow the device flashing instructions provided by the SoC vendor.\n\n    -   If you are ready to flash the built image to your device, click **Flash** and select the target device to flash the FFU. If you don't find the device listed in the list of available target device(s), click **Refresh**.\n\n        If you want to flash the image to the device later, follow the steps in [Deploy an image to a mobile device](#deploy-an-image-to-a-mobile-device) when you are ready to flash the image to your device.\n\n        It will take a few minutes for the image to be fully flashed to the device. Once flashing is done, go through device setup and verify that your customizations appear as part of the image.\n\n    -   If you are done, click **Finish** to close the wizard and go back to the **Customizations Page**.\n\n## <span id=\"configure_customizations_in_the_windows_icd_ui\"></span><span id=\"CONFIGURE_CUSTOMIZATIONS_IN_THE_WINDOWS_ICD_UI\"></span>Configure customizations in the Windows ICD UI\n\n\n**Note**  When configuring customizations using Windows ICD, do not use the **Image time settings**, use the **Runtime settings** instead. If you configure the image-time settings, this will cause an error due to a settings collision if the setting is configured in both WPAF and MCSF CAF.\n\n \n\nIf you haven't done so already, you must first create the LayoutModification.xml files as shown in [Configure the Start layout](configure-the-start-layout.md) before proceeding with the steps in this section.\n\n**To configure the Start layout**\n\n1.  In the **Available customizations** pane in Windows ICD, expand **Runtime settings**, select **Start**, and then select **StartLayout**.\n\n2.  In the middle pane, click **Browse** to open File Explorer.\n\n3.  In the File Explorer window, navigate to the location where you saved LayoutModification1.xml from step 1; for example, *C:\\\\Contoso\\\\Customizations*.\n\n4.  Select LayoutModification1.xml and then click **Open**.\n\n    This sets the value of **StartLayout** and the setting should appear in the **Selected customizations** page.\n\nEnterprise policies and enrollment settings are some of the customizations available only through Windows Provisioning. Here, we'll configure a few of these policies to include as part of the image. For more information about the other policies that you can configure, see [Policies](https://msdn.microsoft.com/library/windows/hardware/dn965797) (for the Windows Provisioning settings). Note that the Windows Provisioning settings topics do not provide a detailed description of each policy; instead, each topic links to the more detailed information in [Policy CSP](https://msdn.microsoft.com/library/windows/hardware/dn904962).\n\n**To set policies**\n\n1.  In the **Available customizations** pane, expand **Runtime settings**, and select **Policies**.\n\n2.  Find **Policies/DeviceLock** and set **MaxInactivityTimeDeviceLock** to \"15\".\n\n    This specifies that after the device has been idle for 15 minutes, the device will become PIN or password locked.\n\n3.  Find **Policies/DeviceLock** and set **ScreenTimeoutWhileLocked** to \"15\".\n\n    This specifies the duration, in seconds, for the screen timeout while on the lock screen. For this example, the duration is 15 seconds.\n\n## <span id=\"Deploy_an_image_to_a_mobile_device\"></span><span id=\"deploy_an_image_to_a_mobile_device\"></span><span id=\"DEPLOY_AN_IMAGE_TO_A_MOBILE_DEVICE\"></span>Deploy an image to a mobile device\n\n\nFollow these steps if you deferred flashing the image to the device after it was built.\n\n1.  Boot the device into image or FFU download mode. To force your phone into image or FFU download mode manually, press and release the power button to reboot the phone and then immediately press and hold the volume up button. Note that this option is available only after an initial FFU has been flashed to the phone.\n\n    If this doesn't work, check and follow the device flashing instructions provided by the SoC vendor.\n\n2.  Using a USB cable, connect your phone to the host computer.\n\n3.  Click **Deploy** from the main menu and choose **To USB connected device** to deploy the FFU image to the device.\n\n4.  In the **Select an FFU image** window, click **Browse...** to launch File Explorer and select the FFU that you want to flash to your target device, and then click **Next**.\n\n5.  Choose the target device or drive from the list. If your device or drive is not listed, click **Refresh**.\n\n6.  Click **Next**.\n\n7.  In the **Deploy to device** window, choose **Flash** to start flashing the image.\n\n8.  Click **Finish** to close the **Deployment** page.\n\n \n\n \n\n\n\n"}