{"nodes":[{"content":"DISM Windows PE Servicing Command-Line Options","pos":[35,81]},{"content":"DISM Windows PE Servicing Command-Line Options","pos":[190,236]},{"content":"DISM Windows PE Servicing Command-Line Options","pos":[245,291]},{"content":"You can mount a Windows Preinstallation Environment (Windows PE) image and add or remove packages, drivers, and language packs using the appropriate driver, package, or international-servicing commands.","pos":[294,496]},{"content":"There are also commands that are specific to a Windows PE image, which can be used to prepare the Windows PE environment, enable profiling, list packages and prepare the Windows PE image for deployment.","pos":[497,699]},{"content":"Important","pos":[703,712]},{"content":"Windows PE profiling functionality is removed beginning with Windows 8.1.","pos":[717,790]},{"content":"The base syntax for servicing a Windows PE image is:","pos":[795,847]},{"pos":[849,995],"content":"<bpt id=\"p1\">**</bpt>DISM.exe<ept id=\"p1\">**</ept> <bpt id=\"p2\">**</bpt>/Image:<ept id=\"p2\">**</ept><bpt id=\"p3\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>path<ph id=\"ph2\">\\_</ph>to<ph id=\"ph3\">\\_</ph>image<ph id=\"ph4\">\\_</ph>directory<ph id=\"ph5\">&amp;gt;</ph><ept id=\"p3\">*</ept> <ph id=\"ph6\">\\[</ph><bpt id=\"p4\">**</bpt>dism<ph id=\"ph7\">\\_</ph>global<ph id=\"ph8\">\\_</ph>options<ept id=\"p4\">**</ept><ph id=\"ph9\">\\]</ph> {<bpt id=\"p5\">**</bpt>servicing<ph id=\"ph10\">\\_</ph>option<ept id=\"p5\">**</ept>} <ph id=\"ph11\">\\[</ph><bpt id=\"p6\">*</bpt><ph id=\"ph12\">&amp;lt;</ph>servicing<ph id=\"ph13\">\\_</ph>argument<ph id=\"ph14\">&amp;gt;</ph><ept id=\"p6\">*</ept>"},{"content":"In addition to the Deployment Image Servicing and Management (DISM) options, the following Windows PE servicing options are available for an offline image.","pos":[999,1154]},{"pos":[1156,1510],"content":"<bpt id=\"p1\">**</bpt>DISM.exe /Image:<ept id=\"p1\">**</ept> <bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>path<ph id=\"ph2\">\\_</ph>to<ph id=\"ph3\">\\_</ph>image<ph id=\"ph4\">\\_</ph>directory<ph id=\"ph5\">&amp;gt;</ph><ept id=\"p2\">*</ept> <ph id=\"ph6\">\\[</ph><bpt id=\"p3\">**</bpt>/Get-PESettings<ept id=\"p3\">**</ept><ph id=\"ph7\"> | </ph><bpt id=\"p4\">**</bpt>/Get-Profiling<ept id=\"p4\">**</ept><ph id=\"ph8\"> | </ph><bpt id=\"p5\">**</bpt>/Get-ScratchSpace<ept id=\"p5\">**</ept><ph id=\"ph9\"> | </ph><bpt id=\"p6\">**</bpt>/Get-TargetPath<ept id=\"p6\">**</ept><ph id=\"ph10\"> | </ph><bpt id=\"p7\">**</bpt>/Set-ScratchSpace:<ept id=\"p7\">**</ept><bpt id=\"p8\">*</bpt><ph id=\"ph11\">&amp;lt;</ph>size<ph id=\"ph12\">\\_</ph>of<ph id=\"ph13\">\\_</ph>ScratchSpace<ph id=\"ph14\">&amp;gt;</ph><ept id=\"p8\">*</ept><ph id=\"ph15\"> | </ph><bpt id=\"p9\">**</bpt>/Set-TargetPath :<ept id=\"p9\">**</ept><bpt id=\"p10\">*</bpt><ph id=\"ph16\">&amp;lt;</ph>target<ph id=\"ph17\">\\_</ph>path<ph id=\"ph18\">&amp;gt;</ph><ept id=\"p10\">*</ept><ph id=\"ph19\"> | </ph><bpt id=\"p11\">**</bpt>/Enable-Profiling<ept id=\"p11\">**</ept><ph id=\"ph20\"> | </ph><bpt id=\"p12\">**</bpt>/Disable-Profiling<ept id=\"p12\">**</ept><ph id=\"ph21\"> | </ph><bpt id=\"p13\">**</bpt>/Apply-Profiles:<ept id=\"p13\">**</ept><bpt id=\"p14\">*</bpt><ph id=\"ph22\">&amp;lt;</ph>path<ph id=\"ph23\">\\_</ph>to<ph id=\"ph24\">\\_</ph>myprofile.txt<ph id=\"ph25\">&amp;gt;</ph><ept id=\"p14\">*</ept>"},{"content":"Important","pos":[1516,1525]},{"content":"These options cannot be used with an online, running version of Windows PE.","pos":[1530,1605]},{"content":"You must specify a Windows PE image using the <bpt id=\"p1\">**</bpt>/Image:<ept id=\"p1\">**</ept><bpt id=\"p2\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>path<ph id=\"ph2\">\\_</ph>to<ph id=\"ph3\">\\_</ph>image<ph id=\"ph4\">\\_</ph>directory<ph id=\"ph5\">&amp;gt;</ph><ept id=\"p2\">*</ept> option.","pos":[1606,1707]},{"content":"The following table provides a description for how each Windows PE servicing option can be used on a Windows PE image.","pos":[1712,1830]},{"content":"These options are not case sensitive.","pos":[1831,1868]},{"content":"Option","pos":[1986,1992]},{"content":"Description","pos":[2015,2026]},{"content":"/Get-PESettings","pos":[2100,2115]},{"content":"Displays a list of Windows PE settings in the Windows PE image.","pos":[2154,2217]},{"content":"The list includes current profiling state, scratch space settings and target path settings.","pos":[2218,2309]},{"content":"For example:","pos":[2310,2322]},{"content":"Dism /image:C:\\test\\offline /Get-PESettings","pos":[2338,2381]},{"content":"/Get-Profiling","pos":[2452,2466]},{"content":"Retrieves the enabled/disabled state of the Windows PE profiling tool.","pos":[2505,2575]},{"content":"For example:","pos":[2576,2588]},{"content":"Dism /image:C:\\test\\offline /Get-Profiling","pos":[2604,2646]},{"content":"/Get-ScratchSpace","pos":[2716,2733]},{"content":"Retrieves the configured amount of Windows PE system volume scratch space.","pos":[2772,2846]},{"content":"This setting represents the amount of writeable space available on the Windows PE system volume when booted in ramdisk mode.","pos":[2847,2971]},{"content":"For example:","pos":[2972,2984]},{"content":"Dism /image:C:\\test\\offline /Get-ScratchSpace","pos":[3000,3045]},{"content":"/Get-TargetPath","pos":[3116,3131]},{"content":"Retrieves the target path of the Windows PE image.","pos":[3170,3220]},{"content":"The target path represents a path to the root of the Windows PE image at boot time.","pos":[3221,3304]},{"content":"For example:","pos":[3305,3317]},{"content":"Dism /image:C:\\test\\offline /Get-TargetPath","pos":[3333,3376]},{"content":"/Set-ScratchSpace:<ph id=\"ph1\">&lt;/strong&gt;&lt;em&gt;&amp;lt;</ph>size_of_ScratchSpace","pos":[3446,3501]},{"content":"Sets the available scratch space, in megabytes.","pos":[3540,3587]},{"content":"Valid values are 32, 64, 128, 256 and 512.","pos":[3588,3630]},{"content":"For example:","pos":[3631,3643]},{"content":"Dism /image:C:\\test\\offline /set-ScratchSpace:128","pos":[3659,3708]},{"content":"/Set-TargetPath :<ph id=\"ph1\">&lt;/strong&gt;&lt;em&gt;&amp;lt;</ph>target_path","pos":[3779,3824]},{"content":"For hard disk boot scenarios, this option sets the location of the Windows PE image on the disk.","pos":[3863,3959]},{"content":"Note the following limitations when setting the target path:","pos":[3967,4027]},{"content":"The path must be at least three characters and no longer than 32 characters","pos":[4044,4119]},{"content":"The path must start with a letter (any letter from C to Z)","pos":[4136,4194]},{"content":"The drive letter must be followed by *:","pos":[4211,4250]},{"content":"The remainder of the path must not contain any invalid characters, such as Unicode characters","pos":[4269,4362]},{"content":"The path must be absolute, no <ph id=\"ph1\">&amp;quot;</ph>.","pos":[4379,4416]},{"content":"or <ph id=\"ph1\">&amp;quot;</ph>..","pos":[4423,4434]},{"content":"elements","pos":[4441,4449]},{"content":"The path must not contain any blank spaces or","pos":[4466,4511]},{"content":"For example:","pos":[4545,4557]},{"content":"Dism /image:C:\\test\\offline /Set-TargetPath:X:\\","pos":[4573,4620]},{"content":"/Enable-Profiling","pos":[4690,4707]},{"content":"Enables profiling (file logging) so you can create your own profiles.","pos":[4746,4815]},{"content":"By default, profiling is disabled.","pos":[4816,4850]},{"content":"For example:","pos":[4851,4863]},{"content":"Dism /image:C:\\test\\offline /Enable-profiling","pos":[4879,4924]},{"content":"/Disable-Profiling","pos":[4995,5013]},{"content":"Turns off the file logging that is used to create a profile.","pos":[5052,5112]},{"content":"Dism /image:C:\\test\\offline /Disable-Profiling","pos":[5128,5174]},{"content":"/Apply-Profiles:<ph id=\"ph1\">&lt;/strong&gt;&lt;em&gt;&amp;lt;</ph>path_to_myprofile.txt","pos":[5244,5298]},{"content":"path_to_myprofiles.txt<ph id=\"ph1\">&amp;gt;&lt;/em&gt;</ph> must be a comma separated list of profile file names.","pos":[5345,5430]},{"content":"Removes any files from the Windows PE image that are not part of the custom profiles.","pos":[5438,5523]},{"content":"It also checks the custom profile against the CORE profile to ensure that custom application files and boot-critical files are not deleted.","pos":[5524,5663]},{"content":"A Windows PE image that has been customized using any profile is not serviceable.","pos":[5664,5745]},{"content":"However, <ph id=\"ph1\">&lt;strong&gt;</ph>/Get-Profiling<ph id=\"ph2\">&lt;/strong&gt;</ph>, <ph id=\"ph3\">&lt;strong&gt;</ph>/Get-TargetPath<ph id=\"ph4\">&lt;/strong&gt;</ph> and <ph id=\"ph5\">&lt;strong&gt;</ph>/Get-PESettings<ph id=\"ph6\">&lt;/strong&gt;</ph> will work.","pos":[5746,5868]},{"content":"For example:","pos":[5869,5881]},{"content":"Dism /image:C:\\test\\offline /Apply-Profiles:C:\\test\\profiles\\myprofile.txt","pos":[5897,5971]},{"pos":[6111,6122],"content":"Limitations"},{"content":"The Windows PE commands can be used to change international settings only in Windows PE 3.0 and Windows PE 4.0 images.","pos":[6125,6243]},{"pos":[6281,6295],"content":"Related topics"},{"content":"Windows PE for Windows 10","pos":[6299,6324]},{"content":"Wpeutil Command-Line Options","pos":[6344,6372]},{"content":"What is DISM?","pos":[6409,6422]},{"content":"DISM Image Management Command-Line Options","pos":[6443,6485]},{"content":"Deployment Image Servicing and Management (DISM) Command-Line Options","pos":[6540,6609]}],"content":"---\nauthor: Justinha\nDescription: 'DISM Windows PE Servicing Command-Line Options'\nms.assetid: d759221d-47ee-4f50-957e-3b978be22dea\nMSHAttr: 'PreferredLib:/library/windows/hardware'\ntitle: 'DISM Windows PE Servicing Command-Line Options'\n---\n\n# DISM Windows PE Servicing Command-Line Options\n\n\nYou can mount a Windows Preinstallation Environment (Windows PE) image and add or remove packages, drivers, and language packs using the appropriate driver, package, or international-servicing commands. There are also commands that are specific to a Windows PE image, which can be used to prepare the Windows PE environment, enable profiling, list packages and prepare the Windows PE image for deployment.\n\n**Important**  \nWindows PE profiling functionality is removed beginning with Windows 8.1.\n\n \n\nThe base syntax for servicing a Windows PE image is:\n\n**DISM.exe** **/Image:***&lt;path\\_to\\_image\\_directory&gt;* \\[**dism\\_global\\_options**\\] {**servicing\\_option**} \\[*&lt;servicing\\_argument&gt;*\\]\n\nIn addition to the Deployment Image Servicing and Management (DISM) options, the following Windows PE servicing options are available for an offline image.\n\n**DISM.exe /Image:** *&lt;path\\_to\\_image\\_directory&gt;* \\[**/Get-PESettings** | **/Get-Profiling** | **/Get-ScratchSpace** | **/Get-TargetPath** | **/Set-ScratchSpace:***&lt;size\\_of\\_ScratchSpace&gt;* | **/Set-TargetPath :***&lt;target\\_path&gt;* | **/Enable-Profiling** | **/Disable-Profiling** | **/Apply-Profiles:***&lt;path\\_to\\_myprofile.txt&gt;*\\]\n\n**Important**  \nThese options cannot be used with an online, running version of Windows PE. You must specify a Windows PE image using the **/Image:***&lt;path\\_to\\_image\\_directory&gt;* option.\n\n \n\nThe following table provides a description for how each Windows PE servicing option can be used on a Windows PE image. These options are not case sensitive.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Option</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>/Get-PESettings</strong></p></td>\n<td align=\"left\"><p>Displays a list of Windows PE settings in the Windows PE image. The list includes current profiling state, scratch space settings and target path settings. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Get-PESettings</strong></p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>/Get-Profiling</strong></p></td>\n<td align=\"left\"><p>Retrieves the enabled/disabled state of the Windows PE profiling tool. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Get-Profiling</strong></p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>/Get-ScratchSpace</strong></p></td>\n<td align=\"left\"><p>Retrieves the configured amount of Windows PE system volume scratch space. This setting represents the amount of writeable space available on the Windows PE system volume when booted in ramdisk mode. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Get-ScratchSpace</strong></p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>/Get-TargetPath</strong></p></td>\n<td align=\"left\"><p>Retrieves the target path of the Windows PE image. The target path represents a path to the root of the Windows PE image at boot time. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Get-TargetPath</strong></p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>/Set-ScratchSpace:</strong><em>&lt;size_of_ScratchSpace&gt;</em></p></td>\n<td align=\"left\"><p>Sets the available scratch space, in megabytes. Valid values are 32, 64, 128, 256 and 512. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /set-ScratchSpace:128</strong></p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>/Set-TargetPath :</strong><em>&lt;target_path&gt;</em></p></td>\n<td align=\"left\"><p>For hard disk boot scenarios, this option sets the location of the Windows PE image on the disk.</p>\n<p>Note the following limitations when setting the target path:</p>\n<ul>\n<li><p>The path must be at least three characters and no longer than 32 characters</p></li>\n<li><p>The path must start with a letter (any letter from C to Z)</p></li>\n<li><p>The drive letter must be followed by *:\\*</p></li>\n<li><p>The remainder of the path must not contain any invalid characters, such as Unicode characters</p></li>\n<li><p>The path must be absolute, no &quot;.&quot; or &quot;..&quot; elements</p></li>\n<li><p>The path must not contain any blank spaces or &quot;\\\\&quot;</p></li>\n</ul>\n<p>For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Set-TargetPath:X:\\</strong></p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>/Enable-Profiling</strong></p></td>\n<td align=\"left\"><p>Enables profiling (file logging) so you can create your own profiles. By default, profiling is disabled. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Enable-profiling</strong></p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>/Disable-Profiling</strong></p></td>\n<td align=\"left\"><p>Turns off the file logging that is used to create a profile.</p>\n<p><strong>Dism /image:C:\\test\\offline /Disable-Profiling</strong></p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>/Apply-Profiles:</strong><em>&lt;path_to_myprofile.txt&gt;</em></p></td>\n<td align=\"left\"><p><em>&lt;path_to_myprofiles.txt&gt;</em> must be a comma separated list of profile file names.</p>\n<p>Removes any files from the Windows PE image that are not part of the custom profiles. It also checks the custom profile against the CORE profile to ensure that custom application files and boot-critical files are not deleted. A Windows PE image that has been customized using any profile is not serviceable. However, <strong>/Get-Profiling</strong>, <strong>/Get-TargetPath</strong> and <strong>/Get-PESettings</strong> will work. For example:</p>\n<p><strong>Dism /image:C:\\test\\offline /Apply-Profiles:C:\\test\\profiles\\myprofile.txt</strong></p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <span id=\"Limitations\"></span><span id=\"limitations\"></span><span id=\"LIMITATIONS\"></span>Limitations\n\n\nThe Windows PE commands can be used to change international settings only in Windows PE 3.0 and Windows PE 4.0 images.\n\n## <span id=\"related_topics\"></span>Related topics\n\n\n[Windows PE for Windows 10](winpe-intro.md)\n\n[Wpeutil Command-Line Options](wpeutil-command-line-options.md)\n\n[What is DISM?](what-is-dism.md)\n\n[DISM Image Management Command-Line Options](dism-image-management-command-line-options-s14.md)\n\n[Deployment Image Servicing and Management (DISM) Command-Line Options](deployment-image-servicing-and-management--dism--command-line-options.md)\n\n \n\n \n\n\n\n\n\n\n"}