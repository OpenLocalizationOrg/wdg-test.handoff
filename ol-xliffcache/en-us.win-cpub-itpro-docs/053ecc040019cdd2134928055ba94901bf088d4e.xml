{"nodes":[{"content":"Migrate EFS Files and Certificates (Windows 10)","pos":[11,58]},{"content":"Migrate EFS Files and Certificates","pos":[72,106]},{"content":"Migrate EFS Files and Certificates","pos":[239,273]},{"content":"This topic describes how to migrate Encrypting File System (EFS) certificates.","pos":[276,354]},{"content":"For more information about the <bpt id=\"p1\">**</bpt>/efs<ept id=\"p1\">**</ept> For options, see <bpt id=\"p2\">[</bpt>ScanState Syntax<ept id=\"p2\">](usmt-scanstate-syntax.md)</ept>.","pos":[355,457]},{"content":"To Migrate EFS Files and Certificates","pos":[462,499]},{"content":"Encrypting File System (EFS) certificates will be migrated automatically.","pos":[502,575]},{"content":"However, by default, the User State Migration Tool (USMT) 10.0 fails if an encrypted file is found (unless you specify an <bpt id=\"p1\">**</bpt>/efs<ept id=\"p1\">**</ept> option).","pos":[576,715]},{"content":"Therefore, you must specify <bpt id=\"p1\">**</bpt>/efs:abort | skip | decryptcopy | copyraw | hardlink<ept id=\"p1\">**</ept> with the ScanState command to migrate the encrypted files.","pos":[716,859]},{"content":"Then, when you run the LoadState command on the destination computer, the encrypted file and the EFS certificate will be automatically migrated.","pos":[860,1004]},{"content":"Note","pos":[1008,1012]},{"content":"The <bpt id=\"p1\">**</bpt>/efs<ept id=\"p1\">**</ept> options are not used with the LoadState command.","pos":[1017,1078]},{"content":"Before using the ScanState tool for a migration that includes encrypted files and EFS certificates, you must ensure that all files in an encrypted folder are encrypted as well or remove the encryption attribute from folders that contain unencrypted files.","pos":[1083,1338]},{"content":"If the encryption attribute has been removed from a file but not from the parent folder, the file will be encrypted during the migration using the credentials of the account used to run the LoadState tool.","pos":[1339,1544]},{"content":"You can run the Cipher tool at a Windows command prompt to review and change encryption settings on files and folders.","pos":[1546,1664]},{"content":"For example, to remove encryption from a folder, at a command prompt type:","pos":[1665,1739]},{"pos":[1777,1885],"content":"Where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>Path<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> is the full path of the topmost parent directory where the encryption attribute is set."},{"content":"Related topics","pos":[1890,1904]},{"content":"What Does USMT Migrate?","pos":[1908,1931]},{"content":"Identify File Types, Files, and Folders","pos":[1967,2006]}],"content":"---\ntitle: Migrate EFS Files and Certificates (Windows 10)\ndescription: Migrate EFS Files and Certificates\nms.assetid: 7f19a753-ec45-4433-b297-cc30f16fdee1\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nauthor: greg-lindsay\n---\n\n# Migrate EFS Files and Certificates\n\n\nThis topic describes how to migrate Encrypting File System (EFS) certificates. For more information about the **/efs** For options, see [ScanState Syntax](usmt-scanstate-syntax.md).\n\n## To Migrate EFS Files and Certificates\n\n\nEncrypting File System (EFS) certificates will be migrated automatically. However, by default, the User State Migration Tool (USMT) 10.0 fails if an encrypted file is found (unless you specify an **/efs** option). Therefore, you must specify **/efs:abort | skip | decryptcopy | copyraw | hardlink** with the ScanState command to migrate the encrypted files. Then, when you run the LoadState command on the destination computer, the encrypted file and the EFS certificate will be automatically migrated.\n\n**Note**  \nThe **/efs** options are not used with the LoadState command.\n\n \n\nBefore using the ScanState tool for a migration that includes encrypted files and EFS certificates, you must ensure that all files in an encrypted folder are encrypted as well or remove the encryption attribute from folders that contain unencrypted files. If the encryption attribute has been removed from a file but not from the parent folder, the file will be encrypted during the migration using the credentials of the account used to run the LoadState tool.\n\nYou can run the Cipher tool at a Windows command prompt to review and change encryption settings on files and folders. For example, to remove encryption from a folder, at a command prompt type:\n\n``` syntax\nCipher /D /S:<PATH>\n```\n\nWhere *&lt;Path&gt;* is the full path of the topmost parent directory where the encryption attribute is set.\n\n## Related topics\n\n\n[What Does USMT Migrate?](usmt-what-does-usmt-migrate.md)\n\n[Identify File Types, Files, and Folders](usmt-identify-file-types-files-and-folders.md)\n\n \n\n \n\n\n\n\n\n"}