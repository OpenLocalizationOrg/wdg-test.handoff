{"nodes":[{"content":"Manage packaged apps with AppLocker (Windows 10)","pos":[11,59]},{"content":"This topic for IT professionals describes concepts and lists procedures to help you manage Packaged apps with AppLocker as part of your overall application control strategy.","pos":[73,246]},{"content":"Manage packaged apps with AppLocker","pos":[402,437]},{"content":"Applies to","pos":[441,451]},{"content":"Windows 10","pos":[458,468]},{"content":"This topic for IT professionals describes concepts and lists procedures to help you manage Packaged apps with AppLocker as part of your overall application control strategy.","pos":[470,643]},{"content":"Understanding Packaged apps and Packaged app installers for AppLocker","pos":[648,717]},{"content":"Packaged apps, also known as Universal Windows apps, are based on a model that ensures all the files within an app package share the same identity.","pos":[719,866]},{"content":"With classic Windows apps, each file within the app could have a unique identity.","pos":[867,948]},{"content":"With packaged apps, it is possible to control the entire app by using a single AppLocker rule.","pos":[949,1044]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  AppLocker supports only publisher rules for packaged apps.","pos":[1047,1116]},{"content":"All packaged apps must be signed by the software publisher because Windows does not support unsigned packaged apps.","pos":[1117,1232]},{"content":"Typically, an app consists of multiple components: the installer that is used to install the app, and one or more exes, dlls, or scripts.","pos":[1235,1372]},{"content":"With classic Windows apps, not all these components always share common attributes such as the software’s publisher name, product name, and product version.","pos":[1373,1529]},{"content":"Therefore, AppLocker controls each of these components separately through different rule collections, such as exe, dll, script, and Windows Installer rules.","pos":[1530,1686]},{"content":"In contrast, all the components of a packaged app share the same publisher name, package name, and package version attributes.","pos":[1687,1813]},{"content":"Therefore, you can control an entire app with a single rule.","pos":[1814,1874]},{"pos":[1925,1973],"content":"Comparing classic Windows apps and packaged apps"},{"content":"AppLocker policies for packaged apps can only be applied to apps installed on computers running at least Windows Server 2012 or Windows 8, but classic Windows apps can be controlled on devices running at least Windows Server 2008 R2 or Windows 7.","pos":[1975,2222]},{"content":"The rules for classic Windows apps and packaged apps can be enforced in tandem.","pos":[2223,2302]},{"content":"The differences between packaged apps and classic Windows apps that you should consider include:","pos":[2303,2399]},{"content":"<bpt id=\"p1\">**</bpt>Installing the apps<ept id=\"p1\">**</ept>   All packaged apps can be installed by a standard user, whereas a number of classic Windows apps require administrative privileges to install.","pos":[2405,2572]},{"content":"In an environment where most of the users are standard users, you might not have numerous exe rules (because classic Windows apps require administrative privileges to install), but you might want to have more explicit policies for packaged apps.","pos":[2573,2818]},{"content":"<bpt id=\"p1\">**</bpt>Changing the system state<ept id=\"p1\">**</ept>   Classic Windows apps can be written to change the system state if they are run with administrative privileges.","pos":[2823,2965]},{"content":"Most packaged apps cannot change the system state because they run with limited privileges.","pos":[2966,3057]},{"content":"When you design your AppLocker policies, it is important to understand whether an app that you are allowing can make system-wide changes.","pos":[3058,3195]},{"content":"<bpt id=\"p1\">**</bpt>Acquiring the apps<ept id=\"p1\">**</ept>   Packaged apps can be acquired through the Store, or by loading using Windows PowerShell cmdlets (which requires a special enterprise license).","pos":[3200,3367]},{"content":"Classic Windows apps can be acquired through traditional means.","pos":[3368,3431]},{"content":"AppLocker uses different rule collections to control packaged apps and classic Windows apps.","pos":[3433,3525]},{"content":"You have the choice to control one type, the other type, or both.","pos":[3526,3591]},{"pos":[3593,3694],"content":"For info about controlling classic Windows apps, see <bpt id=\"p1\">[</bpt>Administer AppLocker<ept id=\"p1\">](administer-applocker.md)</ept>."},{"pos":[3696,3861],"content":"For more info about packaged apps, see <bpt id=\"p1\">[</bpt>Packaged apps and packaged app installer rules in AppLocker<ept id=\"p1\">](packaged-apps-and-packaged-app-installer-rules-in-applocker.md)</ept>."},{"content":"Design and deployment decisions","pos":[3866,3897]},{"pos":[3899,4053],"content":"You can use two methods to create an inventory of packaged apps on a computer: the AppLocker console or the <bpt id=\"p1\">**</bpt>Get-AppxPackage<ept id=\"p1\">**</ept> Windows PowerShell cmdlet."},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  Not all packaged apps are listed in AppLocker’s application inventory wizard.","pos":[4056,4144]},{"content":"Certain app packages are framework packages that are leveraged by other apps.","pos":[4145,4222]},{"content":"By themselves, these packages cannot do anything, but blocking such packages can inadvertently cause failure for apps that you want to allow.","pos":[4223,4364]},{"content":"Instead, you can create Allow or Deny rules for the packaged apps that use these framework packages.","pos":[4365,4465]},{"content":"The AppLocker user interface deliberately filters out all the packages that are registered as framework packages.","pos":[4466,4579]},{"content":"For info about how to create an inventory list, see <bpt id=\"p1\">[</bpt>Create list of apps deployed to each business group<ept id=\"p1\">](create-list-of-applications-deployed-to-each-business-group.md)</ept>.","pos":[4580,4750]},{"pos":[4753,4931],"content":"For info about how to use the <bpt id=\"p1\">**</bpt>Get-AppxPackage<ept id=\"p1\">**</ept> Windows PowerShell cmdlet, see the <bpt id=\"p2\">[</bpt>AppLocker PowerShell Command Reference<ept id=\"p2\">](http://technet.microsoft.com/library/hh847210.aspx)</ept>."},{"pos":[4933,5056],"content":"For info about creating rules for Packaged apps, see <bpt id=\"p1\">[</bpt>Create a rule for packaged apps<ept id=\"p1\">](create-a-rule-for-packaged-apps.md)</ept>."},{"content":"Consider the following info when you are designing and deploying apps:","pos":[5058,5128]},{"content":"Because AppLocker supports only publisher rules for packaged apps, collecting the installation path information for packaged apps is not necessary.","pos":[5134,5281]},{"content":"You cannot create hash- or path-based rules for packaged apps because all packaged apps and packaged app installers are signed by the software publisher of the package.","pos":[5286,5454]},{"content":"Classic Windows apps were not always consistently signed; therefore, AppLocker has to support hash- or path-based rules.","pos":[5455,5575]},{"content":"By default, if there are no rules in a particular rule collection, AppLocker allows every file that is included in that rule collection.","pos":[5580,5716]},{"content":"For example, if there are no Windows Installer rules, AppLocker allows all .msi, .msp, and .mst files to run.","pos":[5717,5826]},{"content":"An existing AppLocker policy that was targeted at computers running Windows Server 2008 R2 and Windows 7 would not have rules for Packaged apps.","pos":[5827,5971]},{"content":"Therefore, when a computer running at least Windows Server 2012 or Windows 8 joins a domain where an AppLocker policy is already configured, users would be allowed to run any packaged app.","pos":[5972,6161]},{"content":"This might be contrary to your design.","pos":[6162,6200]},{"content":"To prevent all packaged apps from running on a newly domain-joined computer, by default AppLocker blocks all packaged apps on a computer running at least Windows Server 2012 or Windows 8 if the existing domain policy has rules configured in the exe rule collection.","pos":[6206,6471]},{"content":"You must take explicit action to allow packaged apps in your enterprise.","pos":[6472,6544]},{"content":"You can allow only a select set of packaged apps.","pos":[6545,6594]},{"content":"Or if you want to allow all packaged apps, you can create a default rule for the packaged apps collection.","pos":[6595,6701]},{"content":"Using AppLocker to manage packaged apps","pos":[6706,6745]},{"content":"Just as there are differences in managing each rule collection, you need to manage the packaged apps with the following strategy:","pos":[6747,6876]},{"content":"Gather information about which Packaged apps are running in your environment.","pos":[6882,6959]},{"content":"For information about how to do this, see <bpt id=\"p1\">[</bpt>Create list of apps deployed to each business group<ept id=\"p1\">](create-list-of-applications-deployed-to-each-business-group.md)</ept>.","pos":[6960,7120]},{"content":"Create AppLocker rules for specific packaged apps based on your policy strategies.","pos":[7126,7208]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Create a rule for packaged apps<ept id=\"p1\">](create-a-rule-for-packaged-apps.md)</ept> and <bpt id=\"p2\">[</bpt>Packaged Apps Default Rules in AppLocker<ept id=\"p2\">](http://technet.microsoft.com/library/ee460941(WS.10).aspx)</ept>.","pos":[7209,7411]},{"content":"Continue to update the AppLocker policies as new package apps are introduced into your environment.","pos":[7417,7516]},{"content":"To do this, see <bpt id=\"p1\">[</bpt>Add rules for packaged apps to existing AppLocker rule-set<ept id=\"p1\">](add-rules-for-packaged-apps-to-existing-applocker-rule-set.md)</ept>.","pos":[7517,7657]},{"content":"Continue to monitor your environment to verify the effectiveness of the rules that are deployed in AppLocker policies.","pos":[7663,7781]},{"content":"To do this, see <bpt id=\"p1\">[</bpt>Monitor app usage with AppLocker<ept id=\"p1\">](monitor-application-usage-with-applocker.md)</ept>.","pos":[7782,7878]}],"content":"---\ntitle: Manage packaged apps with AppLocker (Windows 10)\ndescription: This topic for IT professionals describes concepts and lists procedures to help you manage Packaged apps with AppLocker as part of your overall application control strategy.\nms.assetid: 6d0c99e7-0284-4547-a30a-0685a9916650\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Manage packaged apps with AppLocker\n\n**Applies to**\n-   Windows 10\n\nThis topic for IT professionals describes concepts and lists procedures to help you manage Packaged apps with AppLocker as part of your overall application control strategy.\n\n## Understanding Packaged apps and Packaged app installers for AppLocker\n\nPackaged apps, also known as Universal Windows apps, are based on a model that ensures all the files within an app package share the same identity. With classic Windows apps, each file within the app could have a unique identity. \nWith packaged apps, it is possible to control the entire app by using a single AppLocker rule.\n\n>**Note:**  AppLocker supports only publisher rules for packaged apps. All packaged apps must be signed by the software publisher because Windows does not support unsigned packaged apps.\n \nTypically, an app consists of multiple components: the installer that is used to install the app, and one or more exes, dlls, or scripts. With classic Windows apps, not all these components always share common attributes such as the software’s publisher name, product name, and product version. Therefore, AppLocker controls each of these components separately through different rule collections, such as exe, dll, script, and Windows Installer rules. In contrast, all the components of a packaged app share the same publisher name, package name, and package version attributes. Therefore, you can control an entire app with a single rule.\n\n### <a href=\"\" id=\"bkmk-compareclassicmetro\"></a>Comparing classic Windows apps and packaged apps\n\nAppLocker policies for packaged apps can only be applied to apps installed on computers running at least Windows Server 2012 or Windows 8, but classic Windows apps can be controlled on devices running at least Windows Server \n2008 R2 or Windows 7. The rules for classic Windows apps and packaged apps can be enforced in tandem. The differences between packaged apps and classic Windows apps that you should consider include:\n\n-   **Installing the apps**   All packaged apps can be installed by a standard user, whereas a number of classic Windows apps require administrative privileges to install. In an environment where most of the users are standard users, you might not have numerous exe rules (because classic Windows apps require administrative privileges to install), but you might want to have more explicit policies for packaged apps.\n-   **Changing the system state**   Classic Windows apps can be written to change the system state if they are run with administrative privileges. Most packaged apps cannot change the system state because they run with limited privileges. When you design your AppLocker policies, it is important to understand whether an app that you are allowing can make system-wide changes.\n-   **Acquiring the apps**   Packaged apps can be acquired through the Store, or by loading using Windows PowerShell cmdlets (which requires a special enterprise license). Classic Windows apps can be acquired through traditional means.\n\nAppLocker uses different rule collections to control packaged apps and classic Windows apps. You have the choice to control one type, the other type, or both.\n\nFor info about controlling classic Windows apps, see [Administer AppLocker](administer-applocker.md).\n\nFor more info about packaged apps, see [Packaged apps and packaged app installer rules in AppLocker](packaged-apps-and-packaged-app-installer-rules-in-applocker.md).\n\n## Design and deployment decisions\n\nYou can use two methods to create an inventory of packaged apps on a computer: the AppLocker console or the **Get-AppxPackage** Windows PowerShell cmdlet.\n\n>**Note:**  Not all packaged apps are listed in AppLocker’s application inventory wizard. Certain app packages are framework packages that are leveraged by other apps. By themselves, these packages cannot do anything, but blocking such packages can inadvertently cause failure for apps that you want to allow. Instead, you can create Allow or Deny rules for the packaged apps that use these framework packages. The AppLocker user interface deliberately filters out all the packages that are registered as framework packages. For info about how to create an inventory list, see [Create list of apps deployed to each business group](create-list-of-applications-deployed-to-each-business-group.md).\n \nFor info about how to use the **Get-AppxPackage** Windows PowerShell cmdlet, see the [AppLocker PowerShell Command Reference](http://technet.microsoft.com/library/hh847210.aspx).\n\nFor info about creating rules for Packaged apps, see [Create a rule for packaged apps](create-a-rule-for-packaged-apps.md).\n\nConsider the following info when you are designing and deploying apps:\n\n-   Because AppLocker supports only publisher rules for packaged apps, collecting the installation path information for packaged apps is not necessary.\n-   You cannot create hash- or path-based rules for packaged apps because all packaged apps and packaged app installers are signed by the software publisher of the package. Classic Windows apps were not always consistently signed; therefore, AppLocker has to support hash- or path-based rules.\n-   By default, if there are no rules in a particular rule collection, AppLocker allows every file that is included in that rule collection. For example, if there are no Windows Installer rules, AppLocker allows all .msi, .msp, and .mst files to run. An existing AppLocker policy that was targeted at computers running Windows Server 2008 R2 and Windows 7 would not have rules for Packaged apps. Therefore, when a computer running at least Windows Server 2012 or \nWindows 8 joins a domain where an AppLocker policy is already configured, users would be allowed to run any packaged app. This might be contrary to your design.\n\n    To prevent all packaged apps from running on a newly domain-joined computer, by default AppLocker blocks all packaged apps on a computer running at least Windows Server 2012 or Windows 8 if the existing domain policy has rules configured in the exe rule collection. You must take explicit action to allow packaged apps in your enterprise. You can allow only a select set of packaged apps. Or if you want to allow all packaged apps, you can create a default rule for the packaged apps collection.\n\n## Using AppLocker to manage packaged apps\n\nJust as there are differences in managing each rule collection, you need to manage the packaged apps with the following strategy:\n\n1.  Gather information about which Packaged apps are running in your environment. For information about how to do this, see [Create list of apps deployed to each business group](create-list-of-applications-deployed-to-each-business-group.md).\n\n2.  Create AppLocker rules for specific packaged apps based on your policy strategies. For more information, see [Create a rule for packaged apps](create-a-rule-for-packaged-apps.md) and [Packaged Apps Default Rules in AppLocker](http://technet.microsoft.com/library/ee460941(WS.10).aspx).\n\n3.  Continue to update the AppLocker policies as new package apps are introduced into your environment. To do this, see [Add rules for packaged apps to existing AppLocker rule-set](add-rules-for-packaged-apps-to-existing-applocker-rule-set.md).\n\n4.  Continue to monitor your environment to verify the effectiveness of the rules that are deployed in AppLocker policies. To do this, see [Monitor app usage with AppLocker](monitor-application-usage-with-applocker.md).\n"}