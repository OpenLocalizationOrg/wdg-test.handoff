{"nodes":[{"content":"Exclude Files and Settings (Windows 10)","pos":[11,50]},{"content":"Exclude Files and Settings","pos":[64,90]},{"content":"Exclude Files and Settings","pos":[223,249]},{"content":"When you specify the migration .xml files, MigApp.xml, Migdocs, and MigUser.xml, the User State Migration Tool (USMT) 10.0 migrates the settings and components listed, as discussed in <bpt id=\"p1\">[</bpt>What Does USMT Migrate?<ept id=\"p1\">](usmt-what-does-usmt-migrate.md)</ept>","pos":[250,491]},{"content":"You can create a custom .xml file to further specify what to include or exclude in the migration.","pos":[492,589]},{"content":"In addition you can create a Config.xml file to exclude an entire component from a migration.","pos":[590,683]},{"content":"You cannot, however, exclude users by using the migration .xml files or the Config.xml file.","pos":[684,776]},{"content":"The only way to specify which users to include and exclude is by using the User options on the command line in the ScanState tool.","pos":[777,907]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>ScanState Syntax<ept id=\"p1\">](usmt-scanstate-syntax.md)</ept>.","pos":[908,979]},{"content":"In this topic:","pos":[981,995]},{"content":"<bpt id=\"p1\">[</bpt>Create a custom .xml file<ept id=\"p1\">](#create-a-custom-xml-file)</ept>.","pos":[1001,1056]},{"content":"You can use the following elements to specify what to exclude:","pos":[1057,1119]},{"content":"include and exclude: You can use the <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> and <ph id=\"ph3\">&amp;lt;</ph>exclude<ph id=\"ph4\">&amp;gt;</ph> elements to exclude objects with conditions.","pos":[1129,1246]},{"content":"For example, you can migrate all files located in the C:<ph id=\"ph1\">\\\\</ph> drive, except any .mp3 files.","pos":[1247,1335]},{"content":"It is important to remember that <bpt id=\"p1\">[</bpt>Conflicts and Precedence<ept id=\"p1\">](usmt-conflicts-and-precedence.md)</ept> apply to these elements.","pos":[1336,1454]},{"content":"<bpt id=\"p1\">[</bpt>unconditionalExclude<ept id=\"p1\">](#example-1-how-to-migrate-all-files-from-c-except-mp3-files)</ept>: You can use the <ph id=\"ph1\">&amp;lt;</ph>unconditionalExclude<ph id=\"ph2\">&amp;gt;</ph> element to globally exclude data.","pos":[1464,1627]},{"content":"This element takes precedence over all other include and exclude rules in the .xml files.","pos":[1628,1717]},{"content":"Therefore, this element excludes objects regardless of any other <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> rules that are in the .xml files.","pos":[1718,1832]},{"content":"For example, you can exclude all .mp3 files on the computer, or you can exclude all files from C:<ph id=\"ph1\">\\\\</ph>UserData.","pos":[1833,1941]},{"content":"<bpt id=\"p1\">[</bpt>Create a Config.xml File<ept id=\"p1\">](#create-a-config-xml-file)</ept>: You can create and modify a Config.xml file to exclude an entire component from the migration.","pos":[1947,2096]},{"content":"For example, you can use this file to exclude the settings for one of the default applications.","pos":[2097,2192]},{"content":"In addition, creating and modifying a Config.xml file is the only way to exclude the operating-system settings that are migrated to computers running Windows.","pos":[2193,2351]},{"content":"Excluding components using this file is easier than modifying the migration .xml files because you do not need to be familiar with the migration rules and syntax.","pos":[2352,2514]},{"content":"Create a custom .xml file","pos":[2519,2544]},{"content":"We recommend that you create a custom .xml file instead of modifying the default migration .xml files.","pos":[2545,2647]},{"content":"When you use a custom .xml file, you can keep your changes separate from the default .xml files, which makes it easier to track your modifications.","pos":[2648,2795]},{"content":"include<ph id=\"ph1\">&amp;gt;</ph> and <ph id=\"ph2\">&amp;lt;</ph>exclude","pos":[2805,2832]},{"content":"The migration .xml files, MigApp.xml, MigDocs, and MigUser.xml, contain the <ph id=\"ph1\">&amp;lt;</ph>component<ph id=\"ph2\">&amp;gt;</ph> element, which typically represents a self-contained component or an application such as Microsoft® Office Outlook® and Word.","pos":[2837,3056]},{"content":"To exclude the files and registry settings that are associated with these components, use the <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> and <ph id=\"ph3\">&amp;lt;</ph>exclude<ph id=\"ph4\">&amp;gt;</ph> elements.","pos":[3057,3196]},{"content":"For example, you can use these elements to migrate all files and settings with pattern X except files and settings with pattern Y, where Y is more specific than X. For the syntax of these elements, see <bpt id=\"p1\">[</bpt>USMT XML Reference<ept id=\"p1\">](usmt-xml-reference.md)</ept>.","pos":[3197,3443]},{"content":"Note","pos":[3447,3451]},{"content":"If you specify an <ph id=\"ph1\">&amp;lt;</ph>exclude<ph id=\"ph2\">&amp;gt;</ph> rule, always specify a corresponding <ph id=\"ph3\">&amp;lt;</ph>include<ph id=\"ph4\">&amp;gt;</ph> rule.","pos":[3456,3548]},{"content":"Otherwise, if you do not specify an <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> rule, the specific files or settings will not be included.","pos":[3549,3659]},{"content":"They will already be excluded from the migration.","pos":[3660,3709]},{"content":"Thus, an unaccompanied <ph id=\"ph1\">&amp;lt;</ph>exclude<ph id=\"ph2\">&amp;gt;</ph> rule is unnecessary.","pos":[3710,3769]},{"content":"Example 1: How to migrate all files from C:<ph id=\"ph1\">\\\\</ph> except .mp3 files","pos":[3776,3839]},{"content":"Example 2: How to migrate all files located in C:<ph id=\"ph1\">\\\\</ph>Data except files in C:<ph id=\"ph2\">\\\\</ph>Data<ph id=\"ph3\">\\\\</ph>tmp","pos":[3908,3993]},{"content":"Example 3: How to exclude the files in a folder but include all subfolders","pos":[4083,4157]},{"content":"Example 4: How to exclude a file from a specific folder","pos":[4241,4296]},{"content":"Example 5: How to exclude a file from any location","pos":[4361,4411]},{"content":"Example 1: How to migrate all files from C:<ph id=\"ph1\">\\\\</ph> except .mp3 files","pos":[4470,4533]},{"content":"The following .xml file migrates all files located on the C: drive, except any .mp3 files.","pos":[4534,4624]},{"content":"Example 2: How to migrate all files located in C:<ph id=\"ph1\">\\\\</ph>Data except files in C:<ph id=\"ph2\">\\\\</ph>Data<ph id=\"ph3\">\\\\</ph>tmp","pos":[5458,5543]},{"content":"The following .xml file migrates all files and subfolders in C:<ph id=\"ph1\">\\\\</ph>Data, except the files and subfolders in C:<ph id=\"ph2\">\\\\</ph>Data<ph id=\"ph3\">\\\\</ph>tmp.","pos":[5544,5664]},{"content":"Example 3: How to exclude the files in a folder but include all subfolders","pos":[6313,6387]},{"content":"The following .xml file migrates any subfolders in C:<ph id=\"ph1\">\\\\</ph>EngineeringDrafts, but excludes all files that are in C:<ph id=\"ph2\">\\\\</ph>EngineeringDrafts.","pos":[6388,6519]},{"content":"Example 4: How to exclude a file from a specific folder","pos":[7149,7204]},{"content":"The following .xml file migrates all files and subfolders in C:<ph id=\"ph1\">\\\\</ph>EngineeringDrafts, except for the Sample.doc file in C:<ph id=\"ph2\">\\\\</ph>EngineeringDrafts.","pos":[7205,7345]},{"content":"Example 5: How to exclude a file from any location","pos":[7983,8033]},{"content":"To exclude a Sample.doc file from any location on the C: drive, use the <ph id=\"ph1\">&amp;lt;</ph>pattern<ph id=\"ph2\">&amp;gt;</ph> element.","pos":[8034,8130]},{"content":"If multiple files exist with the same name on the C: drive, all of these files will be excluded.","pos":[8131,8227]},{"content":"To exclude a Sample.doc file from any drive on the computer, use the <ph id=\"ph1\">&amp;lt;</ph>script<ph id=\"ph2\">&amp;gt;</ph> element.","pos":[8293,8385]},{"content":"If multiple files exist with the same name, all of these files will be excluded.","pos":[8386,8466]},{"content":"Examples of how to use XML to exclude files, folders, and registry keys","pos":[8564,8635]},{"content":"Here are some examples of how to use XML to exclude files, folders, and registry keys.","pos":[8636,8722]},{"content":"For more info, see <bpt id=\"p1\">[</bpt>USMT XML Reference<ept id=\"p1\">](usmt-xml-reference.md)</ept>","pos":[8723,8785]},{"content":"Example 1: How to exclude all .mp3 files","pos":[8789,8829]},{"content":"The following .xml file excludes all .mp3 files from the migration:","pos":[8836,8903]},{"content":"Example 2: How to exclude all of the files on a specific drive","pos":[9429,9491]},{"content":"The following .xml file excludes only the files located on the C: drive.","pos":[9498,9570]},{"content":"Example 3: How to exclude registry keys","pos":[10029,10068]},{"content":"The following .xml file unconditionally excludes the HKEY_CURRENT_USER registry key and all of its subkeys.","pos":[10075,10182]},{"content":"Example 4: How to Exclude <ph id=\"ph1\">`C:\\Windows`</ph> and","pos":[10860,10902]},{"content":"The following .xml file unconditionally excludes the system folders of <ph id=\"ph1\">`C:\\Windows`</ph> and <ph id=\"ph2\">`C:\\Program Files`</ph>.","pos":[10928,11035]},{"content":"Note that all <ph id=\"ph1\">\\*</ph>.docx, <ph id=\"ph2\">\\*</ph>.xls and <ph id=\"ph3\">\\*</ph>.ppt files will not be migrated because the <ph id=\"ph4\">&amp;lt;</ph>unconditionalExclude<ph id=\"ph5\">&amp;gt;</ph> element takes precedence over the <ph id=\"ph6\">&amp;lt;</ph>include<ph id=\"ph7\">&amp;gt;</ph> element.","pos":[11036,11203]},{"content":"Create a Config.xml File","pos":[12109,12133]},{"content":"You can create and modify a Config.xml file if you want to exclude components from the migration.","pos":[12134,12231]},{"content":"Excluding components using this file is easier than modifying the migration .xml files because you do not need to be familiar with the migration rules and syntax.","pos":[12232,12394]},{"content":"Config.xml is an optional file that you can create using the <bpt id=\"p1\">**</bpt>/genconfig<ept id=\"p1\">**</ept> command-line option with the ScanState tool.","pos":[12395,12515]},{"content":"For example, you can use the Config.xml file to exclude the settings for one of the default applications.","pos":[12516,12621]},{"content":"In addition, creating and modifying this file is the only way to exclude the operating-system settings that are migrated to computers running Windows.","pos":[12622,12772]},{"pos":[12778,12938],"content":"<bpt id=\"p1\">**</bpt>To exclude the settings for a default application:<ept id=\"p1\">**</ept> Specify <ph id=\"ph1\">`migrate=\"no\"`</ph> for the application under the <ph id=\"ph2\">&amp;lt;</ph>Applications<ph id=\"ph3\">&amp;gt;</ph> section of the Config.xml file."},{"pos":[12944,13071],"content":"<bpt id=\"p1\">**</bpt>To exclude an operating system setting:<ept id=\"p1\">**</ept> Specify <ph id=\"ph1\">`migrate=\"no\"`</ph> for the setting under the <ph id=\"ph2\">&amp;lt;</ph>WindowsComponents<ph id=\"ph3\">&amp;gt;</ph> section."},{"content":"<bpt id=\"p1\">**</bpt>To exclude My Documents:<ept id=\"p1\">**</ept> Specify <ph id=\"ph1\">`migrate=\"no\"`</ph> for My Documents under the <ph id=\"ph2\">&amp;lt;</ph>Documents<ph id=\"ph3\">&amp;gt;</ph> section.","pos":[13077,13182]},{"content":"Note that any <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> rules in the .xml files will still apply.","pos":[13183,13254]},{"content":"For example, if you have a rule that includes all the .docx files in My Documents, then only the .docx files will be migrated, but the rest of the files will not.","pos":[13255,13417]},{"pos":[13419,13486],"content":"See <bpt id=\"p1\">[</bpt>Config.xml File<ept id=\"p1\">](usmt-configxml-file.md)</ept> for more information."},{"content":"Note","pos":[13490,13494]},{"content":"To exclude a component from the Config.xml file, set the <bpt id=\"p1\">**</bpt>migrate<ept id=\"p1\">**</ept> value to <bpt id=\"p2\">**</bpt>\"no\"<ept id=\"p2\">**</ept>.","pos":[13499,13586]},{"content":"Deleting the XML tag for the component from the Config.xml file will not exclude the component from your migration.","pos":[13587,13702]},{"content":"Related topics","pos":[13707,13721]},{"content":"Customize USMT XML Files","pos":[13725,13749]},{"content":"USMT XML Reference","pos":[13783,13801]}],"content":"---\ntitle: Exclude Files and Settings (Windows 10)\ndescription: Exclude Files and Settings\nms.assetid: df85baf1-6e29-4995-a4bb-ba3f8f7fed0b\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nauthor: greg-lindsay\n---\n\n# Exclude Files and Settings\nWhen you specify the migration .xml files, MigApp.xml, Migdocs, and MigUser.xml, the User State Migration Tool (USMT) 10.0 migrates the settings and components listed, as discussed in [What Does USMT Migrate?](usmt-what-does-usmt-migrate.md) You can create a custom .xml file to further specify what to include or exclude in the migration. In addition you can create a Config.xml file to exclude an entire component from a migration. You cannot, however, exclude users by using the migration .xml files or the Config.xml file. The only way to specify which users to include and exclude is by using the User options on the command line in the ScanState tool. For more information, see [ScanState Syntax](usmt-scanstate-syntax.md).\n\nIn this topic:\n\n-   [Create a custom .xml file](#create-a-custom-xml-file). You can use the following elements to specify what to exclude:\n\n    -   include and exclude: You can use the &lt;include&gt; and &lt;exclude&gt; elements to exclude objects with conditions. For example, you can migrate all files located in the C:\\\\ drive, except any .mp3 files. It is important to remember that [Conflicts and Precedence](usmt-conflicts-and-precedence.md) apply to these elements.\n\n    -   [unconditionalExclude](#example-1-how-to-migrate-all-files-from-c-except-mp3-files): You can use the &lt;unconditionalExclude&gt; element to globally exclude data. This element takes precedence over all other include and exclude rules in the .xml files. Therefore, this element excludes objects regardless of any other &lt;include&gt; rules that are in the .xml files. For example, you can exclude all .mp3 files on the computer, or you can exclude all files from C:\\\\UserData.\n\n-   [Create a Config.xml File](#create-a-config-xml-file): You can create and modify a Config.xml file to exclude an entire component from the migration. For example, you can use this file to exclude the settings for one of the default applications. In addition, creating and modifying a Config.xml file is the only way to exclude the operating-system settings that are migrated to computers running Windows. Excluding components using this file is easier than modifying the migration .xml files because you do not need to be familiar with the migration rules and syntax.\n\n## Create a custom .xml file\nWe recommend that you create a custom .xml file instead of modifying the default migration .xml files. When you use a custom .xml file, you can keep your changes separate from the default .xml files, which makes it easier to track your modifications.\n\n### &lt;include&gt; and &lt;exclude&gt;\nThe migration .xml files, MigApp.xml, MigDocs, and MigUser.xml, contain the &lt;component&gt; element, which typically represents a self-contained component or an application such as Microsoft® Office Outlook® and Word. To exclude the files and registry settings that are associated with these components, use the &lt;include&gt; and &lt;exclude&gt; elements. For example, you can use these elements to migrate all files and settings with pattern X except files and settings with pattern Y, where Y is more specific than X. For the syntax of these elements, see [USMT XML Reference](usmt-xml-reference.md).\n\n**Note**  \nIf you specify an &lt;exclude&gt; rule, always specify a corresponding &lt;include&gt; rule. Otherwise, if you do not specify an &lt;include&gt; rule, the specific files or settings will not be included. They will already be excluded from the migration. Thus, an unaccompanied &lt;exclude&gt; rule is unnecessary.\n\n-   [Example 1: How to migrate all files from C:\\\\ except .mp3 files](#example-1-how-to-migrate-all-files-from-c-except-mp3-files)\n\n-   [Example 2: How to migrate all files located in C:\\\\Data except files in C:\\\\Data\\\\tmp](#example-2-how-to-migrate-all-files-located-in-c-data-except-files-in-c-data-tmp)\n\n-   [Example 3: How to exclude the files in a folder but include all subfolders](#example-3-how-to-exclude-the-files-in-a-folder-but-include-all-subfolders)\n\n-   [Example 4: How to exclude a file from a specific folder](#example-4-how-to-exclude-a-file-from-a-specific-folder)\n\n-   [Example 5: How to exclude a file from any location](#example-5-how-to-exclude-a-file-from-any-location)\n\n### Example 1: How to migrate all files from C:\\\\ except .mp3 files\nThe following .xml file migrates all files located on the C: drive, except any .mp3 files.\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/mp3files\">\n    <!-- This component migrates all files except those with .mp3 extension-->\n    <component type=\"Documents\" context=\"UserAndSystem\">\n        <displayName _locID=\"miguser.sharedvideo\">MP3 Files</displayName>\n        <role role=\"Data\">\n            <rules>\n                <include filter='MigXmlHelper.IgnoreIrrelevantLinks()'>\n                    <objectSet>\n                        <pattern type=\"File\">C:\\* [*]</pattern>\n                    </objectSet>\n                </include>\n                <exclude>\n                    <objectSet>\n                        <pattern type=\"File\">C:\\* [*.mp3]</pattern>\n                    </objectSet>\n                </exclude>\n            </rules>\n        </role>\n    </component>\n</migration>\n```\n### Example 2: How to migrate all files located in C:\\\\Data except files in C:\\\\Data\\\\tmp\nThe following .xml file migrates all files and subfolders in C:\\\\Data, except the files and subfolders in C:\\\\Data\\\\tmp.\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/test\">\n    <component type=\"Documents\" context=\"System\">\n        <displayName _locID=\"miguser.sharedvideo\">Test component</displayName>\n        <role role=\"Data\">\n            <rules>\n         <include>\n            <objectSet>\n                 <pattern type=\"File\">C:\\Data\\* [*]</pattern>\n            </objectSet>\n          </include>\n         <exclude>\n             <objectSet>\n                   <pattern type=\"File\"> C:\\Data\\temp\\* [*]</pattern>\n             </objectSet>\n         </exclude>  \n            </rules>\n        </role>\n    </component>\n</migration>\n```\n\n### Example 3: How to exclude the files in a folder but include all subfolders\nThe following .xml file migrates any subfolders in C:\\\\EngineeringDrafts, but excludes all files that are in C:\\\\EngineeringDrafts.\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/test\">\n<component type=\"Documents\" context=\"System\">\n  <displayName>Component to migrate all Engineering Drafts Documents without subfolders</displayName>\n  <role role=\"Data\">\n    <rules>\n         <include>\n            <objectSet>\n                 <pattern type=\"File\"> C:\\EngineeringDrafts\\* [*]</pattern>\n            </objectSet>\n          </include>\n      <exclude>\n        <objectSet>\n          <pattern type=\"File\"> C:\\EngineeringDrafts\\ [*]</pattern>\n        </objectSet>\n      </exclude>\n    </rules>\n  </role>\n</component>\n</migration>\n```\n\n### Example 4: How to exclude a file from a specific folder\nThe following .xml file migrates all files and subfolders in C:\\\\EngineeringDrafts, except for the Sample.doc file in C:\\\\EngineeringDrafts.\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/test\">\n<component type=\"Documents\" context=\"System\">\n  <displayName>Component to migrate all Engineering Drafts Documents except Sample.doc</displayName>\n  <role role=\"Data\">\n    <rules>\n         <include>\n            <objectSet>\n                 <pattern type=\"File\"> C:\\EngineeringDrafts\\* [*]</pattern>\n            </objectSet>\n          </include>\n      <exclude>\n        <objectSet>\n          <pattern type=\"File\"> C:\\EngineeringDrafts\\ [Sample.doc]</pattern>\n        </objectSet>\n      </exclude>\n    </rules>\n  </role>\n</component>\n</migration>\n```\n\n### Example 5: How to exclude a file from any location\nTo exclude a Sample.doc file from any location on the C: drive, use the &lt;pattern&gt; element. If multiple files exist with the same name on the C: drive, all of these files will be excluded.\n\n``` xml\n<pattern type=\"File\"> C:\\* [Sample.doc] </pattern>\n```\n\nTo exclude a Sample.doc file from any drive on the computer, use the &lt;script&gt; element. If multiple files exist with the same name, all of these files will be excluded.\n\n``` xml\n<script>MigXmlHelper.GenerateDrivePatterns(\"* [sample.doc]\", \"Fixed\")</script>\n```\n#### Examples of how to use XML to exclude files, folders, and registry keys\nHere are some examples of how to use XML to exclude files, folders, and registry keys. For more info, see [USMT XML Reference](usmt-xml-reference.md)\n\n**Example 1: How to exclude all .mp3 files**<br>\nThe following .xml file excludes all .mp3 files from the migration:\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/excludefiles\">\n  <component context=\"System\" type=\"Documents\">\n        <displayName>Test</displayName>\n        <role role=\"Data\">\n            <rules>\n             <unconditionalExclude>\n                        <objectSet>\n    <script>MigXmlHelper.GenerateDrivePatterns (\"* [*.mp3]\", \"Fixed\")</script>\n                        </objectSet> \n             </unconditionalExclude>\n            </rules>\n        </role>\n    </component>\n</migration>\n```\n**Example 2: How to exclude all of the files on a specific drive**<br>\nThe following .xml file excludes only the files located on the C: drive.\n\n``` xml\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/allfiles\">\n    <component type=\"Documents\" context=\"System\">\n        <displayName>Test</displayName>\n        <role role=\"Data\">\n            <rules>\n  <unconditionalExclude>\n                    <objectSet>\n      <pattern type=\"File\">c:\\*[*]</pattern>\n                    </objectSet>\n  </unconditionalExclude>\n            </rules>\n        </role>\n    </component>\n</migration>\n```\n**Example 3: How to exclude registry keys**<br>\nThe following .xml file unconditionally excludes the HKEY_CURRENT_USER registry key and all of its subkeys.\n\n``` xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/miguser\">\n   <component type=\"Documents\" context=\"User\">\n      <displayName>Test</displayName>\n      <role role=\"Data\">\n         <rules>\n            <include>\n               <objectSet>\n                  <pattern type=\"Registry\">HKCU\\testReg[*]</pattern>\n               </objectSet>\n            </include>\n            <unconditionalExclude>\n               <objectSet>\n                  <pattern type=\"Registry\">HKCU\\*[*]</pattern>\n               </objectSet>\n            </unconditionalExclude>\n         </rules>\n      </role>\n   </component>\n</migration>\n```\n**Example 4: How to Exclude `C:\\Windows` and `C:\\Program Files`**<br>\nThe following .xml file unconditionally excludes the system folders of `C:\\Windows` and `C:\\Program Files`. Note that all \\*.docx, \\*.xls and \\*.ppt files will not be migrated because the &lt;unconditionalExclude&gt; element takes precedence over the &lt;include&gt; element.\n\n``` xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<migration urlid=\"http://www.microsoft.com/migration/1.0/migxmlext/miguser\">\n   <component type=\"Documents\" context=\"System\">\n      <displayName>Test</displayName>\n      <role role=\"Data\">\n         <rules>\n            <include>\n               <objectSet>\n    <script>MigXmlHelper.GenerateDrivePatterns (\"* [*.doc]\", \"Fixed\")</script>\n    <script>MigXmlHelper.GenerateDrivePatterns (\"* [*.xls]\", \"Fixed\")</script>\n    <script>MigXmlHelper.GenerateDrivePatterns (\"* [*.ppt]\", \"Fixed\")</script>\n               </objectSet>\n            </include>\n            <unconditionalExclude>\n               <objectSet>\n                  <pattern type=\"File\">C:\\Program Files\\* [*]</pattern>\n<pattern type=\"File\">C:\\Windows\\* [*]</pattern>\n               </objectSet>\n            </unconditionalExclude>\n         </rules>\n      </role>\n   </component>\n</migration>\n```\n## Create a Config.xml File\nYou can create and modify a Config.xml file if you want to exclude components from the migration. Excluding components using this file is easier than modifying the migration .xml files because you do not need to be familiar with the migration rules and syntax. Config.xml is an optional file that you can create using the **/genconfig** command-line option with the ScanState tool. For example, you can use the Config.xml file to exclude the settings for one of the default applications. In addition, creating and modifying this file is the only way to exclude the operating-system settings that are migrated to computers running Windows.\n\n-   **To exclude the settings for a default application:** Specify `migrate=\"no\"` for the application under the &lt;Applications&gt; section of the Config.xml file.\n\n-   **To exclude an operating system setting:** Specify `migrate=\"no\"` for the setting under the &lt;WindowsComponents&gt; section.\n\n-   **To exclude My Documents:** Specify `migrate=\"no\"` for My Documents under the &lt;Documents&gt; section. Note that any &lt;include&gt; rules in the .xml files will still apply. For example, if you have a rule that includes all the .docx files in My Documents, then only the .docx files will be migrated, but the rest of the files will not.\n\nSee [Config.xml File](usmt-configxml-file.md) for more information.\n\n**Note**  \nTo exclude a component from the Config.xml file, set the **migrate** value to **\"no\"**. Deleting the XML tag for the component from the Config.xml file will not exclude the component from your migration.\n\n## Related topics\n- [Customize USMT XML Files](usmt-customize-xml-files.md)\n- [USMT XML Reference](usmt-xml-reference.md)\n\n \n\n \n\n\n\n\n\n"}