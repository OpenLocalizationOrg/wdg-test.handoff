{"nodes":[{"content":"About the Connection Group Virtual Environment","pos":[11,57]},{"content":"About the Connection Group Virtual Environment","pos":[71,117]},{"content":"About the Connection Group Virtual Environment","pos":[292,338]},{"content":"In this topic:","pos":[343,357]},{"content":"How package priority is determined","pos":[366,400]},{"content":"Merging identical package paths into one virtual directory in connection groups","pos":[434,513]},{"pos":[589,623],"content":"How package priority is determined"},{"content":"The virtual environment and its current state are associated with the connection group, not with the individual packages.","pos":[626,747]},{"content":"If an App-V package is removed from the connection group, the state that existed as part of the connection group will not migrate with the package.","pos":[748,895]},{"content":"If the same package is a part of two different connection groups, you have to indicate which connection group App-V should use.","pos":[897,1024]},{"content":"For example, you might have two packages in a connection group that each define the same registry DWORD value.","pos":[1025,1135]},{"pos":[1137,1267],"content":"The connection group that is used is based on the order in which a package appears inside the <bpt id=\"p1\">**</bpt>AppConnectionGroup<ept id=\"p1\">**</ept> XML document:"},{"content":"The first package has the highest precedence.","pos":[1273,1318]},{"content":"The second package has the second highest precedence.","pos":[1324,1377]},{"content":"Consider the following example section:","pos":[1379,1418]},{"content":"Assume that same DWORD value ABC (HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>software<ph id=\"ph4\">\\\\</ph>contoso<ph id=\"ph5\">\\\\</ph>finapp<ph id=\"ph6\">\\\\</ph>region) is defined in the first and third package, such as:","pos":[1801,1943]},{"content":"Package 1 (A8731008-4523-4713-83A4-CD1363907160): HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>software<ph id=\"ph4\">\\\\</ph>contoso<ph id=\"ph5\">\\\\</ph>finapp<ph id=\"ph6\">\\\\</ph>region=5","pos":[1949,2056]},{"content":"Package 3 (04220DCA-EE77-42BE-A9F5-96FD8E8593F2): HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>software<ph id=\"ph4\">\\\\</ph>contoso<ph id=\"ph5\">\\\\</ph>finapp<ph id=\"ph6\">\\\\</ph>region=10","pos":[2062,2170]},{"content":"Since Package 1 appears first, the AppConnectionGroup's virtual environment will have the single DWORD value of 5 (HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>software<ph id=\"ph4\">\\\\</ph>contoso<ph id=\"ph5\">\\\\</ph>finapp<ph id=\"ph6\">\\\\</ph>region=5).","pos":[2172,2346]},{"content":"This means that the virtual applications in Package 1, Package 2, and Package 3 will all see the value 5 when they query for HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>software<ph id=\"ph4\">\\\\</ph>contoso<ph id=\"ph5\">\\\\</ph>finapp<ph id=\"ph6\">\\\\</ph>region.","pos":[2347,2528]},{"content":"Other virtual environment resources are resolved similarly, but the usual case is that the collisions occur in the registry.","pos":[2530,2654]},{"pos":[2703,2782],"content":"Merging identical package paths into one virtual directory in connection groups"},{"content":"If two or more packages in a connection group contain identical directory paths, the paths are merged into a single virtual directory inside the connection group virtual environment.","pos":[2785,2967]},{"content":"This merging of paths allows an application in one package to access files that are in a different package.","pos":[2968,3075]},{"content":"When you remove a package from a connection group, the applications in that removed package are no longer able to access files in the remaining packages in the connection group.","pos":[3077,3254]},{"content":"The order in which App-V looks up a file’s name in the connection group is specified by the order in which the App-V packages are listed in the connection group manifest file.","pos":[3256,3431]},{"pos":[3433,3568],"content":"The following example shows the order and relationship of a file name lookup in a connection group for <bpt id=\"p1\">**</bpt>Package A<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Package B<ept id=\"p2\">**</ept>."},{"content":"Package A","pos":[3686,3695]},{"content":"Package B","pos":[3718,3727]},{"content":"C:\\Windows\\System32","pos":[3793,3812]},{"content":"C:\\Windows\\System32","pos":[3842,3861]},{"content":"C:\\AppTest","pos":[3915,3925]},{"content":"C:\\AppTest","pos":[3955,3965]},{"content":"In the example above, when a virtualized application tries to find a specific file, Package A is searched first for a matching file path.","pos":[4003,4140]},{"content":"If a matching path is not found, Package B is searched, using the following mapping rules:","pos":[4141,4231]},{"pos":[4237,4372],"content":"If a file named <bpt id=\"p1\">**</bpt>test.txt<ept id=\"p1\">**</ept> exists in the same virtual folder hierarchy in both application packages, the first matching file is used."},{"pos":[4378,4527],"content":"If a file named <bpt id=\"p1\">**</bpt>bar.txt<ept id=\"p1\">**</ept> exists in the virtual folder hierarchy of one application package, but not in the other, the first matching file is used."},{"content":"Got a suggestion for App-V?","pos":[4532,4559]},{"content":"Add or vote on suggestions <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization)</ept>.","pos":[4562,4674]},{"content":"For App-V issues, use the <bpt id=\"p1\">[</bpt>App-V TechNet Forum<ept id=\"p1\">](https://social.technet.microsoft.com/Forums/home?forum=mdopappv)</ept>.","pos":[4675,4788]},{"content":"Related topics","pos":[4793,4807]},{"content":"Managing Connection Groups","pos":[4811,4837]}],"content":"---\ntitle: About the Connection Group Virtual Environment\ndescription: About the Connection Group Virtual Environment\nauthor: jamiejdt\nms.assetid: b7bb0e3d-8cd5-45a9-b84e-c9ab4196a18c\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w10\n---\n\n\n# About the Connection Group Virtual Environment\n\n\n**In this topic:**\n\n-   [How package priority is determined](#bkmk-pkg-priority-deter)\n\n-   [Merging identical package paths into one virtual directory in connection groups](#bkmk-merged-root-ve-exp)\n\n## <a href=\"\" id=\"bkmk-pkg-priority-deter\"></a>How package priority is determined\n\n\nThe virtual environment and its current state are associated with the connection group, not with the individual packages. If an App-V package is removed from the connection group, the state that existed as part of the connection group will not migrate with the package.\n\nIf the same package is a part of two different connection groups, you have to indicate which connection group App-V should use. For example, you might have two packages in a connection group that each define the same registry DWORD value.\n\nThe connection group that is used is based on the order in which a package appears inside the **AppConnectionGroup** XML document:\n\n-   The first package has the highest precedence.\n\n-   The second package has the second highest precedence.\n\nConsider the following example section:\n\n``` syntax\n<appv:Packages><appv:PackagePackageId=\"A8731008-4523-4713-83A4-CD1363907160\"VersionId=\"E889951B-7F30-418B-A69C-B37283BC0DB9\"/><appv:PackagePackageId=\"1DC709C8-309F-4AB4-BD47-F75926D04276\"VersionId=\"01F1943B-C778-40AD-BFAD-AC34A695DF3C\"/><appv:PackagePackageId=\"04220DCA-EE77-42BE-A9F5-96FD8E8593F2\"VersionId=\"E15EFFE9-043D-4C01-BC52-AD2BD1E8BAFA\"/></appv:Packages>\n```\n\nAssume that same DWORD value ABC (HKEY\\_LOCAL\\_MACHINE\\\\software\\\\contoso\\\\finapp\\\\region) is defined in the first and third package, such as:\n\n-   Package 1 (A8731008-4523-4713-83A4-CD1363907160): HKEY\\_LOCAL\\_MACHINE\\\\software\\\\contoso\\\\finapp\\\\region=5\n\n-   Package 3 (04220DCA-EE77-42BE-A9F5-96FD8E8593F2): HKEY\\_LOCAL\\_MACHINE\\\\software\\\\contoso\\\\finapp\\\\region=10\n\nSince Package 1 appears first, the AppConnectionGroup's virtual environment will have the single DWORD value of 5 (HKEY\\_LOCAL\\_MACHINE\\\\software\\\\contoso\\\\finapp\\\\region=5). This means that the virtual applications in Package 1, Package 2, and Package 3 will all see the value 5 when they query for HKEY\\_LOCAL\\_MACHINE\\\\software\\\\contoso\\\\finapp\\\\region.\n\nOther virtual environment resources are resolved similarly, but the usual case is that the collisions occur in the registry.\n\n## <a href=\"\" id=\"bkmk-merged-root-ve-exp\"></a>Merging identical package paths into one virtual directory in connection groups\n\n\nIf two or more packages in a connection group contain identical directory paths, the paths are merged into a single virtual directory inside the connection group virtual environment. This merging of paths allows an application in one package to access files that are in a different package.\n\nWhen you remove a package from a connection group, the applications in that removed package are no longer able to access files in the remaining packages in the connection group.\n\nThe order in which App-V looks up a file’s name in the connection group is specified by the order in which the App-V packages are listed in the connection group manifest file.\n\nThe following example shows the order and relationship of a file name lookup in a connection group for **Package A** and **Package B**.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Package A</th>\n<th align=\"left\">Package B</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>C:\\Windows\\System32</p></td>\n<td align=\"left\"><p>C:\\Windows\\System32</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>C:\\AppTest</p></td>\n<td align=\"left\"><p>C:\\AppTest</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\nIn the example above, when a virtualized application tries to find a specific file, Package A is searched first for a matching file path. If a matching path is not found, Package B is searched, using the following mapping rules:\n\n-   If a file named **test.txt** exists in the same virtual folder hierarchy in both application packages, the first matching file is used.\n\n-   If a file named **bar.txt** exists in the virtual folder hierarchy of one application package, but not in the other, the first matching file is used.\n\n## Got a suggestion for App-V?\n\n\nAdd or vote on suggestions [here](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization). For App-V issues, use the [App-V TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).\n\n## Related topics\n\n\n[Managing Connection Groups](managing-connection-groups51.md)\n\n \n\n \n\n\n\n\n\n"}