{"nodes":[{"content":"Planning to Use Folder Redirection with App-V","pos":[11,56]},{"content":"Planning to Use Folder Redirection with App-V","pos":[70,115]},{"content":"Planning to Use Folder Redirection with App-V","pos":[290,335]},{"content":"Microsoft Application Virtualization (App-V) 5.1 supports the use of folder redirection, a feature that enables users and administrators to redirect the path of a folder to a new location.","pos":[338,526]},{"content":"This topic contains the following sections:","pos":[528,571]},{"content":"Requirements for using folder redirection","pos":[578,619]},{"content":"How to configure folder redirection for use with App-V","pos":[652,706]},{"content":"How folder redirection works with App-V","pos":[738,777]},{"content":"Overview of folder redirection","pos":[811,841]},{"pos":[919,986],"content":"Requirements and unsupported scenarios for using folder redirection"},{"content":"Requirements","pos":[1105,1117]},{"content":"To use %AppData% folder redirection, you must:","pos":[1147,1193]},{"content":"Have an App-V package that has an AppData virtual file system (VFS) folder.","pos":[1210,1285]},{"content":"Enable folder redirection and redirect users’ folders to a shared folder, typically a network folder.","pos":[1302,1403]},{"content":"Roam both or neither of the following:","pos":[1420,1458]},{"content":"Files under %appdata%\\Microsoft\\AppV\\Client\\Catalog","pos":[1475,1526]},{"content":"Registry settings under HKEY_CURRENT_USER\\Software\\Microsoft\\AppV\\Client\\Packages","pos":[1543,1624]},{"content":"For more detail, see <bpt id=\"p1\">[</bpt>Application Publishing and Client Interaction<ept id=\"p1\">](application-publishing-and-client-interaction.md#bkmk-clt-inter-roam-reqs)</ept>.","pos":[1632,1776]},{"content":"Ensure that the following folders are available to each user who logs into the computer that is running the App-V 5.0 SP2 or later client:","pos":[1804,1942]},{"content":"%AppData% is configured to the desired network location (with or without <bpt id=\"p1\">[</bpt>Offline Files<ept id=\"p1\">](http://technet.microsoft.com/library/cc780552.aspx)</ept> support).","pos":[1959,2109]},{"content":"%LocalAppData% is configured to the desired local folder.","pos":[2126,2183]},{"content":"Unsupported scenarios","pos":[2259,2280]},{"content":"Configuring %LocalAppData% as a network drive.","pos":[2319,2365]},{"content":"Redirecting the Start menu to a single folder for multiple users.","pos":[2382,2447]},{"content":"If roaming AppData (%AppData%) is redirected to a network share that is not available, App-V applications will fail to launch as follows:","pos":[2464,2601]},{"content":"App-V version","pos":[2722,2735]},{"content":"Scenario description","pos":[2758,2778]},{"content":"In App-V 5.0 through App-V 5.0 SP2 plus hotfixes","pos":[2844,2892]},{"content":"This failure will occur regardless of whether Offline Files is enabled.","pos":[2922,2993]},{"content":"In App-V 5.0 SP3 and later","pos":[3047,3073]},{"content":"If the unavailable network share has been enabled for Offline Files, the App-V application will start successfully.","pos":[3103,3218]},{"pos":[3350,3404],"content":"How to configure folder redirection for use with App-V"},{"content":"Folder redirection can be applied to different folders, such as Desktop, My Documents, My Pictures, etc. However, the only folder that impacts the use of App-V applications is the user’s roaming AppData folder (%AppData%).","pos":[3407,3629]},{"content":"You can apply folder redirection to any other supported folders without impacting App-V.","pos":[3630,3718]},{"pos":[3767,3806],"content":"How folder redirection works with App-V"},{"content":"The following table describes how folder redirection works when %AppData% is redirected to a network and when you have met the requirements listed earlier in this article.","pos":[3809,3980]},{"content":"Virtual environment state","pos":[4098,4123]},{"content":"Action that occurs","pos":[4146,4164]},{"content":"When the virtual environment starts","pos":[4230,4265]},{"content":"The virtual file system (VFS) AppData folder is mapped to the local AppData folder (%LocalAppData%) instead of to the user’s roaming AppData folder (%AppData%).","pos":[4295,4455]},{"content":"LocalAppData contains a local cache of the user’s roaming AppData folder for the package in use.","pos":[4472,4568]},{"content":"The local cache is located under:","pos":[4569,4602]},{"content":"The latest data from the user’s roaming AppData folder is copied to and replaces the data currently in the local cache.","pos":[4700,4819]},{"content":"While the virtual environment is running, data continues to be saved to the local cache.","pos":[4836,4924]},{"content":"Data is served only out of %LocalAppData% and is not moved or synchronized with %AppData% until the end user shuts down the computer.","pos":[4925,5058]},{"content":"Entries to the AppData folder are made using the user context, not the system context.","pos":[5075,5161]},{"content":"Note","pos":[5205,5209]},{"content":"The App-V client folder redirection sometimes fails to move files from %AppData% to %LocalAppData%.","pos":[5224,5323]},{"content":"See <bpt id=\"p1\">[</bpt>Release Notes for App-V 5.0 SP2<ept id=\"p1\">](release-notes-for-app-v-50-sp2.md#bkmk-folderredirection)</ept>.","pos":[5324,5420]},{"content":"When the virtual environment shuts down","pos":[5496,5535]},{"content":"The local cached data in AppData (roaming) is zipped up and copied to the “real” roaming AppData folder in %AppData%.","pos":[5565,5682]},{"content":"A time stamp, which indicates the last known upload, is simultaneously saved as a registry key under:","pos":[5683,5784]},{"content":"To provide redundancy, App-V keeps the three most recent copies of the compressed data under %AppData%.","pos":[5890,5993]},{"pos":[6081,6111],"content":"Overview of folder redirection"},{"content":"Purpose","pos":[6230,6237]},{"content":"Enables end users to work with files, which have been redirected to another folder, as if the files still existed on the local drive.","pos":[6267,6400]},{"content":"Description","pos":[6454,6465]},{"content":"Folder redirection allows users and administrators to redirect the path of a folder to a network location.","pos":[6495,6601]},{"content":"The documents in the folder are available to the user from any computer on the network.","pos":[6602,6689]},{"content":"Folder redirection allows users and administrators to redirect the path of a folder to a network location.","pos":[6706,6812]},{"content":"The documents in the folder are available to the user from any computer on the network.","pos":[6813,6900]},{"content":"The new location can be a folder on the local computer or a folder on a shared network.","pos":[6917,7004]},{"content":"Folder redirection updates the files immediately, whereas roaming data is typically synchronized when the user logs in or logs off.","pos":[7021,7152]},{"content":"Usage example","pos":[7216,7229]},{"content":"You can redirect the Documents folder, which is usually stored on the computer's local hard disk, to a network location.","pos":[7259,7379]},{"content":"The user can access the documents in the folder from any computer on the network.","pos":[7380,7461]},{"content":"More resources","pos":[7515,7529]},{"content":"Folder redirection overview","pos":[7560,7587]},{"content":"Got a suggestion for App-V?","pos":[7681,7708]},{"content":"Add or vote on suggestions <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization)</ept>.","pos":[7711,7823]},{"content":"For App-V issues, use the <bpt id=\"p1\">[</bpt>App-V TechNet Forum<ept id=\"p1\">](https://social.technet.microsoft.com/Forums/home?forum=mdopappv)</ept>.","pos":[7824,7937]}],"content":"---\ntitle: Planning to Use Folder Redirection with App-V\ndescription: Planning to Use Folder Redirection with App-V\nauthor: jamiejdt\nms.assetid: 6bea9a8f-a915-4d7d-be67-ef1cca1398ed\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w10\n---\n\n\n# Planning to Use Folder Redirection with App-V\n\n\nMicrosoft Application Virtualization (App-V) 5.1 supports the use of folder redirection, a feature that enables users and administrators to redirect the path of a folder to a new location.\n\nThis topic contains the following sections:\n\n-   [Requirements for using folder redirection](#bkmk-folder-redir-reqs)\n\n-   [How to configure folder redirection for use with App-V](#bkmk-folder-redir-cfg)\n\n-   [How folder redirection works with App-V](#bkmk-folder-redir-works)\n\n-   [Overview of folder redirection](#bkmk-folder-redir-overview)\n\n## <a href=\"\" id=\"bkmk-folder-redir-reqs\"></a>Requirements and unsupported scenarios for using folder redirection\n\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>Requirements</p></td>\n<td align=\"left\"><p>To use %AppData% folder redirection, you must:</p>\n<ul>\n<li><p>Have an App-V package that has an AppData virtual file system (VFS) folder.</p></li>\n<li><p>Enable folder redirection and redirect users’ folders to a shared folder, typically a network folder.</p></li>\n<li><p>Roam both or neither of the following:</p>\n<ul>\n<li><p>Files under %appdata%\\Microsoft\\AppV\\Client\\Catalog</p></li>\n<li><p>Registry settings under HKEY_CURRENT_USER\\Software\\Microsoft\\AppV\\Client\\Packages</p>\n<p>For more detail, see [Application Publishing and Client Interaction](application-publishing-and-client-interaction.md#bkmk-clt-inter-roam-reqs).</p></li>\n</ul></li>\n<li><p>Ensure that the following folders are available to each user who logs into the computer that is running the App-V 5.0 SP2 or later client:</p>\n<ul>\n<li><p>%AppData% is configured to the desired network location (with or without [Offline Files](http://technet.microsoft.com/library/cc780552.aspx) support).</p></li>\n<li><p>%LocalAppData% is configured to the desired local folder.</p></li>\n</ul></li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>Unsupported scenarios</p></td>\n<td align=\"left\"><ul>\n<li><p>Configuring %LocalAppData% as a network drive.</p></li>\n<li><p>Redirecting the Start menu to a single folder for multiple users.</p></li>\n<li><p>If roaming AppData (%AppData%) is redirected to a network share that is not available, App-V applications will fail to launch as follows:</p>\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">App-V version</th>\n<th align=\"left\">Scenario description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>In App-V 5.0 through App-V 5.0 SP2 plus hotfixes</p></td>\n<td align=\"left\"><p>This failure will occur regardless of whether Offline Files is enabled.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>In App-V 5.0 SP3 and later</p></td>\n<td align=\"left\"><p>If the unavailable network share has been enabled for Offline Files, the App-V application will start successfully.</p></td>\n</tr>\n</tbody>\n</table>\n<p> </p></li>\n</ul></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"bkmk-folder-redir-cfg\"></a>How to configure folder redirection for use with App-V\n\n\nFolder redirection can be applied to different folders, such as Desktop, My Documents, My Pictures, etc. However, the only folder that impacts the use of App-V applications is the user’s roaming AppData folder (%AppData%). You can apply folder redirection to any other supported folders without impacting App-V.\n\n## <a href=\"\" id=\"bkmk-folder-redir-works\"></a>How folder redirection works with App-V\n\n\nThe following table describes how folder redirection works when %AppData% is redirected to a network and when you have met the requirements listed earlier in this article.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Virtual environment state</th>\n<th align=\"left\">Action that occurs</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>When the virtual environment starts</p></td>\n<td align=\"left\"><p>The virtual file system (VFS) AppData folder is mapped to the local AppData folder (%LocalAppData%) instead of to the user’s roaming AppData folder (%AppData%).</p>\n<ul>\n<li><p>LocalAppData contains a local cache of the user’s roaming AppData folder for the package in use. The local cache is located under:</p>\n<p><code>%LocalAppData%\\Microsoft\\AppV\\Client\\VFS\\PackageGUID\\AppData</code></p></li>\n<li><p>The latest data from the user’s roaming AppData folder is copied to and replaces the data currently in the local cache.</p></li>\n<li><p>While the virtual environment is running, data continues to be saved to the local cache. Data is served only out of %LocalAppData% and is not moved or synchronized with %AppData% until the end user shuts down the computer.</p></li>\n<li><p>Entries to the AppData folder are made using the user context, not the system context.</p></li>\n</ul>\n<div class=\"alert\">\n<strong>Note</strong>  \n<p>The App-V client folder redirection sometimes fails to move files from %AppData% to %LocalAppData%. See [Release Notes for App-V 5.0 SP2](release-notes-for-app-v-50-sp2.md#bkmk-folderredirection).</p>\n</div>\n<div>\n \n</div></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>When the virtual environment shuts down</p></td>\n<td align=\"left\"><p>The local cached data in AppData (roaming) is zipped up and copied to the “real” roaming AppData folder in %AppData%. A time stamp, which indicates the last known upload, is simultaneously saved as a registry key under:</p>\n<p><code>HKCU\\Software\\Microsoft\\AppV\\Client\\Packages\\&lt;PACKAGE_GUID&gt;\\AppDataTime</code></p>\n<p>To provide redundancy, App-V keeps the three most recent copies of the compressed data under %AppData%.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"bkmk-folder-redir-overview\"></a>Overview of folder redirection\n\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>Purpose</p></td>\n<td align=\"left\"><p>Enables end users to work with files, which have been redirected to another folder, as if the files still existed on the local drive.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>Description</p></td>\n<td align=\"left\"><p>Folder redirection allows users and administrators to redirect the path of a folder to a network location. The documents in the folder are available to the user from any computer on the network.</p>\n<ul>\n<li><p>Folder redirection allows users and administrators to redirect the path of a folder to a network location. The documents in the folder are available to the user from any computer on the network.</p></li>\n<li><p>The new location can be a folder on the local computer or a folder on a shared network.</p></li>\n<li><p>Folder redirection updates the files immediately, whereas roaming data is typically synchronized when the user logs in or logs off.</p></li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p>Usage example</p></td>\n<td align=\"left\"><p>You can redirect the Documents folder, which is usually stored on the computer's local hard disk, to a network location. The user can access the documents in the folder from any computer on the network.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>More resources</p></td>\n<td align=\"left\"><p>[Folder redirection overview](http://technet.microsoft.com/library/cc778976.aspx)</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## Got a suggestion for App-V?\n\n\nAdd or vote on suggestions [here](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization). For App-V issues, use the [App-V TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).\n\n \n\n \n\n\n\n\n\n"}