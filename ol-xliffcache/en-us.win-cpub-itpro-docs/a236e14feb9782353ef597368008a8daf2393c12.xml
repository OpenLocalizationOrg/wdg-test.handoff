{"nodes":[{"content":"Planning for Sequencer Security","pos":[11,42]},{"content":"Planning for Sequencer Security","pos":[56,87]},{"content":"Planning for Sequencer Security","pos":[261,292]},{"content":"Incorporate recommended implementation practices as early as possible when configuring Application Virtualization (App-V) so that your Sequencer implementation is functional and more secure.","pos":[295,485]},{"content":"If you have already configured the Sequencer, use the following best-practice guidelines to revisit your design decisions and analyze them from a security perspective.","pos":[486,653]},{"content":"Important","pos":[657,666]},{"content":"The App-V Sequencer collects and deploys all application information recorded on the computer running the sequencer.","pos":[671,787]},{"content":"You should ensure that all users accessing the computer running the Sequencer have administrative credentials.","pos":[788,898]},{"content":"Users with user account credentials should not have access to control package contents and package files.","pos":[899,1004]},{"content":"If you are sequencing on a computer running Remote Desktop Services (formerly Terminal Services), make sure it is a computer that is dedicated to sequencing and that users with user account credentials are not connected to it during sequencing.","pos":[1005,1249]},{"content":"Sequencer Security Best Practices","pos":[1257,1290]},{"content":"Consider the following scenarios and the associated best practices when implementing and using the Application Virtualization (App-V) Sequencer:","pos":[1293,1437]},{"content":"<bpt id=\"p1\">**</bpt>Virus scanning on the computer running the Sequencer<ept id=\"p1\">**</ept>—It is recommended that you scan the computer running the Sequencer for viruses and then disable all antivirus and malware detection software on the computer running the Sequencer during the sequencing process.","pos":[1443,1709]},{"content":"This will speed the sequencing process and prevent the antivirus and anti-malware software components from interfering with the sequencing process.","pos":[1710,1857]},{"content":"Next install the sequenced package on a computer not running the Sequencer, and after successful installation, scan that computer for viruses.","pos":[1858,2000]},{"content":"If viruses are found, the manufacturer of the software should be contacted to inform them of the infected source files and request an updated installation source without viruses.","pos":[2001,2179]},{"content":"Optionally, the Sequencer could be scanned after the installation phase and if a virus is found, the software manufacturer should be contacted as mentioned above.","pos":[2180,2342]},{"pos":[2348,2464],"content":"**Note**  \nIf a virus is detected in an application, the application should not be deployed to target computers.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"If a virus is detected in an application, the application should not be deployed to target computers.","pos":[11,112]}]},{"content":"<bpt id=\"p1\">**</bpt>Capturing access control lists (ACLs) on NTFS files<ept id=\"p1\">**</ept>—The App-V Sequencer captures NTFS file system permissions for the files that are monitored during the installation of the product.","pos":[2477,2663]},{"content":"This capability allows you to more accurately replicate the intended behavior of the application, as if it were installed locally and not virtualized.","pos":[2664,2814]},{"content":"In some scenarios, an application might store information that users were not intended to access within the application files.","pos":[2815,2941]},{"content":"For example, an application could store credentials information in a file inside of the application.","pos":[2942,3042]},{"content":"If ACLs are not enforced on the package, a user could potentially view and then use this information outside of the application.","pos":[3043,3171]},{"pos":[3177,3312],"content":"**Note**  \nYou should not sequence applications that store unencrypted security-specific information, such as passwords, and so on.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"You should not sequence applications that store unencrypted security-specific information, such as passwords, and so on.","pos":[11,131]}]},{"content":"During the installation phase, you can modify the default permissions of the files if necessary.","pos":[3325,3421]},{"content":"After completion of the sequencing process, but before saving the package, you can choose whether to enforce security descriptors that were captured during the installation of the application.","pos":[3422,3614]},{"content":"By default, App-V will enforce the security descriptors specified during the installation of the application.","pos":[3615,3724]},{"content":"If you turn off security descriptor enforcement, you should test the application to ensure the removal of associated Access Control Lists (ACL) will not cause the application to perform unexpectedly.","pos":[3725,3924]},{"content":"<bpt id=\"p1\">**</bpt>Sequencer doesn’t capture registry ACLs<ept id=\"p1\">**</ept>—Although the Sequencer captures the NTFS file system ACLs during the installation phase of sequencing, it does not capture the ACLs for the registry.","pos":[3930,4123]},{"content":"Users will have full access to all registry keys for virtual applications except for services.","pos":[4124,4218]},{"content":"However, if a user modifies the registry of a virtual application, the change will be stored in a specific store (<bpt id=\"p1\">**</bpt>uservol<ph id=\"ph1\">\\_</ph>sftfs<ph id=\"ph2\">\\_</ph>v1.pkg<ept id=\"p1\">**</ept>) and will not affect other users.","pos":[4219,4393]},{"content":"<bpt id=\"p1\">**</bpt>Application services<ept id=\"p1\">**</ept>—App-V provides support for application services that are part of a virtualized application.","pos":[4399,4515]},{"content":"However, in the virtual environment, the security context that they will run as is limited.","pos":[4516,4607]},{"content":"The only security contexts supported in a virtual environment are Local System, Local Service, and Network Service.","pos":[4608,4723]},{"content":"During sequencing, if a security context is specified for an application service other than the three supported, the Local System security context will be applied in the virtual environment.","pos":[4724,4914]},{"content":"If the application service is configured to use either Local Service or Network Service, it will be honored in the virtual environment.","pos":[4915,5050]},{"content":"Configuring the service account can be done during the sequencing process using these three security contexts.","pos":[5051,5161]},{"content":"<bpt id=\"p1\">**</bpt>Persisted security information<ept id=\"p1\">**</ept>—When sequencing applications, you can install the application as a user would or you can develop an automated method for installing the application while being monitored.","pos":[5167,5372]},{"content":"Everything that is not being excluded from the package will be captured as part of that package so that the application will have the necessary assets to run in a virtualized environment.","pos":[5373,5560]},{"content":"Some applications store sensitive security information (such as passwords) during the installation; if persisted unprotected, this security information could be accessed by other users with access to the package.","pos":[5561,5773]},{"content":"During installation, if an application installation asks for a password or other security-sensitive information, check with the documentation to ensure that it is either not persisted (removed after installation) or, if persisted, that it is protected (encrypted).","pos":[5774,6038]},{"pos":[6044,6224],"content":"<bpt id=\"p1\">**</bpt>Securing virtual application packages<ept id=\"p1\">**</ept>—Always save virtual application packages in a secure location on the network to protect the package from being tampered with or corrupted."},{"content":"Related topics","pos":[6229,6243]},{"content":"Planning for Security and Protection","pos":[6247,6283]}],"content":"---\ntitle: Planning for Sequencer Security\ndescription: Planning for Sequencer Security\nauthor: jamiejdt\nms.assetid: 8043cb02-476d-4c28-a850-903a8ac5b2d3\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w8\n---\n\n\n# Planning for Sequencer Security\n\n\nIncorporate recommended implementation practices as early as possible when configuring Application Virtualization (App-V) so that your Sequencer implementation is functional and more secure. If you have already configured the Sequencer, use the following best-practice guidelines to revisit your design decisions and analyze them from a security perspective.\n\n**Important**  \nThe App-V Sequencer collects and deploys all application information recorded on the computer running the sequencer. You should ensure that all users accessing the computer running the Sequencer have administrative credentials. Users with user account credentials should not have access to control package contents and package files. If you are sequencing on a computer running Remote Desktop Services (formerly Terminal Services), make sure it is a computer that is dedicated to sequencing and that users with user account credentials are not connected to it during sequencing.\n\n \n\n## Sequencer Security Best Practices\n\n\nConsider the following scenarios and the associated best practices when implementing and using the Application Virtualization (App-V) Sequencer:\n\n-   **Virus scanning on the computer running the Sequencer**—It is recommended that you scan the computer running the Sequencer for viruses and then disable all antivirus and malware detection software on the computer running the Sequencer during the sequencing process. This will speed the sequencing process and prevent the antivirus and anti-malware software components from interfering with the sequencing process. Next install the sequenced package on a computer not running the Sequencer, and after successful installation, scan that computer for viruses. If viruses are found, the manufacturer of the software should be contacted to inform them of the infected source files and request an updated installation source without viruses. Optionally, the Sequencer could be scanned after the installation phase and if a virus is found, the software manufacturer should be contacted as mentioned above.\n\n    **Note**  \n    If a virus is detected in an application, the application should not be deployed to target computers.\n\n     \n\n-   **Capturing access control lists (ACLs) on NTFS files**—The App-V Sequencer captures NTFS file system permissions for the files that are monitored during the installation of the product. This capability allows you to more accurately replicate the intended behavior of the application, as if it were installed locally and not virtualized. In some scenarios, an application might store information that users were not intended to access within the application files. For example, an application could store credentials information in a file inside of the application. If ACLs are not enforced on the package, a user could potentially view and then use this information outside of the application.\n\n    **Note**  \n    You should not sequence applications that store unencrypted security-specific information, such as passwords, and so on.\n\n     \n\n    During the installation phase, you can modify the default permissions of the files if necessary. After completion of the sequencing process, but before saving the package, you can choose whether to enforce security descriptors that were captured during the installation of the application. By default, App-V will enforce the security descriptors specified during the installation of the application. If you turn off security descriptor enforcement, you should test the application to ensure the removal of associated Access Control Lists (ACL) will not cause the application to perform unexpectedly.\n\n-   **Sequencer doesn’t capture registry ACLs**—Although the Sequencer captures the NTFS file system ACLs during the installation phase of sequencing, it does not capture the ACLs for the registry. Users will have full access to all registry keys for virtual applications except for services. However, if a user modifies the registry of a virtual application, the change will be stored in a specific store (**uservol\\_sftfs\\_v1.pkg**) and will not affect other users.\n\n-   **Application services**—App-V provides support for application services that are part of a virtualized application. However, in the virtual environment, the security context that they will run as is limited. The only security contexts supported in a virtual environment are Local System, Local Service, and Network Service. During sequencing, if a security context is specified for an application service other than the three supported, the Local System security context will be applied in the virtual environment. If the application service is configured to use either Local Service or Network Service, it will be honored in the virtual environment. Configuring the service account can be done during the sequencing process using these three security contexts.\n\n-   **Persisted security information**—When sequencing applications, you can install the application as a user would or you can develop an automated method for installing the application while being monitored. Everything that is not being excluded from the package will be captured as part of that package so that the application will have the necessary assets to run in a virtualized environment. Some applications store sensitive security information (such as passwords) during the installation; if persisted unprotected, this security information could be accessed by other users with access to the package. During installation, if an application installation asks for a password or other security-sensitive information, check with the documentation to ensure that it is either not persisted (removed after installation) or, if persisted, that it is protected (encrypted).\n\n-   **Securing virtual application packages**—Always save virtual application packages in a secure location on the network to protect the package from being tampered with or corrupted.\n\n## Related topics\n\n\n[Planning for Security and Protection](planning-for-security-and-protection.md)\n\n \n\n \n\n\n\n\n\n"}