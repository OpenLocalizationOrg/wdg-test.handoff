{"nodes":[{"content":"Isolating Windows Store Apps on Your Network (Windows 10)","pos":[11,68]},{"content":"Isolating Windows Store Apps on Your Network","pos":[82,126]},{"content":"Isolating Windows Store Apps on Your Network","pos":[233,277]},{"content":"Applies to","pos":[281,291]},{"content":"Windows 10","pos":[298,308]},{"content":"Windows Server 2016 Technical Preview","pos":[313,350]},{"content":"When you add new devices to your network, you may want to customize your Windows Firewall configuration to isolate the network access of the new Windows Store apps that run on them.","pos":[352,533]},{"content":"Developers who build Windows Store apps can declare certain app capabilities that enable different classes of network access.","pos":[534,659]},{"content":"A developer can decide what kind of network access the app requires and configure this capability for the app.","pos":[660,770]},{"content":"When the app is installed on a device, appropriate firewall rules are automatically created to enable access.","pos":[771,880]},{"content":"You can then customize the firewall configuration to further fine-tune this access if they desire more control over the network access for the app.","pos":[881,1028]},{"content":"For example, a developer can decide that their app should only connect to trusted local networks (such as at home or work), and not to the Internet.","pos":[1030,1178]},{"content":"In this way, developers can define the scope of network access for their app.","pos":[1179,1256]},{"content":"This network isolation prevents an app from accessing a network and a connection type (inbound or outbound) if the connection has not been configured for the app.","pos":[1257,1419]},{"content":"Then the network administrator can customize the firewall to further restrict the resources that the app can access.","pos":[1420,1536]},{"content":"The ability to set and enforce these network boundaries ensures that apps that get compromised can only access networks where they have been explicitly granted access.","pos":[1538,1705]},{"content":"This significantly reduces the scope of their impact on other apps, the  device, and the network.","pos":[1706,1803]},{"content":"In addition, apps can be isolated and protected from malicious access from the network.","pos":[1804,1891]},{"content":"When creating new Windows Store apps, a developer can define the following network capabilities for their app:","pos":[1893,2003]},{"content":"Home<ph id=\"ph1\">\\\\</ph>Work Networking","pos":[2011,2032]},{"content":"Provides inbound and outbound access to intranet networks that the user has designated as a home or a work network, or if the network has an authenticated domain controller.","pos":[2040,2213]},{"content":"Internet (Client)","pos":[2221,2238]},{"content":"Provides outbound access to the Internet and untrusted networks, such as airports and coffee shops (for example, intranet networks where the user has designated the network as Public).","pos":[2246,2430]},{"content":"Most apps that require Internet access should use this capability.","pos":[2431,2497]},{"content":"Internet (Client and Server)","pos":[2505,2533]},{"content":"Provides inbound and outbound access to the Internet and untrusted networks, such as airports and coffee shops.","pos":[2541,2652]},{"content":"This capability is a superset of the <bpt id=\"p1\">**</bpt>Internet (Client)<ept id=\"p1\">**</ept> capability, and <bpt id=\"p2\">**</bpt>Internet (Client)<ept id=\"p2\">**</ept> does not need to be enabled if this capability is enabled.","pos":[2653,2808]},{"content":"Proximity","pos":[2816,2825]},{"content":"Provides near-field communication (NFC) with devices that are in close proximity to the  device.","pos":[2833,2929]},{"content":"Proximity may be used to send files or connect with an application on a proximate device.","pos":[2930,3019]},{"content":"In this topic","pos":[3023,3036]},{"content":"To isolate Windows Store apps on your network, you need to use Group Policy to define your network isolation settings and create custom Windows Store app firewall rules.","pos":[3040,3209]},{"content":"Prerequisites","pos":[3216,3229]},{"content":"Step 1: Define your network","pos":[3253,3280]},{"content":"Step 2: Create custom firewall rules","pos":[3317,3353]},{"content":"Prerequisites","pos":[3397,3410]},{"content":"A domain controller is installed on your network, and your devices are joined to the Windows domain.","pos":[3416,3516]},{"content":"Your Windows Store app is installed on the client device.","pos":[3522,3579]},{"content":"The Remote Server Administration Tools (RSAT) are installed on your client device.","pos":[3585,3667]},{"content":"When you perform the following steps from your client device, you can select your Windows Store app when you create Windows Firewall rules.","pos":[3668,3807]},{"pos":[3814,3979],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  You can install the RSAT on your device running Windows 10 from the <bpt id=\"p2\">[</bpt>Microsoft Download Center<ept id=\"p2\">](https://www.microsoft.com/download/details.aspx?id=45520)</ept>."},{"content":"Step 1: Define your network","pos":[3990,4017]},{"content":"The <bpt id=\"p1\">**</bpt>Home<ph id=\"ph1\">\\\\</ph>Work Networking<ept id=\"p1\">**</ept> capability enables access to intranet resources.","pos":[4019,4097]},{"content":"Administrators can use Group Policy settings to define the scope of the intranet.","pos":[4098,4179]},{"content":"This ensures that Windows Store apps can access intranet resources appropriately.","pos":[4180,4261]},{"pos":[4263,4334],"content":"A network endpoint is considered part of the <bpt id=\"p1\">**</bpt>Home<ph id=\"ph1\">\\\\</ph>Work Network<ept id=\"p1\">**</ept> if:"},{"content":"It is part of the local subnet of a trusted network.","pos":[4340,4392]},{"content":"For example, home users generally flag their network as Trusted.","pos":[4398,4462]},{"content":"Local  devices will be designated as such.","pos":[4463,4505]},{"content":"A  device is on a network, and it is authenticated to a domain controller.","pos":[4511,4585]},{"content":"Endpoints within the intranet address space are considered private.","pos":[4595,4662]},{"content":"Endpoints within the local subnet are considered private.","pos":[4672,4729]},{"content":"The device is configured for DirectAccess, and the endpoint is part of the intranet address space.","pos":[4735,4833]},{"content":"The intranet address space is composed of configured Active Directory sites and subnets, and it is configured for Windows network isolation specifically by using Group Policy.","pos":[4835,5010]},{"content":"You can disable the usage of Active Directory sites and subnets by using Group Policy by declaring that your subnet definitions are authoritative.","pos":[5011,5157]},{"content":"Any proxies that you configure or that are automatically configured with proxy autoconfiguration (by using Web Proxy Auto-Discovery (WPAD) protocol) are exempt from the intranet zone.","pos":[5159,5342]},{"content":"You can add proxy addresses by using Group Policy.","pos":[5343,5393]},{"content":"All other endpoints that do not meet the previously stated criteria are considered endpoints on the Internet.","pos":[5395,5504]},{"content":"To configure a GPO that defines your intranet address space","pos":[5508,5567]},{"content":"Open the Group Policy Management snap-in (gpmc.msc) and edit the Default Domain Policy.","pos":[5575,5662]},{"pos":[5668,5854],"content":"From the Group Policy Management Editor, expand <bpt id=\"p1\">**</bpt>Computer Configuration<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Policies<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Administrative Templates<ept id=\"p3\">**</ept>, expand <bpt id=\"p4\">**</bpt>Network<ept id=\"p4\">**</ept>, and click <bpt id=\"p5\">**</bpt>Network Isolation<ept id=\"p5\">**</ept>."},{"pos":[5860,5928],"content":"In the right pane, double-click <bpt id=\"p1\">**</bpt>Private network ranges for apps<ept id=\"p1\">**</ept>."},{"content":"In the <bpt id=\"p1\">**</bpt>Private network ranges for apps<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>Enabled<ept id=\"p2\">**</ept>.","pos":[5934,6007]},{"content":"In the <bpt id=\"p1\">**</bpt>Private subnets<ept id=\"p1\">**</ept> text box, type the private subnets for your intranet, separated by commas if necessary.","pos":[6008,6122]},{"pos":[6128,6288],"content":"For example, if the Contoso intranet is defined as 10.0.0.0 with a subnet mask of 255.255.255.0, you would type 10.0.0.0/24 in the <bpt id=\"p1\">**</bpt>Private subnets<ept id=\"p1\">**</ept> text box."},{"pos":[6294,6348],"content":"Double-click <bpt id=\"p1\">**</bpt>Subnet definitions are authoritative<ept id=\"p1\">**</ept>."},{"content":"If you want the subnet definitions that you previously created to be the single source for your subnet definition, click <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept>.","pos":[6354,6487]},{"content":"Otherwise, leave the <bpt id=\"p1\">**</bpt>Not Configured<ept id=\"p1\">**</ept> default so that you can add additional subnets by using local settings or network isolation heuristics.","pos":[6488,6631]},{"content":"To configure the proxy addresses for the intranet and Internet","pos":[6635,6697]},{"content":"Double-click <bpt id=\"p1\">**</bpt>Internet proxy servers for apps<ept id=\"p1\">**</ept>.","pos":[6705,6754]},{"content":"Click <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept>, and then in the <bpt id=\"p2\">**</bpt>Domain Proxies<ept id=\"p2\">**</ept> text box, type the IP addresses of your Internet proxy servers, separated by semicolons.","pos":[6755,6897]},{"content":"Double-click <bpt id=\"p1\">**</bpt>Intranet proxy servers for apps<ept id=\"p1\">**</ept>.","pos":[6903,6952]},{"content":"Click <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept>, and then in the IP address text box, type the IP addresses of your intranet proxy servers, separated by semicolons.","pos":[6953,7087]},{"pos":[7093,7146],"content":"Double-click <bpt id=\"p1\">**</bpt>Proxy definitions are authoritative<ept id=\"p1\">**</ept>."},{"content":"If you want the proxy definitions that you previously created to be the single source for your proxy definition, click <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept>.","pos":[7152,7283]},{"content":"Otherwise, leave the <bpt id=\"p1\">**</bpt>Not Configured<ept id=\"p1\">**</ept> default so that you can add additional proxies by using local settings or network isolation heuristics.","pos":[7284,7427]},{"content":"Step 2: Create custom firewall rules","pos":[7432,7468]},{"content":"Windows Store apps can declare many capabilities in addition to the network capabilities discussed previously.","pos":[7470,7580]},{"content":"For example, apps can declare capabilities to access user identity, the local file system, and certain hardware devices.","pos":[7581,7701]},{"content":"The following table provides a complete list of the possible app capabilities.","pos":[7703,7781]},{"content":"Capability","pos":[7785,7795]},{"content":"Name","pos":[7798,7802]},{"content":"Description","pos":[7805,7816]},{"content":"Internet (Client)","pos":[7837,7854]},{"content":"internetClient","pos":[7859,7873]},{"content":"Your outgoing Internet connection.","pos":[7876,7910]},{"content":"Internet (Client <ph id=\"ph1\">&amp;amp;</ph> Server)","pos":[7916,7946]},{"content":"internetClientServer","pos":[7951,7971]},{"content":"Your Internet connection, including incoming unsolicited connections from the Internet The app can send information to or from your device through a firewall.","pos":[7973,8131]},{"content":"You do not need to declare <bpt id=\"p1\">**</bpt>internetClient<ept id=\"p1\">**</ept> if this capability is declared.","pos":[8132,8209]},{"content":"Home\\Work Networking","pos":[8215,8235]},{"content":"privateNetworkClientServer","pos":[8239,8265]},{"content":"A home or work network.","pos":[8267,8290]},{"content":"The app can send information to or from your  device and other devices on the same network.","pos":[8291,8382]},{"content":"Document Library Access","pos":[8389,8412]},{"content":"documentsLibrary","pos":[8416,8432]},{"content":"Your Documents library, including the capability to add, change, or delete files.","pos":[8434,8515]},{"content":"The package can only access file types that are declared in the manifest.","pos":[8516,8589]},{"content":"Picture Library Access","pos":[8596,8618]},{"content":"picturesLibrary","pos":[8622,8637]},{"content":"Your Pictures library, including the capability to add, change, or delete files.","pos":[8639,8719]},{"content":"Video Library Access","pos":[8726,8746]},{"content":"videosLibrary","pos":[8750,8763]},{"content":"Your Videos library, including the capability to add, change, or delete files.","pos":[8765,8843]},{"content":"Music Library Access","pos":[8850,8870]},{"content":"musicLibrary","pos":[8874,8886]},{"content":"Your Music library, including the capability to add, change, or delete files.","pos":[8887,8964]},{"content":"Default Windows Credentials","pos":[8971,8998]},{"content":"defaultWindowsCredentials","pos":[9002,9027]},{"content":"Your Windows credentials for access to a corporate intranet.","pos":[9029,9089]},{"content":"This application can impersonate you on the network.","pos":[9090,9142]},{"content":"Removable Storage","pos":[9149,9166]},{"content":"removableStorage","pos":[9171,9187]},{"content":"A removable storage device, such as an external hard disk, USB flash drive, or MTP portable device, including the capability to add, change, or delete specific files.","pos":[9189,9355]},{"content":"This package can only access file types that are declared in the manifest.","pos":[9356,9430]},{"content":"Shared User Certificates","pos":[9437,9461]},{"content":"sharedUserCertificates","pos":[9465,9487]},{"content":"Software and hardware certificates or a smart card, which the app uses to identify you.","pos":[9489,9576]},{"content":"This capability can be used by an employer, a bank, or government services to identify you.","pos":[9577,9668]},{"content":"Location","pos":[9675,9683]},{"content":"location","pos":[9687,9695]},{"content":"Provides access to the user's current location.","pos":[9697,9744]},{"content":"Microphone","pos":[9751,9761]},{"content":"microphone","pos":[9766,9776]},{"content":"Provides access to the microphone's audio feed.","pos":[9778,9825]},{"content":"Near-field Proximity","pos":[9832,9852]},{"content":"proximity","pos":[9857,9866]},{"content":"Required for near-field communication (NFC) between devices in close proximity.","pos":[9868,9947]},{"content":"NFC can be used to send files or connect with an app on a proximate device.","pos":[9948,10023]},{"content":"Text Messaging","pos":[10030,10044]},{"content":"sms","pos":[10049,10052]},{"content":"Provides access to text messaging functionality.","pos":[10054,10102]},{"content":"Webcam","pos":[10109,10115]},{"content":"webcam","pos":[10120,10126]},{"content":"Provides access to the webcam's video feed.","pos":[10128,10171]},{"content":"Other devices (represented by GUIDs)","pos":[10178,10214]},{"content":"GUID","pos":[10223,10227]},{"content":"Includes specialized devices and Windows Portable Devices.","pos":[10233,10291]},{"content":"You can create a Windows Firewall policy that is scoped to a set of apps that use a specified capability or scoped to a specific Windows Store app.","pos":[10295,10442]},{"content":"For example, you could create a Windows Firewall policy to block Internet access for any apps on your network that have the Documents Library capability.","pos":[10444,10597]},{"content":"To block Internet access for any apps on your network that have the Documents Library capability","pos":[10601,10697]},{"content":"Open the Group Policy Management snap-in (gpmc.msc).","pos":[10705,10757]},{"pos":[10763,10870],"content":"In the left pane, right-click your domain name and click <bpt id=\"p1\">**</bpt>Create a GPO in this domain, and link it here<ept id=\"p1\">**</ept>."},{"pos":[10876,10948],"content":"Type a name for the GPO in the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> text box, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[10954,11003],"content":"Right-click the new GPO, and then click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>."},{"pos":[11009,11279],"content":"In the Group Policy Management Editor, expand <bpt id=\"p1\">**</bpt>Computer Configuration<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Policies<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Windows Settings<ept id=\"p3\">**</ept>, expand <bpt id=\"p4\">**</bpt>Security Settings<ept id=\"p4\">**</ept>, expand <bpt id=\"p5\">**</bpt>Windows Firewall with Advanced Security<ept id=\"p5\">**</ept>, and click <bpt id=\"p6\">**</bpt>Windows Firewall with Advanced Security – LDAP://…<ept id=\"p6\">**</ept>"},{"pos":[11285,11345],"content":"Right-click <bpt id=\"p1\">**</bpt>Outbound Rules<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Rule<ept id=\"p2\">**</ept>."},{"pos":[11351,11393],"content":"Click <bpt id=\"p1\">**</bpt>Custom<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[11399,11496],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>Program<ept id=\"p2\">**</ept> page, the <bpt id=\"p3\">**</bpt>Protocols and Ports<ept id=\"p3\">**</ept> page, and the <bpt id=\"p4\">**</bpt>Scope<ept id=\"p4\">**</ept> page."},{"pos":[11502,11600],"content":"On the <bpt id=\"p1\">**</bpt>Action<ept id=\"p1\">**</ept> page, ensure that <bpt id=\"p2\">**</bpt>Block the Connection<ept id=\"p2\">**</ept> is selected, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[11606,11646],"content":"On the <bpt id=\"p1\">**</bpt>Profile<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[11652,11727],"content":"On the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> page, type a name for your rule, and then click <bpt id=\"p2\">**</bpt>Finish<ept id=\"p2\">**</ept>."},{"pos":[11733,11803],"content":"In the right pane, right-click your new rule and click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>."},{"pos":[11809,11934],"content":"Click the <bpt id=\"p1\">**</bpt>Local Principals<ept id=\"p1\">**</ept> tab, select the <bpt id=\"p2\">**</bpt>Only allow connections from these users<ept id=\"p2\">**</ept> check box, and then click <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>."},{"pos":[11940,12004],"content":"Click <bpt id=\"p1\">**</bpt>Application Package Properties<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[12010,12140],"content":"In the <bpt id=\"p1\">**</bpt>Choose Capabilities<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>APPLICATION PACKAGE AUTHORITY<ph id=\"ph1\">\\\\</ph>Your documents library<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>."},{"pos":[12146,12224],"content":"Click the <bpt id=\"p1\">**</bpt>Scope<ept id=\"p1\">**</ept> tab under <bpt id=\"p2\">**</bpt>Remote IP addresses<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>."},{"pos":[12230,12307],"content":"Click <bpt id=\"p1\">**</bpt>Predefined set of computers<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Internet<ept id=\"p2\">**</ept>, and click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>."},{"content":"This scopes the rule to block traffic to Internet  devices.","pos":[12313,12372]},{"pos":[12378,12480],"content":"Click the <bpt id=\"p1\">**</bpt>Programs and Services<ept id=\"p1\">**</ept> tab, and in the <bpt id=\"p2\">**</bpt>Application Packages<ept id=\"p2\">**</ept> area, click <bpt id=\"p3\">**</bpt>Settings<ept id=\"p3\">**</ept>."},{"pos":[12486,12554],"content":"Click <bpt id=\"p1\">**</bpt>Apply to application packages only<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept>  You must do this to ensure that the rule applies only to Windows Store apps and not to other apps.","pos":[12561,12675]},{"content":"Desktop apps declare all capabilities by default, and this rule would apply to them if you do not configure it this way.","pos":[12676,12796]},{"pos":[12802,12854],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> dialog box."},{"content":"Close the Group Policy Management Editor.","pos":[12860,12901]},{"content":"In the Group Policy Management snap-in, ensure that your new GPO is selected, and in the right pane under <bpt id=\"p1\">**</bpt>Security Filtering<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Authenticated Users<ept id=\"p2\">**</ept>.","pos":[12907,13068]},{"content":"Click <bpt id=\"p1\">**</bpt>Remove<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","pos":[13069,13109]},{"pos":[13115,13159],"content":"Under <bpt id=\"p1\">**</bpt>Security Filtering<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>."},{"pos":[13165,13230],"content":"Type <bpt id=\"p1\">**</bpt>domain computers<ept id=\"p1\">**</ept> in the text box, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"content":"Close the Group Policy Management snap-in.","pos":[13236,13278]},{"content":"Use the following procedure if you want to block intranet access for a specific media sharing app on your network.","pos":[13280,13394]},{"content":"To block intranet access for a specific media sharing app on your network","pos":[13398,13471]},{"content":"Open the Group Policy Management snap-in (gpmc.msc).","pos":[13479,13531]},{"pos":[13537,13650],"content":"In the left pane, right-click your domain name, and then click <bpt id=\"p1\">**</bpt>Create a GPO in this domain, and link it here<ept id=\"p1\">**</ept>."},{"pos":[13656,13729],"content":"Type a name for your GPO in the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> text box, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[13735,13785],"content":"Right-click your new GPO, and then click <bpt id=\"p1\">**</bpt>Edit<ept id=\"p1\">**</ept>."},{"pos":[13791,14068],"content":"From the Group Policy Management Editor, expand <bpt id=\"p1\">**</bpt>Computer Configuration<ept id=\"p1\">**</ept>, expand <bpt id=\"p2\">**</bpt>Policies<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Windows Settings<ept id=\"p3\">**</ept>, expand <bpt id=\"p4\">**</bpt>Security Settings<ept id=\"p4\">**</ept>, expand <bpt id=\"p5\">**</bpt>Windows Firewall with Advanced Security<ept id=\"p5\">**</ept>, and then click <bpt id=\"p6\">**</bpt>Windows Firewall with Advanced Security – LDAP://<ept id=\"p6\">**</ept>…"},{"pos":[14074,14134],"content":"Right-click <bpt id=\"p1\">**</bpt>Outbound Rules<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>New Rule<ept id=\"p2\">**</ept>."},{"pos":[14140,14182],"content":"Click <bpt id=\"p1\">**</bpt>Custom<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[14188,14285],"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> on the <bpt id=\"p2\">**</bpt>Program<ept id=\"p2\">**</ept> page, the <bpt id=\"p3\">**</bpt>Protocols and Ports<ept id=\"p3\">**</ept> page, and the <bpt id=\"p4\">**</bpt>Scope<ept id=\"p4\">**</ept> page."},{"pos":[14291,14384],"content":"On the <bpt id=\"p1\">**</bpt>Action<ept id=\"p1\">**</ept> page, ensure <bpt id=\"p2\">**</bpt>Block the Connection<ept id=\"p2\">**</ept> is selected, and then click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[14390,14430],"content":"On the <bpt id=\"p1\">**</bpt>Profile<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[14436,14511],"content":"On the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> page, type a name for your rule, and then click <bpt id=\"p2\">**</bpt>Finish<ept id=\"p2\">**</ept>."},{"pos":[14517,14593],"content":"In the right pane, right-click your new rule, and then click <bpt id=\"p1\">**</bpt>Properties<ept id=\"p1\">**</ept>."},{"pos":[14599,14724],"content":"Click the <bpt id=\"p1\">**</bpt>Local Principals<ept id=\"p1\">**</ept> tab, select the <bpt id=\"p2\">**</bpt>Only allow connections from these users<ept id=\"p2\">**</ept> check box, and then click <bpt id=\"p3\">**</bpt>Add<ept id=\"p3\">**</ept>."},{"pos":[14730,14794],"content":"Click <bpt id=\"p1\">**</bpt>Application Package Properties<ept id=\"p1\">**</ept>, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[14800,14930],"content":"In the <bpt id=\"p1\">**</bpt>Choose Capabilities<ept id=\"p1\">**</ept> dialog box, click <bpt id=\"p2\">**</bpt>APPLICATION PACKAGE AUTHORITY<ph id=\"ph1\">\\\\</ph>A home or work network<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>."},{"pos":[14936,15036],"content":"Click the <bpt id=\"p1\">**</bpt>Programs and Services<ept id=\"p1\">**</ept> tab under <bpt id=\"p2\">**</bpt>Application Packages<ept id=\"p2\">**</ept>, and then click <bpt id=\"p3\">**</bpt>Settings<ept id=\"p3\">**</ept>."},{"pos":[15042,15141],"content":"Click <bpt id=\"p1\">**</bpt>Apply to this application package<ept id=\"p1\">**</ept>, select the app in the text box, and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"pos":[15147,15199],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept> dialog box."},{"content":"Close the Group Policy Management Editor.","pos":[15205,15246]},{"pos":[15252,15442],"content":"In Group Policy Management, ensure that your new GPO is selected, and in the right pane under <bpt id=\"p1\">**</bpt>Security Filtering<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Authenticated Users<ept id=\"p2\">**</ept>, click <bpt id=\"p3\">**</bpt>Remove<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>OK<ept id=\"p4\">**</ept>."},{"pos":[15448,15492],"content":"Under <bpt id=\"p1\">**</bpt>Security Filtering<ept id=\"p1\">**</ept>, click <bpt id=\"p2\">**</bpt>Add<ept id=\"p2\">**</ept>."},{"pos":[15498,15557],"content":"Type <bpt id=\"p1\">**</bpt>domain computers<ept id=\"p1\">**</ept> in the text box and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>."},{"content":"Close Group Policy Management.","pos":[15563,15593]},{"content":"See also","pos":[15598,15606]},{"content":"Windows Firewall with Advanced Security Overview","pos":[15613,15661]}],"content":"---\ntitle: Isolating Windows Store Apps on Your Network (Windows 10)\ndescription: Isolating Windows Store Apps on Your Network\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Isolating Windows Store Apps on Your Network\n\n**Applies to**\n-   Windows 10\n-   Windows Server 2016 Technical Preview\n\nWhen you add new devices to your network, you may want to customize your Windows Firewall configuration to isolate the network access of the new Windows Store apps that run on them. Developers who build Windows Store apps can declare certain app capabilities that enable different classes of network access. A developer can decide what kind of network access the app requires and configure this capability for the app. When the app is installed on a device, appropriate firewall rules are automatically created to enable access. You can then customize the firewall configuration to further fine-tune this access if they desire more control over the network access for the app.\n\nFor example, a developer can decide that their app should only connect to trusted local networks (such as at home or work), and not to the Internet. In this way, developers can define the scope of network access for their app. This network isolation prevents an app from accessing a network and a connection type (inbound or outbound) if the connection has not been configured for the app. Then the network administrator can customize the firewall to further restrict the resources that the app can access.\n\nThe ability to set and enforce these network boundaries ensures that apps that get compromised can only access networks where they have been explicitly granted access. This significantly reduces the scope of their impact on other apps, the  device, and the network. In addition, apps can be isolated and protected from malicious access from the network.\n\nWhen creating new Windows Store apps, a developer can define the following network capabilities for their app:\n\n-   **Home\\\\Work Networking**\n\n    Provides inbound and outbound access to intranet networks that the user has designated as a home or a work network, or if the network has an authenticated domain controller.\n\n-   **Internet (Client)**\n\n    Provides outbound access to the Internet and untrusted networks, such as airports and coffee shops (for example, intranet networks where the user has designated the network as Public). Most apps that require Internet access should use this capability.\n\n-   **Internet (Client and Server)**\n\n    Provides inbound and outbound access to the Internet and untrusted networks, such as airports and coffee shops. This capability is a superset of the **Internet (Client)** capability, and **Internet (Client)** does not need to be enabled if this capability is enabled.\n\n-   **Proximity**\n\n    Provides near-field communication (NFC) with devices that are in close proximity to the  device. Proximity may be used to send files or connect with an application on a proximate device.\n\n**In this topic**\n\nTo isolate Windows Store apps on your network, you need to use Group Policy to define your network isolation settings and create custom Windows Store app firewall rules.\n\n-   [Prerequisites](#prerequisites)\n\n-   [Step 1: Define your network](#step-1-Define-your-network)\n\n-   [Step 2: Create custom firewall rules](#step-2-create-custom-firewall-rules)\n\n## Prerequisites\n\n-   A domain controller is installed on your network, and your devices are joined to the Windows domain.\n\n-   Your Windows Store app is installed on the client device.\n\n-   The Remote Server Administration Tools (RSAT) are installed on your client device. When you perform the following steps from your client device, you can select your Windows Store app when you create Windows Firewall rules.\n\n    >**Note:**  You can install the RSAT on your device running Windows 10 from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=45520).\n\n     \n## Step 1: Define your network\n\nThe **Home\\\\Work Networking** capability enables access to intranet resources. Administrators can use Group Policy settings to define the scope of the intranet. This ensures that Windows Store apps can access intranet resources appropriately.\n\nA network endpoint is considered part of the **Home\\\\Work Network** if:\n\n-   It is part of the local subnet of a trusted network.\n\n    For example, home users generally flag their network as Trusted. Local  devices will be designated as such.\n\n-   A  device is on a network, and it is authenticated to a domain controller.\n\n    -   Endpoints within the intranet address space are considered private.\n\n    -   Endpoints within the local subnet are considered private.\n\n-   The device is configured for DirectAccess, and the endpoint is part of the intranet address space.\n\nThe intranet address space is composed of configured Active Directory sites and subnets, and it is configured for Windows network isolation specifically by using Group Policy. You can disable the usage of Active Directory sites and subnets by using Group Policy by declaring that your subnet definitions are authoritative.\n\nAny proxies that you configure or that are automatically configured with proxy autoconfiguration (by using Web Proxy Auto-Discovery (WPAD) protocol) are exempt from the intranet zone. You can add proxy addresses by using Group Policy.\n\nAll other endpoints that do not meet the previously stated criteria are considered endpoints on the Internet.\n\n**To configure a GPO that defines your intranet address space**\n\n1.  Open the Group Policy Management snap-in (gpmc.msc) and edit the Default Domain Policy.\n\n2.  From the Group Policy Management Editor, expand **Computer Configuration**, expand **Policies**, expand **Administrative Templates**, expand **Network**, and click **Network Isolation**.\n\n3.  In the right pane, double-click **Private network ranges for apps**.\n\n4.  In the **Private network ranges for apps** dialog box, click **Enabled**. In the **Private subnets** text box, type the private subnets for your intranet, separated by commas if necessary.\n\n    For example, if the Contoso intranet is defined as 10.0.0.0 with a subnet mask of 255.255.255.0, you would type 10.0.0.0/24 in the **Private subnets** text box.\n\n5.  Double-click **Subnet definitions are authoritative**.\n\n    If you want the subnet definitions that you previously created to be the single source for your subnet definition, click **Enabled**. Otherwise, leave the **Not Configured** default so that you can add additional subnets by using local settings or network isolation heuristics.\n\n**To configure the proxy addresses for the intranet and Internet**\n\n1.  Double-click **Internet proxy servers for apps**. Click **Enabled**, and then in the **Domain Proxies** text box, type the IP addresses of your Internet proxy servers, separated by semicolons.\n\n2.  Double-click **Intranet proxy servers for apps**. Click **Enabled**, and then in the IP address text box, type the IP addresses of your intranet proxy servers, separated by semicolons.\n\n3.  Double-click **Proxy definitions are authoritative**.\n\n    If you want the proxy definitions that you previously created to be the single source for your proxy definition, click **Enabled**. Otherwise, leave the **Not Configured** default so that you can add additional proxies by using local settings or network isolation heuristics.\n\n## Step 2: Create custom firewall rules\n\nWindows Store apps can declare many capabilities in addition to the network capabilities discussed previously. For example, apps can declare capabilities to access user identity, the local file system, and certain hardware devices.\n\nThe following table provides a complete list of the possible app capabilities.\n\n| Capability | Name | Description |\n| - | - | - |\n| **Internet (Client)** | internetClient | Your outgoing Internet connection.|\n| **Internet (Client &amp; Server)** | internetClientServer| Your Internet connection, including incoming unsolicited connections from the Internet The app can send information to or from your device through a firewall. You do not need to declare **internetClient** if this capability is declared. \n| **Home\\Work Networking** |privateNetworkClientServer| A home or work network. The app can send information to or from your  device and other devices on the same network.| \n| **Document Library Access**| documentsLibrary| Your Documents library, including the capability to add, change, or delete files. The package can only access file types that are declared in the manifest.| \n| **Picture Library Access**| picturesLibrary| Your Pictures library, including the capability to add, change, or delete files.| \n| **Video Library Access**| videosLibrary| Your Videos library, including the capability to add, change, or delete files.| \n| **Music Library Access**| musicLibrary|Your Music library, including the capability to add, change, or delete files.| \n| **Default Windows Credentials**| defaultWindowsCredentials| Your Windows credentials for access to a corporate intranet. This application can impersonate you on the network.| \n| **Removable Storage** | removableStorage| A removable storage device, such as an external hard disk, USB flash drive, or MTP portable device, including the capability to add, change, or delete specific files. This package can only access file types that are declared in the manifest.| \n| **Shared User Certificates**| sharedUserCertificates| Software and hardware certificates or a smart card, which the app uses to identify you. This capability can be used by an employer, a bank, or government services to identify you.| \n| **Location**| location| Provides access to the user's current location.| \n| **Microphone** | microphone| Provides access to the microphone's audio feed.| \n| **Near-field Proximity** | proximity| Required for near-field communication (NFC) between devices in close proximity. NFC can be used to send files or connect with an app on a proximate device.| \n| **Text Messaging** | sms| Provides access to text messaging functionality.| \n| **Webcam** | webcam| Provides access to the webcam's video feed.| \n| **Other devices (represented by GUIDs)** | &lt;GUID&gt;| Includes specialized devices and Windows Portable Devices.| \n\nYou can create a Windows Firewall policy that is scoped to a set of apps that use a specified capability or scoped to a specific Windows Store app.\n\nFor example, you could create a Windows Firewall policy to block Internet access for any apps on your network that have the Documents Library capability.\n\n**To block Internet access for any apps on your network that have the Documents Library capability**\n\n1.  Open the Group Policy Management snap-in (gpmc.msc).\n\n2.  In the left pane, right-click your domain name and click **Create a GPO in this domain, and link it here**.\n\n3.  Type a name for the GPO in the **Name** text box, and then click **OK**.\n\n4.  Right-click the new GPO, and then click **Edit**.\n\n5.  In the Group Policy Management Editor, expand **Computer Configuration**, expand **Policies**, expand **Windows Settings**, expand **Security Settings**, expand **Windows Firewall with Advanced Security**, and click **Windows Firewall with Advanced Security – LDAP://…**\n\n6.  Right-click **Outbound Rules**, and then click **New Rule**.\n\n7.  Click **Custom**, and then click **Next**.\n\n8.  Click **Next** on the **Program** page, the **Protocols and Ports** page, and the **Scope** page.\n\n9.  On the **Action** page, ensure that **Block the Connection** is selected, and then click **Next**.\n\n10. On the **Profile** page, click **Next**.\n\n11. On the **Name** page, type a name for your rule, and then click **Finish**.\n\n12. In the right pane, right-click your new rule and click **Properties**.\n\n13. Click the **Local Principals** tab, select the **Only allow connections from these users** check box, and then click **Add**.\n\n14. Click **Application Package Properties**, and then click **OK**.\n\n15. In the **Choose Capabilities** dialog box, click **APPLICATION PACKAGE AUTHORITY\\\\Your documents library**, and then click **OK**.\n\n16. Click the **Scope** tab under **Remote IP addresses**, and then click **Add**.\n\n17. Click **Predefined set of computers**, select **Internet**, and click **OK**.\n\n    This scopes the rule to block traffic to Internet  devices.\n\n18. Click the **Programs and Services** tab, and in the **Application Packages** area, click **Settings**.\n\n19. Click **Apply to application packages only**, and then click **OK**.\n\n    >**Important:**  You must do this to ensure that the rule applies only to Windows Store apps and not to other apps. Desktop apps declare all capabilities by default, and this rule would apply to them if you do not configure it this way.\n\n20. Click **OK** to close the **Properties** dialog box.\n\n21. Close the Group Policy Management Editor.\n\n22. In the Group Policy Management snap-in, ensure that your new GPO is selected, and in the right pane under **Security Filtering**, select **Authenticated Users**. Click **Remove**, and then click **OK**.\n\n23. Under **Security Filtering**, click **Add**.\n\n24. Type **domain computers** in the text box, and then click **OK**.\n\n25. Close the Group Policy Management snap-in.\n\nUse the following procedure if you want to block intranet access for a specific media sharing app on your network.\n\n**To block intranet access for a specific media sharing app on your network**\n\n1.  Open the Group Policy Management snap-in (gpmc.msc).\n\n2.  In the left pane, right-click your domain name, and then click **Create a GPO in this domain, and link it here**.\n\n3.  Type a name for your GPO in the **Name** text box, and then click **OK**.\n\n4.  Right-click your new GPO, and then click **Edit**.\n\n5.  From the Group Policy Management Editor, expand **Computer Configuration**, expand **Policies**, expand **Windows Settings**, expand **Security Settings**, expand **Windows Firewall with Advanced Security**, and then click **Windows Firewall with Advanced Security – LDAP://**…\n\n6.  Right-click **Outbound Rules**, and then click **New Rule**.\n\n7.  Click **Custom**, and then click **Next**.\n\n8.  Click **Next** on the **Program** page, the **Protocols and Ports** page, and the **Scope** page.\n\n9.  On the **Action** page, ensure **Block the Connection** is selected, and then click **Next**.\n\n10. On the **Profile** page, click **Next**.\n\n11. On the **Name** page, type a name for your rule, and then click **Finish**.\n\n12. In the right pane, right-click your new rule, and then click **Properties**.\n\n13. Click the **Local Principals** tab, select the **Only allow connections from these users** check box, and then click **Add**.\n\n14. Click **Application Package Properties**, and then click **OK**.\n\n15. In the **Choose Capabilities** dialog box, click **APPLICATION PACKAGE AUTHORITY\\\\A home or work network**, and then click **OK**.\n\n16. Click the **Programs and Services** tab under **Application Packages**, and then click **Settings**.\n\n17. Click **Apply to this application package**, select the app in the text box, and then click **OK**.\n\n18. Click **OK** to close the **Properties** dialog box.\n\n19. Close the Group Policy Management Editor.\n\n20. In Group Policy Management, ensure that your new GPO is selected, and in the right pane under **Security Filtering**, select **Authenticated Users**, click **Remove**, and then click **OK**.\n\n21. Under **Security Filtering**, click **Add**.\n\n22. Type **domain computers** in the text box and click **OK**.\n\n23. Close Group Policy Management.\n\n## See also\n\n-   [Windows Firewall with Advanced Security Overview](windows-firewall-with-advanced-security.md)\n"}