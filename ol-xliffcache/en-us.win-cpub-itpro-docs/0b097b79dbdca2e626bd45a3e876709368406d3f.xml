{"nodes":[{"content":"Use the MDT database to stage Windows 10 deployment information (Windows 10)","pos":[11,87]},{"content":"This topic is designed to teach you how to use the MDT database to pre-stage information on your Windows 10 deployment in a Microsoft SQL Server 2012 SP1 Express database, rather than include the information in a text file (CustomSettings.ini).","pos":[101,345]},{"content":"Use the MDT database to stage Windows 10 deployment information","pos":[553,616]},{"content":"This topic is designed to teach you how to use the MDT database to pre-stage information on your Windows 10 deployment in a Microsoft SQL Server 2012 SP1 Express database, rather than include the information in a text file (CustomSettings.ini).","pos":[618,862]},{"content":"You can use this process, for example, to add the client machines you want to deploy, specify their computer names and IP addresses, indicate applications to be deployed, and determine many additional settings for the machines.","pos":[863,1090]},{"pos":[1121,1143],"content":"Database prerequisites"},{"content":"MDT can use either SQL Server Express or full SQL Server, but since the deployment database isn't big, even in large enterprise environments, we recommend using the free SQL Server 2012 SP1 Express database in your environment.","pos":[1145,1372]},{"content":"Note","pos":[1376,1380]},{"content":"Be sure to enable Named Pipes when configuring the SQL Server 2012 SP1 Express database.","pos":[1385,1473]},{"content":"Although it is a legacy protocol, Named Pipes has proven to work well when connecting from Windows Preinstallation Environment (Windows PE) to the SQL Server database.","pos":[1474,1641]},{"pos":[1673,1703],"content":"Create the deployment database"},{"content":"The MDT database is by default created and managed from the Deployment Workbench.","pos":[1705,1786]},{"content":"In these steps, we assume you have installed SQL Server 2012 SP1 Express on MDT01.","pos":[1787,1869]},{"content":"Note","pos":[1873,1877]},{"content":"Since SQL Server 2012 SP1 Express runs by default on a separate instance (SQLEXPRESS), the SQL Server Browser service must be running, and the firewall configured to allow traffic to it.","pos":[1882,2068]},{"content":"Port 1433 TCP and port 1434 UDP need to be opened for inbound traffic on MDT01.","pos":[2069,2148]},{"pos":[2155,2326],"content":"On MDT01, using Deployment Workbench, expand the MDT Production deployment share, expand <bpt id=\"p1\">**</bpt>Advanced Configuration<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>Database<ept id=\"p2\">**</ept>, and select <bpt id=\"p3\">**</bpt>New Database<ept id=\"p3\">**</ept>."},{"pos":[2331,2437],"content":"In the New DB Wizard, on the <bpt id=\"p1\">**</bpt>SQL Server Details<ept id=\"p1\">**</ept> page, enter the following settings and click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>:"},{"content":"SQL Server Name: MDT01","pos":[2446,2468]},{"content":"Instance: SQLEXPRESS","pos":[2477,2497]},{"content":"Port: <ph id=\"ph1\">&amp;lt;</ph>blank","pos":[2506,2521]},{"content":"Network Library: Named Pipes","pos":[2534,2562]},{"pos":[2567,2686],"content":"On the <bpt id=\"p1\">**</bpt>Database<ept id=\"p1\">**</ept> page, select <bpt id=\"p2\">**</bpt>Create a new database<ept id=\"p2\">**</ept>; in the <bpt id=\"p3\">**</bpt>Database<ept id=\"p3\">**</ept> field, type <bpt id=\"p4\">**</bpt>MDT<ept id=\"p4\">**</ept> and click <bpt id=\"p5\">**</bpt>Next<ept id=\"p5\">**</ept>."},{"content":"On the <bpt id=\"p1\">**</bpt>SQL Share<ept id=\"p1\">**</ept> page, in the <bpt id=\"p2\">**</bpt>SQL Share<ept id=\"p2\">**</ept> field, type <bpt id=\"p3\">**</bpt>Logs$<ept id=\"p3\">**</ept> and click <bpt id=\"p4\">**</bpt>Next<ept id=\"p4\">**</ept>.","pos":[2691,2780]},{"content":"Click <bpt id=\"p1\">**</bpt>Next<ept id=\"p1\">**</ept> again and then click <bpt id=\"p2\">**</bpt>Finish<ept id=\"p2\">**</ept>.","pos":[2781,2828]},{"content":"figure 8","pos":[2832,2840]},{"content":"Figure 8.","pos":[2868,2877]},{"content":"The MDT database added to MDT01.","pos":[2878,2910]},{"pos":[2941,2971],"content":"Configure database permissions"},{"content":"After creating the database, you need to assign permissions to it.","pos":[2973,3039]},{"content":"In MDT, the account you used to run the deployment is used to access the database.","pos":[3040,3122]},{"content":"In this environment, the network access account is MDT<ph id=\"ph1\">\\_</ph>BA.","pos":[3123,3182]},{"content":"On MDT01, start SQL Server Management Studio.","pos":[3187,3232]},{"pos":[3237,3358],"content":"In the <bpt id=\"p1\">**</bpt>Connect to Server<ept id=\"p1\">**</ept> dialog box, in the <bpt id=\"p2\">**</bpt>Server name<ept id=\"p2\">**</ept> list, select <bpt id=\"p3\">**</bpt>MDT01<ph id=\"ph1\">\\\\</ph>SQLEXPRESS<ept id=\"p3\">**</ept> and click <bpt id=\"p4\">**</bpt>Connect<ept id=\"p4\">**</ept>."},{"pos":[3363,3485],"content":"In the <bpt id=\"p1\">**</bpt>Object Explorer<ept id=\"p1\">**</ept> pane, expand the top-level <bpt id=\"p2\">**</bpt>Security<ept id=\"p2\">**</ept> node, right-click <bpt id=\"p3\">**</bpt>Logins<ept id=\"p3\">**</ept>, and select <bpt id=\"p4\">**</bpt>New Login<ept id=\"p4\">**</ept>."},{"content":"figure 9","pos":[3493,3501]},{"content":"Figure 9.","pos":[3533,3542]},{"content":"The top-level Security node.","pos":[3543,3571]},{"content":"On the <bpt id=\"p1\">**</bpt>Login - New<ept id=\"p1\">**</ept> page, next to the <bpt id=\"p2\">**</bpt>Login<ept id=\"p2\">**</ept> name field, click <bpt id=\"p3\">**</bpt>Search<ept id=\"p3\">**</ept>, and search for <bpt id=\"p4\">**</bpt>CONTOSO<ph id=\"ph1\">\\\\</ph>MDT<ph id=\"ph2\">\\_</ph>BA<ept id=\"p4\">**</ept>.","pos":[3577,3694]},{"content":"Then in the left pane, select <bpt id=\"p1\">**</bpt>User Mapping<ept id=\"p1\">**</ept>.","pos":[3695,3742]},{"content":"Select the <bpt id=\"p1\">**</bpt>MDT<ept id=\"p1\">**</ept> database, and assign the following roles:","pos":[3743,3803]},{"content":"db<ph id=\"ph1\">\\_</ph>datareader","pos":[3812,3826]},{"content":"public (default)","pos":[3835,3851]},{"pos":[3856,3909],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>, and close SQL Server Management Studio."},{"content":"figure 10","pos":[3913,3922]},{"content":"Figure 10.","pos":[3950,3960]},{"content":"Creating the login and settings permissions to the MDT database.","pos":[3961,4025]},{"pos":[4056,4087],"content":"Create an entry in the database"},{"content":"To start using the database, you add a computer entry and assign a description and computer name.","pos":[4089,4186]},{"content":"Use the computer's MAC Address as the identifier.","pos":[4187,4236]},{"pos":[4241,4382],"content":"On MDT01, using the Deployment Workbench, in the MDT Production deployment share, expand <bpt id=\"p1\">**</bpt>Advanced Configuration<ept id=\"p1\">**</ept>, and expand <bpt id=\"p2\">**</bpt>Database<ept id=\"p2\">**</ept>."},{"pos":[4387,4483],"content":"Right-click <bpt id=\"p1\">**</bpt>Computers<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>New<ept id=\"p2\">**</ept>, and add a computer entry with the following settings:"},{"content":"Description: New York Site - PC00075","pos":[4492,4528]},{"content":"MacAddress: <ph id=\"ph1\">&amp;lt;</ph>PC00075 MAC Address in the 00:00:00:00:00:00 format","pos":[4537,4604]},{"content":"Details Tab / OSDComputerName: PC00075","pos":[4617,4655]},{"content":"figure 11","pos":[4659,4668]},{"content":"Figure 11.","pos":[4696,4706]},{"content":"Adding the PC00075 computer to the database.","pos":[4707,4751]},{"content":"Related topics","pos":[4756,4770]},{"content":"Set up MDT for BitLocker","pos":[4773,4797]},{"content":"Configure MDT deployment share rules","pos":[4835,4871]},{"content":"Configure MDT for UserExit scripts","pos":[4916,4950]},{"content":"Simulate a Windows 10 deployment in a test environment","pos":[4998,5052]},{"content":"Assign applications using roles in MDT","pos":[5115,5153]},{"content":"Use web services in MDT","pos":[5205,5228]},{"content":"Use Orchestrator runbooks with MDT","pos":[5265,5299]}],"content":"---\ntitle: Use the MDT database to stage Windows 10 deployment information (Windows 10)\ndescription: This topic is designed to teach you how to use the MDT database to pre-stage information on your Windows 10 deployment in a Microsoft SQL Server 2012 SP1 Express database, rather than include the information in a text file (CustomSettings.ini).\nms.assetid: 8956ab54-90ba-45d3-a384-4fdec72c4d46\nms.pagetype: mdt\nkeywords: database, permissions, settings, configure, deploy\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nauthor: mtniehaus\n---\n\n# Use the MDT database to stage Windows 10 deployment information\n\nThis topic is designed to teach you how to use the MDT database to pre-stage information on your Windows 10 deployment in a Microsoft SQL Server 2012 SP1 Express database, rather than include the information in a text file (CustomSettings.ini). You can use this process, for example, to add the client machines you want to deploy, specify their computer names and IP addresses, indicate applications to be deployed, and determine many additional settings for the machines.\n\n## <a href=\"\" id=\"sec01\"></a>Database prerequisites\n\nMDT can use either SQL Server Express or full SQL Server, but since the deployment database isn't big, even in large enterprise environments, we recommend using the free SQL Server 2012 SP1 Express database in your environment.\n\n**Note**  \nBe sure to enable Named Pipes when configuring the SQL Server 2012 SP1 Express database. Although it is a legacy protocol, Named Pipes has proven to work well when connecting from Windows Preinstallation Environment (Windows PE) to the SQL Server database.\n \n## <a href=\"\" id=\"sec02\"></a>Create the deployment database\n\nThe MDT database is by default created and managed from the Deployment Workbench. In these steps, we assume you have installed SQL Server 2012 SP1 Express on MDT01.\n\n**Note**  \nSince SQL Server 2012 SP1 Express runs by default on a separate instance (SQLEXPRESS), the SQL Server Browser service must be running, and the firewall configured to allow traffic to it. Port 1433 TCP and port 1434 UDP need to be opened for inbound traffic on MDT01.\n \n1.  On MDT01, using Deployment Workbench, expand the MDT Production deployment share, expand **Advanced Configuration**, right-click **Database**, and select **New Database**.\n2.  In the New DB Wizard, on the **SQL Server Details** page, enter the following settings and click **Next**:\n    1.  SQL Server Name: MDT01\n    2.  Instance: SQLEXPRESS\n    3.  Port: &lt;blank&gt;\n    4.  Network Library: Named Pipes\n3.  On the **Database** page, select **Create a new database**; in the **Database** field, type **MDT** and click **Next**.\n4.  On the **SQL Share** page, in the **SQL Share** field, type **Logs$** and click **Next**. Click **Next** again and then click **Finish**.\n\n![figure 8](images/mdt-09-fig08.png)\n\nFigure 8. The MDT database added to MDT01.\n\n## <a href=\"\" id=\"sec03\"></a>Configure database permissions\n\nAfter creating the database, you need to assign permissions to it. In MDT, the account you used to run the deployment is used to access the database. In this environment, the network access account is MDT\\_BA.\n1.  On MDT01, start SQL Server Management Studio.\n2.  In the **Connect to Server** dialog box, in the **Server name** list, select **MDT01\\\\SQLEXPRESS** and click **Connect**.\n3.  In the **Object Explorer** pane, expand the top-level **Security** node, right-click **Logins**, and select **New Login**.\n\n    ![figure 9](images/mdt-09-fig09.png)\n\n    Figure 9. The top-level Security node.\n\n4.  On the **Login - New** page, next to the **Login** name field, click **Search**, and search for **CONTOSO\\\\MDT\\_BA**. Then in the left pane, select **User Mapping**. Select the **MDT** database, and assign the following roles:\n    1.  db\\_datareader\n    2.  public (default)\n5.  Click **OK**, and close SQL Server Management Studio.\n\n![figure 10](images/mdt-09-fig10.png)\n\nFigure 10. Creating the login and settings permissions to the MDT database.\n\n## <a href=\"\" id=\"sec04\"></a>Create an entry in the database\n\nTo start using the database, you add a computer entry and assign a description and computer name. Use the computer's MAC Address as the identifier.\n1.  On MDT01, using the Deployment Workbench, in the MDT Production deployment share, expand **Advanced Configuration**, and expand **Database**.\n2.  Right-click **Computers**, select **New**, and add a computer entry with the following settings:\n    1.  Description: New York Site - PC00075\n    2.  MacAddress: &lt;PC00075 MAC Address in the 00:00:00:00:00:00 format&gt;\n    3.  Details Tab / OSDComputerName: PC00075\n\n![figure 11](images/mdt-09-fig11.png)\n\nFigure 11. Adding the PC00075 computer to the database.\n\n## Related topics\n\n[Set up MDT for BitLocker](set-up-mdt-2013-for-bitlocker.md)\n\n[Configure MDT deployment share rules](configure-mdt-deployment-share-rules.md)\n\n[Configure MDT for UserExit scripts](configure-mdt-2013-for-userexit-scripts.md)\n\n[Simulate a Windows 10 deployment in a test environment](simulate-a-windows-10-deployment-in-a-test-environment.md)\n\n[Assign applications using roles in MDT](assign-applications-using-roles-in-mdt-2013.md)\n\n[Use web services in MDT](use-web-services-in-mdt-2013.md)\n\n[Use Orchestrator runbooks with MDT](use-orchestrator-runbooks-with-mdt-2013.md)\n"}