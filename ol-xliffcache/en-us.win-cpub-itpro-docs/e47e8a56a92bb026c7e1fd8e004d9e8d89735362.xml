{"nodes":[{"content":"Compatibility Fix Database Management Strategies and Deployment (Windows 10)","pos":[11,87]},{"content":"Compatibility Fix Database Management Strategies and Deployment","pos":[250,313]},{"content":"Applies to","pos":[318,328]},{"content":"Windows 10","pos":[336,346]},{"content":"Windows 8.1","pos":[351,362]},{"content":"Windows 8","pos":[367,376]},{"content":"Windows 7","pos":[381,390]},{"content":"Windows Server 2012","pos":[395,414]},{"content":"Windows Server 2008 R2","pos":[419,441]},{"content":"After you determine that you will use compatibility fixes in your application-compatibility mitigation strategy, you must define a strategy to manage your custom compatibility-fix database.","pos":[443,632]},{"content":"Typically, you can use one of two approaches:","pos":[633,678]},{"content":"Deploying your compatibility fixes as part of an application-installation package.","pos":[684,766]},{"content":"Deploying your compatibility fixes through a centralized compatibility-fix database.","pos":[772,856]},{"content":"Regardless of which approach you decide to use in your organization, Microsoft provides the following general recommendations for improving the management of your custom compatibility-fix databases:","pos":[858,1056]},{"content":"Define standards for when you will apply compatibility fixes.","pos":[1064,1125]},{"content":"You must define the standards and scenarios for using compatibility fixes, based on your specific business and technology needs.","pos":[1133,1261]},{"content":"Define standards for your custom compatibility-fix databases.","pos":[1269,1330]},{"content":"You must define how to associate your compatibility fixes to particular applications.","pos":[1338,1423]},{"content":"For example, you might want to ensure that your compatibility fixes always include a version check, so that a fix will not be applied to newer versions of your applications.","pos":[1424,1597]},{"content":"Define your resources responsible for addressing questions and enforcing your standards.","pos":[1605,1693]},{"content":"You must determine who will be responsible for staying current with the technology and standards related to your compatibility fixes and custom compatibility-fix databases.","pos":[1701,1873]},{"content":"As your databases are managed over time, you must ensure that someone in your organization stays current with the relevant technology.","pos":[1874,2008]},{"content":"Strategies for Deploying Your Compatibility Fixes","pos":[2013,2062]},{"content":"We recommend that you use one of two strategies to deploy your compatibility fixes into your organization.","pos":[2065,2171]},{"content":"They are:","pos":[2172,2181]},{"content":"Deploying your compatibility fixes as part of an application-installation package.","pos":[2187,2269]},{"content":"Deploying your compatibility fixes through a centralized compatibility-fix database.","pos":[2275,2359]},{"content":"You must determine which method best meets your organization's deployment needs.","pos":[2361,2441]},{"content":"Deploying Fixes as Part of an Application-Installation Package","pos":[2447,2509]},{"content":"One strategy for deploying compatibility fixes is to create a custom compatibility-fix database that contains a single entry that is applied directly to the application-installation package.","pos":[2511,2701]},{"content":"While this is the most straightforward method of deployment, it has been shown that this method can become overly complex, especially if you are fixing a large number of applications.","pos":[2702,2885]},{"content":"If the following considerations apply to your organization, you should avoid this strategy and instead consider using a centralized compatibility-fix database, as described in the next section.","pos":[2887,3080]},{"content":"How many applications require compatibility fixes?","pos":[3088,3138]},{"content":"Custom compatibility-fix databases are actual databases.","pos":[3146,3202]},{"content":"Therefore, if you have 1000 applications to be fixed, it will take longer to open and query 1000 single-row databases for a match, instead of a single database with 1000 rows.","pos":[3203,3378]},{"content":"Will you be able to track which applications are installed on which computer?","pos":[3386,3463]},{"content":"You might determine that your initial set of compatibility fixes is not comprehensive, and that you must deploy an updated version of the compatibility-fix database to resolve the additional issues.","pos":[3471,3669]},{"content":"If you deployed the initial set by using the application-installation package, you will be required to locate each client computer that is running the application and replace the compatibility fix.","pos":[3670,3867]},{"content":"Deploying Fixes Through a Centralized Compatibility-Fix Database","pos":[3873,3937]},{"content":"The other recommended strategy for deploying compatibility fixes into your organization is to create and manage either a single custom compatibility-fix database, or else to create and manage several custom databases for large subsets of your organization.","pos":[3939,4195]},{"content":"This strategy will help to enforce your company policy and to provide consistent updates for application fixes that you discover later.","pos":[4196,4331]},{"content":"This approach tends to work best for organizations that have a well-developed deployment infrastructure in place, with centralized ownership of the process.","pos":[4333,4489]},{"content":"We recommend that you consider the following before using this approach:","pos":[4490,4562]},{"content":"Does your organization have the tools required to deploy and update a compatibility-fix database for all of the effected computers?","pos":[4568,4699]},{"content":"If you intend to manage a centralized compatibility-fix database, you must verify that your organization has the required tools to deploy and update all of the affected computers in your organization.","pos":[4705,4905]},{"content":"Do you have centralized resources that can manage and update the centralized compatibility-fix database?","pos":[4911,5015]},{"content":"You must ensure that you have identified the appropriate owners for the deployment process, for the applications, and for the database updates, in addition to determining the process by which compatibility issues can be deployed to specific computers.","pos":[5021,5272]},{"content":"Merging Centralized Compatibility-Fix Databases","pos":[5278,5325]},{"content":"If you decide to use the centralized compatibility-fix database deployment strategy, you can merge any of your individual compatibility-fix databases.","pos":[5327,5477]},{"content":"This enables you to create a single custom compatibility-fix database that can be used to search for and determine whether Windows® should apply a fix to a specific executable (.exe) file.","pos":[5478,5666]},{"content":"We recommend merging your databases based on the following process.","pos":[5667,5734]},{"content":"To merge your custom-compatibility databases","pos":[5738,5782]},{"content":"Verify that your application-compatibility testers are performing their tests on computers with the latest version of your compatibility-fix database.","pos":[5790,5940]},{"content":"For example, Custom DB1.","pos":[5941,5965]},{"content":"If the tester determines that an application requires an additional compatibility fix that is not a part of the original compatibility-fix database, he or she must create a new custom compatibility database with all of the required information for that single fix.","pos":[5971,6235]},{"content":"For example, Custom DB2.","pos":[6236,6260]},{"content":"The tester applies the new Custom DB2 information to the application and then tests for both the functionality and integration, to ensure that the compatibility issues are addressed.","pos":[6266,6448]},{"content":"After the application passes all of the required functionality and integration tests, the tester can send Custom DB2 to the team that manages the central compatibility-fix database.","pos":[6454,6635]},{"content":"The team that manages the centralized database opens Custom DB1 and uses the Compatibility Administrator to include the new compatibility fixes that were included in Custom DB2.","pos":[6641,6818]},{"pos":[6824,7104],"content":"**Note**  \nCustom DB1 contains a unique GUID that makes updating the database easier. For example, if you install a new version of the custom compatibility-fix database that uses the same GUID as the previous version, the computer will automatically uninstall the old version.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"Custom DB1 contains a unique GUID that makes updating the database easier. For example, if you install a new version of the custom compatibility-fix database that uses the same GUID as the previous version, the computer will automatically uninstall the old version.","pos":[11,276],"nodes":[{"content":"Custom DB1 contains a unique GUID that makes updating the database easier.","pos":[0,74]},{"content":"For example, if you install a new version of the custom compatibility-fix database that uses the same GUID as the previous version, the computer will automatically uninstall the old version.","pos":[75,265]}]}]},{"content":"The centralized management team then redeploys the new version of Custom DB1 to all of the end users in your organization.","pos":[7117,7239]},{"content":"Deploying Your Custom Compatibility-Fix Databases","pos":[7245,7294]},{"content":"Deploying your custom compatibility-fix database into your organization requires you to perform the following actions:","pos":[7296,7414]},{"content":"Store your custom compatibility-fix database (.sdb file) in a location that is accessible to all of your organization’s computers.","pos":[7420,7550]},{"content":"Use the Sdbinst.exe command-line tool to install the custom compatibility-fix database locally.","pos":[7556,7651]},{"content":"In order to meet the two requirements above, we recommend that you use one of the following two methods:","pos":[7653,7757]},{"content":"Using a Windows Installer package and a custom script","pos":[7765,7818]},{"content":"You can package your .sdb file and a custom deployment script into an .msi file, and then deploy the .msi file into your organization.","pos":[7826,7960]},{"pos":[7966,8196],"content":"**Important**  \nYou must ensure that you mark your custom script so that it does not impersonate the calling user. For example, if you use Microsoft® Visual Basic® Scripting Edition (VBScript), the custom action type would be:","leadings":["","    "],"nodes":[{"content":"Important","pos":[2,11]},{"content":"You must ensure that you mark your custom script so that it does not impersonate the calling user. For example, if you use Microsoft® Visual Basic® Scripting Edition (VBScript), the custom action type would be:","pos":[16,226],"nodes":[{"content":"You must ensure that you mark your custom script so that it does not impersonate the calling user.","pos":[0,98]},{"content":"For example, if you use Microsoft® Visual Basic® Scripting Edition (VBScript), the custom action type would be:","pos":[99,210]}]}]},{"content":"Using a network share and a custom script","pos":[8390,8431]},{"content":"You can store your .sdb file on your network share and then call to a script that resides on your specified computers.","pos":[8435,8553]},{"content":"Important","pos":[8557,8566]},{"content":"You must ensure that you call the script at a time when it will receive elevated rights.","pos":[8571,8659]},{"content":"For example, you should call the script by using computer startup scripts instead of a user logon script.","pos":[8660,8765]},{"content":"You must also ensure that the installation of the custom compatibility-fix database occurs with Administrator rights.","pos":[8766,8883]},{"content":"Example Script for an Installation of the .sdb File based on an .msi File","pos":[8892,8965]},{"content":"The following examples show an installation of a custom compatibility-fix database based on an .msi file.","pos":[8967,9072]},{"content":"Initial Deployment and Updates","pos":[9698,9728]},{"content":"Most of your testing of application-compatibility issues will happen prior to the deployment of a new Windows operating system into your environment.","pos":[9730,9879]},{"content":"As such, a common approach is to include the custom compatibility-fix database, which includes all of your known issues, in your corporate image.","pos":[9880,10025]},{"content":"Then, as you update your compatibility-fix database, you can provide the updates by using one of the two mechanisms described in the \"Deploying Your Custom Compatibility Fix Databases\" section earlier in this topic.","pos":[10026,10241]},{"content":"Related topics","pos":[10246,10260]},{"content":"Managing Application-Compatibility Fixes and Custom Fix Databases","pos":[10264,10329]}],"content":"---\ntitle: Compatibility Fix Database Management Strategies and Deployment (Windows 10)\nms.assetid: fdfbf02f-c4c4-4739-a400-782204fd3c6c\ndescription: \nms.prod: w10\nms.mktglfcycl: plan\nms.pagetype: appcompat\nms.sitesec: library\nauthor: TrudyHa\n---\n\n# Compatibility Fix Database Management Strategies and Deployment\n\n\n**Applies to**\n\n-   Windows 10\n-   Windows 8.1\n-   Windows 8\n-   Windows 7\n-   Windows Server 2012\n-   Windows Server 2008 R2\n\nAfter you determine that you will use compatibility fixes in your application-compatibility mitigation strategy, you must define a strategy to manage your custom compatibility-fix database. Typically, you can use one of two approaches:\n\n-   Deploying your compatibility fixes as part of an application-installation package.\n\n-   Deploying your compatibility fixes through a centralized compatibility-fix database.\n\nRegardless of which approach you decide to use in your organization, Microsoft provides the following general recommendations for improving the management of your custom compatibility-fix databases:\n\n-   **Define standards for when you will apply compatibility fixes.**\n\n    You must define the standards and scenarios for using compatibility fixes, based on your specific business and technology needs.\n\n-   **Define standards for your custom compatibility-fix databases.**\n\n    You must define how to associate your compatibility fixes to particular applications. For example, you might want to ensure that your compatibility fixes always include a version check, so that a fix will not be applied to newer versions of your applications.\n\n-   **Define your resources responsible for addressing questions and enforcing your standards.**\n\n    You must determine who will be responsible for staying current with the technology and standards related to your compatibility fixes and custom compatibility-fix databases. As your databases are managed over time, you must ensure that someone in your organization stays current with the relevant technology.\n\n## Strategies for Deploying Your Compatibility Fixes\n\n\nWe recommend that you use one of two strategies to deploy your compatibility fixes into your organization. They are:\n\n-   Deploying your compatibility fixes as part of an application-installation package.\n\n-   Deploying your compatibility fixes through a centralized compatibility-fix database.\n\nYou must determine which method best meets your organization's deployment needs.\n\n### Deploying Fixes as Part of an Application-Installation Package\n\nOne strategy for deploying compatibility fixes is to create a custom compatibility-fix database that contains a single entry that is applied directly to the application-installation package. While this is the most straightforward method of deployment, it has been shown that this method can become overly complex, especially if you are fixing a large number of applications.\n\nIf the following considerations apply to your organization, you should avoid this strategy and instead consider using a centralized compatibility-fix database, as described in the next section.\n\n-   **How many applications require compatibility fixes?**\n\n    Custom compatibility-fix databases are actual databases. Therefore, if you have 1000 applications to be fixed, it will take longer to open and query 1000 single-row databases for a match, instead of a single database with 1000 rows.\n\n-   **Will you be able to track which applications are installed on which computer?**\n\n    You might determine that your initial set of compatibility fixes is not comprehensive, and that you must deploy an updated version of the compatibility-fix database to resolve the additional issues. If you deployed the initial set by using the application-installation package, you will be required to locate each client computer that is running the application and replace the compatibility fix.\n\n### Deploying Fixes Through a Centralized Compatibility-Fix Database\n\nThe other recommended strategy for deploying compatibility fixes into your organization is to create and manage either a single custom compatibility-fix database, or else to create and manage several custom databases for large subsets of your organization. This strategy will help to enforce your company policy and to provide consistent updates for application fixes that you discover later.\n\nThis approach tends to work best for organizations that have a well-developed deployment infrastructure in place, with centralized ownership of the process. We recommend that you consider the following before using this approach:\n\n-   Does your organization have the tools required to deploy and update a compatibility-fix database for all of the effected computers?\n\n    If you intend to manage a centralized compatibility-fix database, you must verify that your organization has the required tools to deploy and update all of the affected computers in your organization.\n\n-   Do you have centralized resources that can manage and update the centralized compatibility-fix database?\n\n    You must ensure that you have identified the appropriate owners for the deployment process, for the applications, and for the database updates, in addition to determining the process by which compatibility issues can be deployed to specific computers.\n\n### Merging Centralized Compatibility-Fix Databases\n\nIf you decide to use the centralized compatibility-fix database deployment strategy, you can merge any of your individual compatibility-fix databases. This enables you to create a single custom compatibility-fix database that can be used to search for and determine whether Windows® should apply a fix to a specific executable (.exe) file. We recommend merging your databases based on the following process.\n\n**To merge your custom-compatibility databases**\n\n1.  Verify that your application-compatibility testers are performing their tests on computers with the latest version of your compatibility-fix database. For example, Custom DB1.\n\n2.  If the tester determines that an application requires an additional compatibility fix that is not a part of the original compatibility-fix database, he or she must create a new custom compatibility database with all of the required information for that single fix. For example, Custom DB2.\n\n3.  The tester applies the new Custom DB2 information to the application and then tests for both the functionality and integration, to ensure that the compatibility issues are addressed.\n\n4.  After the application passes all of the required functionality and integration tests, the tester can send Custom DB2 to the team that manages the central compatibility-fix database.\n\n5.  The team that manages the centralized database opens Custom DB1 and uses the Compatibility Administrator to include the new compatibility fixes that were included in Custom DB2.\n\n    **Note**  \n    Custom DB1 contains a unique GUID that makes updating the database easier. For example, if you install a new version of the custom compatibility-fix database that uses the same GUID as the previous version, the computer will automatically uninstall the old version.\n\n     \n\n6.  The centralized management team then redeploys the new version of Custom DB1 to all of the end users in your organization.\n\n### Deploying Your Custom Compatibility-Fix Databases\n\nDeploying your custom compatibility-fix database into your organization requires you to perform the following actions:\n\n1.  Store your custom compatibility-fix database (.sdb file) in a location that is accessible to all of your organization’s computers.\n\n2.  Use the Sdbinst.exe command-line tool to install the custom compatibility-fix database locally.\n\nIn order to meet the two requirements above, we recommend that you use one of the following two methods:\n\n-   **Using a Windows Installer package and a custom script**\n\n    You can package your .sdb file and a custom deployment script into an .msi file, and then deploy the .msi file into your organization.\n\n    **Important**  \n    You must ensure that you mark your custom script so that it does not impersonate the calling user. For example, if you use Microsoft® Visual Basic® Scripting Edition (VBScript), the custom action type would be:\n\n     \n\n    ``` syntax\n    msidbCustomActionTypeVBScript + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate = 0x0006 + 0x0400 + 0x0800 = 0x0C06 = 3078 decimal)\n    ```\n\n-   **Using a network share and a custom script**\n\nYou can store your .sdb file on your network share and then call to a script that resides on your specified computers.\n\n**Important**  \nYou must ensure that you call the script at a time when it will receive elevated rights. For example, you should call the script by using computer startup scripts instead of a user logon script. You must also ensure that the installation of the custom compatibility-fix database occurs with Administrator rights.\n\n \n\n### Example Script for an Installation of the .sdb File based on an .msi File\n\nThe following examples show an installation of a custom compatibility-fix database based on an .msi file.\n\n``` syntax\n'InstallSDB.vbs\nFunction Install\nDim WshShell\nSet WshShell = CreateObject(\"WScript.Shell\")\nWshShell.Run \"sdbinst.exe -q \" & CHR(34) & \"%ProgramFiles%\\MyOrganizationSDB\\MyOrg.sdb\" & CHR(34), 0, true\nWshShell.Run \"cmd.exe /c \" & CHR(34) & \"del \" & CHR(34) & \"%ProgramFiles%\\MyOrganizationSDB\\MyOrg.sdb\" & CHR(34) & CHR(34), 0\nWshShell.Run \"reg.exe delete HKLM\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\{guidFromMyOrgsSdb}.sdb /f\", 0\nEnd Function\n\nFunction UnInstall\nDim WshShell\nSet WshShell = CreateObject(\"WScript.Shell\")\nWshShell.Run \"sdbinst.exe -q -u -g {guidFromMyOrgsSdb}\", 0\nEnd Function\n```\n\n### Initial Deployment and Updates\n\nMost of your testing of application-compatibility issues will happen prior to the deployment of a new Windows operating system into your environment. As such, a common approach is to include the custom compatibility-fix database, which includes all of your known issues, in your corporate image. Then, as you update your compatibility-fix database, you can provide the updates by using one of the two mechanisms described in the \"Deploying Your Custom Compatibility Fix Databases\" section earlier in this topic.\n\n## Related topics\n\n\n[Managing Application-Compatibility Fixes and Custom Fix Databases](managing-application-compatibility-fixes-and-custom-fix-databases.md)\n\n \n\n \n\n\n\n\n\n"}