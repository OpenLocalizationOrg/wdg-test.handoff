{"nodes":[{"content":"Authentication of MED-V End Users","pos":[11,44]},{"content":"Authentication of MED-V End Users","pos":[58,91]},{"content":"Authentication of MED-V End Users","pos":[254,287]},{"content":"The authentication of Microsoft Enterprise Desktop Virtualization (MED-V) 2.0 end users is a very important security issue.","pos":[290,413]},{"content":"In this context, authentication refers to verifying the identity of the MED-V end user.","pos":[414,501]},{"content":"The following section provides information and guidance about end-user authentication in MED-V.","pos":[503,598]},{"content":"User Authentication in MED-V","pos":[603,631]},{"content":"Authentication in MED-V generally occurs at two levels: when a user first accesses MED-V and every time that they change their password.","pos":[634,770]},{"content":"Depending on how you have configured MED-V settings for authentication, the end user is typically prompted at some point to enter their password, either the first time MED-V is started or the first time that they try to open a published application.","pos":[772,1021]},{"content":"There are several aspects of end-user authentication that you can control, including the following:","pos":[1023,1122]},{"content":"Whether the credentials the end user enters are stored in Credential Manager","pos":[1124,1200]},{"content":"In what manner the end user is presented with the option of entering and saving their password","pos":[1202,1296]},{"content":"Depending on your company’s preferred process for managing end-user authentication, you can specify whether credential caching occurs for a particular MED-V workspace.","pos":[1298,1465]},{"content":"Caching the credentials of an end user is helpful because they are only prompted one time for their password.","pos":[1466,1575]},{"content":"If the end user is not allowed to save their password or they decide not to, every time that they start a new MED-V session, they must enter it again.","pos":[1576,1726]},{"content":"For example, if MED-V is configured to start when the end user logs on to the host but Authentication is disabled, the end user is only prompted one time during logon.","pos":[1727,1894]},{"content":"In this case, credentials are valid until the end user logs off from the host.","pos":[1895,1973]},{"content":"If it is necessary, you can use Credential Manager to remove any stored end-user credentials.","pos":[1975,2068]},{"content":"By default, credential storing is disabled, but you can change this setting through one of the following methods:","pos":[2070,2183]},{"content":"<bpt id=\"p1\">**</bpt>While you are creating the MED-V workspace package<ept id=\"p1\">**</ept>.","pos":[2185,2240]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>Create a MED-V Workspace Package<ept id=\"p1\">](create-a-med-v-workspace-package.md)</ept>.","pos":[2241,2339]},{"content":"<bpt id=\"p1\">**</bpt>After you have deployed the MED-V workspace<ept id=\"p1\">**</ept>.","pos":[2341,2389]},{"content":"Edit the MED-V cmdlet parameter UxCredentialCacheEnabled to set the Terminal Services registry key.","pos":[2390,2489]},{"content":"For more information, see Windows PowerShell Help.","pos":[2490,2540]},{"content":"After MED-V workspace deployment, you can set your preference for end-user authentication by modifying the Terminal Services policy named DisablePasswordSaving.","pos":[2542,2702]},{"content":"DisablePasswordSaving controls whether the password saving check box appears on the RDP client dialog window and whether the MED-V credential prompt is displayed.","pos":[2703,2865]},{"content":"Following is the policy path for the Terminal Services policy named DisablePasswordSaving.","pos":[2867,2957]},{"content":"Regedit:","pos":[2961,2969]},{"content":"HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>SOFTWARE<ph id=\"ph4\">\\\\</ph>Microsoft<ph id=\"ph5\">\\\\</ph>Virtual Machine<ph id=\"ph6\">\\\\</ph>Policies<ph id=\"ph7\">\\\\</ph>DisablePasswordSaving","pos":[2973,3064]},{"content":"Note","pos":[3068,3072]},{"content":"The changes that you make to DisablePasswordSaving only affect the RDP prompt to a virtual machine.","pos":[3077,3176]},{"content":"The following table lists the different ways you can configure your settings for credential storing and the effects of the different configurations:","pos":[3181,3329]},{"content":"Value","pos":[3467,3472]},{"content":"Configuration","pos":[3495,3508]},{"content":"Result","pos":[3531,3537]},{"content":"DisablePasswordSaving","pos":[3603,3624]},{"content":"Disabled","pos":[3662,3670]},{"content":"The MED-V prompt is presented and a check box to accept is available and cleared.","pos":[3709,3790]},{"content":"If the end user selects the check box, credentials are cached for subsequent use.","pos":[3791,3872]},{"content":"The end user also has the benefit of only being prompted when the password expires.","pos":[3873,3956]},{"content":"If the end user does not select the check box, the Remote Desktop Connection (RDC) Client prompt is presented instead of the MED-V prompt, and the check box to accept is cleared.","pos":[4078,4256]},{"content":"If the end user selects the check box, the RDC Client credential is stored for later use.","pos":[4257,4346]},{"content":"Important","pos":[4379,4388]},{"content":"RDC does not validate credentials when the end user enters them.","pos":[4403,4467]},{"content":"If the end user caches the credentials through the RDC prompt, there is a risk that incorrect credentials might be stored.","pos":[4468,4590]},{"content":"In this case, the incorrect credentials must be deleted in the Windows Credential Manager.","pos":[4591,4681]},{"content":"DisablePasswordSaving","pos":[4756,4777]},{"content":"Enabled","pos":[4815,4822]},{"content":"Note","pos":[4886,4890]},{"content":"This configuration is more secure because it does not allow end user credentials to be cached.","pos":[4905,4999]},{"content":"By default, the MED-V installation sets a registry key in the guest to suppress the \"password about to expire\" prompt.","pos":[5059,5177]},{"content":"The end user is only prompted for a password change on the host.","pos":[5178,5242]},{"content":"Credentials that are updated on the host are passed to the guest.","pos":[5243,5308]},{"content":"Caution","pos":[5312,5319]},{"content":"If you use Group Policy in your environment, know that it can override the registry key causing the password prompts from the guest to reappear.","pos":[5324,5468]},{"content":"Security Concerns with Authentication","pos":[5477,5514]},{"content":"Even though caching the end user’s credentials provides the best user experience, you must be aware of the risks involved.","pos":[5516,5638]},{"content":"When credential caching is enabled, the end user’s domain credential is stored in a reversible format within the Windows Credential Manager.","pos":[5640,5780]},{"content":"As a result, an attacker could write a tool that runs as either a system level process or an end user process and that retrieves the end user's credentials.","pos":[5781,5937]},{"content":"You can only lessen this risk by setting DisablePasswordSaving to <bpt id=\"p1\">**</bpt>Enabled<ept id=\"p1\">**</ept>.","pos":[5938,6016]},{"content":"This same concern exists when MED-V authentication is disabled but the Terminal Services policy setting is enabled.","pos":[6018,6133]},{"content":"Related topics","pos":[6138,6152]},{"content":"Security Best Practices for MED-V Operations","pos":[6156,6200]}],"content":"---\ntitle: Authentication of MED-V End Users\ndescription: Authentication of MED-V End Users\nauthor: jamiejdt\nms.assetid: aaf96eb6-91d1-4f4d-9854-5fc73c7ae7ab\nms.pagetype: mdop, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w7\n---\n\n\n# Authentication of MED-V End Users\n\n\nThe authentication of Microsoft Enterprise Desktop Virtualization (MED-V) 2.0 end users is a very important security issue. In this context, authentication refers to verifying the identity of the MED-V end user.\n\nThe following section provides information and guidance about end-user authentication in MED-V.\n\n## User Authentication in MED-V\n\n\nAuthentication in MED-V generally occurs at two levels: when a user first accesses MED-V and every time that they change their password.\n\nDepending on how you have configured MED-V settings for authentication, the end user is typically prompted at some point to enter their password, either the first time MED-V is started or the first time that they try to open a published application.\n\nThere are several aspects of end-user authentication that you can control, including the following:\n\nWhether the credentials the end user enters are stored in Credential Manager\n\nIn what manner the end user is presented with the option of entering and saving their password\n\nDepending on your company’s preferred process for managing end-user authentication, you can specify whether credential caching occurs for a particular MED-V workspace. Caching the credentials of an end user is helpful because they are only prompted one time for their password. If the end user is not allowed to save their password or they decide not to, every time that they start a new MED-V session, they must enter it again. For example, if MED-V is configured to start when the end user logs on to the host but Authentication is disabled, the end user is only prompted one time during logon. In this case, credentials are valid until the end user logs off from the host.\n\nIf it is necessary, you can use Credential Manager to remove any stored end-user credentials.\n\nBy default, credential storing is disabled, but you can change this setting through one of the following methods:\n\n**While you are creating the MED-V workspace package**. For more information, see [Create a MED-V Workspace Package](create-a-med-v-workspace-package.md).\n\n**After you have deployed the MED-V workspace**. Edit the MED-V cmdlet parameter UxCredentialCacheEnabled to set the Terminal Services registry key. For more information, see Windows PowerShell Help.\n\nAfter MED-V workspace deployment, you can set your preference for end-user authentication by modifying the Terminal Services policy named DisablePasswordSaving. DisablePasswordSaving controls whether the password saving check box appears on the RDP client dialog window and whether the MED-V credential prompt is displayed.\n\nFollowing is the policy path for the Terminal Services policy named DisablePasswordSaving.\n\n**Regedit:**\n\nHKEY\\_LOCAL\\_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Virtual Machine\\\\Policies\\\\DisablePasswordSaving\n\n**Note**  \nThe changes that you make to DisablePasswordSaving only affect the RDP prompt to a virtual machine.\n\n \n\nThe following table lists the different ways you can configure your settings for credential storing and the effects of the different configurations:\n\n<table>\n<colgroup>\n<col width=\"33%\" />\n<col width=\"33%\" />\n<col width=\"33%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Value</th>\n<th align=\"left\">Configuration</th>\n<th align=\"left\">Result</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>DisablePasswordSaving</p></td>\n<td align=\"left\"><p><strong>Disabled</strong></p></td>\n<td align=\"left\"><p>The MED-V prompt is presented and a check box to accept is available and cleared. If the end user selects the check box, credentials are cached for subsequent use. The end user also has the benefit of only being prompted when the password expires.</p>\n<p></p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p></p></td>\n<td align=\"left\"><p></p></td>\n<td align=\"left\"><p>If the end user does not select the check box, the Remote Desktop Connection (RDC) Client prompt is presented instead of the MED-V prompt, and the check box to accept is cleared. If the end user selects the check box, the RDC Client credential is stored for later use.</p>\n<div class=\"alert\">\n<strong>Important</strong>  \n<p>RDC does not validate credentials when the end user enters them. If the end user caches the credentials through the RDC prompt, there is a risk that incorrect credentials might be stored. In this case, the incorrect credentials must be deleted in the Windows Credential Manager.</p>\n</div>\n<div>\n \n</div></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p>DisablePasswordSaving</p></td>\n<td align=\"left\"><p><strong>Enabled</strong></p></td>\n<td align=\"left\"><div class=\"alert\">\n<strong>Note</strong>  \n<p>This configuration is more secure because it does not allow end user credentials to be cached.</p>\n</div>\n<div>\n \n</div></td>\n</tr>\n</tbody>\n</table>\n\n \n\nBy default, the MED-V installation sets a registry key in the guest to suppress the \"password about to expire\" prompt. The end user is only prompted for a password change on the host. Credentials that are updated on the host are passed to the guest.\n\n**Caution**  \nIf you use Group Policy in your environment, know that it can override the registry key causing the password prompts from the guest to reappear.\n\n \n\n### Security Concerns with Authentication\n\nEven though caching the end user’s credentials provides the best user experience, you must be aware of the risks involved.\n\nWhen credential caching is enabled, the end user’s domain credential is stored in a reversible format within the Windows Credential Manager. As a result, an attacker could write a tool that runs as either a system level process or an end user process and that retrieves the end user's credentials. You can only lessen this risk by setting DisablePasswordSaving to **Enabled**.\n\nThis same concern exists when MED-V authentication is disabled but the Terminal Services policy setting is enabled.\n\n## Related topics\n\n\n[Security Best Practices for MED-V Operations](security-best-practices-for-med-v-operations.md)\n\n \n\n \n\n\n\n\n\n"}