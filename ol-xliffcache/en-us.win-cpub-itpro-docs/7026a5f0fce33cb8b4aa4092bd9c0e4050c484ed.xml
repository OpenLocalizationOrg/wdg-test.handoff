{"nodes":[{"content":"Network security Allow PKU2U authentication requests to this computer to use online identities (Windows 10)","pos":[11,118]},{"content":"Describes the best practices, location, and values for the Network Security Allow PKU2U authentication requests to this computer to use online identities security policy setting.","pos":[132,310]},{"content":"Network security: Allow PKU2U authentication requests to this computer to use online identities","pos":[466,561]},{"content":"Applies to","pos":[565,575]},{"content":"Windows 10","pos":[582,592]},{"pos":[594,777],"content":"Describes the best practices, location, and values for the <bpt id=\"p1\">**</bpt>Network Security: Allow PKU2U authentication requests to this computer to use online identities<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[782,791]},{"content":"Starting with Windows Server 2008 R2 and Windows 7, the Negotiate Security Support Provider (SSP) supports an extension SSP, Negoexts.dll.","pos":[793,931]},{"content":"This extension SSP is treated as an authentication protocol by the Windows operating system, and it supports SSPs from Microsoft, including PKU2U.","pos":[932,1078]},{"content":"You can also develop or add other SSPs.","pos":[1079,1118]},{"content":"When devices are configured to accept authentication requests by using online IDs, Negoexts.dll calls the PKU2U SSP on the computer that is used to log on.","pos":[1120,1275]},{"content":"The PKU2U SSP obtains a local certificate and exchanges the policy between the peer computers.","pos":[1276,1370]},{"content":"When validated on the peer computer, the certificate within the metadata is sent to the logon peer for validation.","pos":[1371,1485]},{"content":"It associates the user's certificate to a security token, and then the logon process completes.","pos":[1486,1581]},{"pos":[1584,1737],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  The ability to link online IDs can be performed by anyone with an account that has standard user’s credentials through <bpt id=\"p2\">**</bpt>Credential Manager<ept id=\"p2\">**</ept>."},{"content":"This policy is not configured by default on domain-joined devices.","pos":[1740,1806]},{"content":"This would disallow the online identities to be able to authenticate to the domain-joined computers in Windows 7 and later.","pos":[1807,1930]},{"content":"Possible values","pos":[1936,1951]},{"content":"Enabled","pos":[1959,1966]},{"content":"This will allow authentication to successfully complete between the two (or more) computers that have established a peer relationship through the use on online IDs.","pos":[1974,2138]},{"content":"The PKU2U SSP obtains a local certificate and exchanges the policy between the peer devices.","pos":[2139,2231]},{"content":"When validated on the peer computer, the certificate within the metadata is sent to the logon peer for validation.","pos":[2232,2346]},{"content":"It associates the user's certificate to a security token, and then the logon process completes.","pos":[2347,2442]},{"content":"Disabled","pos":[2450,2458]},{"content":"This will prevent online IDs from being used to authenticate the user to another computer in a peer-to-peer relationship.","pos":[2466,2587]},{"content":"Not set.","pos":[2593,2601]},{"content":"Not configuring this policy prevents online IDs from being used to authenticate the user.","pos":[2602,2691]},{"content":"This is the default on domain-joined devices","pos":[2692,2736]},{"content":"Best practices","pos":[2742,2756]},{"content":"Within a domain, domain accounts should be used for authentication.","pos":[2758,2825]},{"content":"Set this policy to <bpt id=\"p1\">**</bpt>Disabled<ept id=\"p1\">**</ept> or do not configure this policy to exclude online identities from being used to authenticate.","pos":[2826,2951]},{"content":"Location","pos":[2957,2965]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[2967,3060]},{"content":"Default values","pos":[3066,3080]},{"content":"The following table lists the actual and effective default values for this policy.","pos":[3082,3164]},{"content":"Default values are also listed on the policy’s property page.","pos":[3165,3226]},{"content":"Server type or Group Policy Object (GPO)","pos":[3230,3270]},{"content":"Default value","pos":[3273,3286]},{"content":"Default domain policy","pos":[3301,3322]},{"content":"Not defined","pos":[3324,3335]},{"content":"Default domain controller policy","pos":[3340,3372]},{"content":"Not defined","pos":[3375,3386]},{"content":"Stand-alone server default settings","pos":[3391,3426]},{"content":"Not defined","pos":[3429,3440]},{"content":"Domain controller effective default settings","pos":[3445,3489]},{"content":"Disabled","pos":[3492,3500]},{"content":"Member server effective default settings","pos":[3505,3545]},{"content":"Disabled","pos":[3548,3556]},{"content":"Effective GPO default settings on client computers","pos":[3561,3611]},{"content":"Disabled","pos":[3614,3622]},{"content":"Security considerations","pos":[3630,3653]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[3655,3849]},{"content":"Vulnerability","pos":[3855,3868]},{"content":"Enabling this policy setting allows a user’s account on one computer to be associated with an online identity, such as Microsoft Account, so that account can log on to a peer device (if the peer device is likewise configured) without the use of a Windows logon account (domain or local).","pos":[3870,4157]},{"content":"Although this is beneficial for workgroups or home groups, using this feature in a domain-joined environment might circumvent your established security policies.","pos":[4158,4319]},{"content":"Countermeasure","pos":[4325,4339]},{"content":"Set this policy to Disabled or do not configure this security policy for domain-joined devices.","pos":[4341,4436]},{"content":"Potential impact","pos":[4442,4458]},{"content":"If you do not set or disable this policy, the PKU2U protocol will not be used to authenticate between peer devices, which forces users to follow domain defined access control policies.","pos":[4460,4644]},{"content":"If you enable this policy, you will allow your users to authenticate by using local certificates between systems that are not part of a domain that uses PKU2U.","pos":[4645,4804]},{"content":"This will allow users to share resources between devices","pos":[4805,4861]},{"content":"Related topics","pos":[4866,4880]},{"content":"Security Options","pos":[4885,4901]}],"content":"---\ntitle: Network security Allow PKU2U authentication requests to this computer to use online identities (Windows 10)\ndescription: Describes the best practices, location, and values for the Network Security Allow PKU2U authentication requests to this computer to use online identities security policy setting.\nms.assetid: e04a854e-d94d-4306-9fb3-56e9bd7bb926\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Network security: Allow PKU2U authentication requests to this computer to use online identities\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, and values for the **Network Security: Allow PKU2U authentication requests to this computer to use online identities** security policy setting.\n\n## Reference\n\nStarting with Windows Server 2008 R2 and Windows 7, the Negotiate Security Support Provider (SSP) supports an extension SSP, Negoexts.dll. This extension SSP is treated as an authentication protocol by the Windows operating system, and it supports SSPs from Microsoft, including PKU2U. You can also develop or add other SSPs.\n\nWhen devices are configured to accept authentication requests by using online IDs, Negoexts.dll calls the PKU2U SSP on the computer that is used to log on. The PKU2U SSP obtains a local certificate and exchanges the policy between the peer computers. When validated on the peer computer, the certificate within the metadata is sent to the logon peer for validation. It associates the user's certificate to a security token, and then the logon process completes.\n\n>**Note:**  The ability to link online IDs can be performed by anyone with an account that has standard user’s credentials through **Credential Manager**.\n \nThis policy is not configured by default on domain-joined devices. This would disallow the online identities to be able to authenticate to the domain-joined computers in Windows 7 and later.\n\n### Possible values\n\n-   **Enabled**\n\n    This will allow authentication to successfully complete between the two (or more) computers that have established a peer relationship through the use on online IDs. The PKU2U SSP obtains a local certificate and exchanges the policy between the peer devices. When validated on the peer computer, the certificate within the metadata is sent to the logon peer for validation. It associates the user's certificate to a security token, and then the logon process completes.\n\n-   **Disabled**\n\n    This will prevent online IDs from being used to authenticate the user to another computer in a peer-to-peer relationship.\n\n-   Not set. Not configuring this policy prevents online IDs from being used to authenticate the user. This is the default on domain-joined devices\n\n### Best practices\n\nWithin a domain, domain accounts should be used for authentication. Set this policy to **Disabled** or do not configure this policy to exclude online identities from being used to authenticate.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\nThe following table lists the actual and effective default values for this policy. Default values are also listed on the policy’s property page.\n\n| Server type or Group Policy Object (GPO) | Default value |\n| - | - |\n| Default domain policy| Not defined| \n| Default domain controller policy | Not defined| \n| Stand-alone server default settings | Not defined| \n| Domain controller effective default settings | Disabled| \n| Member server effective default settings | Disabled| \n| Effective GPO default settings on client computers | Disabled| \n \n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nEnabling this policy setting allows a user’s account on one computer to be associated with an online identity, such as Microsoft Account, so that account can log on to a peer device (if the peer device is likewise configured) without the use of a Windows logon account (domain or local). Although this is beneficial for workgroups or home groups, using this feature in a domain-joined environment might circumvent your established security policies.\n\n### Countermeasure\n\nSet this policy to Disabled or do not configure this security policy for domain-joined devices.\n\n### Potential impact\n\nIf you do not set or disable this policy, the PKU2U protocol will not be used to authenticate between peer devices, which forces users to follow domain defined access control policies. If you enable this policy, you will allow your users to authenticate by using local certificates between systems that are not part of a domain that uses PKU2U. This will allow users to share resources between devices\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}