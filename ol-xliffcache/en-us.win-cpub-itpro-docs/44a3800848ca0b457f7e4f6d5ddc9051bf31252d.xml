{"nodes":[{"content":"Understanding and Using Compatibility Fixes (Windows 10)","pos":[11,67]},{"content":"As the Windows operating system evolves to support new technology and functionality, the implementations of some functions may change.","pos":[81,215]},{"content":"Understanding and Using Compatibility Fixes","pos":[364,407]},{"content":"Applies to","pos":[412,422]},{"content":"Windows 10","pos":[430,440]},{"content":"Windows 8.1","pos":[445,456]},{"content":"Windows 8","pos":[461,470]},{"content":"Windows 7","pos":[475,484]},{"content":"Windows Server 2012","pos":[489,508]},{"content":"Windows Server 2008 R2","pos":[513,535]},{"content":"As the Windows operating system evolves to support new technology and functionality, the implementations of some functions may change.","pos":[537,671]},{"content":"This can cause problems for applications that relied upon the original implementation.","pos":[672,758]},{"content":"You can avoid compatibility issues by using the Microsoft Windows Application Compatibility (Compatibility Fix) infrastructure to create a specific application fix for a particular version of an application.","pos":[759,966]},{"content":"How the Compatibility Fix Infrastructure Works","pos":[971,1017]},{"content":"The Compatibility Fix infrastructure uses the linking ability of APIs to redirect an application from Windows code directly to alternative code that implements the compatibility fix.","pos":[1020,1202]},{"content":"The Windows Portable Executable File Format includes headers that contain the data directories that are used to provide a layer of indirection between the application and the linked file.","pos":[1204,1391]},{"content":"API calls to the external binary files take place through the Import Address Table (IAT), which then directly calls the Windows operating system, as shown in the following figure.","pos":[1392,1571]},{"content":"act app calls operating system through iat","pos":[1575,1617]},{"content":"Specifically, the process modifies the address of the affected Windows function in the IAT to point to the compatibility fix code, as shown in the following figure.","pos":[1667,1831]},{"content":"act app redirect with compatibility fix","pos":[1835,1874]},{"content":"Note","pos":[1931,1935]},{"content":"For statically linked DLLs, the code redirection occurs as the application loads.","pos":[1940,2021]},{"content":"You can also fix dynamically linked DLLs by hooking into the GetProcAddress API.","pos":[2022,2102]},{"content":"Design Implications of the Compatibility Fix Infrastructure","pos":[2110,2169]},{"content":"There are important considerations to keep in mind when determining your application fix strategy, due to certain characteristics of the Compatibility Fix infrastructure.","pos":[2172,2342]},{"content":"The compatibility fix is not part of the Windows operating system (as shown in the previous figure).","pos":[2348,2448]},{"content":"Therefore, the same security restrictions apply to the compatibility fix as apply to the application code, which means that you cannot use compatibility fixes to bypass any of the security mechanisms of the operating system.","pos":[2449,2673]},{"content":"Therefore, compatibility fixes do not increase your security exposure, nor do you need to lower your security settings to accommodate compatibility fixes.","pos":[2674,2828]},{"content":"The Compatibility Fix infrastructure injects additional code into the application before it calls the operating system.","pos":[2834,2953]},{"content":"This means that any remedy that can be accomplished by a compatibility fix can also be addressed by fixing the application code.","pos":[2954,3082]},{"content":"The compatibility fixes run as user-mode code inside of a user-mode application process.","pos":[3088,3176]},{"content":"This means that you cannot use a compatibility fix to fix kernel-mode code issues.","pos":[3177,3259]},{"content":"For example, you cannot use a compatibility fix to resolve device-driver issues.","pos":[3260,3340]},{"pos":[3346,3429],"content":"**Note**  \nSome antivirus, firewall, and anti-spyware code runs in kernel mode.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"Some antivirus, firewall, and anti-spyware code runs in kernel mode.","pos":[11,79]}]},{"content":"Determining When to Use a Compatibility Fix","pos":[3441,3484]},{"content":"The decision to use compatibility fixes to remedy your compatibility issues may involve more than just technical issues.","pos":[3487,3607]},{"content":"The following scenarios reflect other common reasons for using a compatibility fix.","pos":[3608,3691]},{"content":"Scenario 1","pos":[3697,3707]},{"content":"The compatibility issue exists on an application which is no longer supported by the vendor.","pos":[3711,3803]},{"content":"As in many companies, you may run applications for which the vendor has ended support.","pos":[3807,3893]},{"content":"In this situation, you cannot have the vendor make the fix, nor can you access the source code to modify the issue yourself.","pos":[3894,4018]},{"content":"However, it is possible that the use of a compatibility fix might resolve the compatibility issue.","pos":[4019,4117]},{"content":"Scenario 2","pos":[4123,4133]},{"content":"The compatibility issue exists on an internally created application.","pos":[4137,4205]},{"content":"While it is preferable to fix the application code to resolve the issue, this is not always possible.","pos":[4209,4310]},{"content":"Your internal team might not be able to fix all of the issues prior to the deployment of the new operating system.","pos":[4311,4425]},{"content":"Instead, they might choose to employ a compatibility fix anywhere that it is possible.","pos":[4426,4512]},{"content":"They can then fix the code only for issues that cannot be resolved in this manner.","pos":[4513,4595]},{"content":"Through this method, your team can modify the application as time permits, without delaying the deployment of the new operating system into your environment.","pos":[4596,4753]},{"content":"Scenario 3","pos":[4759,4769]},{"content":"The compatibility issue exists on an application for which a compatible version is to be released in the near future, or an application that is not critical to the organization, regardless of its version.","pos":[4773,4977]},{"content":"In the situation where an application is either unimportant to your organization, or for which a newer, compatible version is to be released shortly, you can use a compatibility fix as a temporary solution.","pos":[4981,5187]},{"content":"This means that you can continue to use the application without delaying the deployment of a new operating system, with the intention of updating your configuration as soon as the new version is released.","pos":[5188,5392]},{"content":"Determining Which Version of an Application to Fix","pos":[5397,5447]},{"content":"You can apply a compatibility fix to a particular version of an application, either by using the \"up to or including\" clause or by selecting that specific version.","pos":[5450,5613]},{"content":"This means that the next version of the application will not have the compatibility fix automatically applied.","pos":[5614,5724]},{"content":"This is important, because it allows you to continue to use your application, but it also encourages the vendor to fix the application.","pos":[5725,5860]},{"content":"Support for Compatibility Fixes","pos":[5865,5896]},{"content":"Compatibility fixes are shipped as part of the Windows operating system and are updated by using Windows Update.","pos":[5899,6011]},{"content":"Therefore, they receive the same level of support as Windows itself.","pos":[6012,6080]},{"content":"You can apply the compatibility fixes to any of your applications.","pos":[6082,6148]},{"content":"However, Microsoft does not provide the tools to use the Compatibility Fix infrastructure to create your own custom fixes.","pos":[6149,6271]},{"content":"Related topics","pos":[6276,6290]},{"content":"Managing Application-Compatibility Fixes and Custom Fix Databases","pos":[6294,6359]}],"content":"---\ntitle: Understanding and Using Compatibility Fixes (Windows 10)\ndescription: As the Windows operating system evolves to support new technology and functionality, the implementations of some functions may change.\nms.assetid: 84bf663d-3e0b-4168-99d6-a26e054821b7\nms.prod: w10\nms.mktglfcycl: plan\nms.pagetype: appcompat\nms.sitesec: library\nauthor: TrudyHa\n---\n\n# Understanding and Using Compatibility Fixes\n\n\n**Applies to**\n\n-   Windows 10\n-   Windows 8.1\n-   Windows 8\n-   Windows 7\n-   Windows Server 2012\n-   Windows Server 2008 R2\n\nAs the Windows operating system evolves to support new technology and functionality, the implementations of some functions may change. This can cause problems for applications that relied upon the original implementation. You can avoid compatibility issues by using the Microsoft Windows Application Compatibility (Compatibility Fix) infrastructure to create a specific application fix for a particular version of an application.\n\n## How the Compatibility Fix Infrastructure Works\n\n\nThe Compatibility Fix infrastructure uses the linking ability of APIs to redirect an application from Windows code directly to alternative code that implements the compatibility fix.\n\nThe Windows Portable Executable File Format includes headers that contain the data directories that are used to provide a layer of indirection between the application and the linked file. API calls to the external binary files take place through the Import Address Table (IAT), which then directly calls the Windows operating system, as shown in the following figure.\n\n![act app calls operating system through iat](images/dep-win8-l-act-appcallosthroughiat.jpg)\n\nSpecifically, the process modifies the address of the affected Windows function in the IAT to point to the compatibility fix code, as shown in the following figure.\n\n![act app redirect with compatibility fix](images/dep-win8-l-act-appredirectwithcompatfix.jpg)\n\n**Note**  \nFor statically linked DLLs, the code redirection occurs as the application loads. You can also fix dynamically linked DLLs by hooking into the GetProcAddress API.\n\n \n\n## Design Implications of the Compatibility Fix Infrastructure\n\n\nThere are important considerations to keep in mind when determining your application fix strategy, due to certain characteristics of the Compatibility Fix infrastructure.\n\n-   The compatibility fix is not part of the Windows operating system (as shown in the previous figure). Therefore, the same security restrictions apply to the compatibility fix as apply to the application code, which means that you cannot use compatibility fixes to bypass any of the security mechanisms of the operating system. Therefore, compatibility fixes do not increase your security exposure, nor do you need to lower your security settings to accommodate compatibility fixes.\n\n-   The Compatibility Fix infrastructure injects additional code into the application before it calls the operating system. This means that any remedy that can be accomplished by a compatibility fix can also be addressed by fixing the application code.\n\n-   The compatibility fixes run as user-mode code inside of a user-mode application process. This means that you cannot use a compatibility fix to fix kernel-mode code issues. For example, you cannot use a compatibility fix to resolve device-driver issues.\n\n    **Note**  \n    Some antivirus, firewall, and anti-spyware code runs in kernel mode.\n\n     \n\n## Determining When to Use a Compatibility Fix\n\n\nThe decision to use compatibility fixes to remedy your compatibility issues may involve more than just technical issues. The following scenarios reflect other common reasons for using a compatibility fix.\n\n### Scenario 1\n\n**The compatibility issue exists on an application which is no longer supported by the vendor.**\n\nAs in many companies, you may run applications for which the vendor has ended support. In this situation, you cannot have the vendor make the fix, nor can you access the source code to modify the issue yourself. However, it is possible that the use of a compatibility fix might resolve the compatibility issue.\n\n### Scenario 2\n\n**The compatibility issue exists on an internally created application.**\n\nWhile it is preferable to fix the application code to resolve the issue, this is not always possible. Your internal team might not be able to fix all of the issues prior to the deployment of the new operating system. Instead, they might choose to employ a compatibility fix anywhere that it is possible. They can then fix the code only for issues that cannot be resolved in this manner. Through this method, your team can modify the application as time permits, without delaying the deployment of the new operating system into your environment.\n\n### Scenario 3\n\n**The compatibility issue exists on an application for which a compatible version is to be released in the near future, or an application that is not critical to the organization, regardless of its version.**\n\nIn the situation where an application is either unimportant to your organization, or for which a newer, compatible version is to be released shortly, you can use a compatibility fix as a temporary solution. This means that you can continue to use the application without delaying the deployment of a new operating system, with the intention of updating your configuration as soon as the new version is released.\n\n## Determining Which Version of an Application to Fix\n\n\nYou can apply a compatibility fix to a particular version of an application, either by using the \"up to or including\" clause or by selecting that specific version. This means that the next version of the application will not have the compatibility fix automatically applied. This is important, because it allows you to continue to use your application, but it also encourages the vendor to fix the application.\n\n## Support for Compatibility Fixes\n\n\nCompatibility fixes are shipped as part of the Windows operating system and are updated by using Windows Update. Therefore, they receive the same level of support as Windows itself.\n\nYou can apply the compatibility fixes to any of your applications. However, Microsoft does not provide the tools to use the Compatibility Fix infrastructure to create your own custom fixes.\n\n## Related topics\n\n\n[Managing Application-Compatibility Fixes and Custom Fix Databases](managing-application-compatibility-fixes-and-custom-fix-databases.md)\n\n \n\n \n\n\n\n\n\n"}