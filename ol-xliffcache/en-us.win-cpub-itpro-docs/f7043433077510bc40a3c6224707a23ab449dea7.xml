{"nodes":[{"content":"Network security Restrict NTLM NTLM authentication in this domain (Windows 10)","pos":[11,89]},{"content":"Describes the best practices, location, values, management aspects, and security considerations for the Network Security Restrict NTLM NTLM authentication in this domain security policy setting.","pos":[103,297]},{"content":"Network security: Restrict NTLM: NTLM authentication in this domain","pos":[453,520]},{"content":"Applies to","pos":[524,534]},{"content":"Windows 10","pos":[541,551]},{"pos":[553,753],"content":"Describes the best practices, location, values, management aspects, and security considerations for the <bpt id=\"p1\">**</bpt>Network Security: Restrict NTLM: NTLM authentication in this domain<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[758,767]},{"content":"The <bpt id=\"p1\">**</bpt>Network Security: Restrict NTLM: NTLM authentication in this domain<ept id=\"p1\">**</ept> policy setting allows you to deny or allow NTLM authentication within a domain from this domain controller.","pos":[769,952]},{"content":"This policy setting does not affect interactive logon to this domain controller.","pos":[953,1033]},{"content":"Possible values","pos":[1039,1054]},{"content":"Disable","pos":[1062,1069]},{"content":"The domain controller will allow all NTLM pass-through authentication requests within the domain.","pos":[1077,1174]},{"content":"Deny for domain accounts to domain servers","pos":[1182,1224]},{"content":"The domain controller will deny all NTLM authentication logon attempts using accounts from this domain to all servers in the domain.","pos":[1232,1364]},{"content":"The NTLM authentication attempts will be blocked and will return an NTLM blocked error unless the server name is on the exception list in the <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p1\">**</ept> policy setting.","pos":[1365,1596]},{"content":"NTLM can be used if the users are connecting to other domains.","pos":[1602,1664]},{"content":"This depends on if any Restrict NTLM policies have been set on those domains.","pos":[1665,1742]},{"content":"Deny for domain accounts","pos":[1750,1774]},{"pos":[1782,2061],"content":"Only the domain controller will deny all NTLM authentication logon attempts from domain accounts and will return an NTLM blocked error unless the server name is on the exception list in the <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p1\">**</ept> policy setting."},{"content":"Deny for domain servers","pos":[2069,2092]},{"content":"The domain controller will deny NTLM authentication requests to all servers in the domain and will return an NTLM blocked error unless the server name is on the exception list in the <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p1\">**</ept> policy setting.","pos":[2100,2372]},{"content":"Servers that are not joined to the domain will not be affected if this policy setting is configured.","pos":[2373,2473]},{"content":"Deny all","pos":[2481,2489]},{"pos":[2497,2790],"content":"The domain controller will deny all NTLM pass-through authentication requests from its servers and for its accounts and return an NTLM blocked error unless the server name is on the exception list in the <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p1\">**</ept> policy setting."},{"content":"Not defined","pos":[2796,2807]},{"content":"The domain controller will allow all NTLM authentication requests in the domain where the policy is deployed.","pos":[2813,2922]},{"content":"Best practices","pos":[2928,2942]},{"content":"If you select any of the deny options, incoming NTLM traffic to the domain will be restricted.","pos":[2944,3038]},{"content":"First, set the <bpt id=\"p1\">**</bpt>Network Security: Restrict NTLM: Audit NTLM authentication in this domain<ept id=\"p1\">**</ept> policy setting, and then review the Operational log to understand what authentication attempts are made to the member servers.","pos":[3039,3258]},{"content":"You can then add those member server names to a server exception list by using the <bpt id=\"p1\">[</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p1\">](network-security-restrict-ntlm-add-server-exceptions-in-this-domain.md)</ept> policy setting.","pos":[3259,3501]},{"content":"Location","pos":[3507,3515]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[3517,3610]},{"content":"Default values","pos":[3616,3630]},{"content":"Server type or GPO","pos":[3634,3652]},{"content":"Default value","pos":[3655,3668]},{"content":"Default domain policy","pos":[3683,3704]},{"content":"Not configured","pos":[3706,3720]},{"content":"Default domain controller policy","pos":[3725,3757]},{"content":"Not configured","pos":[3760,3774]},{"content":"Stand-alone server default settings","pos":[3779,3814]},{"content":"Not configured","pos":[3817,3831]},{"content":"Domain controller effective default settings","pos":[3835,3879]},{"content":"Not configured","pos":[3882,3896]},{"content":"Member server effective default settings","pos":[3901,3941]},{"content":"Not configured","pos":[3944,3958]},{"content":"Client computer effective default settings","pos":[3964,4006]},{"content":"Not configured","pos":[4009,4023]},{"content":"Policy management","pos":[4031,4048]},{"content":"This section describes different features and tools available to help you manage this policy.","pos":[4050,4143]},{"content":"Restart requirement","pos":[4149,4168]},{"content":"None.","pos":[4170,4175]},{"content":"Changes to this policy become effective without a restart when saved locally or distributed through Group Policy.","pos":[4176,4289]},{"content":"Group Policy","pos":[4295,4307]},{"content":"Setting and deploying this policy using Group Policy takes precedence over the setting on the local device.","pos":[4309,4416]},{"content":"If the Group Policy is set to <bpt id=\"p1\">**</bpt>Not Configured<ept id=\"p1\">**</ept>, local settings will apply.","pos":[4417,4493]},{"content":"Auditing","pos":[4499,4507]},{"content":"View the operational event log to see if this policy is functioning as intended.","pos":[4509,4589]},{"content":"Audit and block events are recorded on this computer in the operational event log located in <bpt id=\"p1\">**</bpt>Applications and Services Log<ph id=\"ph1\">\\\\</ph>Microsoft<ph id=\"ph2\">\\\\</ph>Windows<ph id=\"ph3\">\\\\</ph>NTLM<ept id=\"p1\">**</ept>.","pos":[4590,4743]},{"content":"There are no security audit event policies that can be configured to view output from this policy.","pos":[4745,4843]},{"content":"Security considerations","pos":[4848,4871]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[4873,5067]},{"content":"NTLM and NTLMv2 authentication is vulnerable to a variety of malicious attacks, including SMB replay, man-in-the-middle attacks, and brute force attacks.","pos":[5069,5222]},{"content":"Reducing and eliminating NTLM authentication from your environment forces the Windows operating system to use more secure protocols, such as the Kerberos version 5 protocol, or different authentication mechanisms, such as smart cards.","pos":[5223,5457]},{"content":"Vulnerability","pos":[5463,5476]},{"content":"Malicious attacks on NTLM authentication traffic resulting in a compromised server or domain controller can occur only if the server or domain controller handles NTLM requests.","pos":[5478,5654]},{"content":"If those requests are denied, this attack vector is eliminated.","pos":[5655,5718]},{"content":"Countermeasure","pos":[5724,5738]},{"pos":[5740,6054],"content":"When it has been determined that the NTLM authentication protocol should not be used within a network because you are required to use a more secure protocol such as the Kerberos protocol, then you can select one of several options that this security policy setting offers to restrict NTLM usage within the domain."},{"content":"Potential impact","pos":[6060,6076]},{"content":"If you configure this policy setting, numerous NTLM authentication requests could fail within the domain, which could degrade productivity.","pos":[6078,6217]},{"content":"Before implementing this change through this policy setting, set <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Audit NTLM authentication in this domain<ept id=\"p1\">**</ept> to the same option so that you can review the log for the potential impact, perform an analysis of servers, and create an exception list of servers to exclude from this policy setting by using <bpt id=\"p2\">[</bpt>Network security: Restrict NTLM: Add server exceptions in this domain<ept id=\"p2\">](network-security-restrict-ntlm-add-server-exceptions-in-this-domain.md)</ept>.","pos":[6218,6698]},{"content":"Related topics","pos":[6703,6717]},{"content":"Security Options","pos":[6722,6738]}],"content":"---\ntitle: Network security Restrict NTLM NTLM authentication in this domain (Windows 10)\ndescription: Describes the best practices, location, values, management aspects, and security considerations for the Network Security Restrict NTLM NTLM authentication in this domain security policy setting.\nms.assetid: 4c7884e9-cc11-4402-96b6-89c77dc908f8\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Network security: Restrict NTLM: NTLM authentication in this domain\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, values, management aspects, and security considerations for the **Network Security: Restrict NTLM: NTLM authentication in this domain** security policy setting.\n\n## Reference\n\nThe **Network Security: Restrict NTLM: NTLM authentication in this domain** policy setting allows you to deny or allow NTLM authentication within a domain from this domain controller. This policy setting does not affect interactive logon to this domain controller.\n\n### Possible values\n\n-   **Disable**\n\n    The domain controller will allow all NTLM pass-through authentication requests within the domain.\n\n-   **Deny for domain accounts to domain servers**\n\n    The domain controller will deny all NTLM authentication logon attempts using accounts from this domain to all servers in the domain. The NTLM authentication attempts will be blocked and will return an NTLM blocked error unless the server name is on the exception list in the **Network security: Restrict NTLM: Add server exceptions in this domain** policy setting.\n\n    NTLM can be used if the users are connecting to other domains. This depends on if any Restrict NTLM policies have been set on those domains.\n\n-   **Deny for domain accounts**\n\n    Only the domain controller will deny all NTLM authentication logon attempts from domain accounts and will return an NTLM blocked error unless the server name is on the exception list in the **Network security: Restrict NTLM: Add server exceptions in this domain** policy setting.\n\n-   **Deny for domain servers**\n\n    The domain controller will deny NTLM authentication requests to all servers in the domain and will return an NTLM blocked error unless the server name is on the exception list in the **Network security: Restrict NTLM: Add server exceptions in this domain** policy setting. Servers that are not joined to the domain will not be affected if this policy setting is configured.\n\n-   **Deny all**\n\n    The domain controller will deny all NTLM pass-through authentication requests from its servers and for its accounts and return an NTLM blocked error unless the server name is on the exception list in the **Network security: Restrict NTLM: Add server exceptions in this domain** policy setting.\n\n-   Not defined\n\n    The domain controller will allow all NTLM authentication requests in the domain where the policy is deployed.\n\n### Best practices\n\nIf you select any of the deny options, incoming NTLM traffic to the domain will be restricted. First, set the **Network Security: Restrict NTLM: Audit NTLM authentication in this domain** policy setting, and then review the Operational log to understand what authentication attempts are made to the member servers. You can then add those member server names to a server exception list by using the [Network security: Restrict NTLM: Add server exceptions in this domain](network-security-restrict-ntlm-add-server-exceptions-in-this-domain.md) policy setting.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\n| Server type or GPO | Default value |\n| - | - |\n| Default domain policy| Not configured| \n| Default domain controller policy | Not configured| \n| Stand-alone server default settings | Not configured|\n| Domain controller effective default settings | Not configured| \n| Member server effective default settings | Not configured | \n| Client computer effective default settings | Not configured| \n \n## Policy management\n\nThis section describes different features and tools available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a restart when saved locally or distributed through Group Policy.\n\n### Group Policy\n\nSetting and deploying this policy using Group Policy takes precedence over the setting on the local device. If the Group Policy is set to **Not Configured**, local settings will apply.\n\n### Auditing\n\nView the operational event log to see if this policy is functioning as intended. Audit and block events are recorded on this computer in the operational event log located in **Applications and Services Log\\\\Microsoft\\\\Windows\\\\NTLM**.\n\nThere are no security audit event policies that can be configured to view output from this policy.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\nNTLM and NTLMv2 authentication is vulnerable to a variety of malicious attacks, including SMB replay, man-in-the-middle attacks, and brute force attacks. Reducing and eliminating NTLM authentication from your environment forces the Windows operating system to use more secure protocols, such as the Kerberos version 5 protocol, or different authentication mechanisms, such as smart cards.\n\n### Vulnerability\n\nMalicious attacks on NTLM authentication traffic resulting in a compromised server or domain controller can occur only if the server or domain controller handles NTLM requests. If those requests are denied, this attack vector is eliminated.\n\n### Countermeasure\n\nWhen it has been determined that the NTLM authentication protocol should not be used within a network because you are required to use a more secure protocol such as the Kerberos protocol, then you can select one of several options that this security policy setting offers to restrict NTLM usage \nwithin the domain.\n\n### Potential impact\n\nIf you configure this policy setting, numerous NTLM authentication requests could fail within the domain, which could degrade productivity. Before implementing this change through this policy setting, set **Network security: Restrict NTLM: Audit NTLM authentication in this domain** to the same option so that you can review the log for the potential impact, perform an analysis of servers, and create an exception list of servers to exclude from this policy setting by using [Network security: Restrict NTLM: Add server exceptions in this domain](network-security-restrict-ntlm-add-server-exceptions-in-this-domain.md).\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}