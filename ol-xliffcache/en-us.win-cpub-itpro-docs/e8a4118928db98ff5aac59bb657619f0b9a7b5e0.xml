{"nodes":[{"content":"Planning to Use Folder Redirection with App-V","pos":[11,56]},{"content":"Planning to Use Folder Redirection with App-V","pos":[70,115]},{"content":"Planning to Use Folder Redirection with App-V","pos":[290,335]},{"content":"App-V 5.0 SP2 supports the use of folder redirection, a feature that enables users and administrators to redirect the path of a folder to a new location.","pos":[338,491]},{"content":"This topic contains the following sections:","pos":[493,536]},{"content":"Requirements for using folder redirection","pos":[543,584]},{"content":"How to configure folder redirection for use with App-V","pos":[617,671]},{"content":"How folder redirection works with App-V","pos":[703,742]},{"content":"Overview of folder redirection","pos":[776,806]},{"pos":[884,951],"content":"Requirements and unsupported scenarios for using folder redirection"},{"content":"Requirements","pos":[1070,1082]},{"content":"To use %AppData% folder redirection, you must:","pos":[1112,1158]},{"content":"Have an App-V package that has an AppData virtual file system (VFS) folder.","pos":[1175,1250]},{"content":"Enable folder redirection and redirect users’ folders to a shared folder, typically a network folder.","pos":[1267,1368]},{"content":"Roam both or neither of the following:","pos":[1385,1423]},{"content":"Files under %appdata%\\Microsoft\\AppV\\Client\\Catalog","pos":[1440,1491]},{"content":"Registry settings under HKEY_CURRENT_USER\\Software\\Microsoft\\AppV\\Client\\Packages","pos":[1508,1589]},{"content":"For more detail, see <bpt id=\"p1\">[</bpt>Application Publishing and Client Interaction<ept id=\"p1\">](application-publishing-and-client-interaction.md#bkmk-clt-inter-roam-reqs)</ept>.","pos":[1597,1741]},{"content":"Ensure that the following folders are available to each user who logs into the computer that is running the App-V 5.0 SP2 or later client:","pos":[1769,1907]},{"content":"%AppData% is configured to the desired network location (with or without <bpt id=\"p1\">[</bpt>Offline Files<ept id=\"p1\">](http://technet.microsoft.com/library/cc780552.aspx)</ept> support).","pos":[1924,2074]},{"content":"%LocalAppData% is configured to the desired local folder.","pos":[2091,2148]},{"content":"Unsupported scenarios","pos":[2224,2245]},{"content":"Configuring %LocalAppData% as a network drive.","pos":[2284,2330]},{"content":"Redirecting the Start menu to a single folder for multiple users.","pos":[2347,2412]},{"content":"If roaming AppData (%AppData%) is redirected to a network share that is not available, App-V applications will fail to launch as follows:","pos":[2429,2566]},{"content":"App-V version","pos":[2687,2700]},{"content":"Scenario description","pos":[2723,2743]},{"content":"In App-V 5.0 through App-V 5.0 SP2 plus hotfixes","pos":[2809,2857]},{"content":"This failure will occur regardless of whether Offline Files is enabled.","pos":[2887,2958]},{"content":"In App-V 5.0 SP3","pos":[3012,3028]},{"content":"If the unavailable network share has been enabled for Offline Files, the App-V application will start successfully.","pos":[3058,3173]},{"pos":[3305,3359],"content":"How to configure folder redirection for use with App-V"},{"content":"Folder redirection can be applied to different folders, such as Desktop, My Documents, My Pictures, etc. However, the only folder that impacts the use of App-V applications is the user’s roaming AppData folder (%AppData%).","pos":[3362,3584]},{"content":"You can apply folder redirection to any other supported folders without impacting App-V.","pos":[3585,3673]},{"pos":[3722,3761],"content":"How folder redirection works with App-V"},{"content":"The following table describes how folder redirection works when %AppData% is redirected to a network and when you have met the requirements listed earlier in this article.","pos":[3764,3935]},{"content":"Virtual environment state","pos":[4053,4078]},{"content":"Action that occurs","pos":[4101,4119]},{"content":"When the virtual environment starts","pos":[4185,4220]},{"content":"The virtual file system (VFS) AppData folder is mapped to the local AppData folder (%LocalAppData%) instead of to the user’s roaming AppData folder (%AppData%).","pos":[4250,4410]},{"content":"LocalAppData contains a local cache of the user’s roaming AppData folder for the package in use.","pos":[4427,4523]},{"content":"The local cache is located under:","pos":[4524,4557]},{"content":"The latest data from the user’s roaming AppData folder is copied to and replaces the data currently in the local cache.","pos":[4655,4774]},{"content":"While the virtual environment is running, data continues to be saved to the local cache.","pos":[4791,4879]},{"content":"Data is served only out of %LocalAppData% and is not moved or synchronized with %AppData% until the end user shuts down the computer.","pos":[4880,5013]},{"content":"Entries to the AppData folder are made using the user context, not the system context.","pos":[5030,5116]},{"content":"Note","pos":[5160,5164]},{"content":"The App-V client folder redirection sometimes fails to move files from %AppData% to %LocalAppData%.","pos":[5179,5278]},{"content":"See <bpt id=\"p1\">[</bpt>Release Notes for App-V 5.0 SP2<ept id=\"p1\">](release-notes-for-app-v-50-sp2.md#bkmk-folderredirection)</ept>.","pos":[5279,5375]},{"content":"When the virtual environment shuts down","pos":[5451,5490]},{"content":"The local cached data in AppData (roaming) is zipped up and copied to the “real” roaming AppData folder in %AppData%.","pos":[5520,5637]},{"content":"A time stamp, which indicates the last known upload, is simultaneously saved as a registry key under:","pos":[5638,5739]},{"content":"To provide redundancy, App-V 5.0 keeps the three most recent copies of the compressed data under %AppData%.","pos":[5845,5952]},{"pos":[6040,6070],"content":"Overview of folder redirection"},{"content":"Purpose","pos":[6189,6196]},{"content":"Enables end users to work with files, which have been redirected to another folder, as if the files still existed on the local drive.","pos":[6226,6359]},{"content":"Description","pos":[6413,6424]},{"content":"Folder redirection allows users and administrators to redirect the path of a folder to a network location.","pos":[6454,6560]},{"content":"The documents in the folder are available to the user from any computer on the network.","pos":[6561,6648]},{"content":"Folder redirection allows users and administrators to redirect the path of a folder to a network location.","pos":[6665,6771]},{"content":"The documents in the folder are available to the user from any computer on the network.","pos":[6772,6859]},{"content":"The new location can be a folder on the local computer or a folder on a shared network.","pos":[6876,6963]},{"content":"Folder redirection updates the files immediately, whereas roaming data is typically synchronized when the user logs in or logs off.","pos":[6980,7111]},{"content":"Usage example","pos":[7175,7188]},{"content":"You can redirect the Documents folder, which is usually stored on the computer's local hard disk, to a network location.","pos":[7218,7338]},{"content":"The user can access the documents in the folder from any computer on the network.","pos":[7339,7420]},{"content":"More resources","pos":[7474,7488]},{"content":"Folder redirection overview","pos":[7519,7546]},{"content":"Got a suggestion for App-V?","pos":[7640,7667]},{"content":"Add or vote on suggestions <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization)</ept>.","pos":[7670,7782]},{"content":"For App-V issues, use the <bpt id=\"p1\">[</bpt>App-V TechNet Forum<ept id=\"p1\">](https://social.technet.microsoft.com/Forums/home?forum=mdopappv)</ept>.","pos":[7783,7896]}],"content":"---\ntitle: Planning to Use Folder Redirection with App-V\ndescription: Planning to Use Folder Redirection with App-V\nauthor: jamiejdt\nms.assetid: 2a4deeed-fdc0-465c-b88a-3a2fbbf27436\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w10\n---\n\n\n# Planning to Use Folder Redirection with App-V\n\n\nApp-V 5.0 SP2 supports the use of folder redirection, a feature that enables users and administrators to redirect the path of a folder to a new location.\n\nThis topic contains the following sections:\n\n-   [Requirements for using folder redirection](#bkmk-folder-redir-reqs)\n\n-   [How to configure folder redirection for use with App-V](#bkmk-folder-redir-cfg)\n\n-   [How folder redirection works with App-V](#bkmk-folder-redir-works)\n\n-   [Overview of folder redirection](#bkmk-folder-redir-overview)\n\n## <a href=\"\" id=\"bkmk-folder-redir-reqs\"></a>Requirements and unsupported scenarios for using folder redirection\n\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>Requirements</p></td>\n<td align=\"left\"><p>To use %AppData% folder redirection, you must:</p>\n<ul>\n<li><p>Have an App-V package that has an AppData virtual file system (VFS) folder.</p></li>\n<li><p>Enable folder redirection and redirect users’ folders to a shared folder, typically a network folder.</p></li>\n<li><p>Roam both or neither of the following:</p>\n<ul>\n<li><p>Files under %appdata%\\Microsoft\\AppV\\Client\\Catalog</p></li>\n<li><p>Registry settings under HKEY_CURRENT_USER\\Software\\Microsoft\\AppV\\Client\\Packages</p>\n<p>For more detail, see [Application Publishing and Client Interaction](application-publishing-and-client-interaction.md#bkmk-clt-inter-roam-reqs).</p></li>\n</ul></li>\n<li><p>Ensure that the following folders are available to each user who logs into the computer that is running the App-V 5.0 SP2 or later client:</p>\n<ul>\n<li><p>%AppData% is configured to the desired network location (with or without [Offline Files](http://technet.microsoft.com/library/cc780552.aspx) support).</p></li>\n<li><p>%LocalAppData% is configured to the desired local folder.</p></li>\n</ul></li>\n</ul></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>Unsupported scenarios</p></td>\n<td align=\"left\"><ul>\n<li><p>Configuring %LocalAppData% as a network drive.</p></li>\n<li><p>Redirecting the Start menu to a single folder for multiple users.</p></li>\n<li><p>If roaming AppData (%AppData%) is redirected to a network share that is not available, App-V applications will fail to launch as follows:</p>\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">App-V version</th>\n<th align=\"left\">Scenario description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>In App-V 5.0 through App-V 5.0 SP2 plus hotfixes</p></td>\n<td align=\"left\"><p>This failure will occur regardless of whether Offline Files is enabled.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>In App-V 5.0 SP3</p></td>\n<td align=\"left\"><p>If the unavailable network share has been enabled for Offline Files, the App-V application will start successfully.</p></td>\n</tr>\n</tbody>\n</table>\n<p> </p></li>\n</ul></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"bkmk-folder-redir-cfg\"></a>How to configure folder redirection for use with App-V\n\n\nFolder redirection can be applied to different folders, such as Desktop, My Documents, My Pictures, etc. However, the only folder that impacts the use of App-V applications is the user’s roaming AppData folder (%AppData%). You can apply folder redirection to any other supported folders without impacting App-V.\n\n## <a href=\"\" id=\"bkmk-folder-redir-works\"></a>How folder redirection works with App-V\n\n\nThe following table describes how folder redirection works when %AppData% is redirected to a network and when you have met the requirements listed earlier in this article.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Virtual environment state</th>\n<th align=\"left\">Action that occurs</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>When the virtual environment starts</p></td>\n<td align=\"left\"><p>The virtual file system (VFS) AppData folder is mapped to the local AppData folder (%LocalAppData%) instead of to the user’s roaming AppData folder (%AppData%).</p>\n<ul>\n<li><p>LocalAppData contains a local cache of the user’s roaming AppData folder for the package in use. The local cache is located under:</p>\n<p><code>%LocalAppData%\\Microsoft\\AppV\\Client\\VFS\\PackageGUID\\AppData</code></p></li>\n<li><p>The latest data from the user’s roaming AppData folder is copied to and replaces the data currently in the local cache.</p></li>\n<li><p>While the virtual environment is running, data continues to be saved to the local cache. Data is served only out of %LocalAppData% and is not moved or synchronized with %AppData% until the end user shuts down the computer.</p></li>\n<li><p>Entries to the AppData folder are made using the user context, not the system context.</p></li>\n</ul>\n<div class=\"alert\">\n<strong>Note</strong>  \n<p>The App-V client folder redirection sometimes fails to move files from %AppData% to %LocalAppData%. See [Release Notes for App-V 5.0 SP2](release-notes-for-app-v-50-sp2.md#bkmk-folderredirection).</p>\n</div>\n<div>\n \n</div></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>When the virtual environment shuts down</p></td>\n<td align=\"left\"><p>The local cached data in AppData (roaming) is zipped up and copied to the “real” roaming AppData folder in %AppData%. A time stamp, which indicates the last known upload, is simultaneously saved as a registry key under:</p>\n<p><code>HKCU\\Software\\Microsoft\\AppV\\Client\\Packages\\&lt;PACKAGE_GUID&gt;\\AppDataTime</code></p>\n<p>To provide redundancy, App-V 5.0 keeps the three most recent copies of the compressed data under %AppData%.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## <a href=\"\" id=\"bkmk-folder-redir-overview\"></a>Overview of folder redirection\n\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>Purpose</p></td>\n<td align=\"left\"><p>Enables end users to work with files, which have been redirected to another folder, as if the files still existed on the local drive.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>Description</p></td>\n<td align=\"left\"><p>Folder redirection allows users and administrators to redirect the path of a folder to a network location. The documents in the folder are available to the user from any computer on the network.</p>\n<ul>\n<li><p>Folder redirection allows users and administrators to redirect the path of a folder to a network location. The documents in the folder are available to the user from any computer on the network.</p></li>\n<li><p>The new location can be a folder on the local computer or a folder on a shared network.</p></li>\n<li><p>Folder redirection updates the files immediately, whereas roaming data is typically synchronized when the user logs in or logs off.</p></li>\n</ul></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p>Usage example</p></td>\n<td align=\"left\"><p>You can redirect the Documents folder, which is usually stored on the computer's local hard disk, to a network location. The user can access the documents in the folder from any computer on the network.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>More resources</p></td>\n<td align=\"left\"><p>[Folder redirection overview](http://technet.microsoft.com/library/cc778976.aspx)</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\n## Got a suggestion for App-V?\n\n\nAdd or vote on suggestions [here](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization). For App-V issues, use the [App-V TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).\n\n \n\n \n\n\n\n\n\n"}