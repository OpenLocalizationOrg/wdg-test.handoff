{"nodes":[{"content":"Use a reference device to create and maintain AppLocker policies (Windows 10)","pos":[11,88]},{"content":"This topic for the IT professional describes the steps to create and maintain AppLocker policies by using a reference computer.","pos":[102,229]},{"content":"Use a reference device to create and maintain AppLocker policies","pos":[385,449]},{"content":"Applies to","pos":[453,463]},{"content":"Windows 10","pos":[470,480]},{"content":"This topic for the IT professional describes the steps to create and maintain AppLocker policies by using a reference computer.","pos":[482,609]},{"content":"Background and prerequisites","pos":[614,642]},{"content":"An AppLocker reference device is a baseline device you can use to configure policies and can subsequently be used to maintain AppLocker policies.","pos":[644,789]},{"content":"For the procedure to configure a reference device, see <bpt id=\"p1\">[</bpt>Configure the AppLocker reference device<ept id=\"p1\">](configure-the-appLocker-reference-device.md)</ept>.","pos":[790,933]},{"content":"An AppLocker reference device that is used to create and maintain AppLocker policies should contain the corresponding apps for each organizational unit (OU) to mimic your production environment.","pos":[935,1129]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept>  The reference device must be running one of the supported editions of Windows.","pos":[1132,1226]},{"content":"For information about operating system requirements for AppLocker, see <bpt id=\"p1\">[</bpt>Requirements to use AppLocker<ept id=\"p1\">](requirements-to-use-applocker.md)</ept>.","pos":[1227,1364]},{"content":"You can perform AppLocker policy testing on the reference device by using the <bpt id=\"p1\">**</bpt>Audit only<ept id=\"p1\">**</ept> enforcement setting or Windows PowerShell cmdlets.","pos":[1367,1510]},{"content":"You can also use the reference device as part of a testing configuration that includes policies that are created by using Software Restriction Policies.","pos":[1511,1663]},{"content":"Step 1: Automatically generate rules on the reference device","pos":[1668,1728]},{"content":"With AppLocker, you can automatically generate rules for all files within a folder.","pos":[1730,1813]},{"content":"AppLocker scans the specified folder and creates the condition types that you choose for each file in that folder.","pos":[1814,1928]},{"content":"For the procedure to do this, see <bpt id=\"p1\">[</bpt>Run the Automatically Generate Rules wizard<ept id=\"p1\">](run-the-automatically-generate-rules-wizard.md)</ept>.","pos":[1929,2057]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  If you run this wizard to create your first rules for a Group Policy Object (GPO), after you complete the wizard, you will be prompted to create the default rules, which allow critical system files to run.","pos":[2060,2276]},{"content":"You can edit the default rules at any time.","pos":[2277,2320]},{"content":"If your organization has decided to edit the default rules or create custom rules to allow the Windows system files to run, ensure that you delete the default rules after you replace them with your custom rules.","pos":[2321,2532]},{"content":"Step 2: Create the default rules on the reference device","pos":[2538,2594]},{"content":"AppLocker includes default rules for each rule collection.","pos":[2596,2654]},{"content":"These rules are intended to help ensure that the files that are required for Windows to operate properly are allowed in an AppLocker rule collection.","pos":[2655,2804]},{"content":"You must run the default rules for each rule collection.","pos":[2805,2861]},{"content":"For info about default rules and considerations for using them, see <bpt id=\"p1\">[</bpt>Understanding AppLocker default rules<ept id=\"p1\">](understanding-applocker-default-rules.md)</ept>.","pos":[2862,3012]},{"content":"For the procedure to create default rules, see <bpt id=\"p1\">[</bpt>Create AppLocker default rules<ept id=\"p1\">](create-applocker-default-rules.md)</ept>.","pos":[3013,3128]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept>  You can use the default rules as a template when you create your own rules.","pos":[3131,3222]},{"content":"This allows files within the Windows directory to run.","pos":[3223,3277]},{"content":"However, these rules are only meant to function as a starter policy when you are first testing AppLocker rules.","pos":[3278,3389]},{"content":"Step 3: Modify rules and the rule collection on the reference device","pos":[3395,3463]},{"content":"If AppLocker policies are currently running in your production environment, export the policies from the corresponding GPOs and save them to the reference device.","pos":[3465,3627]},{"content":"For the procedure to do this, see <bpt id=\"p1\">[</bpt>Export an AppLocker policy from a GPO<ept id=\"p1\">](export-an-applocker-policy-from-a-gpo.md)</ept>.","pos":[3628,3744]},{"content":"If no AppLocker policies have been deployed, create the rules and develop the policies by using the following procedures:","pos":[3745,3866]},{"content":"Create a rule that uses a publisher condition","pos":[3873,3918]},{"content":"Create a rule that uses a file hash condition","pos":[3975,4020]},{"content":"Create a rule that uses a path condition","pos":[4077,4117]},{"content":"Edit AppLocker rules","pos":[4169,4189]},{"content":"Add exceptions for an AppLocker rule","pos":[4221,4257]},{"content":"Delete an AppLocker rule","pos":[4311,4335]},{"content":"Enable the DLL rule collection","pos":[4371,4401]},{"content":"Enforce AppLocker rules","pos":[4443,4466]},{"content":"Step 4: Test and update AppLocker policy on the reference device","pos":[4500,4564]},{"content":"You should test each set of rules to ensure that they perform as intended.","pos":[4566,4640]},{"content":"The <bpt id=\"p1\">**</bpt>Test-AppLockerPolicy<ept id=\"p1\">**</ept> Windows PowerShell cmdlet can be used to determine whether any of the rules in your rule collection will be blocked on your reference device.","pos":[4641,4811]},{"content":"Perform the steps on each reference device that you used to define the AppLocker policy.","pos":[4812,4900]},{"content":"Ensure that the reference device is joined to the domain and that it is receiving the AppLocker policy from the appropriate GPO.","pos":[4901,5029]},{"content":"Because AppLocker rules are inherited from linked GPOs, you should deploy all of the rules to simultaneously test all of your test GPOs.","pos":[5030,5166]},{"content":"Use the following procedures to complete this step:","pos":[5167,5218]},{"content":"Test an AppLocker Policy with Test-AppLockerPolicy","pos":[5225,5275]},{"content":"Discover the Effect of an AppLocker Policy","pos":[5341,5383]},{"content":"<bpt id=\"p1\">**</bpt>Caution:<ept id=\"p1\">**</ept>  If you have set the enforcement setting on the rule collection to <bpt id=\"p2\">**</bpt>Enforce rules<ept id=\"p2\">**</ept> or you have not configured the rule collection, the policy will be implemented when the GPO is updated in the next step.","pos":[5446,5664]},{"content":"If you have set the enforcement setting on the rule collection to <bpt id=\"p1\">**</bpt>Audit only<ept id=\"p1\">**</ept>, application access events are written to the AppLocker log, and the policy will not take effect.","pos":[5665,5843]},{"content":"Step 5: Export and import the policy into production","pos":[5849,5901]},{"content":"When the AppLocker policy has been tested successfully, it can be imported into the GPO (or imported into individual computers that are not managed by Group Policy) and checked for its intended effectiveness.","pos":[5903,6111]},{"content":"To do this, perform the following procedures:","pos":[6112,6157]},{"content":"Export an AppLocker policy to an XML file","pos":[6164,6205]},{"pos":[6257,6341],"content":"<bpt id=\"p1\">[</bpt>Import an AppLocker policy into a GPO<ept id=\"p1\">](import-an-applocker-policy-into-a-gpo.md)</ept> or"},{"content":"Discover the Effect of an AppLocker Policy","pos":[6347,6389]},{"content":"If the AppLocker policy enforcement setting is <bpt id=\"p1\">**</bpt>Audit only<ept id=\"p1\">**</ept> and you are satisfied that the policy is fulfilling your intent, you can change it to <bpt id=\"p2\">**</bpt>Enforce rules<ept id=\"p2\">**</ept>.","pos":[6451,6617]},{"content":"For info about how to change the enforcement setting, see <bpt id=\"p1\">[</bpt>Configure an AppLocker policy for enforce rules<ept id=\"p1\">](configure-an-applocker-policy-for-enforce-rules.md)</ept>.","pos":[6618,6778]},{"content":"Step 6: Monitor the effect of the policy in production","pos":[6783,6837]},{"content":"If additional refinements or updates are necessary after a policy is deployed, use the appropriate following procedures to monitor and update the policy:","pos":[6839,6992]},{"content":"Monitor app usage with AppLocker","pos":[6999,7031]},{"content":"Edit an AppLocker policy","pos":[7083,7107]},{"content":"Refresh an AppLocker policy","pos":[7143,7170]},{"content":"See also","pos":[7208,7216]},{"content":"Deploy the AppLocker policy into production","pos":[7221,7264]}],"content":"---\ntitle: Use a reference device to create and maintain AppLocker policies (Windows 10)\ndescription: This topic for the IT professional describes the steps to create and maintain AppLocker policies by using a reference computer.\nms.assetid: 10c3597f-f44c-4c8e-8fe5-105d4ac016a6\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Use a reference device to create and maintain AppLocker policies\n\n**Applies to**\n-   Windows 10\n\nThis topic for the IT professional describes the steps to create and maintain AppLocker policies by using a reference computer.\n\n## Background and prerequisites\n\nAn AppLocker reference device is a baseline device you can use to configure policies and can subsequently be used to maintain AppLocker policies. For the procedure to configure a reference device, see [Configure the AppLocker reference device](configure-the-appLocker-reference-device.md).\n\nAn AppLocker reference device that is used to create and maintain AppLocker policies should contain the corresponding apps for each organizational unit (OU) to mimic your production environment.\n\n>**Important:**  The reference device must be running one of the supported editions of Windows. For information about operating system requirements for AppLocker, see [Requirements to use AppLocker](requirements-to-use-applocker.md).\n \nYou can perform AppLocker policy testing on the reference device by using the **Audit only** enforcement setting or Windows PowerShell cmdlets. You can also use the reference device as part of a testing configuration that includes policies that are created by using Software Restriction Policies.\n\n## Step 1: Automatically generate rules on the reference device\n\nWith AppLocker, you can automatically generate rules for all files within a folder. AppLocker scans the specified folder and creates the condition types that you choose for each file in that folder. For the procedure to do this, see [Run the Automatically Generate Rules wizard](run-the-automatically-generate-rules-wizard.md).\n\n>**Note:**  If you run this wizard to create your first rules for a Group Policy Object (GPO), after you complete the wizard, you will be prompted to create the default rules, which allow critical system files to run. You can edit the default rules at any time. If your organization has decided to edit the default rules or create custom rules to allow the Windows system files to run, ensure that you delete the default rules after you replace them with your custom rules.\n \n## Step 2: Create the default rules on the reference device\n\nAppLocker includes default rules for each rule collection. These rules are intended to help ensure that the files that are required for Windows to operate properly are allowed in an AppLocker rule collection. You must run the default rules for each rule collection. For info about default rules and considerations for using them, see [Understanding AppLocker default rules](understanding-applocker-default-rules.md). For the procedure to create default rules, see [Create AppLocker default rules](create-applocker-default-rules.md).\n\n>**Important:**  You can use the default rules as a template when you create your own rules. This allows files within the Windows directory to run. However, these rules are only meant to function as a starter policy when you are first testing AppLocker rules.\n \n## Step 3: Modify rules and the rule collection on the reference device\n\nIf AppLocker policies are currently running in your production environment, export the policies from the corresponding GPOs and save them to the reference device. For the procedure to do this, see [Export an AppLocker policy from a GPO](export-an-applocker-policy-from-a-gpo.md). If no AppLocker policies have been deployed, create the rules and develop the policies by using the following procedures:\n\n-   [Create a rule that uses a publisher condition](create-a-rule-that-uses-a-publisher-condition.md)\n-   [Create a rule that uses a file hash condition](create-a-rule-that-uses-a-file-hash-condition.md)\n-   [Create a rule that uses a path condition](create-a-rule-that-uses-a-path-condition.md)\n-   [Edit AppLocker rules](edit-applocker-rules.md)\n-   [Add exceptions for an AppLocker rule](configure-exceptions-for-an-applocker-rule.md)\n-   [Delete an AppLocker rule](delete-an-applocker-rule.md)\n-   [Enable the DLL rule collection](enable-the-dll-rule-collection.md)\n-   [Enforce AppLocker rules](enforce-applocker-rules.md)\n\n## Step 4: Test and update AppLocker policy on the reference device\n\nYou should test each set of rules to ensure that they perform as intended. The **Test-AppLockerPolicy** Windows PowerShell cmdlet can be used to determine whether any of the rules in your rule collection will be blocked on your reference device. Perform the steps on each reference device that you used to define the AppLocker policy. Ensure that the reference device is joined to the domain and that it is receiving the AppLocker policy from the appropriate GPO. Because AppLocker rules are inherited from linked GPOs, you should deploy all of the rules to simultaneously test all of your test GPOs. Use the following procedures to complete this step:\n\n-   [Test an AppLocker Policy with Test-AppLockerPolicy](http://technet.microsoft.com/library/ee791772(WS.10).aspx)\n-   [Discover the Effect of an AppLocker Policy](http://technet.microsoft.com/library/ee791823(WS.10).aspx)\n\n>**Caution:**  If you have set the enforcement setting on the rule collection to **Enforce rules** or you have not configured the rule collection, the policy will be implemented when the GPO is updated in the next step. If you have set the enforcement setting on the rule collection to **Audit only**, application access events are written to the AppLocker log, and the policy will not take effect.\n \n## Step 5: Export and import the policy into production\n\nWhen the AppLocker policy has been tested successfully, it can be imported into the GPO (or imported into individual computers that are not managed by Group Policy) and checked for its intended effectiveness. To do this, perform the following procedures:\n\n-   [Export an AppLocker policy to an XML file](export-an-applocker-policy-to-an-xml-file.md)\n-   [Import an AppLocker policy into a GPO](import-an-applocker-policy-into-a-gpo.md) or\n-   [Discover the Effect of an AppLocker Policy](http://technet.microsoft.com/library/ee791823(WS.10).aspx)\n\nIf the AppLocker policy enforcement setting is **Audit only** and you are satisfied that the policy is fulfilling your intent, you can change it to **Enforce rules**. For info about how to change the enforcement setting, see [Configure an AppLocker policy for enforce rules](configure-an-applocker-policy-for-enforce-rules.md).\n\n## Step 6: Monitor the effect of the policy in production\n\nIf additional refinements or updates are necessary after a policy is deployed, use the appropriate following procedures to monitor and update the policy:\n\n-   [Monitor app usage with AppLocker](monitor-application-usage-with-applocker.md)\n-   [Edit an AppLocker policy](edit-an-applocker-policy.md)\n-   [Refresh an AppLocker policy](refresh-an-applocker-policy.md)\n\n## See also\n\n- [Deploy the AppLocker policy into production](deploy-the-applocker-policy-into-production.md)\n"}