{"nodes":[{"content":"Network security Restrict NTLM Add remote server exceptions for NTLM authentication (Windows 10)","pos":[11,107]},{"content":"Describes the best practices, location, values, management aspects, and security considerations for the Network security Restrict NTLM Add remote server exceptions for NTLM authentication security policy setting.","pos":[121,333]},{"content":"Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication","pos":[489,574]},{"content":"Applies to","pos":[578,588]},{"content":"Windows 10","pos":[595,605]},{"pos":[607,825],"content":"Describes the best practices, location, values, management aspects, and security considerations for the <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[830,839]},{"pos":[841,1256],"content":"The <bpt id=\"p1\">**</bpt>Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication<ept id=\"p1\">**</ept> policy setting allows you to create an exception list of remote servers to which client devices are allowed to use NTLM authentication if the <bpt id=\"p2\">[</bpt>Network security: Restrict NTLM: Outgoing NTLM traffic to remote servers<ept id=\"p2\">](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md)</ept> policy setting is configured."},{"content":"If you configure this policy setting, you can define a list of remote servers to which client devices are allowed to use NTLM authentication.","pos":[1258,1399]},{"pos":[1401,1709],"content":"If you do not configure this policy setting, no exceptions will be applied, and if <bpt id=\"p1\">[</bpt>Network security: Restrict NTLM: Outgoing NTLM traffic to remote servers<ept id=\"p1\">](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md)</ept> is enabled, NTLM authentication attempts from the client devices will fail."},{"content":"List the NetBIOS server names that are used by the applications as the naming format, one per line.","pos":[1711,1810]},{"content":"To ensure exceptions, the names that are used by all applications need to be in the list.","pos":[1811,1900]},{"content":"A single asterisk (<ph id=\"ph1\">\\*</ph>) can be used anywhere in the string as a wildcard character.","pos":[1901,1983]},{"content":"Possible values","pos":[1989,2004]},{"content":"User-defined list of remote servers","pos":[2010,2045]},{"content":"When you enter a list of remote servers to which clients are allowed to use NTLM authentication, the policy is defined and enabled.","pos":[2051,2182]},{"content":"Not defined","pos":[2188,2199]},{"content":"If you do not configure this policy setting by defining a list of servers, the policy is undefined and no exceptions will be applied.","pos":[2205,2338]},{"content":"Best practices","pos":[2344,2358]},{"pos":[2364,2836],"content":"First enforce the <bpt id=\"p1\">[</bpt>Network Security: Restrict NTLM: Audit incoming NTLM traffic<ept id=\"p1\">](network-security-restrict-ntlm-audit-incoming-ntlm-traffic.md)</ept> or <bpt id=\"p2\">[</bpt>Network Security: Restrict NTLM: Audit NTLM authentication in this domain<ept id=\"p2\">](network-security-restrict-ntlm-audit-ntlm-authentication-in-this-domain.md)</ept> policy setting and then review the operational event log to understand which servers are involved in these authentication attempts so you can decide which servers to exempt."},{"pos":[2842,3294],"content":"After you have set the server exception list, enforce the <bpt id=\"p1\">[</bpt>Network Security: Restrict NTLM: Audit incoming NTLM traffic<ept id=\"p1\">](network-security-restrict-ntlm-audit-incoming-ntlm-traffic.md)</ept> or <bpt id=\"p2\">[</bpt>Network Security: Restrict NTLM: Audit NTLM authentication in this domain<ept id=\"p2\">](network-security-restrict-ntlm-audit-ntlm-authentication-in-this-domain.md)</ept> policy setting and then review the operational event log again before setting the policies to block NTLM traffic."},{"content":"Location","pos":[3300,3308]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[3310,3403]},{"content":"Default values","pos":[3409,3423]},{"content":"Server type or GPO","pos":[3427,3445]},{"content":"Default value","pos":[3448,3461]},{"content":"Default domain policy","pos":[3476,3497]},{"content":"Not defined","pos":[3499,3510]},{"content":"Default domain controller policy","pos":[3515,3547]},{"content":"Not defined","pos":[3550,3561]},{"content":"Stand-alone server default settings","pos":[3566,3601]},{"content":"Not defined","pos":[3604,3615]},{"content":"Domain controller effective default settings","pos":[3620,3664]},{"content":"Not defined","pos":[3667,3678]},{"content":"Member server effective default settings","pos":[3683,3723]},{"content":"Not defined","pos":[3726,3737]},{"content":"Client computer effective default settings","pos":[3742,3784]},{"content":"Not defined","pos":[3786,3797]},{"content":"Policy management","pos":[3805,3822]},{"content":"This section describes the features and tools that are available to help you manage this policy.","pos":[3824,3920]},{"content":"Restart requirement","pos":[3926,3945]},{"content":"None.","pos":[3947,3952]},{"content":"Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.","pos":[3953,4082]},{"content":"Group Policy","pos":[4088,4100]},{"content":"Setting and deploying this policy through Group Policy takes precedence over the setting on the local device.","pos":[4102,4211]},{"content":"If the Group Policy setting is set to <bpt id=\"p1\">**</bpt>Not Configured<ept id=\"p1\">**</ept>, local settings will apply.","pos":[4212,4296]},{"content":"Auditing","pos":[4302,4310]},{"content":"View the operational event log to see if your server exception list is functioning as intended.","pos":[4312,4407]},{"content":"Audit and block events are recorded on this device in the operational event log located in <bpt id=\"p1\">**</bpt>Applications and Services Log<ph id=\"ph1\">\\\\</ph>Microsoft<ph id=\"ph2\">\\\\</ph>Windows<ph id=\"ph3\">\\\\</ph>NTLM<ept id=\"p1\">**</ept>.","pos":[4408,4559]},{"content":"There are no security audit policies that can be configured to view output from this policy.","pos":[4561,4653]},{"content":"Security considerations","pos":[4658,4681]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[4683,4877]},{"content":"Vulnerability","pos":[4883,4896]},{"content":"When it has been determined that the NTLM authentication protocol should not be used from a client device to any remote servers because you are required to use a more secure protocol such as Kerberos, there might be some client applications that still use NTLM.","pos":[4898,5159]},{"content":"If so, and you set <bpt id=\"p1\">[</bpt>Network Security: Restrict NTLM: Outgoing NTLM traffic to remote servers<ept id=\"p1\">](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md)</ept> to any of the deny options, those applications will fail because the outbound NTLM authentication traffic from the client computer will be blocked.","pos":[5160,5477]},{"content":"If you define an exception list of servers to which client devices are allowed to use NTLM authentication, then NTLM authentication traffic will continue to flow between those client applications and servers.","pos":[5479,5687]},{"content":"The servers then are vulnerable to any malicious attack that takes advantage of security weaknesses in NTLM.","pos":[5688,5796]},{"content":"Countermeasure","pos":[5802,5816]},{"content":"When you use <bpt id=\"p1\">[</bpt>Network Security: Restrict NTLM: Outgoing NTLM traffic to remote servers<ept id=\"p1\">](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md)</ept> in audit-only mode, you can determine by reviewing which client applications are making NTLM authentication requests to the remote servers in your environment.","pos":[5818,6141]},{"content":"When assessed, you will have to determine on a case-by-case basis if NTLM authentication still minimally meets your security requirements.","pos":[6142,6280]},{"content":"If not, the client application has to be upgraded to use something other than NTLM authentication.","pos":[6281,6379]},{"content":"Potential impact","pos":[6385,6401]},{"content":"Defining a list of servers for this policy setting will enable NTLM authentication traffic from the client application that uses those servers, and this might result in a security vulnerability.","pos":[6403,6597]},{"pos":[6599,6906],"content":"If this list is not defined and <bpt id=\"p1\">[</bpt>Network Security: Restrict NTLM: Outgoing NTLM traffic to remote servers<ept id=\"p1\">](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md)</ept> is enabled, then client applications that use NTLM will fail to authenticate to those servers that they have previously used."},{"content":"Related topics","pos":[6911,6925]},{"content":"Security Options","pos":[6930,6946]}],"content":"---\ntitle: Network security Restrict NTLM Add remote server exceptions for NTLM authentication (Windows 10)\ndescription: Describes the best practices, location, values, management aspects, and security considerations for the Network security Restrict NTLM Add remote server exceptions for NTLM authentication security policy setting.\nms.assetid: 9b017399-0a54-4580-bfae-614c2beda3a1\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, values, management aspects, and security considerations for the **Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication** security policy setting.\n\n## Reference\n\nThe **Network security: Restrict NTLM: Add remote server exceptions for NTLM authentication** policy setting allows you to create an exception list of remote servers to which client devices are allowed to use NTLM authentication if the [Network security: Restrict NTLM: Outgoing NTLM traffic to remote servers](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md) policy setting is configured.\n\nIf you configure this policy setting, you can define a list of remote servers to which client devices are allowed to use NTLM authentication.\n\nIf you do not configure this policy setting, no exceptions will be applied, and if [Network security: Restrict NTLM: Outgoing NTLM traffic to remote servers](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md) is enabled, NTLM authentication attempts from the client devices will fail.\n\nList the NetBIOS server names that are used by the applications as the naming format, one per line. To ensure exceptions, the names that are used by all applications need to be in the list. A single asterisk (\\*) can be used anywhere in the string as a wildcard character.\n\n### Possible values\n\n-   User-defined list of remote servers\n\n    When you enter a list of remote servers to which clients are allowed to use NTLM authentication, the policy is defined and enabled.\n\n-   Not defined\n\n    If you do not configure this policy setting by defining a list of servers, the policy is undefined and no exceptions will be applied.\n\n### Best practices\n\n1.  First enforce the [Network Security: Restrict NTLM: Audit incoming NTLM traffic](network-security-restrict-ntlm-audit-incoming-ntlm-traffic.md) or [Network Security: Restrict NTLM: Audit NTLM authentication in this domain](network-security-restrict-ntlm-audit-ntlm-authentication-in-this-domain.md) policy setting and then review the operational event log to understand which servers are involved in these authentication attempts so you can decide which servers to exempt.\n\n2.  After you have set the server exception list, enforce the [Network Security: Restrict NTLM: Audit incoming NTLM traffic](network-security-restrict-ntlm-audit-incoming-ntlm-traffic.md) or [Network Security: Restrict NTLM: Audit NTLM authentication in this domain](network-security-restrict-ntlm-audit-ntlm-authentication-in-this-domain.md) policy setting and then review the operational event log again before setting the policies to block NTLM traffic.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\n| Server type or GPO | Default value |\n| - | - |\n| Default domain policy| Not defined| \n| Default domain controller policy | Not defined| \n| Stand-alone server default settings | Not defined| \n| Domain controller effective default settings | Not defined| \n| Member server effective default settings | Not defined| \n| Client computer effective default settings| Not defined| \n \n## Policy management\n\nThis section describes the features and tools that are available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.\n\n### Group Policy\n\nSetting and deploying this policy through Group Policy takes precedence over the setting on the local device. If the Group Policy setting is set to **Not Configured**, local settings will apply.\n\n### Auditing\n\nView the operational event log to see if your server exception list is functioning as intended. Audit and block events are recorded on this device in the operational event log located in **Applications and Services Log\\\\Microsoft\\\\Windows\\\\NTLM**.\n\nThere are no security audit policies that can be configured to view output from this policy.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nWhen it has been determined that the NTLM authentication protocol should not be used from a client device to any remote servers because you are required to use a more secure protocol such as Kerberos, there might be some client applications that still use NTLM. If so, and you set [Network Security: \nRestrict NTLM: Outgoing NTLM traffic to remote servers](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md) to any of the deny options, those applications will fail because the outbound NTLM authentication traffic from the client computer will be blocked.\n\nIf you define an exception list of servers to which client devices are allowed to use NTLM authentication, then NTLM authentication traffic will continue to flow between those client applications and servers. The servers then are vulnerable to any malicious attack that takes advantage of security weaknesses in NTLM.\n\n### Countermeasure\n\nWhen you use [Network Security: Restrict NTLM: Outgoing NTLM traffic to remote servers](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md) in audit-only mode, you can determine by reviewing which client applications are making NTLM authentication requests to the remote \nservers in your environment. When assessed, you will have to determine on a case-by-case basis if NTLM authentication still minimally meets your security requirements. If not, the client application has to be upgraded to use something other than NTLM authentication.\n\n### Potential impact\n\nDefining a list of servers for this policy setting will enable NTLM authentication traffic from the client application that uses those servers, and this might result in a security vulnerability.\n\nIf this list is not defined and [Network Security: Restrict NTLM: Outgoing NTLM traffic to remote servers](network-security-restrict-ntlm-outgoing-ntlm-traffic-to-remote-servers.md) is enabled, then client applications that use NTLM will fail to authenticate to those servers that they have previously used.\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}