{"nodes":[{"content":"Microsoft network server Server SPN target name validation level (Windows 10)","pos":[11,88]},{"content":"Describes the best practices, location, and values, policy management and security considerations for the Microsoft network server Server SPN target name validation level security policy setting.","pos":[102,297]},{"content":"Microsoft network server: Server SPN target name validation level","pos":[453,518]},{"content":"Applies to","pos":[522,532]},{"content":"Windows 10","pos":[539,549]},{"pos":[551,751],"content":"Describes the best practices, location, and values, policy management and security considerations for the <bpt id=\"p1\">**</bpt>Microsoft network server: Server SPN target name validation level<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[756,765]},{"content":"This policy setting controls the level of validation that a server with shared folders or printers performs on the service principal name (SPN) that is provided by the client device when the client device establishes a session by using the Server Message Block (SMB) protocol.","pos":[767,1043]},{"content":"The level of validation can help prevent a class of attacks against SMB services (referred to as SMB relay attacks).","pos":[1044,1160]},{"content":"This setting affects both SMB1 and SMB2.","pos":[1161,1201]},{"content":"Servers that use SMB provide availability to their file systems and other resources, such as printers, to networked client devices.","pos":[1203,1334]},{"content":"Most servers that use SMB validate user access to resources by using NT Domain authentication (NTLMv1 and NTLMv2) and the Kerberos protocol.","pos":[1335,1475]},{"content":"Possible values","pos":[1481,1496]},{"content":"The options for validation levels are:","pos":[1498,1536]},{"content":"Off","pos":[1544,1547]},{"content":"The SPN from a SMB client is not required or validated by the SMB server.","pos":[1555,1628]},{"content":"Accept if provided by client","pos":[1636,1664]},{"content":"The SMB server will accept and validate the SPN provided by the SMB client and allow a session to be established if it matches the SMB server’s list of SPN’s.","pos":[1672,1830]},{"content":"If the SPN does not match, the session request for that SMB client will be denied.","pos":[1831,1913]},{"content":"Required from client","pos":[1921,1941]},{"content":"The SMB client must send a SPN name in session setup, and the SPN name provided must match the SMB server that is being requested to establish a connection.","pos":[1949,2105]},{"content":"If no SPN is provided by the client device, or the SPN provided does not match, the session is denied.","pos":[2106,2208]},{"content":"The default setting is Off.","pos":[2210,2237]},{"content":"Best practices","pos":[2243,2257]},{"content":"This setting affects the server SMB behavior, and its implementation should be carefully evaluated and tested to prevent disruptions to file and print serving capabilities.","pos":[2259,2431]},{"pos":[2434,2543],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  All Windows operating systems support a client-side SMB component and a server-side SMB component."},{"content":"Location","pos":[2550,2558]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[2560,2653]},{"content":"Default values","pos":[2659,2673]},{"content":"The following table lists the actual and effective default values for this policy.","pos":[2675,2757]},{"content":"Default values are also listed on the policy’s property page.","pos":[2758,2819]},{"content":"Server type or Group Policy object (GPO)","pos":[2823,2863]},{"content":"Default value","pos":[2866,2879]},{"content":"Default domain policy","pos":[2894,2915]},{"content":"Off","pos":[2918,2921]},{"content":"Default domain controller policy","pos":[2927,2959]},{"content":"Off","pos":[2961,2964]},{"content":"Stand-alone server default settings","pos":[2969,3004]},{"content":"Off","pos":[3007,3010]},{"content":"Domain controller effective default settings","pos":[3015,3059]},{"content":"Validation level check not implemented","pos":[3061,3099]},{"content":"Member server effective default settings","pos":[3104,3144]},{"content":"Validation level check not implemented","pos":[3147,3185]},{"content":"Effective GPO default settings on client computers","pos":[3190,3240]},{"content":"Validation level check not implemented","pos":[3243,3281]},{"content":"Policy management","pos":[3289,3306]},{"content":"This section describes features and tools that are available to help you manage this policy.","pos":[3308,3400]},{"content":"Restart requirement","pos":[3406,3425]},{"content":"None.","pos":[3427,3432]},{"content":"Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.","pos":[3433,3562]},{"content":"Policy conflict considerations","pos":[3568,3598]},{"content":"None.","pos":[3600,3605]},{"content":"Group Policy","pos":[3611,3623]},{"content":"This policy setting can be configured by using the Group Policy Management Console (GPMC) to be distributed through Group Policy Objects (GPOs).","pos":[3625,3769]},{"content":"If this policy is not contained in a distributed GPO, this policy can be configured on the local computer by using the Local Security Policy snap-in.","pos":[3770,3919]},{"content":"Security considerations","pos":[3924,3947]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[3949,4143]},{"content":"Vulnerability","pos":[4149,4162]},{"content":"This policy setting controls the level of validation that a server with shared folders or printers performs on the service principal name (SPN) that is provided by the client device when the client device establishes a session by using the SMB protocol.","pos":[4164,4417]},{"content":"The level of validation can help prevent a class of attacks against SMB servers (referred to as SMB relay attacks).","pos":[4418,4533]},{"content":"This setting will affect both SMB1 and SMB2.","pos":[4534,4578]},{"content":"Countermeasure","pos":[4584,4598]},{"pos":[4600,4692],"content":"For countermeasures that are appropriate to your environment, see <bpt id=\"p1\">**</bpt>Possible values<ept id=\"p1\">**</ept> above."},{"content":"Potential impact","pos":[4698,4714]},{"content":"All Windows operating systems support a client-side SMB component and a server-side SMB component.","pos":[4716,4814]},{"content":"This setting affects the server SMB behavior, and its implementation should be carefully evaluated and tested to prevent disruptions to file and print serving capabilities.","pos":[4815,4987]},{"pos":[4989,5213],"content":"Because the SMB protocol is widely deployed, setting the options to <bpt id=\"p1\">**</bpt>Accept if provided by client<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Required from client<ept id=\"p2\">**</ept> will prevent some clients from successfully authenticating to some servers in your environment."},{"content":"Related topics","pos":[5218,5232]},{"content":"Security Options","pos":[5237,5253]}],"content":"---\ntitle: Microsoft network server Server SPN target name validation level (Windows 10)\ndescription: Describes the best practices, location, and values, policy management and security considerations for the Microsoft network server Server SPN target name validation level security policy setting.\nms.assetid: 18337f78-eb45-42fd-bdbd-f8cd02c3e154\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Microsoft network server: Server SPN target name validation level\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, and values, policy management and security considerations for the **Microsoft network server: Server SPN target name validation level** security policy setting.\n\n## Reference\n\nThis policy setting controls the level of validation that a server with shared folders or printers performs on the service principal name (SPN) that is provided by the client device when the client device establishes a session by using the Server Message Block (SMB) protocol. The level of validation can help prevent a class of attacks against SMB services (referred to as SMB relay attacks). This setting affects both SMB1 and SMB2.\n\nServers that use SMB provide availability to their file systems and other resources, such as printers, to networked client devices. Most servers that use SMB validate user access to resources by using NT Domain authentication (NTLMv1 and NTLMv2) and the Kerberos protocol.\n\n### Possible values\n\nThe options for validation levels are:\n\n-   **Off**\n\n    The SPN from a SMB client is not required or validated by the SMB server.\n\n-   **Accept if provided by client**\n\n    The SMB server will accept and validate the SPN provided by the SMB client and allow a session to be established if it matches the SMB server’s list of SPN’s. If the SPN does not match, the session request for that SMB client will be denied.\n\n-   **Required from client**\n\n    The SMB client must send a SPN name in session setup, and the SPN name provided must match the SMB server that is being requested to establish a connection. If no SPN is provided by the client device, or the SPN provided does not match, the session is denied.\n\nThe default setting is Off.\n\n### Best practices\n\nThis setting affects the server SMB behavior, and its implementation should be carefully evaluated and tested to prevent disruptions to file and print serving capabilities.\n\n>**Note:**  All Windows operating systems support a client-side SMB component and a server-side SMB component.\n \n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\nThe following table lists the actual and effective default values for this policy. Default values are also listed on the policy’s property page.\n\n| Server type or Group Policy object (GPO) | Default value |\n| - | - |\n| Default domain policy | Off | \n| Default domain controller policy| Off| \n| Stand-alone server default settings | Off| \n| Domain controller effective default settings| Validation level check not implemented| \n| Member server effective default settings | Validation level check not implemented| \n| Effective GPO default settings on client computers | Validation level check not implemented| \n \n## Policy management\n\nThis section describes features and tools that are available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.\n\n### Policy conflict considerations\n\nNone.\n\n### Group Policy\n\nThis policy setting can be configured by using the Group Policy Management Console (GPMC) to be distributed through Group Policy Objects (GPOs). If this policy is not contained in a distributed GPO, this policy can be configured on the local computer by using the Local Security Policy snap-in.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nThis policy setting controls the level of validation that a server with shared folders or printers performs on the service principal name (SPN) that is provided by the client device when the client device establishes a session by using the SMB protocol. The level of validation can help prevent a class of attacks against SMB servers (referred to as SMB relay attacks). This setting will affect both SMB1 and SMB2.\n\n### Countermeasure\n\nFor countermeasures that are appropriate to your environment, see **Possible values** above.\n\n### Potential impact\n\nAll Windows operating systems support a client-side SMB component and a server-side SMB component. This setting affects the server SMB behavior, and its implementation should be carefully evaluated and tested to prevent disruptions to file and print serving capabilities.\n\nBecause the SMB protocol is widely deployed, setting the options to **Accept if provided by client** or **Required from client** will prevent some clients from successfully authenticating to some servers in your environment.\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}