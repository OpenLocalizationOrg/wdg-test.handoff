{"nodes":[{"content":"Microsoft network client Digitally sign communications (always) (Windows 10)","pos":[11,87]},{"content":"Describes the best practices, location, values, policy management and security considerations for the Microsoft network client Digitally sign communications (always) security policy setting.","pos":[101,291]},{"content":"Microsoft network client: Digitally sign communications (always)","pos":[447,511]},{"content":"Applies to","pos":[515,525]},{"content":"Windows 10","pos":[532,542]},{"pos":[544,739],"content":"Describes the best practices, location, values, policy management and security considerations for the <bpt id=\"p1\">**</bpt>Microsoft network client: Digitally sign communications (always)<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[744,753]},{"content":"The Server Message Block (SMB) protocol provides the basis for file and print sharing and many other networking operations, such as remote Windows administration.","pos":[755,917]},{"content":"To prevent man-in-the-middle attacks that modify SMB packets in transit, the SMB protocol supports the digital signing of SMB packets.","pos":[918,1052]},{"content":"This policy setting determines whether SMB packet signing must be negotiated before further communication with the Server service is permitted.","pos":[1053,1197]},{"content":"Implementation of digital signatures in high-security networks helps prevent the impersonation of client computers and servers, which is known as \"session hijacking.\"","pos":[1199,1365]},{"content":"But misuse of these policy settings is a common error that can cause data loss or problems with data access or security.","pos":[1366,1486]},{"content":"If server-side SMB signing is required, a client device will not be able to establish a session with that server, unless it has client-side SMB signing enabled.","pos":[1488,1648]},{"content":"By default, client-side SMB signing is enabled on workstations, servers, and domain controllers.","pos":[1649,1745]},{"content":"Similarly, if client-side SMB signing is required, that client device will not be able to establish a session with servers that do not have packet signing enabled.","pos":[1746,1909]},{"content":"By default, server-side SMB signing is enabled only on domain controllers.","pos":[1910,1984]},{"content":"If server-side SMB signing is enabled, SMB packet signing will be negotiated with client computers that have SMB signing enabled.","pos":[1986,2115]},{"content":"Using SMB packet signing can impose up to a 15 percent performance degradation on file service transactions.","pos":[2117,2225]},{"content":"There are three other policy settings that relate to packet-signing requirements for Server Message Block (SMB) communications:","pos":[2227,2354]},{"content":"Microsoft network server: Digitally sign communications (always)","pos":[2360,2424]},{"content":"Microsoft network client: Digitally sign communications (if server agrees)","pos":[2497,2571]},{"content":"Microsoft network server: Digitally sign communications (if client agrees)","pos":[2654,2728]},{"content":"Possible values","pos":[2811,2826]},{"content":"Enabled","pos":[2832,2839]},{"content":"Disabled","pos":[2844,2852]},{"content":"Not defined","pos":[2857,2868]},{"content":"Best practices","pos":[2874,2888]},{"content":"Configure the following security policy settings as follows:","pos":[2894,2954]},{"pos":[2964,3041],"content":"Disable <bpt id=\"p1\">**</bpt>Microsoft network client: Digitally sign communications (always)<ept id=\"p1\">**</ept>."},{"pos":[3050,3191],"content":"Disable <bpt id=\"p1\">[</bpt>Microsoft network server: Digitally sign communications (always)<ept id=\"p1\">](microsoft-network-server-digitally-sign-communications-always.md)</ept>."},{"pos":[3200,3360],"content":"Enable <bpt id=\"p1\">[</bpt>Microsoft network client: Digitally sign communications (if server agrees)<ept id=\"p1\">](microsoft-network-client-digitally-sign-communications-if-server-agrees.md)</ept>."},{"pos":[3369,3529],"content":"Enable <bpt id=\"p1\">[</bpt>Microsoft network server: Digitally sign communications (if client agrees)<ept id=\"p1\">](microsoft-network-server-digitally-sign-communications-if-client-agrees.md)</ept>."},{"content":"Alternately, you can set all of these policy settings to Enabled, but enabling them can cause slower performance on client devices and prevent them from communicating with legacy SMB applications and operating systems.","pos":[3535,3753]},{"content":"Location","pos":[3759,3767]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[3769,3862]},{"content":"Default values","pos":[3868,3882]},{"content":"The following table lists the actual and effective default values for this policy.","pos":[3884,3966]},{"content":"Default values are also listed on the policy’s property page.","pos":[3967,4028]},{"content":"Server type or GPO","pos":[4032,4050]},{"content":"Default value","pos":[4053,4066]},{"content":"Default Domain Policy","pos":[4081,4102]},{"content":"Not defined","pos":[4104,4115]},{"content":"Default Domain Controller Policy","pos":[4120,4152]},{"content":"Not defined","pos":[4155,4166]},{"content":"Stand-Alone Server Default Settings","pos":[4171,4206]},{"content":"Disabled","pos":[4209,4217]},{"content":"DC Effective Default Settings","pos":[4222,4251]},{"content":"Disabled","pos":[4254,4262]},{"content":"Member Server Effective Default Settings","pos":[4267,4307]},{"content":"Disabled","pos":[4310,4318]},{"content":"Client Computer Effective Default Settings","pos":[4323,4365]},{"content":"Disabled","pos":[4368,4376]},{"content":"Policy management","pos":[4384,4401]},{"content":"This section describes features and tools that are available to help you manage this policy.","pos":[4403,4495]},{"content":"Restart requirement","pos":[4501,4520]},{"content":"None.","pos":[4522,4527]},{"content":"Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.","pos":[4528,4657]},{"content":"Security considerations","pos":[4662,4685]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[4687,4881]},{"content":"Vulnerability","pos":[4887,4900]},{"content":"Session hijacking uses tools that allow attackers who have access to the same network as the client device or server to interrupt, end, or steal a session in progress.","pos":[4902,5069]},{"content":"Attackers can potentially intercept and modify unsigned Server Message Block (SMB) packets and then modify the traffic and forward it so that the server might perform objectionable actions.","pos":[5070,5259]},{"content":"Alternatively, the attacker could pose as the server or client computer after legitimate authentication, and gain unauthorized access to data.","pos":[5260,5402]},{"content":"SMB is the resource-sharing protocol that is supported by many Windows operating systems.","pos":[5404,5493]},{"content":"It is the basis of NetBIOS and many other protocols.","pos":[5494,5546]},{"content":"SMB signatures authenticate users and the servers that host the data.","pos":[5547,5616]},{"content":"If either side fails the authentication process, data transmission does not take place.","pos":[5617,5704]},{"content":"Countermeasure","pos":[5710,5724]},{"content":"Configure the settings as follows:","pos":[5726,5760]},{"pos":[5766,5843],"content":"Disable <bpt id=\"p1\">**</bpt>Microsoft network client: Digitally sign communications (always)<ept id=\"p1\">**</ept>."},{"pos":[5848,5989],"content":"Disable <bpt id=\"p1\">[</bpt>Microsoft network server: Digitally sign communications (always)<ept id=\"p1\">](microsoft-network-server-digitally-sign-communications-always.md)</ept>."},{"pos":[5994,6154],"content":"Enable <bpt id=\"p1\">[</bpt>Microsoft network client: Digitally sign communications (if server agrees)<ept id=\"p1\">](microsoft-network-client-digitally-sign-communications-if-server-agrees.md)</ept>."},{"pos":[6159,6319],"content":"Enable <bpt id=\"p1\">[</bpt>Microsoft network server: Digitally sign communications (if client agrees)<ept id=\"p1\">](microsoft-network-server-digitally-sign-communications-if-client-agrees.md)</ept>."},{"content":"In highly secure environments, we recommend that you configure all of these settings to Enabled.","pos":[6321,6417]},{"content":"However, that configuration may cause slower performance on client devices and prevent communications with earlier SMB applications and operating systems.","pos":[6418,6572]},{"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  An alternative countermeasure that could protect all network traffic is to implement digital signatures with IPsec.","pos":[6575,6701]},{"content":"There are hardware-based accelerators for IPsec encryption and signing that could be used to minimize the performance impact on the servers' CPUs.","pos":[6702,6848]},{"content":"No such accelerators are available for SMB signing.","pos":[6849,6900]},{"content":"Potential impact","pos":[6907,6923]},{"content":"Implementations of the SMB file and print-sharing protocol support mutual authentication.","pos":[6925,7014]},{"content":"This prevents session hijacking attacks and supports message authentication to prevent man-in-the-middle attacks.","pos":[7015,7128]},{"content":"SMB signing provides this authentication by placing a digital signature into each SMB, which is then verified by the client and the server.","pos":[7129,7268]},{"content":"Implementation of SMB signing may negatively affect performance because each packet must be signed and verified.","pos":[7270,7382]},{"content":"If these settings are enabled on a server that is performing multiple roles, such as a small business server that is serving as a domain controller, file server, print server, and application server, performance may be substantially slowed.","pos":[7383,7623]},{"content":"Additionally, if you configure devices to ignore all unsigned SMB communications, older applications and operating systems cannot connect.","pos":[7624,7762]},{"content":"However, if you completely disable all SMB signing, computers are vulnerable to session-hijacking attacks.","pos":[7763,7869]},{"content":"Related topics","pos":[7874,7888]},{"content":"Security Options","pos":[7893,7909]}],"content":"---\ntitle: Microsoft network client Digitally sign communications (always) (Windows 10)\ndescription: Describes the best practices, location, values, policy management and security considerations for the Microsoft network client Digitally sign communications (always) security policy setting.\nms.assetid: 4b7b0298-b130-40f8-960d-60418ba85f76\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Microsoft network client: Digitally sign communications (always)\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, values, policy management and security considerations for the **Microsoft network client: Digitally sign communications (always)** security policy setting.\n\n## Reference\n\nThe Server Message Block (SMB) protocol provides the basis for file and print sharing and many other networking operations, such as remote Windows administration. To prevent man-in-the-middle attacks that modify SMB packets in transit, the SMB protocol supports the digital signing of SMB packets. \nThis policy setting determines whether SMB packet signing must be negotiated before further communication with the Server service is permitted.\n\nImplementation of digital signatures in high-security networks helps prevent the impersonation of client computers and servers, which is known as \"session hijacking.\" But misuse of these policy settings is a common error that can cause data loss or problems with data access or security.\n\nIf server-side SMB signing is required, a client device will not be able to establish a session with that server, unless it has client-side SMB signing enabled. By default, client-side SMB signing is enabled on workstations, servers, and domain controllers. Similarly, if client-side SMB signing is required, that client device will not be able to establish a session with servers that do not have packet signing enabled. By default, server-side SMB signing is enabled only on domain controllers.\n\nIf server-side SMB signing is enabled, SMB packet signing will be negotiated with client computers that have SMB signing enabled.\n\nUsing SMB packet signing can impose up to a 15 percent performance degradation on file service transactions.\n\nThere are three other policy settings that relate to packet-signing requirements for Server Message Block (SMB) communications:\n-   [Microsoft network server: Digitally sign communications (always)](microsoft-network-server-digitally-sign-communications-always.md)\n-   [Microsoft network client: Digitally sign communications (if server agrees)](microsoft-network-client-digitally-sign-communications-if-server-agrees.md)\n-   [Microsoft network server: Digitally sign communications (if client agrees)](microsoft-network-server-digitally-sign-communications-if-client-agrees.md)\n\n### Possible values\n\n-   Enabled\n-   Disabled\n-   Not defined\n\n### Best practices\n\n1.  Configure the following security policy settings as follows:\n\n    -   Disable **Microsoft network client: Digitally sign communications (always)**.\n    -   Disable [Microsoft network server: Digitally sign communications (always)](microsoft-network-server-digitally-sign-communications-always.md).\n    -   Enable [Microsoft network client: Digitally sign communications (if server agrees)](microsoft-network-client-digitally-sign-communications-if-server-agrees.md).\n    -   Enable [Microsoft network server: Digitally sign communications (if client agrees)](microsoft-network-server-digitally-sign-communications-if-client-agrees.md).\n\n2.  Alternately, you can set all of these policy settings to Enabled, but enabling them can cause slower performance on client devices and prevent them from communicating with legacy SMB applications and operating systems.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\nThe following table lists the actual and effective default values for this policy. Default values are also listed on the policy’s property page.\n\n| Server type or GPO | Default value |\n| - | - |\n| Default Domain Policy| Not defined| \n| Default Domain Controller Policy | Not defined| \n| Stand-Alone Server Default Settings | Disabled| \n| DC Effective Default Settings | Disabled| \n| Member Server Effective Default Settings | Disabled| \n| Client Computer Effective Default Settings | Disabled| \n \n## Policy management\n\nThis section describes features and tools that are available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nSession hijacking uses tools that allow attackers who have access to the same network as the client device or server to interrupt, end, or steal a session in progress. Attackers can potentially intercept and modify unsigned Server Message Block (SMB) packets and then modify the traffic and forward it so that the server might perform objectionable actions. Alternatively, the attacker could pose as the server or client computer after legitimate authentication, and gain unauthorized access to data.\n\nSMB is the resource-sharing protocol that is supported by many Windows operating systems. It is the basis of NetBIOS and many other protocols. SMB signatures authenticate users and the servers that host the data. If either side fails the authentication process, data transmission does not take place.\n\n### Countermeasure\n\nConfigure the settings as follows:\n\n-   Disable **Microsoft network client: Digitally sign communications (always)**.\n-   Disable [Microsoft network server: Digitally sign communications (always)](microsoft-network-server-digitally-sign-communications-always.md).\n-   Enable [Microsoft network client: Digitally sign communications (if server agrees)](microsoft-network-client-digitally-sign-communications-if-server-agrees.md).\n-   Enable [Microsoft network server: Digitally sign communications (if client agrees)](microsoft-network-server-digitally-sign-communications-if-client-agrees.md).\n\nIn highly secure environments, we recommend that you configure all of these settings to Enabled. However, that configuration may cause slower performance on client devices and prevent communications with earlier SMB applications and operating systems.\n\n>**Note:**  An alternative countermeasure that could protect all network traffic is to implement digital signatures with IPsec. There are hardware-based accelerators for IPsec encryption and signing that could be used to minimize the performance impact on the servers' CPUs. No such accelerators are available for SMB signing.\n \n### Potential impact\n\nImplementations of the SMB file and print-sharing protocol support mutual authentication. This prevents session hijacking attacks and supports message authentication to prevent man-in-the-middle attacks. SMB signing provides this authentication by placing a digital signature into each SMB, which is then verified by the client and the server.\n\nImplementation of SMB signing may negatively affect performance because each packet must be signed and verified. If these settings are enabled on a server that is performing multiple roles, such as a small business server that is serving as a domain controller, file server, print server, and application server, performance may be substantially slowed. Additionally, if you configure devices to ignore all unsigned SMB communications, older applications and operating systems cannot connect. However, if you completely disable all SMB signing, computers are vulnerable to session-hijacking attacks.\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}