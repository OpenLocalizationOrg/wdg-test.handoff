{"nodes":[{"content":"Create an enterprise data protection (EDP) policy using Microsoft Intune (Windows 10)","pos":[11,96]},{"content":"Microsoft Intune helps you create and deploy your enterprise data protection (EDP) policy, including letting you choose your protected apps, your EDP-protection level, and how to find enterprise data on the network.","pos":[110,325]},{"content":"Create an enterprise data protection (EDP) policy using Microsoft Intune","pos":[479,551]},{"content":"Applies to:","pos":[554,565]},{"content":"Windows 10 Insider Preview","pos":[573,599]},{"content":"Windows 10 Mobile Preview","pos":[604,629]},{"content":"[Some information relates to pre-released product, which may be substantially modified before it's commercially released.","pos":[660,781]},{"content":"Microsoft makes no warranties, express or implied, with respect to the information provided here.]","pos":[782,880]},{"content":"Microsoft Intune helps you create and deploy your enterprise data protection (EDP) policy, including letting you choose your protected apps, your EDP-protection level, and how to find enterprise data on the network.","pos":[889,1104]},{"content":"Important note about the June service update","pos":[1109,1153]},{"content":"We've received some great feedback from you, our Windows 10 Insider Preview customers, about our enterprise data protection experiences and processes.","pos":[1154,1304]},{"content":"Because of that feedback, we're delighted to deliver an enhanced apps policy experience with the June service update.","pos":[1305,1422]},{"content":"This means that when you open an existing enterprise data protection policy after we release the June service update in your test environment, your existing Windows 10 enterprise data protection app rules (formerly in the <bpt id=\"p1\">**</bpt>Protected Apps<ept id=\"p1\">**</ept> area) will be removed.","pos":[1423,1686]},{"content":"To prepare for this change, we recommend that you make an immediate backup of your current app rules as they are today, so you can use them to help reconfigure your app rules with the enhanced experience.","pos":[1689,1893]},{"content":"When you open an existing enterprise data protection policy after we release the June service update, you'll get a dialog box telling you about this change.","pos":[1894,2050]},{"content":"Click the <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> button to close the box and to begin reconfiguring your app rules.","pos":[2051,2134]},{"content":"Microsoft Intune: Reconfigure app rules list dialog box","pos":[2138,2193]},{"content":"Note that if you exit the <bpt id=\"p1\">**</bpt>Policy<ept id=\"p1\">**</ept> page before you've saved your new policy, your existing deployments won't be affected.","pos":[2240,2363]},{"content":"However, if you save the policy without reconfiguring your apps, an updated policy will be deployed to your employees with an empty app rules list.","pos":[2364,2511]},{"content":"Add an EDP policy","pos":[2517,2534]},{"content":"After you’ve installed and set up Intune for your organization, you must create an EDP-specific policy.","pos":[2535,2638]},{"content":"To add an EDP policy","pos":[2642,2662]},{"pos":[2669,2794],"content":"Open the Intune administration console, and go to the <bpt id=\"p1\">**</bpt>Policy<ept id=\"p1\">**</ept> node, and then click <bpt id=\"p2\">**</bpt>Add Policy<ept id=\"p2\">**</ept> from the <bpt id=\"p3\">**</bpt>Tasks<ept id=\"p3\">**</ept> area."},{"pos":[2800,3003],"content":"Go to <bpt id=\"p1\">**</bpt>Windows<ept id=\"p1\">**</ept>, click the <bpt id=\"p2\">**</bpt>Enterprise Data Protection (Windows 10 and Mobile and later) policy<ept id=\"p2\">**</ept>, pick the EDP template, click <bpt id=\"p3\">**</bpt>Create and Deploy a Custom Policy<ept id=\"p3\">**</ept>, and then click <bpt id=\"p4\">**</bpt>Create Policy<ept id=\"p4\">**</ept>."},{"content":"Microsoft Intune: Create your new policy from the New Policy screen","pos":[3011,3078]},{"pos":[3120,3231],"content":"Type a name (required) and an optional description for your policy into the <bpt id=\"p1\">**</bpt>Name<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Description<ept id=\"p2\">**</ept> boxes."},{"content":"Microsoft Intune: Fill out the required Name and optional Description fields","pos":[3239,3315]},{"content":"Add individual apps to your Protected App list","pos":[3356,3402]},{"content":"During the policy-creation process in Intune, you can choose the apps you want to give access to your enterprise data through EDP.","pos":[3403,3533]},{"content":"Apps included in this list can protect data on behalf of the enterprise and are restricted from copying or moving enterprise data to unprotected apps.","pos":[3534,3684]},{"content":"The steps to add your apps are based on the type of app it is; either a Universal Windows Platform (UWP) app, or a signed Desktop app, also known as a Classic Windows application.","pos":[3686,3865]},{"content":"Important","pos":[3870,3879]},{"content":"EDP-aware apps are expected to prevent enterprise data from going to unprotected network locations and to avoid encrypting personal data.","pos":[3885,4022]},{"content":"On the other hand, EDP-unaware apps might not respect the corporate network boundary and will encrypt all files they create or modify, meaning that they could encrypt personal data and cause data loss during the revocation process.","pos":[4023,4254]},{"content":"Care must be taken to get a support statement from the software provider that their app is safe with EDP before adding it to your <bpt id=\"p1\">**</bpt>Protected App<ept id=\"p1\">**</ept> list.","pos":[4255,4408]},{"content":"Note","pos":[4416,4420]},{"content":"If you want to use <bpt id=\"p1\">**</bpt>File hash<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Path<ept id=\"p2\">**</ept> rules, instead of Publisher rules, you must follow the steps in the <bpt id=\"p3\">[</bpt>Add multiple apps to your enterprise data protection (EDP) Protected Apps list<ept id=\"p3\">](add-apps-to-protected-list-using-custom-uri.md)</ept> topic.","pos":[4426,4674]},{"content":"To add a UWP app","pos":[4678,4694]},{"pos":[4702,4819],"content":"From the <bpt id=\"p1\">**</bpt>Configure the following apps to be protected by EDP<ept id=\"p1\">**</ept> table in the <bpt id=\"p2\">**</bpt>Protected Apps<ept id=\"p2\">**</ept> area, click <bpt id=\"p3\">**</bpt>Add.<ept id=\"p3\">**</ept>"},{"content":"Click <bpt id=\"p1\">**</bpt>Universal App<ept id=\"p1\">**</ept>, type the <bpt id=\"p2\">**</bpt>Publisher Name<ept id=\"p2\">**</ept> and the <bpt id=\"p3\">**</bpt>Product Name<ept id=\"p3\">**</ept> into the associated boxes, and then click <bpt id=\"p4\">**</bpt>OK<ept id=\"p4\">**</ept>.","pos":[4825,4952]},{"content":"If you don't have the publisher or product name, you can find them for both desktop devices and Windows 10 Mobile phones by following these steps.","pos":[4953,5099]},{"content":"To find the Publisher and Product name values for Microsoft Store apps without installing them","pos":[5107,5201]},{"content":"Go to the <bpt id=\"p1\">[</bpt>Windows Store for Business<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkID=722910)</ept> website, and find your app.","pos":[5213,5328]},{"content":"For example, Microsoft OneNote.","pos":[5329,5360]},{"content":"Note","pos":[5377,5381]},{"content":"If your app is already installed on desktop devices, you can use the AppLocker local security policy MMC snap-in to gather the info for adding the app to the <bpt id=\"p1\">**</bpt>Protected App<ept id=\"p1\">**</ept> list.","pos":[5387,5568]},{"content":"For info about how to do this, see the <bpt id=\"p1\">[</bpt>Add multiple apps to your enterprise data protection (EDP) Protected Apps list<ept id=\"p1\">](add-apps-to-protected-list-using-custom-uri.md)</ept> topic.","pos":[5569,5743]},{"content":"Copy the ID value from the app URL.","pos":[5753,5788]},{"content":"For example, Microsoft OneNote's ID URL is https://www.microsoft.com/store/apps/onenote/9wzdncrfhvjl, and you'd copy the ID value, <ph id=\"ph1\">`9wzdncrfhvjl`</ph>.","pos":[5789,5935]},{"pos":[5945,6342],"content":"In a browser, run the Store for Business portal web API, to return a JavaScript Object Notation (JSON) file that includes the publisher and product name values. For example, run https://bspmts.mp.microsoft.com/v1/public/catalog/Retail/Products/*9wzdncrfhvjl*/applockerdata, where *9wzdncrfhvjl* is replaced with your ID value.\n<p>\nThe API runs and opens a text editor with the app details.","leadings":["","    ","    "],"nodes":[{"content":"In a browser, run the Store for Business portal web API, to return a JavaScript Object Notation (JSON) file that includes the publisher and product name values. For example, run https://bspmts.mp.microsoft.com/v1/public/catalog/Retail/Products/*9wzdncrfhvjl*/applockerdata, where *9wzdncrfhvjl* is replaced with your ID value.\n","pos":[0,327],"nodes":[{"content":"In a browser, run the Store for Business portal web API, to return a JavaScript Object Notation (JSON) file that includes the publisher and product name values.","pos":[0,160]},{"content":"For example, run https://bspmts.mp.microsoft.com/v1/public/catalog/Retail/Products/<bpt id=\"p1\">*</bpt>9wzdncrfhvjl<ept id=\"p1\">*</ept>/applockerdata, where <bpt id=\"p2\">*</bpt>9wzdncrfhvjl<ept id=\"p2\">*</ept> is replaced with your ID value.","pos":[161,326]}]},{"content":"The API runs and opens a text editor with the app details.","pos":[331,389]}]},{"pos":[6583,6738],"content":"Copy the <ph id=\"ph1\">`publisherCertificateName`</ph> value into the <bpt id=\"p1\">**</bpt>Publisher Name<ept id=\"p1\">**</ept> box and copy the <ph id=\"ph2\">`packageIdentityName`</ph> value into the <bpt id=\"p2\">**</bpt>Product Name<ept id=\"p2\">**</ept> box of Intune."},{"content":"Important","pos":[6751,6760]},{"content":"The JSON file might also return a <ph id=\"ph1\">`windowsPhoneLegacyId`</ph> value for both the <bpt id=\"p1\">**</bpt>Publisher Name<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Product Name<ept id=\"p2\">**</ept> boxes.","pos":[6766,6888]},{"content":"This means that you have an app that’s using a XAP package and that you must set the <bpt id=\"p1\">**</bpt>Product Name<ept id=\"p1\">**</ept> as <ph id=\"ph1\">`windowsPhoneLegacyId`</ph>, and set the <bpt id=\"p2\">**</bpt>Publisher Name<ept id=\"p2\">**</ept> as “CN=” followed by the <ph id=\"ph2\">`windowsPhoneLegacyId`</ph>.","pos":[6889,7097]},{"content":"For example:","pos":[7105,7117]},{"content":"Microsoft Intune: Add a UWP app to the Protected Apps list","pos":[7255,7313]},{"content":"To find the Publisher and Product name values for apps installed on Windows 10 Mobile phones","pos":[7349,7441]},{"pos":[7453,7591],"content":"If you need to add mobile apps that aren't distributed through the Store for Business, you must use the <bpt id=\"p1\">**</bpt>Windows Device Portal<ept id=\"p1\">**</ept> feature."},{"content":"Note","pos":[7608,7612]},{"content":"Your PC and phone must be on the same wireless network.","pos":[7618,7673]},{"pos":[7683,7790],"content":"On the Windows Phone, go to <bpt id=\"p1\">**</bpt>Settings<ept id=\"p1\">**</ept>, choose <bpt id=\"p2\">**</bpt>Update &amp; security<ept id=\"p2\">**</ept>, and then choose <bpt id=\"p3\">**</bpt>For developers<ept id=\"p3\">**</ept>."},{"pos":[7800,7927],"content":"In the <bpt id=\"p1\">**</bpt>For developers<ept id=\"p1\">**</ept> screen, turn on <bpt id=\"p2\">**</bpt>Developer mode<ept id=\"p2\">**</ept>, turn on <bpt id=\"p3\">**</bpt>Device Discovery<ept id=\"p3\">**</ept>, and then turn on <bpt id=\"p4\">**</bpt>Device Portal<ept id=\"p4\">**</ept>."},{"pos":[7937,8044],"content":"Copy the URL in the <bpt id=\"p1\">**</bpt>Device Portal<ept id=\"p1\">**</ept> area into your device's browser, and then accept the SSL certificate."},{"pos":[8054,8167],"content":"In the <bpt id=\"p1\">**</bpt>Device discovery<ept id=\"p1\">**</ept> area, press <bpt id=\"p2\">**</bpt>Pair<ept id=\"p2\">**</ept>, and then enter the PIN into the website from the previous step."},{"pos":[8177,8297],"content":"On the <bpt id=\"p1\">**</bpt>Apps<ept id=\"p1\">**</ept> tab of the website, you can see details for the running apps, including the publisher and product names."},{"content":"Start the app for which you're looking for the publisher and product name values","pos":[8310,8390]},{"pos":[8400,8563],"content":"Copy the <ph id=\"ph1\">`publisherCertificateName`</ph> value and paste it into the <bpt id=\"p1\">**</bpt>Publisher Name<ept id=\"p1\">**</ept> box and the <ph id=\"ph2\">`packageIdentityName`</ph> value into the <bpt id=\"p2\">**</bpt>Product Name<ept id=\"p2\">**</ept> box of Intune."},{"content":"Important","pos":[8580,8589]},{"content":"The JSON file might also return a <ph id=\"ph1\">`windowsPhoneLegacyId`</ph> value for both the <bpt id=\"p1\">**</bpt>Publisher Name<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>Product Name<ept id=\"p2\">**</ept> boxes.","pos":[8595,8717]},{"content":"This means that you have an app that’s using a XAP package and that you must set the <bpt id=\"p1\">**</bpt>Product Name<ept id=\"p1\">**</ept> as <ph id=\"ph1\">`windowsPhoneLegacyId`</ph>, and set the <bpt id=\"p2\">**</bpt>Publisher Name<ept id=\"p2\">**</ept> as “CN=” followed by the <ph id=\"ph2\">`windowsPhoneLegacyId`</ph>.","pos":[8718,8926]},{"content":"For example:","pos":[8934,8946]},{"content":"To add a Classic Windows application","pos":[9073,9109]},{"pos":[9117,9234],"content":"From the <bpt id=\"p1\">**</bpt>Configure the following apps to be protected by EDP<ept id=\"p1\">**</ept> table in the <bpt id=\"p2\">**</bpt>Protected Apps<ept id=\"p2\">**</ept> area, click <bpt id=\"p3\">**</bpt>Add.<ept id=\"p3\">**</ept>"},{"content":"A dialog box appears, letting you pick whether the app is a <bpt id=\"p1\">**</bpt>Universal App<ept id=\"p1\">**</ept> or a <bpt id=\"p2\">**</bpt>Desktop App<ept id=\"p2\">**</ept>.","pos":[9238,9337]},{"pos":[9343,11521],"content":"Click **Desktop App**, pick the options you want (see table), and then click **OK**.\n<table>\n    <tr>\n        <th>Option</th>\n        <th>Manages</th>\n    </tr>\n    <tr>\n        <td>All fields left as \"*\"</td>\n        <td>All files signed by any publisher. (Not recommended.)</td>\n    </tr>\n    <tr>\n        <td><strong>Publisher</strong> selected</td>\n        <td>All files signed by the named publisher.<p>This might be useful if your company is the publisher and signer of internal line-of-business apps.</td>\n    </tr>\n     <tr>\n        <td><strong>Publisher</strong> and <strong>Product Name</strong> selected</td>\n        <td>All files for the specified product, signed by the named publisher.</td>\n    </tr>  \n     <tr>\n        <td><strong>Publisher</strong>, <strong>Product Name</strong>, and <strong>File Name</strong> selected</td>\n        <td>Any version of the named file or package for the specified product, signed by the named publisher.</td>\n    </tr>\n     <tr>\n        <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, Exactly</strong> selected</td>\n        <td>Specified version of the named file or package for the specified product, signed by the named publisher.</td>\n    </tr>\n     <tr>\n        <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, And above</strong> selected</td>\n        <td>Specified version or newer releases of the named file or package for the specified product, signed by the named publisher.<p>This option is recommended for enlightened apps that weren't previously enlightened.</td>\n    </tr>\n     <tr>\n        <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, And below</strong> selected</td>\n        <td>Specified version or older releases of the named file or package for the specified product, signed by the named publisher.</td>\n    </tr>                                            \n</table>","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"nodes":[{"content":"Click **Desktop App**, pick the options you want (see table), and then click **OK**.\n","pos":[0,85],"nodes":[{"content":"Click <bpt id=\"p1\">**</bpt>Desktop App<ept id=\"p1\">**</ept>, pick the options you want (see table), and then click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","pos":[0,84]}]},{"content":"Option","pos":[114,120]},{"content":"Manages","pos":[138,145]},{"content":"All fields left as \"*\"","pos":[182,204]},{"content":"All files signed by any publisher. (Not recommended.)","pos":[222,275],"nodes":[{"content":"All files signed by any publisher.","pos":[0,34]},{"content":"(Not recommended.)","pos":[35,53]}]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph> selected","pos":[320,347]},{"content":"All files signed by the named publisher.","pos":[365,405]},{"content":"This might be useful if your company is the publisher and signer of internal line-of-business apps.","pos":[408,507]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph> and <ph id=\"ph2\">&lt;strong&gt;</ph>Product Name<ph id=\"ph3\">&lt;/strong&gt;</ph> selected","pos":[553,614]},{"content":"All files for the specified product, signed by the named publisher.","pos":[632,699]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph>, <ph id=\"ph2\">&lt;strong&gt;</ph>Product Name<ph id=\"ph3\">&lt;/strong&gt;</ph>, and <ph id=\"ph4\">&lt;strong&gt;</ph>File Name<ph id=\"ph5\">&lt;/strong&gt;</ph> selected","pos":[747,837]},{"content":"Any version of the named file or package for the specified product, signed by the named publisher.","pos":[855,953]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph>, <ph id=\"ph2\">&lt;strong&gt;</ph>Product Name<ph id=\"ph3\">&lt;/strong&gt;</ph>, <ph id=\"ph4\">&lt;strong&gt;</ph>File Name<ph id=\"ph5\">&lt;/strong&gt;</ph>, and <ph id=\"ph6\">&lt;strong&gt;</ph>File Version, Exactly<ph id=\"ph7\">&lt;/strong&gt;</ph> selected","pos":[999,1129]},{"content":"Specified version of the named file or package for the specified product, signed by the named publisher.","pos":[1147,1251]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph>, <ph id=\"ph2\">&lt;strong&gt;</ph>Product Name<ph id=\"ph3\">&lt;/strong&gt;</ph>, <ph id=\"ph4\">&lt;strong&gt;</ph>File Name<ph id=\"ph5\">&lt;/strong&gt;</ph>, and <ph id=\"ph6\">&lt;strong&gt;</ph>File Version, And above<ph id=\"ph7\">&lt;/strong&gt;</ph> selected","pos":[1297,1429]},{"content":"Specified version or newer releases of the named file or package for the specified product, signed by the named publisher.","pos":[1447,1569]},{"content":"This option is recommended for enlightened apps that weren't previously enlightened.","pos":[1572,1656]},{"content":"Publisher<ph id=\"ph1\">&lt;/strong&gt;</ph>, <ph id=\"ph2\">&lt;strong&gt;</ph>Product Name<ph id=\"ph3\">&lt;/strong&gt;</ph>, <ph id=\"ph4\">&lt;strong&gt;</ph>File Name<ph id=\"ph5\">&lt;/strong&gt;</ph>, and <ph id=\"ph6\">&lt;strong&gt;</ph>File Version, And below<ph id=\"ph7\">&lt;/strong&gt;</ph> selected","pos":[1702,1834]},{"content":"Specified version or older releases of the named file or package for the specified product, signed by the named publisher.","pos":[1852,1974]}]},{"content":"If you’re unsure about what to include for the publisher, you can run this PowerShell command:","pos":[11523,11617]},{"content":"Where <ph id=\"ph1\">`\"&lt;path_of_the_exe&gt;\"`</ph> goes to the location of the app on the device.","pos":[11686,11760]},{"content":"For example, <ph id=\"ph1\">`Get-AppLockerFileInformation -Path \"C:\\Program Files\\Internet Explorer\\iexplore.exe\"`</ph>.","pos":[11761,11861]},{"content":"In this example, you'd get the following info:","pos":[11863,11909]},{"pos":[12156,12290],"content":"Where the text, <ph id=\"ph1\">`O=MICROSOFT CORPORATION, L=REDMOND, S=WASHINGTON, C=US`</ph> is the publisher name to enter in the <bpt id=\"p1\">**</bpt>Publisher Name<ept id=\"p1\">**</ept> box."},{"content":"Microsoft Intune: Add a Classic Windows app to the Protected Apps list","pos":[12294,12364]},{"content":"Exempt apps from EDP restrictions","pos":[12405,12438]},{"content":"If you're running into compatibility issues where your app is incompatible with EDP, but still needs to be used with enterprise data, you can exempt the app from the EDP restrictions.","pos":[12439,12622]},{"content":"This means that your apps won't include auto-encryption or tagging and won't honor your network restrictions.","pos":[12623,12732]},{"content":"It also means that your exempted apps might leak.","pos":[12733,12782]},{"content":"To exempt an UWP app","pos":[12786,12806]},{"pos":[12814,13011],"content":"Follow the <bpt id=\"p1\">**</bpt>Add a UWP app<ept id=\"p1\">**</ept> steps in the <bpt id=\"p2\">[</bpt>Add multiple apps to your enterprise data protection (EDP) Protected Apps list<ept id=\"p2\">](add-apps-to-protected-list-using-custom-uri.md)</ept> topic, through to Step 11."},{"content":"In the <bpt id=\"p1\">**</bpt>OMA-URI<ept id=\"p1\">**</ept> box at Step 12, type <ph id=\"ph1\">`./Vendor/MSFT/AppLocker/EnterpriseDataProtection/&lt;your_enterprise_name&gt;edpexempt/StoreApp EXE`</ph>.","pos":[13017,13153]},{"content":"Where <bpt id=\"p1\">**</bpt>edpexempt<ept id=\"p1\">**</ept> is added as a substring, making the app exempt.","pos":[13156,13223]},{"content":"Open File Explorer, go to the location where you saved your new XML file, and open it using an XML editor, such as Notepad.","pos":[13229,13352]},{"content":"Copy the text that has a <bpt id=\"p1\">**</bpt>Type<ept id=\"p1\">**</ept> of Appx, within in the <bpt id=\"p2\">**</bpt>RuleCollection<ept id=\"p2\">**</ept> tags, and then go back to Intune and paste the text into the <bpt id=\"p3\">**</bpt>Value<ept id=\"p3\">**</ept> box of the <bpt id=\"p4\">**</bpt>Add or edit OMA-URI Setting<ept id=\"p4\">**</ept> box.","pos":[13358,13552]},{"content":"For example:","pos":[13553,13565]},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Add or edit OMA-URI Setting<ept id=\"p2\">**</ept> box, and then click <bpt id=\"p3\">**</bpt>Save Policy<ept id=\"p3\">**</ept>.","pos":[13690,13784]},{"content":"After saving the policy, you’ll need to deploy it to your employee’s devices.","pos":[13787,13864]},{"content":"For more info, see the <bpt id=\"p1\">[</bpt>Deploy your enterprise data protection (EDP) policy<ept id=\"p1\">](deploy-edp-policy-using-intune.md)</ept> topic.","pos":[13865,13983]},{"content":"To exempt a Classic Windows application","pos":[13987,14026]},{"pos":[14034,14255],"content":"Follow the <bpt id=\"p1\">**</bpt>Add a Classic Windows application app<ept id=\"p1\">**</ept> steps in the <bpt id=\"p2\">[</bpt>Add multiple apps to your enterprise data protection (EDP) Protected Apps list<ept id=\"p2\">](add-apps-to-protected-list-using-custom-uri.md)</ept> topic, through to Step 11."},{"content":"In the <bpt id=\"p1\">**</bpt>OMA-URI<ept id=\"p1\">**</ept> box at Step 12, type <ph id=\"ph1\">`./Vendor/MSFT/AppLocker/EnterpriseDataProtection/&lt;your_enterprise_name&gt;edpexempt/EXE`</ph>.","pos":[14261,14388]},{"content":"Where <bpt id=\"p1\">**</bpt>edpexempt<ept id=\"p1\">**</ept> is added as a substring, making the app exempt.","pos":[14391,14458]},{"content":"Open File Explorer, go to the location where you saved your new XML file, and open it using an XML editor, such as Notepad.","pos":[14464,14587]},{"content":"Copy the text that has a <bpt id=\"p1\">**</bpt>Type<ept id=\"p1\">**</ept> of EXE, within in the <bpt id=\"p2\">**</bpt>RuleCollection<ept id=\"p2\">**</ept> tags, and then go back to Intune and paste the text into the <bpt id=\"p3\">**</bpt>Value<ept id=\"p3\">**</ept> box of the <bpt id=\"p4\">**</bpt>Add or edit OMA-URI Setting<ept id=\"p4\">**</ept> box.","pos":[14593,14786]},{"content":"For example:","pos":[14787,14799]},{"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept> to close the <bpt id=\"p2\">**</bpt>Add or edit OMA-URI Setting<ept id=\"p2\">**</ept> box, and then click <bpt id=\"p3\">**</bpt>Save Policy<ept id=\"p3\">**</ept>.","pos":[14919,15013]},{"content":"After saving the policy, you’ll need to deploy it to your employee’s devices.","pos":[15016,15093]},{"content":"For more info, see the <bpt id=\"p1\">[</bpt>Deploy your enterprise data protection (EDP) policy<ept id=\"p1\">](deploy-edp-policy-using-intune.md)</ept> topic.","pos":[15094,15212]},{"content":"Manage the EDP protection level for your enterprise data","pos":[15217,15273]},{"content":"After you've added the apps you want to protect with EDP, you'll need to apply a management and protection mode.","pos":[15274,15386]},{"content":"We recommend that you start with <bpt id=\"p1\">**</bpt>Silent<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Override<ept id=\"p2\">**</ept> while verifying with a small group that you have the right apps on your <bpt id=\"p3\">**</bpt>Protected Apps<ept id=\"p3\">**</ept> list.","pos":[15388,15544]},{"content":"After you're done, you can change to your final enforcement policy, either <bpt id=\"p1\">**</bpt>Override<ept id=\"p1\">**</ept> or <bpt id=\"p2\">**</bpt>Block<ept id=\"p2\">**</ept>.","pos":[15545,15646]},{"content":"Mode","pos":[15677,15681]},{"content":"Description","pos":[15699,15710]},{"content":"Block","pos":[15747,15752]},{"content":"EDP looks for inappropriate data sharing practices and stops the employee from completing the action.","pos":[15770,15871]},{"content":"This can include sharing info across non-enterprise-protected apps in addition to sharing enterprise data between other people and devices outside of your enterprise.","pos":[15872,16038]},{"content":"Override","pos":[16075,16083]},{"content":"EDP looks for inappropriate data sharing, warning employees if they do something deemed potentially unsafe.","pos":[16101,16208]},{"content":"However, this management mode lets the employee override the policy and share the data, logging the action to your audit log, accessible through the <bpt id=\"p1\">[</bpt>Reporting CSP<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkID=746459)</ept>.","pos":[16209,16423]},{"content":"Silent","pos":[16460,16466]},{"content":"EDP runs silently, logging inappropriate data sharing, without blocking anything that would’ve been prompted for employee interaction while in Override mode.","pos":[16484,16641]},{"content":"Unallowed actions, like apps inappropriately trying to access a network resource or EDP-protected data, are still blocked.","pos":[16642,16764]},{"content":"Off","pos":[16801,16804]},{"content":"EDP is turned off and doesn't help to protect or audit your data.","pos":[16822,16887]},{"content":"After you turn off EDP, an attempt is made to decrypt any closed EDP-tagged files on the locally attached drives.","pos":[16890,17003]},{"content":"Microsoft Intune: Add the protection level for your Protected Apps list","pos":[17034,17105]},{"content":"Define your enterprise-managed identity domains","pos":[17147,17194]},{"content":"Specify your company’s enterprise identity, expressed as your primary internet domain.","pos":[17195,17281]},{"content":"For example, if your company is Contoso, its enterprise identity might be contoso.com.","pos":[17282,17368]},{"content":"The first listed domain (in this example, contoso.com) is the primary enterprise identity string used to tag files protected by any app on the <bpt id=\"p1\">**</bpt>Protected App<ept id=\"p1\">**</ept> list.","pos":[17369,17535]},{"content":"You can also specify all the domains owned by your enterprise that are used for user accounts, separating them with the \"|\" character.","pos":[17537,17671]},{"content":"For example, if Contoso also has some employees with email addresses or user accounts on the fabrikam.com domain, you would use contoso.com|fabrikam.com.","pos":[17672,17825]},{"content":"This list of managed identity domains, along with the primary domain, make up the identity of your managing enterprise.","pos":[17827,17946]},{"content":"User identities (user@domain) that end in any of the domains on this list, are considered managed.","pos":[17947,18045]},{"content":"To add your primary domain","pos":[18049,18075]},{"content":"Type the name of your primary domain into the <bpt id=\"p1\">**</bpt>Primary domain<ept id=\"p1\">**</ept> field.","pos":[18083,18154]},{"content":"For example, <bpt id=\"p1\">*</bpt>contoso.com<ept id=\"p1\">*</ept>.","pos":[18155,18182]},{"content":"If you have multiple domains, you must separate them with the \"|\" character.","pos":[18186,18262]},{"content":"For example, <ph id=\"ph1\">`contoso.com|fabrikam.com`</ph>.","pos":[18263,18303]},{"content":"Microsoft Intune: Add the primary internet domain for your enterprise identity","pos":[18311,18389]},{"content":"Choose where apps can access enterprise data","pos":[18429,18473]},{"content":"After you've added a protection mode to your apps, you'll need to decide where those apps can access enterprise data on your network.","pos":[18474,18607]},{"content":"There are no default locations included with EDP, you must add each of your network locations.","pos":[18611,18705]},{"content":"This area applies to any network endpoint device that gets an IP address in your enterprise’s range and is also bound to one of your enterprise domains, including SMB shares.","pos":[18706,18880]},{"content":"Local file system locations should just maintain encryption (for example, on local NTFS, FAT, ExFAT).","pos":[18882,18983]},{"content":"Important","pos":[18989,18998]},{"content":"Every EDP policy should include policy that defines your enterprise network locations.","pos":[19009,19095]},{"content":"Classless Inter-Domain Routing (CIDR) notation isn’t supported for EDP configurations.","pos":[19101,19187]},{"content":"To specify where your protected apps can find and send enterprise data on the network","pos":[19191,19276]},{"pos":[19284,23728],"content":"Add additional network locations your apps can access by clicking **Add**, typing a description into the **Description** box, and then choosing your location type, including:\n<table>\n    <tr>\n        <th>Network location type</th>\n        <th>Format</th>\n        <th>Description</th>\n    </tr>\n    <tr>\n        <td>Enterprise Cloud Resources</td>\n        <td>**With proxy:**<p>contoso.sharepoint.com,proxy.contoso.com|<br>contoso.visualstudio.com,proxy.contoso.com<p>**Without proxy:**<p>contoso.sharepoint.com|contoso.visualstudio.com</td>\n        <td>Specify the cloud resources to be treated as corporate and protected by EDP.<p>For each cloud resource, you may also optionally specify an internal proxy server that routes your traffic through your Enterprise Internal Proxy Server.<p>If you have multiple resources, you must separate them using the \"|\" delimiter. If you don’t use proxy servers, you must also include the \",\" delimiter just before the \"|\". For example:<p>`URL <,proxy>|URL <,proxy>`<p>If Windows is unable to determine whether an app should be allowed to connect to a network resource, it will automatically block the connection. If instead you want Windows to allow the connections to happen, you can add the `/*AppCompat*/` string to this setting. For example:<p>`URL <,proxy>|URL <,proxy>|/*AppCompat*/`</td>     \n    </tr>\n    <tr>\n        <td>Enterprise Network Domain Names</td>\n        <td>domain1.contoso.com,domain2.contoso.com</td>\n        <td>Specify the DNS suffixes used in your environment. All traffic to the fully-qualified domains appearing in this list will be protected.<p>This setting works with the IP ranges settings to detect whether a network endpoint is enterprise or personal on private networks.<p>If you have multiple resources, you must separate them using the \",\" delimiter.</td>                \n    </tr>\n    <tr>\n        <td>Enterprise Proxy Servers</td>\n        <td>domain1.contoso.com:80;<br>domain2.contoso.com:137</td>\n        <td>Specify your externally-facing proxy server addresses, along with the port through which traffic is allowed and protected with EDP.<p>This list shouldn’t include any servers listed in the Enterprise Internal Proxy Servers list, which are used for EDP-protected traffic.<p>This setting is also required if you use a proxy in your network. If you don't have a proxy server, you might find that enterprise resources are unavailable when a client is behind a proxy, such as when you’re visiting another company and not on that company’s guest network.<p>If you have multiple resources, you must separate them using the \";\" delimiter.</td>                \n    </tr>\n    <tr>\n        <td>Enterprise Internal Proxy Servers</td>\n        <td>proxy1.contoso.com;<br>proxy2.contoso.com</td>\n        <td>Specify the proxy servers your devices will go through to reach your cloud resources.<p>Using this server type indicates that the cloud resources you’re connecting to are enterprise resources.<p>This list shouldn’t include any servers listed in the Enterprise Proxy Servers list, which are used for non-EDP-protected traffic.<p>If you have multiple resources, you must separate them using the \";\" delimiter.</td>                \n    </tr>\n    <tr>\n        <td>Enterprise IPv4 Range</td>\n        <td>**Starting IPv4 Address:** 3.4.0.1<br>**Ending IPv4 Address:** 3.4.255.254<br>**Custom URI:** 3.4.0.1-3.4.255.254,10.0.0.1-10.255.255.254</td>\n        <td>Specify the addresses for a valid IPv4 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.<p>If you have multiple ranges, you must separate them using the \",\" delimiter.</td>\n    </tr>\n    <tr>\n        <td>Enterprise IPv6 Range</td>\n        <td>**Starting IPv6 Address:** 2a01:110::<br>**Ending IPv6 Address:** 2a01:110:7fff:ffff:<br>ffff:ffff:ffff:ffff<br>**Custom URI:** 2a01:110::-2a01:110:7fff:ffff:ffff:ffff:ffff:ffff,<br>fd00::-fdff:ffff:ffff:ffff:ffff:ffff:ffff:ffff</td>\n        <td>Specify the addresses for a valid IPv6 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.<p>If you have multiple ranges, you must separate them using the \",\" delimiter.</td>\n    </tr>\n</table>","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"nodes":[{"content":"Add additional network locations your apps can access by clicking <bpt id=\"p1\">**</bpt>Add<ept id=\"p1\">**</ept>, typing a description into the <bpt id=\"p2\">**</bpt>Description<ept id=\"p2\">**</ept> box, and then choosing your location type, including:","pos":[0,174]},{"content":"Network location type","pos":[204,225]},{"content":"Format","pos":[243,249]},{"content":"Description","pos":[267,278]},{"content":"Enterprise Cloud Resources","pos":[315,341]},{"content":"With proxy:","pos":[361,372]},{"content":"contoso.sharepoint.com,proxy.contoso.com|","pos":[377,418]},{"content":"contoso.visualstudio.com,proxy.contoso.com","pos":[422,464]},{"content":"Without proxy:","pos":[469,483]},{"content":"contoso.sharepoint.com|contoso.visualstudio.com","pos":[488,535]},{"content":"Specify the cloud resources to be treated as corporate and protected by EDP.","pos":[553,629]},{"content":"For each cloud resource, you may also optionally specify an internal proxy server that routes your traffic through your Enterprise Internal Proxy Server.","pos":[632,785]},{"content":"If you have multiple resources, you must separate them using the \"|\" delimiter. If you don’t use proxy servers, you must also include the \",\" delimiter just before the \"|\". For example:","pos":[788,973],"nodes":[{"content":"If you have multiple resources, you must separate them using the \"|\" delimiter.","pos":[0,79]},{"content":"If you don’t use proxy servers, you must also include the \",\" delimiter just before the \"|\".","pos":[80,172]},{"content":"For example:","pos":[173,185]}]},{"content":"If Windows is unable to determine whether an app should be allowed to connect to a network resource, it will automatically block the connection. If instead you want Windows to allow the connections to happen, you can add the `/*AppCompat*/` string to this setting. For example:","pos":[1006,1283],"nodes":[{"content":"If Windows is unable to determine whether an app should be allowed to connect to a network resource, it will automatically block the connection.","pos":[0,144]},{"content":"If instead you want Windows to allow the connections to happen, you can add the <ph id=\"ph1\">`/*AppCompat*/`</ph> string to this setting.","pos":[145,264]},{"content":"For example:","pos":[265,277]}]},{"content":"Enterprise Network Domain Names","pos":[1369,1400]},{"content":"domain1.contoso.com,domain2.contoso.com","pos":[1418,1457]},{"content":"Specify the DNS suffixes used in your environment. All traffic to the fully-qualified domains appearing in this list will be protected.","pos":[1475,1610],"nodes":[{"content":"Specify the DNS suffixes used in your environment.","pos":[0,50]},{"content":"All traffic to the fully-qualified domains appearing in this list will be protected.","pos":[51,135]}]},{"content":"This setting works with the IP ranges settings to detect whether a network endpoint is enterprise or personal on private networks.","pos":[1613,1743]},{"content":"If you have multiple resources, you must separate them using the \",\" delimiter.","pos":[1746,1825]},{"content":"Enterprise Proxy Servers","pos":[1878,1902]},{"content":"domain1.contoso.com:80;","pos":[1920,1943]},{"content":"domain2.contoso.com:137","pos":[1947,1970]},{"content":"Specify your externally-facing proxy server addresses, along with the port through which traffic is allowed and protected with EDP.","pos":[1988,2119]},{"content":"This list shouldn’t include any servers listed in the Enterprise Internal Proxy Servers list, which are used for EDP-protected traffic.","pos":[2122,2257]},{"content":"This setting is also required if you use a proxy in your network. If you don't have a proxy server, you might find that enterprise resources are unavailable when a client is behind a proxy, such as when you’re visiting another company and not on that company’s guest network.","pos":[2260,2535],"nodes":[{"content":"This setting is also required if you use a proxy in your network.","pos":[0,65]},{"content":"If you don't have a proxy server, you might find that enterprise resources are unavailable when a client is behind a proxy, such as when you’re visiting another company and not on that company’s guest network.","pos":[66,275]}]},{"content":"If you have multiple resources, you must separate them using the \";\" delimiter.","pos":[2538,2617]},{"content":"Enterprise Internal Proxy Servers","pos":[2670,2703]},{"content":"proxy1.contoso.com;","pos":[2721,2740]},{"content":"proxy2.contoso.com","pos":[2744,2762]},{"content":"Specify the proxy servers your devices will go through to reach your cloud resources.","pos":[2780,2865]},{"content":"Using this server type indicates that the cloud resources you’re connecting to are enterprise resources.","pos":[2868,2972]},{"content":"This list shouldn’t include any servers listed in the Enterprise Proxy Servers list, which are used for non-EDP-protected traffic.","pos":[2975,3105]},{"content":"If you have multiple resources, you must separate them using the \";\" delimiter.","pos":[3108,3187]},{"content":"Enterprise IPv4 Range","pos":[3240,3261]},{"content":"<bpt id=\"p1\">**</bpt>Starting IPv4 Address:<ept id=\"p1\">**</ept> 3.4.0.1","pos":[3279,3313]},{"content":"<bpt id=\"p1\">**</bpt>Ending IPv4 Address:<ept id=\"p1\">**</ept> 3.4.255.254","pos":[3317,3353]},{"content":"<bpt id=\"p1\">**</bpt>Custom URI:<ept id=\"p1\">**</ept> 3.4.0.1-3.4.255.254,10.0.0.1-10.255.255.254","pos":[3357,3416]},{"content":"Specify the addresses for a valid IPv4 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.","pos":[3434,3613],"nodes":[{"content":"Specify the addresses for a valid IPv4 value range within your intranet.","pos":[0,72]},{"content":"These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.","pos":[73,179]}]},{"content":"If you have multiple ranges, you must separate them using the \",\" delimiter.","pos":[3616,3692]},{"content":"Enterprise IPv6 Range","pos":[3729,3750]},{"content":"<bpt id=\"p1\">**</bpt>Starting IPv6 Address:<ept id=\"p1\">**</ept> 2a01:110::","pos":[3768,3805]},{"content":"<bpt id=\"p1\">**</bpt>Ending IPv6 Address:<ept id=\"p1\">**</ept> 2a01:110:7fff:ffff:","pos":[3809,3853]},{"content":"ffff:ffff:ffff:ffff","pos":[3857,3876]},{"content":"<bpt id=\"p1\">**</bpt>Custom URI:<ept id=\"p1\">**</ept> 2a01:110::-2a01:110:7fff:ffff:ffff:ffff:ffff:ffff,","pos":[3880,3946]},{"content":"fd00::-fdff:ffff:ffff:ffff:ffff:ffff:ffff:ffff","pos":[3950,3996]},{"content":"Specify the addresses for a valid IPv6 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.","pos":[4014,4193],"nodes":[{"content":"Specify the addresses for a valid IPv6 value range within your intranet.","pos":[0,72]},{"content":"These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.","pos":[73,179]}]},{"content":"If you have multiple ranges, you must separate them using the \",\" delimiter.","pos":[4196,4272]}]},{"content":"Microsoft Intune: Choose the primary domain and the other network locations for protected apps","pos":[23742,23836]},{"content":"Add as many locations as you need, and then click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>.","pos":[23878,23935]},{"content":"The <bpt id=\"p1\">**</bpt>Add or Edit Enterprise Network Locations box<ept id=\"p1\">**</ept> closes.","pos":[23938,23998]},{"content":"In the <bpt id=\"p1\">**</bpt>Use a data recovery certificate in case of data loss<ept id=\"p1\">**</ept> box, click <bpt id=\"p2\">**</bpt>Browse<ept id=\"p2\">**</ept> to add a data recovery certificate for your policy.","pos":[24004,24141]},{"content":"After you create and deploy your EDP policy to your employees, Windows will begin to encrypt your corporate data on the employees’ local device drive.","pos":[24144,24294]},{"content":"If somehow the employees’ local encryption keys get lost or revoked, the encrypted data can become unrecoverable.","pos":[24295,24408]},{"content":"To help avoid this possibility, the Data Recovery Agent (DRA) certificate lets Windows use an included public key to encrypt the local data, while you maintain the private key that can unencrypt the data.","pos":[24409,24613]},{"content":"For steps about how to create and verify an EFS DRA certificate, see the <bpt id=\"p1\">[</bpt>Create and verify an Encrypting File System (EFS) DRA certificate<ept id=\"p1\">](#create-and-verify-an-encrypting-file-system-efs-dra-certificate)</ept> section of this topic.","pos":[24616,24845]},{"content":"For more info about how to find and export your data recovery certificate, see the <bpt id=\"p1\">[</bpt>Data Recovery and Encrypting File System (EFS)<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=761462)</ept> topic.","pos":[24846,25033]},{"content":"Microsoft Intune: Specify a data recovery certificate for your policy","pos":[25044,25113]},{"content":"Create and verify an Encrypting File System (EFS) DRA certificate","pos":[25153,25218]},{"content":"If you don’t already have an EFS DRA certificate, you’ll need to create and extract one from your system before you can use EDP in your organization.","pos":[25219,25368]},{"content":"For the purposes of this section, we’ll use the file name EFSDRA; however, this name can be replaced with anything that makes sense to you.","pos":[25369,25508]},{"content":"Important","pos":[25513,25522]},{"content":"If you already have an EFS DRA certificate for your organization, you can skip creating a new one.","pos":[25529,25627]},{"content":"Just use your current EFS DRA certificate in your policy.","pos":[25628,25685]},{"content":"To add your EFS DRA certificate to your policy by using Microsoft Intune, see Step 3 in the <bpt id=\"p1\">[</bpt>Choose where apps can access enterprise data<ept id=\"p1\">](#choose-where-apps-can-access-enterprise-data)</ept> section of this topic.","pos":[25686,25894]},{"content":"To manually create an EFS DRA certificate","pos":[25898,25939]},{"content":"On a computer without an EFS DRA certificate installed, open a command prompt with elevated rights, and then navigate to where you want to store the certificate.","pos":[25946,26107]},{"content":"Run this command:","pos":[26113,26130]},{"pos":[26169,26254],"content":"Where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>EFSRA<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> is the name of the .cer and .pfx files that you want to create."},{"content":"When prompted, type and confirm a password to help protect your new Personal Information Exchange (.pfx) file.","pos":[26260,26370]},{"content":"The EFSDRA.cer and EFSDRA.pfx files are created in the location you specified in Step 1.","pos":[26376,26464]},{"content":"Important","pos":[26473,26482]},{"content":"Because these files can be used to decrypt any EDP file, you must protect them accordingly.","pos":[26494,26585]},{"content":"We highly recommend storing them as a public key (PKI) on a smart card with strong protection, stored in a secured physical location.","pos":[26586,26719]},{"pos":[26724,26911],"content":"Add your EFS DRA certificate to your EDP policy by using Step 3 of the <bpt id=\"p1\">[</bpt>Choose where apps can access enterprise data<ept id=\"p1\">](#choose-where-apps-can-access-enterprise-data)</ept> section of this topic."},{"content":"To verify your data recovery certificate is correctly set up on an EDP client computer","pos":[26916,27002]},{"content":"Open an app on your protected app list, and then create and save a file so that it’s encrypted by EDP.","pos":[27008,27110]},{"content":"Open a command prompt with elevated rights, navigate to where you stored the file you just created, and then run this command:","pos":[27116,27242]},{"pos":[27276,27347],"content":"Where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>filename<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> is the name of the file you created in Step 1."},{"pos":[27353,27447],"content":"Make sure that your data recovery certificate is listed in the <bpt id=\"p1\">**</bpt>Recovery Certificates<ept id=\"p1\">**</ept> list."},{"content":"To recover your data using the EFS DRA certificate in a test environment","pos":[27451,27523]},{"content":"Copy your EDP-encrypted file to a location where you have admin access.","pos":[27530,27601]},{"content":"Install the EFSDRA.pfx file, using your password.","pos":[27607,27656]},{"content":"Open a command prompt with elevated rights, navigate to the encrypted file, and then run this command:","pos":[27662,27764]},{"content":"Where <bpt id=\"p1\">*</bpt><ph id=\"ph1\">&amp;lt;</ph>encryptedfile.extension<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">*</ept> is the name of your encrypted file.","pos":[27817,27892]},{"content":"For example, corporatedata.docx.","pos":[27893,27925]},{"content":"Choose your optional EDP-related settings","pos":[27930,27971]},{"content":"After you've decided where your protected apps can access enterprise data on your network, you’ll be asked to decide if you want to add any optional EDP settings.","pos":[27972,28134]},{"content":"To add your optional settings","pos":[28138,28167]},{"content":"Choose to set any or all of the optional EDP-related settings:","pos":[28175,28237]},{"content":"Allow the user to decrypt data that was created or edited by the apps configured above.","pos":[28249,28336]},{"content":"Clicking <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept>, or turning off this setting in Intune, lets your employees right-click to decrypt their protected app data, along with the option to decrypt data in the <bpt id=\"p2\">**</bpt>Save As<ept id=\"p2\">**</ept> box and the <bpt id=\"p3\">**</bpt>Save As<ept id=\"p3\">**</ept> file picker .","pos":[28339,28559]},{"content":"Clicking <bpt id=\"p1\">**</bpt>No<ept id=\"p1\">**</ept> removes the <bpt id=\"p2\">**</bpt>Decrypt<ept id=\"p2\">**</ept> option and saves all data for protected apps as enterprise-encrypted.","pos":[28560,28669]},{"content":"Protect app content when the device is in a locked state for the apps configured above.","pos":[28681,28768]},{"content":"Clicking <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> lets EDP help to secure protected app content when a mobile device is locked.","pos":[28771,28865]},{"content":"We recommend turning this option on to help prevent data leaks from things such as email text that appears on the <bpt id=\"p1\">**</bpt>Lock<ept id=\"p1\">**</ept> screen of a Windows 10 Mobile phone.","pos":[28866,29025]},{"content":"Microsoft Intune: Optional EDP settings","pos":[29037,29076]},{"pos":[29114,29136],"content":"Click <bpt id=\"p1\">**</bpt>Save Policy<ept id=\"p1\">**</ept>."},{"content":"Related topics","pos":[29141,29155]},{"content":"Add multiple apps to your enterprise data protection (EDP) Protected Apps list","pos":[29159,29237]},{"content":"Deploy your enterprise data protection (EDP) policy","pos":[29290,29341]},{"content":"Create and deploy a VPN policy for enterprise data protection (EDP) using Microsoft Intune","pos":[29381,29471]},{"content":"General guidance and best practices for enterprise data protection (EDP)","pos":[29519,29591]}],"content":"---\ntitle: Create an enterprise data protection (EDP) policy using Microsoft Intune (Windows 10)\ndescription: Microsoft Intune helps you create and deploy your enterprise data protection (EDP) policy, including letting you choose your protected apps, your EDP-protection level, and how to find enterprise data on the network.\nms.assetid: 4b307c99-3016-4d6a-9ae7-3bbebd26e721\nms.prod: w10\nms.mktglfcycl: explore\nms.sitesec: library\nms.pagetype: security\nauthor: eross-msft\n---\n\n# Create an enterprise data protection (EDP) policy using Microsoft Intune\n**Applies to:**\n\n-   Windows 10 Insider Preview\n-   Windows 10 Mobile Preview\n\n<span style=\"color:#ED1C24;\">[Some information relates to pre-released product, which may be substantially modified before it's commercially released. Microsoft makes no warranties, express or implied, with respect to the information provided here.]</span>\n\nMicrosoft Intune helps you create and deploy your enterprise data protection (EDP) policy, including letting you choose your protected apps, your EDP-protection level, and how to find enterprise data on the network.\n\n## Important note about the June service update\nWe've received some great feedback from you, our Windows 10 Insider Preview customers, about our enterprise data protection experiences and processes. Because of that feedback, we're delighted to deliver an enhanced apps policy experience with the June service update. This means that when you open an existing enterprise data protection policy after we release the June service update in your test environment, your existing Windows 10 enterprise data protection app rules (formerly in the **Protected Apps** area) will be removed.<p>To prepare for this change, we recommend that you make an immediate backup of your current app rules as they are today, so you can use them to help reconfigure your app rules with the enhanced experience. When you open an existing enterprise data protection policy after we release the June service update, you'll get a dialog box telling you about this change. Click the **OK** button to close the box and to begin reconfiguring your app rules.\n\n![Microsoft Intune: Reconfigure app rules list dialog box](images/edp-intune-app-reconfig-warning.png)\n\nNote that if you exit the **Policy** page before you've saved your new policy, your existing deployments won't be affected. However, if you save the policy without reconfiguring your apps, an updated policy will be deployed to your employees with an empty app rules list.\n \n## Add an EDP policy\nAfter you’ve installed and set up Intune for your organization, you must create an EDP-specific policy.\n\n**To add an EDP policy**\n1.  Open the Intune administration console, and go to the **Policy** node, and then click **Add Policy** from the **Tasks** area.\n\n2.  Go to **Windows**, click the **Enterprise Data Protection (Windows 10 and Mobile and later) policy**, pick the EDP template, click **Create and Deploy a Custom Policy**, and then click **Create Policy**.\n\n    ![Microsoft Intune: Create your new policy from the New Policy screen](images/intune-createnewpolicy.png)\n\n3.  Type a name (required) and an optional description for your policy into the **Name** and **Description** boxes.\n\n    ![Microsoft Intune: Fill out the required Name and optional Description fields](images/intune-namedescription.png)\n\n## Add individual apps to your Protected App list\nDuring the policy-creation process in Intune, you can choose the apps you want to give access to your enterprise data through EDP. Apps included in this list can protect data on behalf of the enterprise and are restricted from copying or moving enterprise data to unprotected apps.\n\nThe steps to add your apps are based on the type of app it is; either a Universal Windows Platform (UWP) app, or a signed Desktop app, also known as a Classic Windows application.\n\n>**Important**<br>EDP-aware apps are expected to prevent enterprise data from going to unprotected network locations and to avoid encrypting personal data. On the other hand, EDP-unaware apps might not respect the corporate network boundary and will encrypt all files they create or modify, meaning that they could encrypt personal data and cause data loss during the revocation process. Care must be taken to get a support statement from the software provider that their app is safe with EDP before adding it to your **Protected App** list.<p>\n\n>**Note**<br>If you want to use **File hash** or **Path** rules, instead of Publisher rules, you must follow the steps in the [Add multiple apps to your enterprise data protection (EDP) Protected Apps list](add-apps-to-protected-list-using-custom-uri.md) topic.\n\n**To add a UWP app**\n\n1.  From the **Configure the following apps to be protected by EDP** table in the **Protected Apps** area, click **Add.**\n\n2.  Click **Universal App**, type the **Publisher Name** and the **Product Name** into the associated boxes, and then click **OK**. If you don't have the publisher or product name, you can find them for both desktop devices and Windows 10 Mobile phones by following these steps.\n\n    **To find the Publisher and Product name values for Microsoft Store apps without installing them**\n\n    1.  Go to the [Windows Store for Business](http://go.microsoft.com/fwlink/p/?LinkID=722910) website, and find your app. For example, Microsoft OneNote.\n    \n        >**Note**<br>If your app is already installed on desktop devices, you can use the AppLocker local security policy MMC snap-in to gather the info for adding the app to the **Protected App** list. For info about how to do this, see the [Add multiple apps to your enterprise data protection (EDP) Protected Apps list](add-apps-to-protected-list-using-custom-uri.md) topic.\n\n    2.  Copy the ID value from the app URL. For example, Microsoft OneNote's ID URL is https://www.microsoft.com/store/apps/onenote/9wzdncrfhvjl, and you'd copy the ID value, `9wzdncrfhvjl`.\n\n    3.  In a browser, run the Store for Business portal web API, to return a JavaScript Object Notation (JSON) file that includes the publisher and product name values. For example, run https://bspmts.mp.microsoft.com/v1/public/catalog/Retail/Products/*9wzdncrfhvjl*/applockerdata, where *9wzdncrfhvjl* is replaced with your ID value.\n    <p>\n    The API runs and opens a text editor with the app details.\n\n        ``` json\n        {\n          \"packageIdentityName\": \"Microsoft.Office.OneNote\",\n          \"publisherCertificateName\": \"CN=Microsoft Corporation, O=Microsoft Corporation, L=Redmond, S=Washington, C=US\"\n        }\n        ```\n    4.  Copy the `publisherCertificateName` value into the **Publisher Name** box and copy the `packageIdentityName` value into the **Product Name** box of Intune.\n    \n    >**Important**<br>The JSON file might also return a `windowsPhoneLegacyId` value for both the **Publisher Name** and **Product Name** boxes. This means that you have an app that’s using a XAP package and that you must set the **Product Name** as `windowsPhoneLegacyId`, and set the **Publisher Name** as “CN=” followed by the `windowsPhoneLegacyId`.\n    <p>For example:<br>\n     ``` json\n        {\n          \"windowsPhoneLegacyId\": \"ca05b3ab-f157-450c-8c49-a1f127f5e71d\",\n        }\n       ```\n       \n    ![Microsoft Intune: Add a UWP app to the Protected Apps list](images/intune-addapps.png)\n\n    **To find the Publisher and Product name values for apps installed on Windows 10 Mobile phones**\n\n    1.  If you need to add mobile apps that aren't distributed through the Store for Business, you must use the **Windows Device Portal** feature.\n    \n        >**Note**<br>Your PC and phone must be on the same wireless network.\n\n    2.  On the Windows Phone, go to **Settings**, choose **Update & security**, and then choose **For developers**.\n\n    3.  In the **For developers** screen, turn on **Developer mode**, turn on **Device Discovery**, and then turn on **Device Portal**.\n\n    4.  Copy the URL in the **Device Portal** area into your device's browser, and then accept the SSL certificate.\n\n    5.  In the **Device discovery** area, press **Pair**, and then enter the PIN into the website from the previous step.\n\n    6.  On the **Apps** tab of the website, you can see details for the running apps, including the publisher and product names.\n    \n    7. Start the app for which you're looking for the publisher and product name values\n\n    8.  Copy the `publisherCertificateName` value and paste it into the **Publisher Name** box and the `packageIdentityName` value into the **Product Name** box of Intune.\n    \n        >**Important**<br>The JSON file might also return a `windowsPhoneLegacyId` value for both the **Publisher Name** and **Product Name** boxes. This means that you have an app that’s using a XAP package and that you must set the **Product Name** as `windowsPhoneLegacyId`, and set the **Publisher Name** as “CN=” followed by the `windowsPhoneLegacyId`.\n    <p>For example:<br>\n     ``` json\n        {\n          \"windowsPhoneLegacyId\": \"ca05b3ab-f157-450c-8c49-a1f127f5e71d\",\n        }\n       ```\n\n**To add a Classic Windows application**\n\n1.  From the **Configure the following apps to be protected by EDP** table in the **Protected Apps** area, click **Add.**\n<p>A dialog box appears, letting you pick whether the app is a **Universal App** or a **Desktop App**.\n\n2.  Click **Desktop App**, pick the options you want (see table), and then click **OK**.\n    <table>\n        <tr>\n            <th>Option</th>\n            <th>Manages</th>\n        </tr>\n        <tr>\n            <td>All fields left as \"*\"</td>\n            <td>All files signed by any publisher. (Not recommended.)</td>\n        </tr>\n        <tr>\n            <td><strong>Publisher</strong> selected</td>\n            <td>All files signed by the named publisher.<p>This might be useful if your company is the publisher and signer of internal line-of-business apps.</td>\n        </tr>\n         <tr>\n            <td><strong>Publisher</strong> and <strong>Product Name</strong> selected</td>\n            <td>All files for the specified product, signed by the named publisher.</td>\n        </tr>  \n         <tr>\n            <td><strong>Publisher</strong>, <strong>Product Name</strong>, and <strong>File Name</strong> selected</td>\n            <td>Any version of the named file or package for the specified product, signed by the named publisher.</td>\n        </tr>\n         <tr>\n            <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, Exactly</strong> selected</td>\n            <td>Specified version of the named file or package for the specified product, signed by the named publisher.</td>\n        </tr>\n         <tr>\n            <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, And above</strong> selected</td>\n            <td>Specified version or newer releases of the named file or package for the specified product, signed by the named publisher.<p>This option is recommended for enlightened apps that weren't previously enlightened.</td>\n        </tr>\n         <tr>\n            <td><strong>Publisher</strong>, <strong>Product Name</strong>, <strong>File Name</strong>, and <strong>File Version, And below</strong> selected</td>\n            <td>Specified version or older releases of the named file or package for the specified product, signed by the named publisher.</td>\n        </tr>                                            \n    </table>\n\nIf you’re unsure about what to include for the publisher, you can run this PowerShell command:\n\n``` ps1\nGet-AppLockerFileInformation -Path \"<path of the exe>\"\n```\nWhere `\"<path_of_the_exe>\"` goes to the location of the app on the device. For example, `Get-AppLockerFileInformation -Path \"C:\\Program Files\\Internet Explorer\\iexplore.exe\"`.\n\nIn this example, you'd get the following info:\n\n``` json\nPath                                          Publisher\n----                                          ---------\n%PROGRAMFILES%\\INTERNET EXPLORER\\IEXPLORE.EXE O=MICROSOFT CORPORATION, L=REDMOND, S=WASHINGTON, C=US\\INTERNET EXPLOR...\n```\nWhere the text, `O=MICROSOFT CORPORATION, L=REDMOND, S=WASHINGTON, C=US` is the publisher name to enter in the **Publisher Name** box.\n\n![Microsoft Intune: Add a Classic Windows app to the Protected Apps list](images/intune-add-desktop-app.png)\n\n## Exempt apps from EDP restrictions\nIf you're running into compatibility issues where your app is incompatible with EDP, but still needs to be used with enterprise data, you can exempt the app from the EDP restrictions. This means that your apps won't include auto-encryption or tagging and won't honor your network restrictions. It also means that your exempted apps might leak.\n\n**To exempt an UWP app**\n\n1.  Follow the **Add a UWP app** steps in the [Add multiple apps to your enterprise data protection (EDP) Protected Apps list](add-apps-to-protected-list-using-custom-uri.md) topic, through to Step 11.\n\n2.  In the **OMA-URI** box at Step 12, type `./Vendor/MSFT/AppLocker/EnterpriseDataProtection/<your_enterprise_name>edpexempt/StoreApp EXE`.<p>Where **edpexempt** is added as a substring, making the app exempt.\n\n3.  Open File Explorer, go to the location where you saved your new XML file, and open it using an XML editor, such as Notepad.\n\n4.  Copy the text that has a **Type** of Appx, within in the **RuleCollection** tags, and then go back to Intune and paste the text into the **Value** box of the **Add or edit OMA-URI Setting** box. For example:\n\n    ``` \n    <RuleCollection Type=\"Appx\" EnforcementMode=\"Enabled\"><your_xml_rules_here></RuleCollection>\n    ```\n    \n5.  Click **OK** to close the **Add or edit OMA-URI Setting** box, and then click **Save Policy**.<p>After saving the policy, you’ll need to deploy it to your employee’s devices. For more info, see the [Deploy your enterprise data protection (EDP) policy](deploy-edp-policy-using-intune.md) topic.\n\n**To exempt a Classic Windows application**\n\n1.  Follow the **Add a Classic Windows application app** steps in the [Add multiple apps to your enterprise data protection (EDP) Protected Apps list](add-apps-to-protected-list-using-custom-uri.md) topic, through to Step 11.\n\n2.  In the **OMA-URI** box at Step 12, type `./Vendor/MSFT/AppLocker/EnterpriseDataProtection/<your_enterprise_name>edpexempt/EXE`.<p>Where **edpexempt** is added as a substring, making the app exempt.\n\n3.  Open File Explorer, go to the location where you saved your new XML file, and open it using an XML editor, such as Notepad.\n\n4.  Copy the text that has a **Type** of EXE, within in the **RuleCollection** tags, and then go back to Intune and paste the text into the **Value** box of the **Add or edit OMA-URI Setting** box. For example:\n\n    ``` \n    <RuleCollection Type=\"Exe\" EnforcementMode=\"Enabled\"><your_xml_rules_here></RuleCollection>\n    ```\n\n5.  Click **OK** to close the **Add or edit OMA-URI Setting** box, and then click **Save Policy**.<p>After saving the policy, you’ll need to deploy it to your employee’s devices. For more info, see the [Deploy your enterprise data protection (EDP) policy](deploy-edp-policy-using-intune.md) topic.\n\n## Manage the EDP protection level for your enterprise data\nAfter you've added the apps you want to protect with EDP, you'll need to apply a management and protection mode.\n\nWe recommend that you start with **Silent** or **Override** while verifying with a small group that you have the right apps on your **Protected Apps** list. After you're done, you can change to your final enforcement policy, either **Override** or **Block**.\n\n<table>\n    <tr>\n        <th>Mode</th>\n        <th>Description</th>\n    </tr>\n    <tr>\n        <td>Block</td>\n        <td>EDP looks for inappropriate data sharing practices and stops the employee from completing the action. This can include sharing info across non-enterprise-protected apps in addition to sharing enterprise data between other people and devices outside of your enterprise.</td>\n    </tr>\n    <tr>\n        <td>Override</td>\n        <td>EDP looks for inappropriate data sharing, warning employees if they do something deemed potentially unsafe. However, this management mode lets the employee override the policy and share the data, logging the action to your audit log, accessible through the [Reporting CSP](http://go.microsoft.com/fwlink/p/?LinkID=746459).</td>\n    </tr>\n    <tr>\n        <td>Silent</td>\n        <td>EDP runs silently, logging inappropriate data sharing, without blocking anything that would’ve been prompted for employee interaction while in Override mode. Unallowed actions, like apps inappropriately trying to access a network resource or EDP-protected data, are still blocked.</td>\n    </tr>\n    <tr>\n        <td>Off</td>\n        <td>EDP is turned off and doesn't help to protect or audit your data.<p>After you turn off EDP, an attempt is made to decrypt any closed EDP-tagged files on the locally attached drives.</td>\n    </tr> \n</table>  \n\n![Microsoft Intune: Add the protection level for your Protected Apps list](images/intune-encryption-level.png)\n\n## Define your enterprise-managed identity domains\nSpecify your company’s enterprise identity, expressed as your primary internet domain. For example, if your company is Contoso, its enterprise identity might be contoso.com. The first listed domain (in this example, contoso.com) is the primary enterprise identity string used to tag files protected by any app on the **Protected App** list.\n\nYou can also specify all the domains owned by your enterprise that are used for user accounts, separating them with the \"|\" character. For example, if Contoso also has some employees with email addresses or user accounts on the fabrikam.com domain, you would use contoso.com|fabrikam.com.\n\nThis list of managed identity domains, along with the primary domain, make up the identity of your managing enterprise. User identities (user@domain) that end in any of the domains on this list, are considered managed.\n\n**To add your primary domain**\n\n-   Type the name of your primary domain into the **Primary domain** field. For example, *contoso.com*.<p>\nIf you have multiple domains, you must separate them with the \"|\" character. For example, `contoso.com|fabrikam.com`.\n\n    ![Microsoft Intune: Add the primary internet domain for your enterprise identity](images/intune-primary-domain.png)\n\n## Choose where apps can access enterprise data\nAfter you've added a protection mode to your apps, you'll need to decide where those apps can access enterprise data on your network.<p>\nThere are no default locations included with EDP, you must add each of your network locations. This area applies to any network endpoint device that gets an IP address in your enterprise’s range and is also bound to one of your enterprise domains, including SMB shares.  Local file system locations should just maintain encryption (for example, on local NTFS, FAT, ExFAT). \n\n>**Important**<br>\n-   Every EDP policy should include policy that defines your enterprise network locations.<p>\n- Classless Inter-Domain Routing (CIDR) notation isn’t supported for EDP configurations.\n\n**To specify where your protected apps can find and send enterprise data on the network**\n\n1.  Add additional network locations your apps can access by clicking **Add**, typing a description into the **Description** box, and then choosing your location type, including:\n    <table>\n        <tr>\n            <th>Network location type</th>\n            <th>Format</th>\n            <th>Description</th>\n        </tr>\n        <tr>\n            <td>Enterprise Cloud Resources</td>\n            <td>**With proxy:**<p>contoso.sharepoint.com,proxy.contoso.com|<br>contoso.visualstudio.com,proxy.contoso.com<p>**Without proxy:**<p>contoso.sharepoint.com|contoso.visualstudio.com</td>\n            <td>Specify the cloud resources to be treated as corporate and protected by EDP.<p>For each cloud resource, you may also optionally specify an internal proxy server that routes your traffic through your Enterprise Internal Proxy Server.<p>If you have multiple resources, you must separate them using the \"|\" delimiter. If you don’t use proxy servers, you must also include the \",\" delimiter just before the \"|\". For example:<p>`URL <,proxy>|URL <,proxy>`<p>If Windows is unable to determine whether an app should be allowed to connect to a network resource, it will automatically block the connection. If instead you want Windows to allow the connections to happen, you can add the `/*AppCompat*/` string to this setting. For example:<p>`URL <,proxy>|URL <,proxy>|/*AppCompat*/`</td>     \n        </tr>\n        <tr>\n            <td>Enterprise Network Domain Names</td>\n            <td>domain1.contoso.com,domain2.contoso.com</td>\n            <td>Specify the DNS suffixes used in your environment. All traffic to the fully-qualified domains appearing in this list will be protected.<p>This setting works with the IP ranges settings to detect whether a network endpoint is enterprise or personal on private networks.<p>If you have multiple resources, you must separate them using the \",\" delimiter.</td>                \n        </tr>\n        <tr>\n            <td>Enterprise Proxy Servers</td>\n            <td>domain1.contoso.com:80;<br>domain2.contoso.com:137</td>\n            <td>Specify your externally-facing proxy server addresses, along with the port through which traffic is allowed and protected with EDP.<p>This list shouldn’t include any servers listed in the Enterprise Internal Proxy Servers list, which are used for EDP-protected traffic.<p>This setting is also required if you use a proxy in your network. If you don't have a proxy server, you might find that enterprise resources are unavailable when a client is behind a proxy, such as when you’re visiting another company and not on that company’s guest network.<p>If you have multiple resources, you must separate them using the \";\" delimiter.</td>                \n        </tr>\n        <tr>\n            <td>Enterprise Internal Proxy Servers</td>\n            <td>proxy1.contoso.com;<br>proxy2.contoso.com</td>\n            <td>Specify the proxy servers your devices will go through to reach your cloud resources.<p>Using this server type indicates that the cloud resources you’re connecting to are enterprise resources.<p>This list shouldn’t include any servers listed in the Enterprise Proxy Servers list, which are used for non-EDP-protected traffic.<p>If you have multiple resources, you must separate them using the \";\" delimiter.</td>                \n        </tr>\n        <tr>\n            <td>Enterprise IPv4 Range</td>\n            <td>**Starting IPv4 Address:** 3.4.0.1<br>**Ending IPv4 Address:** 3.4.255.254<br>**Custom URI:** 3.4.0.1-3.4.255.254,10.0.0.1-10.255.255.254</td>\n            <td>Specify the addresses for a valid IPv4 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.<p>If you have multiple ranges, you must separate them using the \",\" delimiter.</td>\n        </tr>\n        <tr>\n            <td>Enterprise IPv6 Range</td>\n            <td>**Starting IPv6 Address:** 2a01:110::<br>**Ending IPv6 Address:** 2a01:110:7fff:ffff:<br>ffff:ffff:ffff:ffff<br>**Custom URI:** 2a01:110::-2a01:110:7fff:ffff:ffff:ffff:ffff:ffff,<br>fd00::-fdff:ffff:ffff:ffff:ffff:ffff:ffff:ffff</td>\n            <td>Specify the addresses for a valid IPv6 value range within your intranet. These addresses, used with your Enterprise Network Domain Names, define your corporate network boundaries.<p>If you have multiple ranges, you must separate them using the \",\" delimiter.</td>\n        </tr>\n    </table>  \n    \n    ![Microsoft Intune: Choose the primary domain and the other network locations for protected apps](images/intune-networklocation.png)\n\n2.  Add as many locations as you need, and then click **OK**.<p>The **Add or Edit Enterprise Network Locations box** closes.\n\n3.  In the **Use a data recovery certificate in case of data loss** box, click **Browse** to add a data recovery certificate for your policy.<p>After you create and deploy your EDP policy to your employees, Windows will begin to encrypt your corporate data on the employees’ local device drive. If somehow the employees’ local encryption keys get lost or revoked, the encrypted data can become unrecoverable. To help avoid this possibility, the Data Recovery Agent (DRA) certificate lets Windows use an included public key to encrypt the local data, while you maintain the private key that can unencrypt the data.<p>For steps about how to create and verify an EFS DRA certificate, see the [Create and verify an Encrypting File System (EFS) DRA certificate](#create-and-verify-an-encrypting-file-system-efs-dra-certificate) section of this topic. For more info about how to find and export your data recovery certificate, see the [Data Recovery and Encrypting File System (EFS)](http://go.microsoft.com/fwlink/p/?LinkId=761462) topic.<p>\n\n    ![Microsoft Intune: Specify a data recovery certificate for your policy](images/intune-data-recovery.png)\n\n### Create and verify an Encrypting File System (EFS) DRA certificate\nIf you don’t already have an EFS DRA certificate, you’ll need to create and extract one from your system before you can use EDP in your organization. For the purposes of this section, we’ll use the file name EFSDRA; however, this name can be replaced with anything that makes sense to you.\n\n>**Important**<br>\nIf you already have an EFS DRA certificate for your organization, you can skip creating a new one. Just use your current EFS DRA certificate in your policy. To add your EFS DRA certificate to your policy by using Microsoft Intune, see Step 3 in the [Choose where apps can access enterprise data](#choose-where-apps-can-access-enterprise-data) section of this topic.\n\n**To manually create an EFS DRA certificate**\n1.  On a computer without an EFS DRA certificate installed, open a command prompt with elevated rights, and then navigate to where you want to store the certificate.\n\n2.  Run this command:\n    \n    `cipher /r:<EFSRA>`\n    \n    Where *&lt;EFSRA&gt;* is the name of the .cer and .pfx files that you want to create.\n\n3.  When prompted, type and confirm a password to help protect your new Personal Information Exchange (.pfx) file.\n\n    The EFSDRA.cer and EFSDRA.pfx files are created in the location you specified in Step 1.\n\n    >**Important**<br> \n    Because these files can be used to decrypt any EDP file, you must protect them accordingly. We highly recommend storing them as a public key (PKI) on a smart card with strong protection, stored in a secured physical location.\n\n4. Add your EFS DRA certificate to your EDP policy by using Step 3 of the [Choose where apps can access enterprise data](#choose-where-apps-can-access-enterprise-data) section of this topic. \n\n**To verify your data recovery certificate is correctly set up on an EDP client computer**\n1. Open an app on your protected app list, and then create and save a file so that it’s encrypted by EDP.\n\n2.  Open a command prompt with elevated rights, navigate to where you stored the file you just created, and then run this command:\n\n    `cipher /c <filename>`\n\n    Where *&lt;filename&gt;* is the name of the file you created in Step 1.\n\n3.  Make sure that your data recovery certificate is listed in the **Recovery Certificates** list.\n\n**To recover your data using the EFS DRA certificate in a test environment**\n1.  Copy your EDP-encrypted file to a location where you have admin access.\n\n2.  Install the EFSDRA.pfx file, using your password.\n\n3.  Open a command prompt with elevated rights, navigate to the encrypted file, and then run this command:\n\n    `cipher /d <encryptedfile.extension>`\n    \n    Where *&lt;encryptedfile.extension&gt;* is the name of your encrypted file. For example, corporatedata.docx.\n\n## Choose your optional EDP-related settings\nAfter you've decided where your protected apps can access enterprise data on your network, you’ll be asked to decide if you want to add any optional EDP settings.\n\n**To add your optional settings**\n\n1.  Choose to set any or all of the optional EDP-related settings:\n\n    -   **Allow the user to decrypt data that was created or edited by the apps configured above.** Clicking **Yes**, or turning off this setting in Intune, lets your employees right-click to decrypt their protected app data, along with the option to decrypt data in the **Save As** box and the **Save As** file picker . Clicking **No** removes the **Decrypt** option and saves all data for protected apps as enterprise-encrypted.\n\n    -   **Protect app content when the device is in a locked state for the apps configured above.** Clicking **Yes** lets EDP help to secure protected app content when a mobile device is locked. We recommend turning this option on to help prevent data leaks from things such as email text that appears on the **Lock** screen of a Windows 10 Mobile phone.\n\n        ![Microsoft Intune: Optional EDP settings](images/intune-edpsettings.png)\n\n2.  Click **Save Policy**.\n\n## Related topics\n- [Add multiple apps to your enterprise data protection (EDP) Protected Apps list](add-apps-to-protected-list-using-custom-uri.md)\n- [Deploy your enterprise data protection (EDP) policy](deploy-edp-policy-using-intune.md)\n- [Create and deploy a VPN policy for enterprise data protection (EDP) using Microsoft Intune](create-vpn-and-edp-policy-using-intune.md)\n- [General guidance and best practices for enterprise data protection (EDP)](guidance-and-best-practices-edp.md)\n\n\n\n \n\n \n\n\n\n\n\n"}