{"nodes":[{"content":"How to Deploy the App-V Databases by Using SQL Scripts","pos":[11,65]},{"content":"How to Deploy the App-V Databases by Using SQL Scripts","pos":[79,133]},{"content":"How to Deploy the App-V Databases by Using SQL Scripts","pos":[308,362]},{"content":"Use the following instructions to use SQL scripts, rather than the Windows Installer, to:","pos":[365,454]},{"content":"Install the App-V 5.1 databases","pos":[460,491]},{"content":"Upgrade the App-V databases to a later version","pos":[497,543]},{"content":"Note","pos":[547,551]},{"content":"If you have already deployed the App-V 5.0 SP3 database, the SQL scripts are not required to upgrade to App-V 5.1.","pos":[556,670]},{"content":"How to install the App-V databases by using SQL scripts","pos":[677,732]},{"content":"Before you install the database scripts, review and keep a copy of the App-V license terms.","pos":[740,831]},{"content":"By running the database scripts, you are agreeing to the license terms.","pos":[832,903]},{"content":"If you do not accept them, you should not use this software.","pos":[904,964]},{"pos":[970,1060],"content":"Copy the <bpt id=\"p1\">**</bpt>appv<ph id=\"ph1\">\\_</ph>server<ph id=\"ph2\">\\_</ph>setup.exe<ept id=\"p1\">**</ept> from the App-V release media to a temporary location."},{"pos":[1066,1190],"content":"From a command prompt, run <bpt id=\"p1\">**</bpt>appv<ph id=\"ph1\">\\_</ph>server<ph id=\"ph2\">\\_</ph>setup.exe<ept id=\"p1\">**</ept> and specify a temporary location for extracting the database scripts."},{"content":"Example: appv<ph id=\"ph1\">\\_</ph>server<ph id=\"ph2\">\\_</ph>setup.exe /layout c:<ph id=\"ph3\">\\\\&amp;lt;</ph>temporary location path","pos":[1196,1268]},{"pos":[1278,1436],"content":"Browse to the temporary location that you created, open the extracted <bpt id=\"p1\">**</bpt>DatabaseScripts<ept id=\"p1\">**</ept> folder, and review the appropriate Readme.txt file for instructions:"},{"pos":[1442,2012],"content":"<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Database</th>\n<th align=\"left\">Location of Readme.txt file to use</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p>Management database</p></td>\n<td align=\"left\"><p>ManagementDatabase subfolder</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p>Reporting database</p></td>\n<td align=\"left\"><p>ReportingDatabase subfolder</p></td>\n</tr>\n</tbody>\n</table>","leadings":["","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    ","    "],"nodes":[{"content":"Database","pos":[116,124]},{"content":"Location of Readme.txt file to use","pos":[147,181]},{"content":"Management database","pos":[247,266]},{"content":"ManagementDatabase subfolder","pos":[296,324]},{"content":"Reporting database","pos":[378,396]},{"content":"ReportingDatabase subfolder","pos":[426,453]}]},{"pos":[2025,2273],"content":"**Caution**  \nThe readme.txt file in the ManagementDatabase subfolder is out of date. The information in the updated readme files below is the most current and should supersede the readme information provided in the **DatabaseScripts** folders.","leadings":["","    "],"nodes":[{"content":"Caution","pos":[2,9]},{"content":"The readme.txt file in the ManagementDatabase subfolder is out of date. The information in the updated readme files below is the most current and should supersede the readme information provided in the **DatabaseScripts** folders.","pos":[14,244],"nodes":[{"content":"The readme.txt file in the ManagementDatabase subfolder is out of date.","pos":[0,71]},{"content":"The information in the updated readme files below is the most current and should supersede the readme information provided in the <bpt id=\"p1\">**</bpt>DatabaseScripts<ept id=\"p1\">**</ept> folders.","pos":[72,230]}]}]},{"pos":[2286,2426],"content":"**Important**  \nThe InsertVersionInfo.sql script is not required for versions of the App-V management database later than App-V 5.0 SP3.","leadings":["","    "],"nodes":[{"content":"Important","pos":[2,11]},{"content":"The InsertVersionInfo.sql script is not required for versions of the App-V management database later than App-V 5.0 SP3.","pos":[16,136]}]},{"content":"The Permissions.sql script should be updated according to <bpt id=\"p1\">**</bpt>Step 2<ept id=\"p1\">**</ept> in <bpt id=\"p2\">[</bpt>KB article 3031340<ept id=\"p2\">](https://support.microsoft.com/kb/3031340)</ept>.","pos":[2432,2567]},{"content":"<bpt id=\"p1\">**</bpt>Step 1<ept id=\"p1\">**</ept> is not required for versions of App-V later than App-V 5.0 SP3.","pos":[2568,2642]},{"content":"Updated management database README file content","pos":[2653,2700]},{"content":"Updated reporting database README file content","pos":[4735,4781]},{"content":"<bpt id=\"p1\">**</bpt>Got a suggestion for App-V<ept id=\"p1\">**</ept>?","pos":[7409,7440]},{"content":"Add or vote on suggestions <bpt id=\"p1\">[</bpt>here<ept id=\"p1\">](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization)</ept>.","pos":[7441,7553]},{"content":"Got an App-V issue?","pos":[7556,7575]},{"content":"Use the <bpt id=\"p1\">[</bpt>App-V TechNet Forum<ept id=\"p1\">](https://social.technet.microsoft.com/Forums/home?forum=mdopappv)</ept>.","pos":[7578,7673]},{"content":"Related topics","pos":[7678,7692]},{"content":"Deploying the App-V 5.1 Server","pos":[7696,7726]},{"content":"How to Deploy the App-V 5.1 Server","pos":[7764,7798]}],"content":"---\ntitle: How to Deploy the App-V Databases by Using SQL Scripts\ndescription: How to Deploy the App-V Databases by Using SQL Scripts\nauthor: jamiejdt\nms.assetid: 1183b1bc-d4d7-4914-a049-06e82bf2d96d\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w10\n---\n\n\n# How to Deploy the App-V Databases by Using SQL Scripts\n\n\nUse the following instructions to use SQL scripts, rather than the Windows Installer, to:\n\n-   Install the App-V 5.1 databases\n\n-   Upgrade the App-V databases to a later version\n\n**Note**  \nIf you have already deployed the App-V 5.0 SP3 database, the SQL scripts are not required to upgrade to App-V 5.1.\n\n \n\n**How to install the App-V databases by using SQL scripts**\n\n1.  Before you install the database scripts, review and keep a copy of the App-V license terms. By running the database scripts, you are agreeing to the license terms. If you do not accept them, you should not use this software.\n\n2.  Copy the **appv\\_server\\_setup.exe** from the App-V release media to a temporary location.\n\n3.  From a command prompt, run **appv\\_server\\_setup.exe** and specify a temporary location for extracting the database scripts.\n\n    Example: appv\\_server\\_setup.exe /layout c:\\\\&lt;temporary location path&gt;\n\n4.  Browse to the temporary location that you created, open the extracted **DatabaseScripts** folder, and review the appropriate Readme.txt file for instructions:\n\n    <table>\n    <colgroup>\n    <col width=\"50%\" />\n    <col width=\"50%\" />\n    </colgroup>\n    <thead>\n    <tr class=\"header\">\n    <th align=\"left\">Database</th>\n    <th align=\"left\">Location of Readme.txt file to use</th>\n    </tr>\n    </thead>\n    <tbody>\n    <tr class=\"odd\">\n    <td align=\"left\"><p>Management database</p></td>\n    <td align=\"left\"><p>ManagementDatabase subfolder</p></td>\n    </tr>\n    <tr class=\"even\">\n    <td align=\"left\"><p>Reporting database</p></td>\n    <td align=\"left\"><p>ReportingDatabase subfolder</p></td>\n    </tr>\n    </tbody>\n    </table>\n\n     \n\n    **Caution**  \n    The readme.txt file in the ManagementDatabase subfolder is out of date. The information in the updated readme files below is the most current and should supersede the readme information provided in the **DatabaseScripts** folders.\n\n     \n\n    **Important**  \n    The InsertVersionInfo.sql script is not required for versions of the App-V management database later than App-V 5.0 SP3.\n\n    The Permissions.sql script should be updated according to **Step 2** in [KB article 3031340](https://support.microsoft.com/kb/3031340). **Step 1** is not required for versions of App-V later than App-V 5.0 SP3.\n\n     \n\n**Updated management database README file content**\n\n``` syntax\n******************************************************************\nBefore you install and use the Application Virtualization Database Scripts you must:\n1.Review the Microsoft Application Virtualization Server 5.0 license terms.\n2.Print and retain a copy of the license terms for your records.\nBy running the Microsoft Application Virtualization Database Scripts you agree to such license terms.  If you do not accept them, do not use the software.\n******************************************************************\n\n\nSteps to install \"AppVManagement\" schema in SQL SERVER.\n\n\n## PREREQUISITES:\n\n 1. Review the installation package.  The following files MUST exist:\n\n    SQL files\n    ---------\n    Database.sql\n    CreateTables.sql\n    CreateStoredProcs.sql\n    UpdateTables.sql\n    Permissions.sql\n\n 2. Ensure the target SQL Server instance and SQL Server Agent service are running.\n\n 3. If you are not running the scripts directly on the server, ensure the \n    necessary SQL Server client software is installed and available from\n    the specified location.  Specifically, the \"osql\" command must\n##     be supported for these scripts to run.\n\n\n\n## PREPARATION:\n\n 1. Review the database.sql file and modify as necessary.  Although the\n    defaults are likely sufficient, it is suggested that the following\n    settings be reviewed:\n\n    DATABASE - ensure name is satisfactory - default is \"AppVManagement\".   \n\n 2. Review the Permissions.sql file and provide all the necessary account information\n    for setting up read and write access on the database. Note: Default settings\n##     in the file will not work.\n\n\n\n## INSTALLATION:\n\n 1. Run the database.sql against the \"master\" database.  Your user \n    credential must have the ability to create databases.\n    This script will create the database.\n\n 2. Run the following scripts against the \"AppVManagement\" database using the \n    same account as above in order.\n\n    CreateTables.sql\n    CreateStoredProcs.sql\n    UpdateTables.sql\n##     Permissions.sql \n\n```\n\n**Updated reporting database README file content**\n\n``` syntax\n******************************************************************\nBefore you install and use the Application Virtualization Database Scripts you must:\n1.Review the Microsoft Application Virtualization Server 5.0 license terms.\n2.Print and retain a copy of the license terms for your records.\nBy running the Microsoft Application Virtualization Database Scripts you agree to such license terms.  If you do not accept them, do not use the software.\n******************************************************************\n\nSteps to install \"AppVReporting\" schema in SQL SERVER.\n\n\n## PREREQUISITES:\n\n 1. Review the installation package.  The following files MUST exist:\n\n    SQL files\n    ---------\n    Database.sql\n    UpgradeDatabase.sql\n    CreateTables.sql\n    CreateReportingStoredProcs.sql\n    CreateStoredProcs.sql\n    CreateViews.sql\n    InsertVersionInfo.sql\n    Permissions.sql\n    ScheduleReportingJob.sql\n\n 2. Ensure the target SQL Server instance and SQL Server Agent service are running.\n\n 3. If you are not running the scripts directly on the server, ensure the \n    necessary SQL Server client software is installed and executable from\n    the location you have chosen.  Specifically, the \"osql\" command must\n##     be supported for these scripts to run.\n\n\n\n## PREPARATION:\n\n 1. Review the database.sql file and modify as necessary.  Although the\n    defaults are likely sufficient, it is suggested that the following\n    settings be reviewed:\n\n    DATABASE - ensure name is satisfactory - default is \"AppVReporting\".   \n\n 2. Review the Permissions.sql file and provide all the necessary account information\n    for setting up read and write access on the database. Note: Default settings\n    in the file will not work.\n\n 3. Review the ScheduleReportingJob.sql file and make sure that the stored proc schedule\n    time is acceptable. The default stored proc schedule time is at 12.01 AM (line 84). \n    If this time is not suitable, you can change this to a more suitable time. The time is\n##     in the format HHMMSS.\n\n\n\n## INSTALLATION:\n\n 1. Run the database.sql against the \"master\" database.  Your user \n    credential must have the ability to create databases.\n    This script will create the database.\n\n 2. If upgrading the database, run UpgradeDatabase.sql This will upgrade database schema.\n\n 2. Run the following scripts against the \"AppVReporting\" database using the \n    same account as above in order.\n    \n    CreateTables.sql\n    CreateReportingStoredProcs.sql\n    CreateStoredProcs.sql\n    CreateViews.sql\n    InsertVersionInfo.sql\n    Permissions.sql\n##     ScheduleReportingJob.sql\n\n```\n\n**Got a suggestion for App-V**? Add or vote on suggestions [here](http://appv.uservoice.com/forums/280448-microsoft-application-virtualization). **Got an App-V issue?** Use the [App-V TechNet Forum](https://social.technet.microsoft.com/Forums/home?forum=mdopappv).\n\n## Related topics\n\n\n[Deploying the App-V 5.1 Server](deploying-the-app-v-51-server.md)\n\n[How to Deploy the App-V 5.1 Server](how-to-deploy-the-app-v-51-server.md)\n\n \n\n \n\n\n\n\n\n"}