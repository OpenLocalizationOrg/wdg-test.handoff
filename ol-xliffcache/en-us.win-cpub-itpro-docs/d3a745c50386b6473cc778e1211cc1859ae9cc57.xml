{"nodes":[{"content":"Network security Allow Local System to use computer identity for NTLM (Windows 10)","pos":[11,93]},{"content":"Describes the location, values, policy management, and security considerations for the Network security Allow Local System to use computer identity for NTLM security policy setting.","pos":[107,288]},{"content":"Network security: Allow Local System to use computer identity for NTLM","pos":[444,514]},{"content":"Applies to","pos":[518,528]},{"content":"Windows 10","pos":[535,545]},{"pos":[547,733],"content":"Describes the location, values, policy management, and security considerations for the <bpt id=\"p1\">**</bpt>Network security: Allow Local System to use computer identity for NTLM<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[738,747]},{"content":"When services connect to devices that are running versions of the Windows operating system earlier than Windows Vista or Windows Server 2008, services that run as Local System and use SPNEGO (Negotiate) that revert to NTLM will authenticate anonymously.","pos":[749,1002]},{"content":"In Windows Server 2008 R2 and Windows 7 and later, if a service connects to a computer running Windows Server 2008 or Windows Vista, the system service uses the computer identity.","pos":[1003,1182]},{"content":"When a service connects with the device identity, signing and encryption are supported to provide data protection.","pos":[1184,1298]},{"content":"(When a service connects anonymously, a system-generated session key is created, which provides no protection, but it allows applications to sign and encrypt data without errors.","pos":[1299,1477]},{"content":"Anonymous authentication uses a NULL session, which is a session with a server in which no user authentication is performed; and therefore, anonymous access is allowed.)","pos":[1478,1647]},{"content":"Possible values","pos":[1653,1668]},{"content":"Setting","pos":[1672,1679]},{"content":"Windows Server 2008 and Windows Vista","pos":[1682,1719]},{"content":"At least Windows Server 2008 R2 and Windows 7","pos":[1722,1767]},{"content":"Enabled","pos":[1782,1789]},{"content":"Services running as Local System that use Negotiate will use the computer identity.","pos":[1792,1875]},{"content":"This might cause some authentication requests between Windows operating systems to fail and log an error.","pos":[1876,1981]},{"content":"Services running as Local System that use Negotiate will use the computer identity.","pos":[1983,2066]},{"content":"This is the default behavior.","pos":[2067,2096]},{"content":"Disabled","pos":[2101,2109]},{"content":"Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously.","pos":[2111,2231]},{"content":"This is the default behavior.","pos":[2232,2261]},{"content":"Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously.","pos":[2263,2383]},{"content":"Neither","pos":[2386,2393]},{"content":"Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously.","pos":[2394,2514]},{"content":"Services running as Local System that use Negotiate will use the computer identity.","pos":[2517,2600]},{"content":"This might cause some authentication requests between Windows operating systems to fail and log an error.","pos":[2601,2706]},{"content":"Location","pos":[2715,2723]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[2725,2818]},{"content":"Default values","pos":[2823,2837]},{"content":"The following table lists the actual and effective default values for this policy.","pos":[2839,2921]},{"content":"Default values are also listed on the policyâ€™s property page.","pos":[2922,2983]},{"content":"Server type or Group Policy object (GPO)","pos":[2987,3027]},{"content":"Default value","pos":[3030,3043]},{"content":"Default domain policy","pos":[3058,3079]},{"content":"Not defined","pos":[3081,3092]},{"content":"Default domain controller policy","pos":[3097,3129]},{"content":"Not defined","pos":[3132,3143]},{"content":"Stand-alone server default settings","pos":[3148,3183]},{"content":"Not defined","pos":[3186,3197]},{"content":"Domain controller effective default settings","pos":[3202,3246]},{"content":"Not applicable","pos":[3249,3263]},{"content":"Member server effective default settings","pos":[3268,3308]},{"content":"Not applicable","pos":[3311,3325]},{"content":"Effective GPO default settings on client computers","pos":[3330,3380]},{"content":"Not defined","pos":[3383,3394]},{"content":"Policy management","pos":[3402,3419]},{"content":"This section describes features and tools that are available to help you manage this policy.","pos":[3421,3513]},{"content":"Restart requirement","pos":[3519,3538]},{"content":"None.","pos":[3540,3545]},{"content":"Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.","pos":[3546,3675]},{"content":"Policy conflict considerations","pos":[3681,3711]},{"content":"The policy <bpt id=\"p1\">[</bpt>Network security: Allow LocalSystem NULL session fallback<ept id=\"p1\">](network-security-allow-localsystem-null-session-fallback.md)</ept>, if enabled, will allow NTLM or Kerberos authentication to be used when a system service attempts authentication.","pos":[3713,3958]},{"content":"This will increase the success of interoperability at the expense of security.","pos":[3959,4037]},{"content":"The anonymous authentication behavior is different for Windows Server 2008 and Windows Vista than later versions of Windows.","pos":[4039,4163]},{"content":"Configuring and applying this policy setting on those systems might not produce the same results.","pos":[4164,4261]},{"content":"Group Policy","pos":[4267,4279]},{"content":"This policy setting can be configured by using the Group Policy Management Console (GPMC) to be distributed through Group Policy Objects (GPOs).","pos":[4281,4425]},{"content":"If this policy is not contained in a distributed GPO, this policy can be configured on the local computer by using the Local Security Policy snap-in.","pos":[4426,4575]},{"content":"Security considerations","pos":[4580,4603]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[4605,4799]},{"content":"Vulnerability","pos":[4805,4818]},{"content":"When a service connects to computers running versions of Windows earlier than Windows Vista or Windows Server 2008, services that run as Local System and use SPNEGO (Negotiate) that revert to NTLM will use NULL session.","pos":[4820,5039]},{"content":"In Windows Server 2008 R2 and Windows 7 and later, if a service connects to a computer running Windows Server 2008 or Windows Vista, the system service uses the computer identity.","pos":[5040,5219]},{"content":"When a service connects with the computer identity, signing and encryption are supported to provide data protection.","pos":[5221,5337]},{"content":"When a service connects with a NULL session, a system-generated session key is created, which provides no protection, but it allows applications to sign and encrypt data without errors.","pos":[5338,5523]},{"content":"Countermeasure","pos":[5529,5543]},{"pos":[5545,5783],"content":"You can configure the <bpt id=\"p1\">**</bpt>Network security: Allow Local System to use computer identity for NTLM<ept id=\"p1\">**</ept> security policy setting to allow Local System services that use Negotiate to use the computer identity when reverting to NTLM authentication."},{"content":"Potential impact","pos":[5789,5805]},{"content":"If you do not configure this policy setting on Windows Server 2008 and Windows Vista, services running as Local System that use the default credentials will use the NULL session and revert to NTLM authentication for Windows operating systems earlier than Windows Vista or Windows Server 2008.","pos":[5807,6099]},{"content":"Beginning with Windows Server 2008 R2 and Windows 7, the system allows Local System services that use Negotiate to use the computer identity when reverting to NTLM authentication.","pos":[6100,6279]},{"content":"Related topics","pos":[6284,6298]},{"content":"Security Options","pos":[6303,6319]}],"content":"---\ntitle: Network security Allow Local System to use computer identity for NTLM (Windows 10)\ndescription: Describes the location, values, policy management, and security considerations for the Network security Allow Local System to use computer identity for NTLM security policy setting.\nms.assetid: c46a658d-b7a4-4139-b7ea-b9268c240053\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Network security: Allow Local System to use computer identity for NTLM\n\n**Applies to**\n-   Windows 10\n\nDescribes the location, values, policy management, and security considerations for the **Network security: Allow Local System to use computer identity for NTLM** security policy setting.\n\n## Reference\n\nWhen services connect to devices that are running versions of the Windows operating system earlier than Windows Vista or Windows Server 2008, services that run as Local System and use SPNEGO (Negotiate) that revert to NTLM will authenticate anonymously. In Windows Server 2008 R2 and Windows 7 and later, if a service connects to a computer running Windows Server 2008 or Windows Vista, the system service uses the computer identity.\n\nWhen a service connects with the device identity, signing and encryption are supported to provide data protection. (When a service connects anonymously, a system-generated session key is created, which provides no protection, but it allows applications to sign and encrypt data without errors. Anonymous authentication uses a NULL session, which is a session with a server in which no user authentication is performed; and therefore, anonymous access is allowed.)\n\n### Possible values\n\n| Setting | Windows Server 2008 and Windows Vista | At least Windows Server 2008 R2 and Windows 7 |\n| - | - |\n| Enabled | Services running as Local System that use Negotiate will use the computer identity. This might cause some authentication requests between Windows operating systems to fail and log an error.| Services running as Local System that use Negotiate will use the computer identity. This is the default behavior. |\n| Disabled| Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously. This is the default behavior.| Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously.|\n|Neither|Services running as Local System that use Negotiate when reverting to NTLM authentication will authenticate anonymously. | Services running as Local System that use Negotiate will use the computer identity. This might cause some authentication requests between Windows operating systems to fail and log an error.| \n \n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n### Default values\n\nThe following table lists the actual and effective default values for this policy. Default values are also listed on the policyâ€™s property page.\n\n| Server type or Group Policy object (GPO) | Default value |\n| - | - |\n| Default domain policy| Not defined| \n| Default domain controller policy | Not defined| \n| Stand-alone server default settings | Not defined| \n| Domain controller effective default settings | Not applicable| \n| Member server effective default settings | Not applicable| \n| Effective GPO default settings on client computers | Not defined| \n \n## Policy management\n\nThis section describes features and tools that are available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a device restart when they are saved locally or distributed through Group Policy.\n\n### Policy conflict considerations\n\nThe policy [Network security: Allow LocalSystem NULL session fallback](network-security-allow-localsystem-null-session-fallback.md), if enabled, will allow NTLM or Kerberos authentication to be used when a system service attempts authentication. This will increase the success of interoperability at the expense of security.\n\nThe anonymous authentication behavior is different for Windows Server 2008 and Windows Vista than later versions of Windows. Configuring and applying this policy setting on those systems might not produce the same results.\n\n### Group Policy\n\nThis policy setting can be configured by using the Group Policy Management Console (GPMC) to be distributed through Group Policy Objects (GPOs). If this policy is not contained in a distributed GPO, this policy can be configured on the local computer by using the Local Security Policy snap-in.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nWhen a service connects to computers running versions of Windows earlier than Windows Vista or Windows Server 2008, services that run as Local System and use SPNEGO (Negotiate) that revert to NTLM will use NULL session. In Windows Server 2008 R2 and Windows 7 and later, if a service connects to a computer running Windows Server 2008 or Windows Vista, the system service uses the computer identity.\n\nWhen a service connects with the computer identity, signing and encryption are supported to provide data protection. When a service connects with a NULL session, a system-generated session key is created, which provides no protection, but it allows applications to sign and encrypt data without errors.\n\n### Countermeasure\n\nYou can configure the **Network security: Allow Local System to use computer identity for NTLM** security policy setting to allow Local System services that use Negotiate to use the computer identity when reverting to NTLM authentication.\n\n### Potential impact\n\nIf you do not configure this policy setting on Windows Server 2008 and Windows Vista, services running as Local System that use the default credentials will use the NULL session and revert to NTLM authentication for Windows operating systems earlier than Windows Vista or Windows Server 2008.\nBeginning with Windows Server 2008 R2 and Windows 7, the system allows Local System services that use Negotiate to use the computer identity when reverting to NTLM authentication.\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}