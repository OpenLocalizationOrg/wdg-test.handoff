{"nodes":[{"content":"Finalize the operating system configuration for Windows 10 deployment with Configuration Manager (Windows 10)","pos":[11,120]},{"content":"This topic walks you through the steps to finalize the configuration of your Windows 10 operating deployment, which includes enablement of the optional Microsoft Deployment Toolkit (MDT) monitoring for Microsoft System Center 2012 R2 Configuration Manager, logs folder creation, rules configuration, content distribution, and deployment of the previously created task sequence.","pos":[134,511]},{"content":"Finalize the operating system configuration for Windows 10 deployment with Configuration Manager","pos":[678,774]},{"content":"Applies to","pos":[779,789]},{"content":"Windows 10","pos":[797,807]},{"content":"This topic walks you through the steps to finalize the configuration of your Windows 10 operating deployment, which includes enablement of the optional Microsoft Deployment Toolkit (MDT) monitoring for Microsoft System Center 2012 R2 Configuration Manager, logs folder creation, rules configuration, content distribution, and deployment of the previously created task sequence.","pos":[809,1186]},{"content":"For the purposes of this topic, we will use two machines: DC01 and CM01.","pos":[1188,1260]},{"content":"DC01 is a domain controller and CM01 is a machine running Windows Server 2012 R2 Standard.","pos":[1261,1351]},{"content":"Both are members of the domain contoso.com for the fictitious Contoso Corporation.","pos":[1352,1434]},{"content":"For more details on the setup for this topic, please see <bpt id=\"p1\">[</bpt>Deploy Windows 10 with the Microsoft Deployment Toolkit<ept id=\"p1\">](deploy-windows-10-with-the-microsoft-deployment-toolkit.md)</ept>.","pos":[1435,1610]},{"pos":[1641,1662],"content":"Enable MDT monitoring"},{"content":"This section will walk you through the process of creating the E:<ph id=\"ph1\">\\\\</ph>MDTProduction deployment share using the MDT Deployment Workbench to enable monitoring for Configuration Manager.","pos":[1665,1845]},{"content":"On CM01, using the Deployment Workbench, right-click <bpt id=\"p1\">**</bpt>Deployment Shares<ept id=\"p1\">**</ept> and select <bpt id=\"p2\">**</bpt>New Deployment Share<ept id=\"p2\">**</ept>.","pos":[1851,1962]},{"content":"Use the following settings for the New Deployment Share Wizard:","pos":[1963,2026]},{"content":"Deployment share path: E:<ph id=\"ph1\">\\\\</ph>MDTProduction","pos":[2036,2076]},{"content":"Share name: MDTProduction$","pos":[2086,2112]},{"content":"Deployment share description: MDT Production","pos":[2122,2166]},{"content":"Options: <ph id=\"ph1\">&amp;lt;</ph>default settings","pos":[2176,2205]},{"content":"Right-click the <bpt id=\"p1\">**</bpt>MDT Production<ept id=\"p1\">**</ept> deployment share, and select <bpt id=\"p2\">**</bpt>Properties<ept id=\"p2\">**</ept>.","pos":[2215,2294]},{"content":"In the <bpt id=\"p1\">**</bpt>Monitoring<ept id=\"p1\">**</ept> tab, select the <bpt id=\"p2\">**</bpt>Enable monitoring for this deployment share<ept id=\"p2\">**</ept> check box, and click <bpt id=\"p3\">**</bpt>OK<ept id=\"p3\">**</ept>.","pos":[2295,2409]},{"content":"figure 26","pos":[2413,2422]},{"content":"Figure 26.","pos":[2450,2460]},{"content":"Enabling MDT monitoring for Configuration Manager.","pos":[2461,2511]},{"pos":[2542,2574],"content":"Create and share the Logs folder"},{"content":"To support additional server-side logging in Configuration Manager, you create and share the E:<ph id=\"ph1\">\\\\</ph>Logs folder on CM01 using Windows PowerShell.","pos":[2577,2719]},{"content":"Then in the next step, you enable server-side logging by modifying the CustomSettings.ini file used by the Configuration Manager task sequence.","pos":[2720,2863]},{"content":"On CM01, start an elevated Windows PowerShell prompt (run as Administrator).","pos":[2869,2945]},{"pos":[2951,3014],"content":"Type the following commands, pressing <bpt id=\"p1\">**</bpt>Enter<ept id=\"p1\">**</ept> after each one:"},{"pos":[3231,3284],"content":"Configure the rules (Windows 10 x64 Settings package)"},{"content":"This section will show you how to configure the rules (the Windows 10 x64 Settings package) to support the Contoso environment.","pos":[3287,3414]},{"pos":[3420,3529],"content":"On CM01, using File Explorer, navigate to the <bpt id=\"p1\">**</bpt>E:<ph id=\"ph1\">\\\\</ph>Sources<ph id=\"ph2\">\\\\</ph>OSD<ph id=\"ph3\">\\\\</ph>Settings<ph id=\"ph4\">\\\\</ph>Windows 10 x64 Settings<ept id=\"p1\">**</ept> folder."},{"content":"Using Notepad, edit the CustomSetting.ini file with the following settings:","pos":[3535,3610]},{"content":"figure 27","pos":[4088,4097]},{"content":"Figure 27.","pos":[4135,4145]},{"content":"The Settings package, holding the rules and the Unattend.xml template used during deployment","pos":[4146,4238]},{"pos":[4244,4421],"content":"Update the distribution point for the <bpt id=\"p1\">**</bpt>Windows 10 x64 Settings<ept id=\"p1\">**</ept> package by right-clicking the <bpt id=\"p2\">**</bpt>Windows 10 x64 Settings<ept id=\"p2\">**</ept> package and selecting <bpt id=\"p3\">**</bpt>Update Distribution Points<ept id=\"p3\">**</ept>."},{"content":"Note","pos":[4425,4429]},{"content":"Although you have not yet added a distribution point, you still need to select Update Distribution Points.","pos":[4434,4540]},{"content":"That process also updates the Configuration Manager 2012 content library with changes.","pos":[4541,4627]},{"pos":[4661,4711],"content":"Distribute content to the CM01 distribution portal"},{"content":"In Configuration Manager, you can distribute all packages needed by a task sequence in a single task.","pos":[4714,4815]},{"content":"In this section, you distribute packages that have not yet been distributed to the CM01 distribution point.","pos":[4816,4923]},{"pos":[4929,5109],"content":"<bpt id=\"p1\">**</bpt>On CM01, using the Configuration Manager Console<ept id=\"p1\">**</ept>, select <bpt id=\"p2\">**</bpt>Task Sequences<ept id=\"p2\">**</ept>, right-click the <bpt id=\"p3\">**</bpt>Windows 10 Enterprise x64 RTM<ept id=\"p3\">**</ept> task sequence, and select <bpt id=\"p4\">**</bpt>Distribute Content.<ept id=\"p4\">**</ept>"},{"content":"In the Distribute Content Wizard, add the CM01 distribution point, and complete the wizard.","pos":[5115,5206]},{"content":"Using Configuration Manager Trace, verify the distribution to the CM01 distribution point by reviewing the distmgr.log file, or use the Distribution Status / Content Status option in the Monitoring workspace.","pos":[5212,5420]},{"content":"Do not continue until you see all the new packages being distributed successfully.","pos":[5421,5503]},{"pos":[5534,5575],"content":"Create a deployment for the task sequence"},{"content":"This sections provides steps to help you create a deployment for the task sequence.","pos":[5578,5661]},{"pos":[5667,5818],"content":"On CM01, using the Configuration Manager Console, select <bpt id=\"p1\">**</bpt>Task Sequences<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>Windows 10 Enterprise x64 RTM<ept id=\"p2\">**</ept>, and then select <bpt id=\"p3\">**</bpt>Deploy<ept id=\"p3\">**</ept>."},{"pos":[5824,5916],"content":"On the <bpt id=\"p1\">**</bpt>General<ept id=\"p1\">**</ept> page, select the <bpt id=\"p2\">**</bpt>All Unknown Computers<ept id=\"p2\">**</ept> collection and click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[5922,6010],"content":"On the <bpt id=\"p1\">**</bpt>Deployment Settings<ept id=\"p1\">**</ept> page, use the following settings and then click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>:"},{"content":"Purpose: Available","pos":[6020,6038]},{"content":"Make available to the following: Only media and PXE","pos":[6048,6099]},{"content":"figure 28","pos":[6107,6116]},{"content":"Figure 28.","pos":[6148,6158]},{"content":"Configure the deployment settings.","pos":[6159,6193]},{"pos":[6199,6274],"content":"On the <bpt id=\"p1\">**</bpt>Scheduling<ept id=\"p1\">**</ept> page, accept the default settings and click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[6280,6360],"content":"On the <bpt id=\"p1\">**</bpt>User Experience<ept id=\"p1\">**</ept> page, accept the default settings and click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[6366,6437],"content":"On the <bpt id=\"p1\">**</bpt>Alerts<ept id=\"p1\">**</ept> page, accept the default settings and click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[6443,6556],"content":"On the <bpt id=\"p1\">**</bpt>Distribution Points<ept id=\"p1\">**</ept> page, accept the default settings, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept> twice, and then click <bpt id=\"p3\">**</bpt>Close<ept id=\"p3\">**</ept>."},{"content":"figure 29","pos":[6560,6569]},{"content":"Figure 29.","pos":[6600,6610]},{"content":"The Windows 10 Enterprise x64 RTM task sequence deployed to the All Unknown Computers collections available for media and PXE.","pos":[6611,6737]},{"pos":[6768,6860],"content":"Configure Configuration Manager to prompt for the computer name during deployment (optional)"},{"content":"You can have Configuration Manager prompt you for a computer name or you can use rules to generate a computer name.","pos":[6863,6978]},{"content":"For more details on how to do this, see <bpt id=\"p1\">[</bpt>Configure MDT settings<ept id=\"p1\">](configure-mdt-2013-settings.md)</ept>.","pos":[6979,7076]},{"content":"This section provides steps to help you configure the All Unknown Computers collection to have Configuration Manager prompt for computer names.","pos":[7078,7221]},{"pos":[7227,7403],"content":"Using the Configuration Manager Console, in the Asset and Compliance workspace, select <bpt id=\"p1\">**</bpt>Device Collections<ept id=\"p1\">**</ept>, right-click <bpt id=\"p2\">**</bpt>All Unknown Computers<ept id=\"p2\">**</ept>, and select <bpt id=\"p3\">**</bpt>Properties<ept id=\"p3\">**</ept>."},{"pos":[7409,7496],"content":"In the <bpt id=\"p1\">**</bpt>Collection Variables<ept id=\"p1\">**</ept> tab, create a new variable with the following settings:"},{"content":"Name: OSDComputerName","pos":[7506,7527]},{"pos":[7537,7624],"content":"Clear the <bpt id=\"p1\">**</bpt>Do not display this value in the Configuration Manager console<ept id=\"p1\">**</ept> check box."},{"pos":[7630,7643],"content":"Click <bpt id=\"p1\">**</bpt>OK<ept id=\"p1\">**</ept>."},{"content":"Note","pos":[7647,7651]},{"content":"Configuration Manager can prompt for information in many ways.","pos":[7656,7718]},{"content":"Using a collection variable with an empty value is just one of them.","pos":[7719,7787]},{"content":"Another option is the User-Driven Installation (UDI) wizard.","pos":[7788,7848]},{"content":"figure 30","pos":[7855,7864]},{"content":"Figure 30.","pos":[7892,7902]},{"content":"Configure a collection variable.","pos":[7903,7935]},{"content":"Related topics","pos":[7940,7954]},{"content":"Integrate Configuration Manager with MDT 2013 Update 2","pos":[7958,8012]},{"content":"Prepare for Zero Touch Installation of Windows 10 with Configuration Manager","pos":[8066,8142]},{"content":"Create a custom Windows PE boot image with Configuration Manager","pos":[8227,8291]},{"content":"Add a Windows 10 operating system image using Configuration Manager","pos":[8364,8431]},{"content":"Create an application to deploy with Windows 10 using Configuration Manager","pos":[8507,8582]},{"content":"Add drivers to a Windows 10 deployment with Windows PE using Configuration Manager","pos":[8666,8748]},{"content":"Create a task sequence with Configuration Manager and MDT","pos":[8839,8896]},{"content":"Deploy Windows 10 using PXE and Configuration Manager","pos":[8962,9015]},{"content":"Refresh a Windows 7 SP1 client with Windows 10 using Configuration Manager","pos":[9077,9151]},{"content":"Replace a Windows 7 SP1 client with Windows 10 using Configuration Manager","pos":[9230,9304]}],"content":"---\ntitle: Finalize the operating system configuration for Windows 10 deployment with Configuration Manager (Windows 10)\ndescription: This topic walks you through the steps to finalize the configuration of your Windows 10 operating deployment, which includes enablement of the optional Microsoft Deployment Toolkit (MDT) monitoring for Microsoft System Center 2012 R2 Configuration Manager, logs folder creation, rules configuration, content distribution, and deployment of the previously created task sequence.\nms.assetid: 38b55fa8-e717-4689-bd43-8348751d493e\nkeywords: configure, deploy, upgrade\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nauthor: mtniehaus\n---\n\n# Finalize the operating system configuration for Windows 10 deployment with Configuration Manager\n\n\n**Applies to**\n\n-   Windows 10\n\nThis topic walks you through the steps to finalize the configuration of your Windows 10 operating deployment, which includes enablement of the optional Microsoft Deployment Toolkit (MDT) monitoring for Microsoft System Center 2012 R2 Configuration Manager, logs folder creation, rules configuration, content distribution, and deployment of the previously created task sequence.\n\nFor the purposes of this topic, we will use two machines: DC01 and CM01. DC01 is a domain controller and CM01 is a machine running Windows Server 2012 R2 Standard. Both are members of the domain contoso.com for the fictitious Contoso Corporation. For more details on the setup for this topic, please see [Deploy Windows 10 with the Microsoft Deployment Toolkit](deploy-windows-10-with-the-microsoft-deployment-toolkit.md).\n\n## <a href=\"\" id=\"sec01\"></a>Enable MDT monitoring\n\n\nThis section will walk you through the process of creating the E:\\\\MDTProduction deployment share using the MDT Deployment Workbench to enable monitoring for Configuration Manager.\n\n1.  On CM01, using the Deployment Workbench, right-click **Deployment Shares** and select **New Deployment Share**. Use the following settings for the New Deployment Share Wizard:\n\n    1.  Deployment share path: E:\\\\MDTProduction\n\n    2.  Share name: MDTProduction$\n\n    3.  Deployment share description: MDT Production\n\n    4.  Options: &lt;default settings&gt;\n\n2.  Right-click the **MDT Production** deployment share, and select **Properties**. In the **Monitoring** tab, select the **Enable monitoring for this deployment share** check box, and click **OK**.\n\n![figure 26](images/mdt-06-fig31.png)\n\nFigure 26. Enabling MDT monitoring for Configuration Manager.\n\n## <a href=\"\" id=\"sec02\"></a>Create and share the Logs folder\n\n\nTo support additional server-side logging in Configuration Manager, you create and share the E:\\\\Logs folder on CM01 using Windows PowerShell. Then in the next step, you enable server-side logging by modifying the CustomSettings.ini file used by the Configuration Manager task sequence.\n\n1.  On CM01, start an elevated Windows PowerShell prompt (run as Administrator).\n\n2.  Type the following commands, pressing **Enter** after each one:\n\n    ``` syntax\n    New-Item -Path E:\\Logs -ItemType directory\n    New-SmbShare -Name Logs$ -Path E:\\Logs -ChangeAccess EVERYONE\n    icacls E:\\Logs /grant '\"CM_NAA\":(OI)(CI)(M)'\n    ```\n\n## <a href=\"\" id=\"sec03\"></a>Configure the rules (Windows 10 x64 Settings package)\n\n\nThis section will show you how to configure the rules (the Windows 10 x64 Settings package) to support the Contoso environment.\n\n1.  On CM01, using File Explorer, navigate to the **E:\\\\Sources\\\\OSD\\\\Settings\\\\Windows 10 x64 Settings** folder.\n\n2.  Using Notepad, edit the CustomSetting.ini file with the following settings:\n\n    ``` syntax\n    [Settings]\n    Priority=Default\n    Properties=OSDMigrateConfigFiles,OSDMigrateMode\n    [Default]\n    DoCapture=NO\n    ComputerBackupLocation=NONE\n    MachineObjectOU=ou=Workstations,ou=Computers,ou=Contoso,dc=contoso,dc=com\n    OSDMigrateMode=Advanced\n    OSDMigrateAdditionalCaptureOptions=/ue:*\\* /ui:CONTOSO\\*\n    OSDMigrateConfigFiles=Miguser.xml,Migapp.xml\n    SLSHARE=\\\\CM01\\Logs$\n    EventService=http://CM01:9800\n    ApplyGPOPack=NO\n    ```\n\n    ![figure 27](images/fig30-settingspack.png)\n\n    Figure 27. The Settings package, holding the rules and the Unattend.xml template used during deployment\n\n3.  Update the distribution point for the **Windows 10 x64 Settings** package by right-clicking the **Windows 10 x64 Settings** package and selecting **Update Distribution Points**.\n\n**Note**  \nAlthough you have not yet added a distribution point, you still need to select Update Distribution Points. That process also updates the Configuration Manager 2012 content library with changes.\n\n \n\n## <a href=\"\" id=\"sec04\"></a>Distribute content to the CM01 distribution portal\n\n\nIn Configuration Manager, you can distribute all packages needed by a task sequence in a single task. In this section, you distribute packages that have not yet been distributed to the CM01 distribution point.\n\n1.  **On CM01, using the Configuration Manager Console**, select **Task Sequences**, right-click the **Windows 10 Enterprise x64 RTM** task sequence, and select **Distribute Content.**\n\n2.  In the Distribute Content Wizard, add the CM01 distribution point, and complete the wizard.\n\n3.  Using Configuration Manager Trace, verify the distribution to the CM01 distribution point by reviewing the distmgr.log file, or use the Distribution Status / Content Status option in the Monitoring workspace. Do not continue until you see all the new packages being distributed successfully.\n\n## <a href=\"\" id=\"sec05\"></a>Create a deployment for the task sequence\n\n\nThis sections provides steps to help you create a deployment for the task sequence.\n\n1.  On CM01, using the Configuration Manager Console, select **Task Sequences**, right-click **Windows 10 Enterprise x64 RTM**, and then select **Deploy**.\n\n2.  On the **General** page, select the **All Unknown Computers** collection and click **Next**.\n\n3.  On the **Deployment Settings** page, use the following settings and then click **Next**:\n\n    1.  Purpose: Available\n\n    2.  Make available to the following: Only media and PXE\n\n    ![figure 28](images/mdt-06-fig33.png)\n\n    Figure 28. Configure the deployment settings.\n\n4.  On the **Scheduling** page, accept the default settings and click **Next**.\n\n5.  On the **User Experience** page, accept the default settings and click **Next**.\n\n6.  On the **Alerts** page, accept the default settings and click **Next**.\n\n7.  On the **Distribution Points** page, accept the default settings, click **Next** twice, and then click **Close**.\n\n![figure 29](images/fig32-deploywiz.png)\n\nFigure 29. The Windows 10 Enterprise x64 RTM task sequence deployed to the All Unknown Computers collections available for media and PXE.\n\n## <a href=\"\" id=\"sec06\"></a>Configure Configuration Manager to prompt for the computer name during deployment (optional)\n\n\nYou can have Configuration Manager prompt you for a computer name or you can use rules to generate a computer name. For more details on how to do this, see [Configure MDT settings](configure-mdt-2013-settings.md).\n\nThis section provides steps to help you configure the All Unknown Computers collection to have Configuration Manager prompt for computer names.\n\n1.  Using the Configuration Manager Console, in the Asset and Compliance workspace, select **Device Collections**, right-click **All Unknown Computers**, and select **Properties**.\n\n2.  In the **Collection Variables** tab, create a new variable with the following settings:\n\n    1.  Name: OSDComputerName\n\n    2.  Clear the **Do not display this value in the Configuration Manager console** check box.\n\n3.  Click **OK**.\n\n**Note**  \nConfiguration Manager can prompt for information in many ways. Using a collection variable with an empty value is just one of them. Another option is the User-Driven Installation (UDI) wizard.\n\n \n\n![figure 30](images/mdt-06-fig35.png)\n\nFigure 30. Configure a collection variable.\n\n## Related topics\n\n\n[Integrate Configuration Manager with MDT 2013 Update 2](integrate-configuration-manager-with-mdt-2013.md)\n\n[Prepare for Zero Touch Installation of Windows 10 with Configuration Manager](prepare-for-zero-touch-installation-of-windows-10-with-configuration-manager.md)\n\n[Create a custom Windows PE boot image with Configuration Manager](create-a-custom-windows-pe-boot-image-with-configuration-manager.md)\n\n[Add a Windows 10 operating system image using Configuration Manager](add-a-windows-10-operating-system-image-using-configuration-manager.md)\n\n[Create an application to deploy with Windows 10 using Configuration Manager](create-an-application-to-deploy-with-windows-10-using-configuration-manager.md)\n\n[Add drivers to a Windows 10 deployment with Windows PE using Configuration Manager](add-drivers-to-a-windows-10-deployment-with-windows-pe-using-configuration-manager.md)\n\n[Create a task sequence with Configuration Manager and MDT](create-a-task-sequence-with-configuration-manager-and-mdt.md)\n\n[Deploy Windows 10 using PXE and Configuration Manager](deploy-windows-10-using-pxe-and-configuration-manager.md)\n\n[Refresh a Windows 7 SP1 client with Windows 10 using Configuration Manager](refresh-a-windows-7-client-with-windows-10-using-configuration-manager.md)\n\n[Replace a Windows 7 SP1 client with Windows 10 using Configuration Manager](replace-a-windows-7-client-with-windows-10-using-configuration-manager.md)\n\n \n\n \n\n\n\n\n\n"}