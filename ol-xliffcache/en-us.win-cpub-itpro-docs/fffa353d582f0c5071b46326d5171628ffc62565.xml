{"nodes":[{"content":"Monitoring MED-V Workspace Deployments","pos":[11,49]},{"content":"Monitoring MED-V Workspace Deployments","pos":[63,101]},{"content":"Monitoring MED-V Workspace Deployments","pos":[264,302]},{"content":"The monitoring feature in Microsoft Enterprise Desktop Virtualization (MED-V) 2.0 lets you run queries on individual MED-V workspaces to determine whether first time setup succeeded throughout your enterprise after the MED-V workspaces are deployed.","pos":[305,554]},{"content":"Monitoring the success of first time setup is important because MED-V is not in a usable state until first time setup has been completed successfully.","pos":[555,705]},{"content":"This section provides information and instruction to assist you in monitoring the success or failure of first time setup.","pos":[707,828]},{"content":"To monitor MED-V workspace deployments","pos":[833,871]},{"content":"The monitoring feature consists of a coupled in-process Windows Management Instrumentation (WMI) provider that you can query using WMI Query Language to discover the status of first time setup for all end users on a MED-V workspace.","pos":[874,1106]},{"content":"The WMI provider is implemented by using the WMI Provider Extension framework from the Microsoft .Net Framework 3.5.","pos":[1108,1224]},{"content":"The WMI provider executes in the context of LocalService and stores the first time setup state securely under <ph id=\"ph1\">\\\\</ph>ProgramData.","pos":[1225,1349]},{"content":"The WMI provider is implemented in the <bpt id=\"p1\">**</bpt>root<ph id=\"ph1\">\\\\</ph>microsoft<ph id=\"ph2\">\\\\</ph>medv<ept id=\"p1\">**</ept> namespace and implements the class <bpt id=\"p2\">**</bpt>FTS<ph id=\"ph3\">\\_</ph>Status<ept id=\"p2\">**</ept>, which exposes the method <bpt id=\"p3\">**</bpt>SetFtsState<ept id=\"p3\">**</ept>.","pos":[1351,1509]},{"content":"MED-V uses <bpt id=\"p1\">**</bpt>SetFtsState<ept id=\"p1\">**</ept> to set the first time setup state.","pos":[1510,1571]},{"content":"The class contains the following properties.","pos":[1573,1617]},{"content":"Property","pos":[1735,1743]},{"content":"Description","pos":[1766,1777]},{"content":"Machine","pos":[1851,1858]},{"content":"Read Only<ph id=\"ph1\">&lt;/strong&gt;</ph> property that contains the name of the guest virtual machine provisioned by first time setup.","pos":[1905,2017]},{"content":"This key contains the name that the guest would have had on first time setup failure.","pos":[2018,2103]},{"content":"StatusCode","pos":[2165,2175]},{"content":"Read Only<ph id=\"ph1\">&lt;/strong&gt;</ph> property that contains zero if first time setup succeeded.","pos":[2222,2299]},{"content":"Any other value returned equals the event ID for the error that is logged.","pos":[2300,2374]},{"content":"Time","pos":[2435,2439]},{"content":"The UTC time that first time setup completed.","pos":[2478,2523]},{"content":"User","pos":[2585,2589]},{"content":"The user for which first time setup was run.","pos":[2628,2672]},{"pos":[2710,2811],"content":"The following code shows the Managed Object Format (MOF) file that defines the <bpt id=\"p1\">**</bpt>FTS<ph id=\"ph1\">\\_</ph>Status<ept id=\"p1\">**</ept> class."},{"content":"Because your main concern is most likely those MED-V workspaces for which first time setup was not completed successfully, you can write your query to only return those that failed first time setup, for example:","pos":[3144,3355]},{"content":"In this case, the monitoring feature returns a list of those MED-V workspaces that failed first time setup, which you can use to take the appropriate actions to resolve the failure.","pos":[3420,3601]},{"content":"Related topics","pos":[3606,3620]},{"content":"Monitor MED-V Workspaces","pos":[3624,3648]},{"content":"How to Verify First Time Setup Settings","pos":[3681,3720]}],"content":"---\ntitle: Monitoring MED-V Workspace Deployments\ndescription: Monitoring MED-V Workspace Deployments\nauthor: jamiejdt\nms.assetid: 5de0cb06-b8a9-48a5-b8b3-836954295765\nms.pagetype: mdop, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w7\n---\n\n\n# Monitoring MED-V Workspace Deployments\n\n\nThe monitoring feature in Microsoft Enterprise Desktop Virtualization (MED-V) 2.0 lets you run queries on individual MED-V workspaces to determine whether first time setup succeeded throughout your enterprise after the MED-V workspaces are deployed. Monitoring the success of first time setup is important because MED-V is not in a usable state until first time setup has been completed successfully.\n\nThis section provides information and instruction to assist you in monitoring the success or failure of first time setup.\n\n## To monitor MED-V workspace deployments\n\n\nThe monitoring feature consists of a coupled in-process Windows Management Instrumentation (WMI) provider that you can query using WMI Query Language to discover the status of first time setup for all end users on a MED-V workspace.\n\nThe WMI provider is implemented by using the WMI Provider Extension framework from the Microsoft .Net Framework 3.5. The WMI provider executes in the context of LocalService and stores the first time setup state securely under \\\\ProgramData.\n\nThe WMI provider is implemented in the **root\\\\microsoft\\\\medv** namespace and implements the class **FTS\\_Status**, which exposes the method **SetFtsState**. MED-V uses **SetFtsState** to set the first time setup state.\n\nThe class contains the following properties.\n\n<table>\n<colgroup>\n<col width=\"50%\" />\n<col width=\"50%\" />\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th align=\"left\">Property</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>Machine</strong></p></td>\n<td align=\"left\"><p><strong>Read Only</strong> property that contains the name of the guest virtual machine provisioned by first time setup. This key contains the name that the guest would have had on first time setup failure.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>StatusCode</strong></p></td>\n<td align=\"left\"><p><strong>Read Only</strong> property that contains zero if first time setup succeeded. Any other value returned equals the event ID for the error that is logged.</p></td>\n</tr>\n<tr class=\"odd\">\n<td align=\"left\"><p><strong>Time</strong></p></td>\n<td align=\"left\"><p>The UTC time that first time setup completed.</p></td>\n</tr>\n<tr class=\"even\">\n<td align=\"left\"><p><strong>User</strong></p></td>\n<td align=\"left\"><p>The user for which first time setup was run.</p></td>\n</tr>\n</tbody>\n</table>\n\n \n\nThe following code shows the Managed Object Format (MOF) file that defines the **FTS\\_Status** class.\n\n``` syntax\n[dynamic: ToInstance, provider(\"MedvWmi, Version=2.0.258.0, Culture=neutral, PublicKeyToken=14986c3f172d1c2c\")]\nclass FTS_Status\n{\n[read, key] string User;\n[read] string Machine;\n[read] sint32 StatusCode;\n[read] datetime Time;\n[static, implemented] void SetFtsState([in] sint32 statusCode, [in] string machine);\n};\n```\n\nBecause your main concern is most likely those MED-V workspaces for which first time setup was not completed successfully, you can write your query to only return those that failed first time setup, for example:\n\n``` syntax\nSelect * from FTS_Status where StatusCode != 0\n```\n\nIn this case, the monitoring feature returns a list of those MED-V workspaces that failed first time setup, which you can use to take the appropriate actions to resolve the failure.\n\n## Related topics\n\n\n[Monitor MED-V Workspaces](monitor-med-v-workspaces.md)\n\n[How to Verify First Time Setup Settings](how-to-verify-first-time-setup-settings.md)\n\n \n\n \n\n\n\n\n\n"}