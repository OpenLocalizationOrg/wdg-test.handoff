{"nodes":[{"content":"MED-V 2.0 Best Practices","pos":[11,35]},{"content":"MED-V 2.0 Best Practices","pos":[49,73]},{"content":"MED-V 2.0 Best Practices","pos":[236,260]},{"content":"When you are planning, deploying, and managing MED-V in your enterprise, you may find the best practice recommendations to be useful.","pos":[263,396]},{"content":"Configure first time setup to run unattended","pos":[402,446]},{"content":"Although you can specify any settings that you prefer, a MED-V best practice is that you create the Sysprep.inf file so that first time setup can be run in <bpt id=\"p1\">**</bpt>Unattended<ept id=\"p1\">**</ept> mode.","pos":[448,624]},{"content":"This requires you to provide all the required settings information as you continue through the <bpt id=\"p1\">**</bpt>Setup Manager<ept id=\"p1\">**</ept> wizard.","pos":[625,745]},{"content":"For more information about how to configure the MED-V image, see <bpt id=\"p1\">[</bpt>Configuring a Windows Virtual PC Image for MED-V<ept id=\"p1\">](configuring-a-windows-virtual-pc-image-for-med-v.md)</ept>.","pos":[746,915]},{"content":"Disable restore points on the virtual machine","pos":[921,966]},{"content":"Before you create the MED-V workspace package, we recommend that you disable restore points on the virtual machine to prevent the differencing disk from growing unbounded.","pos":[968,1139]},{"content":"For more information, see <bpt id=\"p1\">[</bpt>How to turn off and turn on System Restore in Windows XP<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=195927)</ept> (http://go.microsoft.com/fwlink/?LinkId=195927).","pos":[1140,1320]},{"content":"Configure MED-V image to use local profiles","pos":[1326,1369]},{"content":"We recommend that you apply only those policies that make sense in an application compatibility environment for Windows XP.","pos":[1371,1494]},{"content":"For example, desktop customization policies do not typically have to be applied and should be disabled.","pos":[1495,1598]},{"content":"For more information about how to allow only local profiles, see <bpt id=\"p1\">[</bpt>Group Policy Settings for Roaming User Profiles<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=205072)</ept> (http://go.microsoft.com/fwlink/?LinkId=205072).","pos":[1599,1809]},{"content":"Configure a Group Policy performance update","pos":[1815,1858]},{"content":"By default, Group Policy is downloaded to a computer one byte at a time.","pos":[1860,1932]},{"content":"This causes delays when MED-V is being joined to the domain.","pos":[1933,1993]},{"content":"To increase the performance of Group Policy, we recommend that you set the following registry key value to the registry:","pos":[1994,2114]},{"content":"Registry subkey: HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>SOFTWARE<ph id=\"ph4\">\\\\</ph>Microsoft<ph id=\"ph5\">\\\\</ph>Windows NT<ph id=\"ph6\">\\\\</ph>CurrentVersion<ph id=\"ph7\">\\\\</ph>Winlogon","pos":[2116,2212]},{"content":"Entry: BufferPolicyReads","pos":[2214,2238]},{"content":"Type: DWORD","pos":[2240,2251]},{"content":"Value: 1","pos":[2253,2261]},{"content":"Distribute legal notice through Group Policy instead of in the MED-V image","pos":[2267,2341]},{"content":"If you want end users to see a service level agreement (SLA) before they access MED-V, we recommend that you enforce the SLA through Group Policy later so that the SLA is displayed to the end user after the first time setup is finished.","pos":[2343,2579]},{"content":"Caution","pos":[2583,2590]},{"content":"Even though a best practice is to run first time setup in <bpt id=\"p1\">**</bpt>Unattended<ept id=\"p1\">**</ept> mode, if you decide to set the local policy or registry entry to include an SLA in your image (virtual hard disk), you must also specify that first time setup is run in <bpt id=\"p2\">**</bpt>Attended<ept id=\"p2\">**</ept> mode, or first time setup can fail.","pos":[2595,2885]},{"content":"Compact the virtual hard disk","pos":[2894,2923]},{"content":"We recommend that you compact your virtual hard disk to reclaim empty disk space and reduce the size of the virtual hard disk.","pos":[2925,3051]},{"content":"For more information about how to compact your virtual hard disk, see <bpt id=\"p1\">[</bpt>Compacting the MED-V Virtual Hard Disk<ept id=\"p1\">](compacting-the-med-v-virtual-hard-disk.md)</ept>.","pos":[3052,3206]},{"content":"Configure virtual machine to restart on blue screen crash","pos":[3212,3269]},{"content":"We recommend that you configure the MED-V workspace virtual machine to automatically restart when it encounters a blue screen crash.","pos":[3271,3403]},{"content":"To configure this setting in the guest, set the AutoReboot value in the HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ph id=\"ph3\">\\\\</ph>SYSTEM<ph id=\"ph4\">\\\\</ph>CurrentControlSet<ph id=\"ph5\">\\\\</ph>Control<ph id=\"ph6\">\\\\</ph>CrashControl key to “1”.","pos":[3404,3558]},{"content":"You can also configure this setting by clicking <bpt id=\"p1\">**</bpt>Start<ept id=\"p1\">**</ept>, clicking <bpt id=\"p2\">**</bpt>Control Panel<ept id=\"p2\">**</ept>, and then clicking <bpt id=\"p3\">**</bpt>System<ept id=\"p3\">**</ept>.","pos":[3560,3676]},{"content":"Then, in the <bpt id=\"p1\">**</bpt>Startup and Recovery<ept id=\"p1\">**</ept> area of the <bpt id=\"p2\">**</bpt>Advanced<ept id=\"p2\">**</ept> tab, click <bpt id=\"p3\">**</bpt>Settings<ept id=\"p3\">**</ept>.","pos":[3677,3764]},{"content":"Select the <bpt id=\"p1\">**</bpt>Automatically restart<ept id=\"p1\">**</ept> check box and click <bpt id=\"p2\">**</bpt>OK<ept id=\"p2\">**</ept>.","pos":[3765,3829]},{"content":"Back up MED-V image before sealing it","pos":[3835,3872]},{"content":"We recommend that you create a backup copy of the MED-V image before you seal it.","pos":[3874,3955]},{"content":"For more information about sealing your MED-V image, see <bpt id=\"p1\">[</bpt>Configuring a Windows Virtual PC Image for MED-V<ept id=\"p1\">](configuring-a-windows-virtual-pc-image-for-med-v.md)</ept>.","pos":[3956,4117]},{"content":"Install Windows Virtual PC last when installing from a batch file","pos":[4123,4188]},{"content":"When you install the MED-V components by using a batch file, specify that Windows Virtual PC and the Windows Virtual PC hotfix are installed after the MED-V Host Agent and the MED-V workspace package files.","pos":[4190,4396]},{"content":"This ensures that Windows Update will not cause any interference with the installation process by requiring a restart.","pos":[4397,4515]},{"content":"Install MED-V workspace from local folder","pos":[4521,4562]},{"content":"Because of problems that can occur when you install MED-V from a network location, we recommend that you copy the MED-V workspace setup files locally and then run setup.exe.","pos":[4564,4737]},{"pos":[4810,4855],"content":"Manage printer redirection in one manner only"},{"content":"If a printer is manually installed on the MED-V guest virtual machine, and the same printer is later installed on the host computer, the result is that it is installed two times in the guest.","pos":[4857,5048]},{"content":"To avoid this situation, we recommend as MED-V best practice that you manage printer redirection in one manner only: either disable redirection and install printers manually on the guest, or enable redirection and do not install printers manually on the guest.","pos":[5049,5309]},{"pos":[5380,5423],"content":"Configure settings for MED-V guest patching"},{"content":"You can control when and for how long the MED-V virtual machine awakens to receive automatic updates by defining the relevant configuration values in the registry.","pos":[5425,5588]},{"content":"A MED-V best practice is to set your wake-up interval to match the time when you have scheduled regular updates for MED-V virtual machines.","pos":[5589,5728]},{"content":"In addition, we recommend that you configure these settings to resemble the host computer’s behavior.","pos":[5729,5830]},{"pos":[5832,6017],"content":"For more information about how to configure settings for MED-V guest patching, see <bpt id=\"p1\">[</bpt>Managing Automatic Updates for MED-V Workspaces<ept id=\"p1\">](managing-automatic-updates-for-med-v-workspaces.md)</ept>."},{"content":"Configure antivirus/backup software","pos":[6023,6058]},{"content":"To prevent antivirus activity from affecting the performance of the virtual desktop, we recommend that when you can, you exclude the following virtual machine file types from any antivirus or backup process that is running on the MED-V host computer:","pos":[6060,6310]},{"content":".VMC","pos":[6318,6322]},{"content":".VUD","pos":[6330,6334]},{"content":".VSV","pos":[6342,6346]},{"content":".VHD","pos":[6354,6358]},{"content":"Related topics","pos":[6363,6377]},{"content":"Security and Protection for MED-V","pos":[6381,6414]}],"content":"---\ntitle: MED-V 2.0 Best Practices\ndescription: MED-V 2.0 Best Practices\nauthor: jamiejdt\nms.assetid: 47ba2dd1-6c6e-4d6e-8e18-b42291f8e02a\nms.pagetype: mdop, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w7\n---\n\n\n# MED-V 2.0 Best Practices\n\n\nWhen you are planning, deploying, and managing MED-V in your enterprise, you may find the best practice recommendations to be useful.\n\n### Configure first time setup to run unattended\n\nAlthough you can specify any settings that you prefer, a MED-V best practice is that you create the Sysprep.inf file so that first time setup can be run in **Unattended** mode. This requires you to provide all the required settings information as you continue through the **Setup Manager** wizard. For more information about how to configure the MED-V image, see [Configuring a Windows Virtual PC Image for MED-V](configuring-a-windows-virtual-pc-image-for-med-v.md).\n\n### Disable restore points on the virtual machine\n\nBefore you create the MED-V workspace package, we recommend that you disable restore points on the virtual machine to prevent the differencing disk from growing unbounded. For more information, see [How to turn off and turn on System Restore in Windows XP](http://go.microsoft.com/fwlink/?LinkId=195927) (http://go.microsoft.com/fwlink/?LinkId=195927).\n\n### Configure MED-V image to use local profiles\n\nWe recommend that you apply only those policies that make sense in an application compatibility environment for Windows XP. For example, desktop customization policies do not typically have to be applied and should be disabled. For more information about how to allow only local profiles, see [Group Policy Settings for Roaming User Profiles](http://go.microsoft.com/fwlink/?LinkId=205072) (http://go.microsoft.com/fwlink/?LinkId=205072).\n\n### Configure a Group Policy performance update\n\nBy default, Group Policy is downloaded to a computer one byte at a time. This causes delays when MED-V is being joined to the domain. To increase the performance of Group Policy, we recommend that you set the following registry key value to the registry:\n\nRegistry subkey: HKEY\\_LOCAL\\_MACHINE\\\\SOFTWARE\\\\Microsoft\\\\Windows NT\\\\CurrentVersion\\\\Winlogon\n\nEntry: BufferPolicyReads\n\nType: DWORD\n\nValue: 1\n\n### Distribute legal notice through Group Policy instead of in the MED-V image\n\nIf you want end users to see a service level agreement (SLA) before they access MED-V, we recommend that you enforce the SLA through Group Policy later so that the SLA is displayed to the end user after the first time setup is finished.\n\n**Caution**  \nEven though a best practice is to run first time setup in **Unattended** mode, if you decide to set the local policy or registry entry to include an SLA in your image (virtual hard disk), you must also specify that first time setup is run in **Attended** mode, or first time setup can fail.\n\n \n\n### Compact the virtual hard disk\n\nWe recommend that you compact your virtual hard disk to reclaim empty disk space and reduce the size of the virtual hard disk. For more information about how to compact your virtual hard disk, see [Compacting the MED-V Virtual Hard Disk](compacting-the-med-v-virtual-hard-disk.md).\n\n### Configure virtual machine to restart on blue screen crash\n\nWe recommend that you configure the MED-V workspace virtual machine to automatically restart when it encounters a blue screen crash. To configure this setting in the guest, set the AutoReboot value in the HKEY\\_LOCAL\\_MACHINE\\\\SYSTEM\\\\CurrentControlSet\\\\Control\\\\CrashControl key to “1”.\n\nYou can also configure this setting by clicking **Start**, clicking **Control Panel**, and then clicking **System**. Then, in the **Startup and Recovery** area of the **Advanced** tab, click **Settings**. Select the **Automatically restart** check box and click **OK**.\n\n### Back up MED-V image before sealing it\n\nWe recommend that you create a backup copy of the MED-V image before you seal it. For more information about sealing your MED-V image, see [Configuring a Windows Virtual PC Image for MED-V](configuring-a-windows-virtual-pc-image-for-med-v.md).\n\n### Install Windows Virtual PC last when installing from a batch file\n\nWhen you install the MED-V components by using a batch file, specify that Windows Virtual PC and the Windows Virtual PC hotfix are installed after the MED-V Host Agent and the MED-V workspace package files. This ensures that Windows Update will not cause any interference with the installation process by requiring a restart.\n\n### Install MED-V workspace from local folder\n\nBecause of problems that can occur when you install MED-V from a network location, we recommend that you copy the MED-V workspace setup files locally and then run setup.exe.\n\n### <a href=\"\" id=\"manage-printer-redirection-in-one-manner-only-\"></a>Manage printer redirection in one manner only\n\nIf a printer is manually installed on the MED-V guest virtual machine, and the same printer is later installed on the host computer, the result is that it is installed two times in the guest. To avoid this situation, we recommend as MED-V best practice that you manage printer redirection in one manner only: either disable redirection and install printers manually on the guest, or enable redirection and do not install printers manually on the guest.\n\n### <a href=\"\" id=\"configure-settings-for-med-v-guest-patching-\"></a>Configure settings for MED-V guest patching\n\nYou can control when and for how long the MED-V virtual machine awakens to receive automatic updates by defining the relevant configuration values in the registry. A MED-V best practice is to set your wake-up interval to match the time when you have scheduled regular updates for MED-V virtual machines. In addition, we recommend that you configure these settings to resemble the host computer’s behavior.\n\nFor more information about how to configure settings for MED-V guest patching, see [Managing Automatic Updates for MED-V Workspaces](managing-automatic-updates-for-med-v-workspaces.md).\n\n### Configure antivirus/backup software\n\nTo prevent antivirus activity from affecting the performance of the virtual desktop, we recommend that when you can, you exclude the following virtual machine file types from any antivirus or backup process that is running on the MED-V host computer:\n\n-   \\*.VMC\n\n-   \\*.VUD\n\n-   \\*.VSV\n\n-   \\*.VHD\n\n## Related topics\n\n\n[Security and Protection for MED-V](security-and-protection-for-med-v.md)\n\n \n\n \n\n\n\n\n\n"}