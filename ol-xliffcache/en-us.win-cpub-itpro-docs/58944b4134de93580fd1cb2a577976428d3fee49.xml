{"nodes":[{"content":"Planning for High Availability with App-V 5.0","pos":[11,56]},{"content":"Planning for High Availability with App-V 5.0","pos":[70,115]},{"content":"Planning for High Availability with App-V 5.0","pos":[290,335]},{"content":"Microsoft Application Virtualization 5.0 (App-V 5.0) system configurations can take advantage of options that maintain a high level of available service.","pos":[338,491]},{"content":"Use the information in the following sections to help you understand the options to deploy App-V 5.0 in a highly available configuration.","pos":[493,630]},{"content":"Support for Microsoft SQL Server clustering","pos":[637,680]},{"content":"Support for IIS Network Load Balancing","pos":[706,744]},{"content":"Support for clustered file servers when running (SCS) mode","pos":[770,828]},{"content":"Support for Microsoft SQL Server Mirroring","pos":[858,900]},{"content":"Support for Microsoft SQL Server Always On","pos":[928,970]},{"pos":[1031,1074],"content":"Support for Microsoft SQL Server clustering"},{"content":"You can run the App-V Management database and Reporting database on computers that are running Microsoft SQL Server clusters.","pos":[1077,1202]},{"content":"However, you must install the databases using scripts.","pos":[1203,1257]},{"pos":[1259,1397],"content":"For instructions, see <bpt id=\"p1\">[</bpt>How to Deploy the App-V Databases by Using SQL Scripts<ept id=\"p1\">](how-to-deploy-the-app-v-databases-by-using-sql-scripts.md)</ept>."},{"pos":[1438,1476],"content":"Support for IIS Network Load Balancing"},{"content":"You can use Internet Information Services (IIS) Network Load Balancing to configure a highly available environment for computers running the App-V 5.x Management, Publishing, and Reporting services which are deployed through IIS.","pos":[1479,1708]},{"content":"Review the following for more information about configuring IIS and Network Load Balancing for computers running Windows Server operating systems:","pos":[1710,1856]},{"content":"Provides information about configuring Internet Information Services (IIS) 7.0.","pos":[1862,1941]},{"pos":[1947,2101],"content":"<bpt id=\"p1\">[</bpt>Achieving High Availability and Scalability - ARR and NLB<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316369)</ept> (http://go.microsoft.com/fwlink/?LinkId=316369)"},{"content":"Configuring Microsoft Windows Server","pos":[2107,2143]},{"pos":[2149,2269],"content":"<bpt id=\"p1\">[</bpt>Network Load Balancing<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316370)</ept> (http://go.microsoft.com/fwlink/?LinkId=316370)."},{"content":"This information also applies to IIS Network Load Balancing (NLB) clusters in Windows Server 2008, Windows Server 2008 R2, or Windows Server 2012.","pos":[2275,2421]},{"pos":[2427,2864],"content":"**Note**  \nThe IIS Network Load Balancing functionality in Windows Server 2012 is generally the same as in Windows Server 2008 R2. However, some task details are changed in Windows Server 2012. For information on new ways to do tasks, see [Common Management Tasks and Navigation in Windows Server 2012 R2 Preview and Windows Server 2012](http://go.microsoft.com/fwlink/?LinkId=316371) (http://go.microsoft.com/fwlink/?LinkId=316371).","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"The IIS Network Load Balancing functionality in Windows Server 2012 is generally the same as in Windows Server 2008 R2. However, some task details are changed in Windows Server 2012. For information on new ways to do tasks, see [Common Management Tasks and Navigation in Windows Server 2012 R2 Preview and Windows Server 2012](http://go.microsoft.com/fwlink/?LinkId=316371) (http://go.microsoft.com/fwlink/?LinkId=316371).","pos":[11,433],"nodes":[{"content":"The IIS Network Load Balancing functionality in Windows Server 2012 is generally the same as in Windows Server 2008 R2.","pos":[0,119]},{"content":"However, some task details are changed in Windows Server 2012.","pos":[120,182]},{"content":"For information on new ways to do tasks, see <bpt id=\"p1\">[</bpt>Common Management Tasks and Navigation in Windows Server 2012 R2 Preview and Windows Server 2012<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316371)</ept> (http://go.microsoft.com/fwlink/?LinkId=316371).","pos":[183,422]}]}]},{"pos":[2916,2974],"content":"Support for clustered file servers when running (SCS) mode"},{"content":"Running App-V 5.0 in Share Content Store (SCS) mode with clustered file servers is supported.","pos":[2977,3070]},{"content":"The following steps can be used to enable this configuration:","pos":[3072,3133]},{"content":"Configure App-V 5.0 to run in client SCS mode.","pos":[3139,3185]},{"content":"For more information about configuring App-V 5.0 SCS mode, see <bpt id=\"p1\">[</bpt>How to Install the App-V 5.0 Client for Shared Content Store Mode<ept id=\"p1\">](how-to-install-the-app-v-50-client-for-shared-content-store-mode.md)</ept>.","pos":[3186,3386]},{"pos":[3392,3527],"content":"Configure the file server cluster configured in both the Microsoft Server 2012 scale out mode and pre <bpt id=\"p1\">**</bpt>2012<ept id=\"p1\">**</ept> mode with a virtual SAN."},{"content":"The following steps can be used to validate the configuration:","pos":[3529,3591]},{"content":"Add a package on the publishing server.","pos":[3597,3636]},{"content":"For more information about adding a package, see <bpt id=\"p1\">[</bpt>How to Add or Upgrade Packages by Using the Management Console<ept id=\"p1\">](how-to-add-or-upgrade-packages-by-using-the-management-console-beta-gb18030.md)</ept>.","pos":[3637,3831]},{"content":"Perform a publishing refresh on the computer running the App-V 5.0 client and open an application.","pos":[3837,3935]},{"content":"Switch cluster nodes mid-publishing refresh and mid-streaming to ensure fail-over works correctly.","pos":[3941,4039]},{"content":"Review the following for more information about configuring Windows Server Failover clusters:","pos":[4041,4134]},{"pos":[4140,4279],"content":"<bpt id=\"p1\">[</bpt>Checklist: Create a Clustered File Server<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316372)</ept> (http://go.microsoft.com/fwlink/?LinkId=316372)."},{"pos":[4285,4451],"content":"<bpt id=\"p1\">[</bpt>Use Cluster Shared Volumes in a Windows Server 2012 Failover Cluster<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316373)</ept> (http://go.microsoft.com/fwlink/?LinkId=316373)."},{"pos":[4494,4536],"content":"Support for Microsoft SQL Server Mirroring"},{"content":"Using Microsoft SQL Server mirroring, where the App-V 5.0 management server database is mirrored utilizing two SQL Server instances, for App-V 5.0 management server databases is supported.","pos":[4539,4727]},{"content":"Review the following for more information about configuring Microsoft SQL Server Mirroring:","pos":[4729,4820]},{"pos":[4826,4985],"content":"<bpt id=\"p1\">[</bpt>How to: Prepare a Mirror Database for Mirroring (Transact-SQL)<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316375)</ept> (http://go.microsoft.com/fwlink/?LinkId=316375)"},{"pos":[4991,5186],"content":"<bpt id=\"p1\">[</bpt>Establish a Database Mirroring Session Using Windows Authentication (SQL Server Management Studio)<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=316377)</ept> (http://go.microsoft.com/fwlink/?LinkId=316377)"},{"content":"The following steps can be used to validate the configuration:","pos":[5188,5250]},{"content":"Initiate a Microsoft SQL Server Mirroring session.","pos":[5256,5306]},{"pos":[5312,5388],"content":"Select <bpt id=\"p1\">**</bpt>Failover<ept id=\"p1\">**</ept> to designate a new master Microsoft SQL Server instance."},{"content":"Verify that the App-V 5.0 management server continues to function as expected after the failover.","pos":[5394,5491]},{"content":"The connection string on the management server can be modified to include <bpt id=\"p1\">**</bpt>failover partner = <ph id=\"ph1\">&amp;lt;</ph>server2<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept>.","pos":[5493,5606]},{"content":"This will only help when the primary on the mirror has failed over to the secondary and the computer running the App-V 5.0 client is doing a fresh connection (say after reboot).","pos":[5607,5784]},{"pos":[5786,5892],"content":"Use the following steps to modify the connection string to include <bpt id=\"p1\">**</bpt>failover partner = <ph id=\"ph1\">&amp;lt;</ph>server2<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept>:"},{"content":"Important","pos":[5896,5905]},{"content":"This topic describes how to change the Windows registry by using Registry Editor.","pos":[5910,5991]},{"content":"If you change the Windows registry incorrectly, you can cause serious problems that might require you to reinstall Windows.","pos":[5992,6115]},{"content":"You should make a backup copy of the registry files (System.dat and User.dat) before you change the registry.","pos":[6116,6225]},{"content":"Microsoft cannot guarantee that the problems that might occur when you change the registry can be resolved.","pos":[6226,6333]},{"content":"Change the registry at your own risk.","pos":[6334,6371]},{"pos":[6380,6432],"content":"Login to the management server and open <bpt id=\"p1\">**</bpt>regedit<ept id=\"p1\">**</ept>."},{"pos":[6438,6559],"content":"Navigate to <bpt id=\"p1\">**</bpt>HKEY<ph id=\"ph1\">\\_</ph>LOCAL<ph id=\"ph2\">\\_</ph>MACHINE<ept id=\"p1\">**</ept> <ph id=\"ph3\">\\\\</ph> <bpt id=\"p2\">**</bpt>Software<ept id=\"p2\">**</ept> <ph id=\"ph4\">\\\\</ph> <bpt id=\"p3\">**</bpt>Microsoft<ept id=\"p3\">**</ept> <ph id=\"ph5\">\\\\</ph> <bpt id=\"p4\">**</bpt>AppV<ept id=\"p4\">**</ept> <ph id=\"ph6\">\\\\</ph> <bpt id=\"p5\">**</bpt>Server<ept id=\"p5\">**</ept> <ph id=\"ph7\">\\\\</ph> <bpt id=\"p6\">**</bpt>ManagementService<ept id=\"p6\">**</ept>."},{"pos":[6565,6670],"content":"Modify the <bpt id=\"p1\">**</bpt>MANAGEMENT<ph id=\"ph1\">\\_</ph>SQL<ph id=\"ph2\">\\_</ph>CONNECTION<ph id=\"ph3\">\\_</ph>STRING<ept id=\"p1\">**</ept> value with the <bpt id=\"p2\">**</bpt>failover partner = <ph id=\"ph4\">&amp;lt;</ph>server2<ph id=\"ph5\">&amp;gt;</ph><ept id=\"p2\">**</ept>."},{"content":"Restart management service using the IIS console.","pos":[6676,6725]},{"pos":[6731,6922],"content":"**Note**  \nDatabase Mirroring is on the list of Deprecated Database Engine Features for Microsoft SQL Server 2012 due to the **AlwaysOn** feature available with Microsoft SQL Server 2012.","leadings":["","    "],"nodes":[{"content":"Note","pos":[2,6]},{"content":"Database Mirroring is on the list of Deprecated Database Engine Features for Microsoft SQL Server 2012 due to the <bpt id=\"p1\">**</bpt>AlwaysOn<ept id=\"p1\">**</ept> feature available with Microsoft SQL Server 2012.","pos":[11,187]}]},{"content":"Click any of the following links for more information:","pos":[6931,6985]},{"pos":[6991,7151],"content":"<bpt id=\"p1\">[</bpt>How to: Prepare a Mirror Database for Mirroring (Transact-SQL)<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=394235)</ept> (http://go.microsoft.com/fwlink/?LinkId=394235)."},{"pos":[7157,7332],"content":"<bpt id=\"p1\">[</bpt>How to: Configure a Database Mirroring Session (SQL Server Management Studio)<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=394236)</ept> (http://go.microsoft.com/fwlink/?LinkId=394236)."},{"pos":[7338,7534],"content":"<bpt id=\"p1\">[</bpt>Establish a Database Mirroring Session Using Windows Authentication (SQL Server Management Studio)<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=394237)</ept> (http://go.microsoft.com/fwlink/?LinkId=394237)."},{"pos":[7540,7692],"content":"<bpt id=\"p1\">[</bpt>Deprecated Database Engine Features in SQL Server 2012<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=394238)</ept> (http://go.microsoft.com/fwlink/?LinkId=394238)."},{"pos":[7734,7790],"content":"Support for Microsoft SQL Server Always On configuration"},{"pos":[7793,7934],"content":"The App-V 5.0 management server database supports deployments to computers running Microsoft SQL Server with the <bpt id=\"p1\">**</bpt>Always On<ept id=\"p1\">**</ept> configuration."},{"content":"Related topics","pos":[7939,7953]},{"content":"Planning to Deploy App-V","pos":[7957,7981]}],"content":"---\ntitle: Planning for High Availability with App-V 5.0\ndescription: Planning for High Availability with App-V 5.0\nauthor: jamiejdt\nms.assetid: 6d9a6492-23f8-465c-82e5-49c863594156\nms.pagetype: mdop, appcompat, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w10\n---\n\n\n# Planning for High Availability with App-V 5.0\n\n\nMicrosoft Application Virtualization 5.0 (App-V 5.0) system configurations can take advantage of options that maintain a high level of available service.\n\nUse the information in the following sections to help you understand the options to deploy App-V 5.0 in a highly available configuration.\n\n-   [Support for Microsoft SQL Server clustering](#bkmk-sqlcluster)\n\n-   [Support for IIS Network Load Balancing](#bkmk-iisloadbal)\n\n-   [Support for clustered file servers when running (SCS) mode](#bkmk-clusterscsmode)\n\n-   [Support for Microsoft SQL Server Mirroring](#bkmk-sqlmirroring)\n\n-   [Support for Microsoft SQL Server Always On](#bkmk-sqlalwayson)\n\n## <a href=\"\" id=\"bkmk-sqlcluster\"></a>Support for Microsoft SQL Server clustering\n\n\nYou can run the App-V Management database and Reporting database on computers that are running Microsoft SQL Server clusters. However, you must install the databases using scripts.\n\nFor instructions, see [How to Deploy the App-V Databases by Using SQL Scripts](how-to-deploy-the-app-v-databases-by-using-sql-scripts.md).\n\n## <a href=\"\" id=\"bkmk-iisloadbal\"></a>Support for IIS Network Load Balancing\n\n\nYou can use Internet Information Services (IIS) Network Load Balancing to configure a highly available environment for computers running the App-V 5.x Management, Publishing, and Reporting services which are deployed through IIS.\n\nReview the following for more information about configuring IIS and Network Load Balancing for computers running Windows Server operating systems:\n\n-   Provides information about configuring Internet Information Services (IIS) 7.0.\n\n    [Achieving High Availability and Scalability - ARR and NLB](http://go.microsoft.com/fwlink/?LinkId=316369) (http://go.microsoft.com/fwlink/?LinkId=316369)\n\n-   Configuring Microsoft Windows Server\n\n    [Network Load Balancing](http://go.microsoft.com/fwlink/?LinkId=316370) (http://go.microsoft.com/fwlink/?LinkId=316370).\n\n    This information also applies to IIS Network Load Balancing (NLB) clusters in Windows Server 2008, Windows Server 2008 R2, or Windows Server 2012.\n\n    **Note**  \n    The IIS Network Load Balancing functionality in Windows Server 2012 is generally the same as in Windows Server 2008 R2. However, some task details are changed in Windows Server 2012. For information on new ways to do tasks, see [Common Management Tasks and Navigation in Windows Server 2012 R2 Preview and Windows Server 2012](http://go.microsoft.com/fwlink/?LinkId=316371) (http://go.microsoft.com/fwlink/?LinkId=316371).\n\n     \n\n## <a href=\"\" id=\"bkmk-clusterscsmode\"></a>Support for clustered file servers when running (SCS) mode\n\n\nRunning App-V 5.0 in Share Content Store (SCS) mode with clustered file servers is supported.\n\nThe following steps can be used to enable this configuration:\n\n-   Configure App-V 5.0 to run in client SCS mode. For more information about configuring App-V 5.0 SCS mode, see [How to Install the App-V 5.0 Client for Shared Content Store Mode](how-to-install-the-app-v-50-client-for-shared-content-store-mode.md).\n\n-   Configure the file server cluster configured in both the Microsoft Server 2012 scale out mode and pre **2012** mode with a virtual SAN.\n\nThe following steps can be used to validate the configuration:\n\n1.  Add a package on the publishing server. For more information about adding a package, see [How to Add or Upgrade Packages by Using the Management Console](how-to-add-or-upgrade-packages-by-using-the-management-console-beta-gb18030.md).\n\n2.  Perform a publishing refresh on the computer running the App-V 5.0 client and open an application.\n\n3.  Switch cluster nodes mid-publishing refresh and mid-streaming to ensure fail-over works correctly.\n\nReview the following for more information about configuring Windows Server Failover clusters:\n\n-   [Checklist: Create a Clustered File Server](http://go.microsoft.com/fwlink/?LinkId=316372) (http://go.microsoft.com/fwlink/?LinkId=316372).\n\n-   [Use Cluster Shared Volumes in a Windows Server 2012 Failover Cluster](http://go.microsoft.com/fwlink/?LinkId=316373) (http://go.microsoft.com/fwlink/?LinkId=316373).\n\n## <a href=\"\" id=\"bkmk-sqlmirroring\"></a>Support for Microsoft SQL Server Mirroring\n\n\nUsing Microsoft SQL Server mirroring, where the App-V 5.0 management server database is mirrored utilizing two SQL Server instances, for App-V 5.0 management server databases is supported.\n\nReview the following for more information about configuring Microsoft SQL Server Mirroring:\n\n-   [How to: Prepare a Mirror Database for Mirroring (Transact-SQL)](http://go.microsoft.com/fwlink/?LinkId=316375) (http://go.microsoft.com/fwlink/?LinkId=316375)\n\n-   [Establish a Database Mirroring Session Using Windows Authentication (SQL Server Management Studio)](http://go.microsoft.com/fwlink/?LinkId=316377) (http://go.microsoft.com/fwlink/?LinkId=316377)\n\nThe following steps can be used to validate the configuration:\n\n1.  Initiate a Microsoft SQL Server Mirroring session.\n\n2.  Select **Failover** to designate a new master Microsoft SQL Server instance.\n\n3.  Verify that the App-V 5.0 management server continues to function as expected after the failover.\n\nThe connection string on the management server can be modified to include **failover partner = &lt;server2&gt;**. This will only help when the primary on the mirror has failed over to the secondary and the computer running the App-V 5.0 client is doing a fresh connection (say after reboot).\n\nUse the following steps to modify the connection string to include **failover partner = &lt;server2&gt;**:\n\n**Important**  \nThis topic describes how to change the Windows registry by using Registry Editor. If you change the Windows registry incorrectly, you can cause serious problems that might require you to reinstall Windows. You should make a backup copy of the registry files (System.dat and User.dat) before you change the registry. Microsoft cannot guarantee that the problems that might occur when you change the registry can be resolved. Change the registry at your own risk.\n\n \n\n1.  Login to the management server and open **regedit**.\n\n2.  Navigate to **HKEY\\_LOCAL\\_MACHINE** \\\\ **Software** \\\\ **Microsoft** \\\\ **AppV** \\\\ **Server** \\\\ **ManagementService**.\n\n3.  Modify the **MANAGEMENT\\_SQL\\_CONNECTION\\_STRING** value with the **failover partner = &lt;server2&gt;**.\n\n4.  Restart management service using the IIS console.\n\n    **Note**  \n    Database Mirroring is on the list of Deprecated Database Engine Features for Microsoft SQL Server 2012 due to the **AlwaysOn** feature available with Microsoft SQL Server 2012.\n\n     \n\nClick any of the following links for more information:\n\n-   [How to: Prepare a Mirror Database for Mirroring (Transact-SQL)](http://go.microsoft.com/fwlink/?LinkId=394235) (http://go.microsoft.com/fwlink/?LinkId=394235).\n\n-   [How to: Configure a Database Mirroring Session (SQL Server Management Studio)](http://go.microsoft.com/fwlink/?LinkId=394236) (http://go.microsoft.com/fwlink/?LinkId=394236).\n\n-   [Establish a Database Mirroring Session Using Windows Authentication (SQL Server Management Studio)](http://go.microsoft.com/fwlink/?LinkId=394237) (http://go.microsoft.com/fwlink/?LinkId=394237).\n\n-   [Deprecated Database Engine Features in SQL Server 2012](http://go.microsoft.com/fwlink/?LinkId=394238) (http://go.microsoft.com/fwlink/?LinkId=394238).\n\n## <a href=\"\" id=\"bkmk-sqlalwayson\"></a>Support for Microsoft SQL Server Always On configuration\n\n\nThe App-V 5.0 management server database supports deployments to computers running Microsoft SQL Server with the **Always On** configuration.\n\n## Related topics\n\n\n[Planning to Deploy App-V](planning-to-deploy-app-v.md)\n\n \n\n \n\n\n\n\n\n"}