{"nodes":[{"content":"User Account Control Allow UIAccess applications to prompt for elevation without using the secure desktop (Windows 10)","pos":[11,129]},{"content":"Describes the best practices, location, values, and security considerations for the User Account Control Allow UIAccess applications to prompt for elevation without using the secure desktop security policy setting.","pos":[143,357]},{"content":"User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop","pos":[513,619]},{"content":"Applies to","pos":[623,633]},{"content":"Windows 10","pos":[640,650]},{"pos":[652,871],"content":"Describes the best practices, location, values, and security considerations for the <bpt id=\"p1\">**</bpt>User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[876,885]},{"content":"This security setting controls whether User Interface Accessibility (UIAccess or UIA) programs can automatically disable the secure desktop for elevation prompts that are used by a standard user.","pos":[887,1082]},{"pos":[1085,1185],"content":"<bpt id=\"p1\">**</bpt>Note:<ept id=\"p1\">**</ept>  This setting does not change the behavior of the UAC elevation prompt for administrators."},{"content":"Background","pos":[1190,1200]},{"content":"User Interface Privilege Isolation (UIPI) implements restrictions in the Windows subsystem that prevent lower-privilege applications from sending messages or installing hooks in higher-privilege processes.","pos":[1204,1409]},{"content":"Higher-privilege applications are permitted to send messages to lower-privilege processes.","pos":[1410,1500]},{"content":"UIPI does not interfere with or change the behavior of messages between applications at the same privilege (or integrity) level.","pos":[1501,1629]},{"content":"Microsoft UI Automation is the current model to support accessibility requirements in the Windows operating systems.","pos":[1631,1747]},{"content":"Applications that are designed to support an accessible user experience control the behavior of other Windows applications on behalf of the user.","pos":[1748,1893]},{"content":"When all applications on the automation client computer and server are running as a standard user (that is, at a medium integrity level), the UIPI restrictions do not interfere with the Microsoft UI automation model.","pos":[1894,2110]},{"content":"However, there might be times when an administrative user runs an application with elevated privilege based on UAC in Admin Approval Mode.","pos":[2112,2250]},{"content":"Microsoft UI Automation cannot drive the UI graphics of elevated applications on the desktop without the ability to bypass the restrictions that UIPI implements.","pos":[2251,2412]},{"content":"The ability to bypass UIPI restrictions across privilege levels is available for UI automation programs by using UIAccess.","pos":[2413,2535]},{"content":"If an application presents a UIAccess attribute when it requests privileges, the application is stating a requirement to bypass UIPI restrictions for sending messages across privilege levels.","pos":[2537,2728]},{"content":"Devices implement the following policy checks before starting an application with UIAccess privilege.","pos":[2729,2831]},{"content":"The application must have a digital signature that can be verified by using a digital certificate that is associated with the Trusted Root Certification Authorities store on the local computer.","pos":[2837,3030]},{"content":"The application must be installed in a local folder that is writeable only by administrators, such as the Program Files directory.","pos":[3035,3165]},{"content":"The allowed directories for UI automation applications are:","pos":[3166,3225]},{"content":"%ProgramFiles% and its subdirectories.","pos":[3235,3273]},{"content":"%WinDir% and its subdirectories, except a few subdirectories that are excluded because standard users have write access.","pos":[3282,3402]},{"content":"Resulting behavior","pos":[3406,3424]},{"content":"When this setting is enabled, UIAccess programs (including Windows Remote Assistance) can automatically disable the secure desktop for elevation prompts.","pos":[3428,3581]},{"content":"Unless you have also disabled elevation prompts, the prompts appear on the interactive user's desktop instead of on the secure desktop.","pos":[3582,3717]},{"content":"The prompts also appear on the remote administrator's view of the desktop during a Windows Remote Assistance session, and the remote administrator can provide the appropriate credentials for elevation.","pos":[3718,3919]},{"pos":[3921,4251],"content":"If you disable this setting, the secure desktop can only be disabled by the user of the interactive desktop or by disabling the <bpt id=\"p1\">[</bpt>User Account Control: Switch to the secure desktop when prompting for elevation<ept id=\"p1\">](user-account-control-switch-to-the-secure-desktop-when-prompting-for-elevation.md)</ept> setting, which by default is enabled."},{"content":"Possible values","pos":[4257,4272]},{"content":"Enabled","pos":[4278,4285]},{"content":"UIA programs can automatically disable the secure desktop for elevation prompts, and unless you have also disabled elevation prompts, the prompts appear on the interactive user's desktop instead of on the secure desktop.","pos":[4291,4511]},{"content":"Prompts will also appear on the remote administrator's view of the desktop during a Windows Remote Assistance session, and the remote administrator can provide the appropriate credentials for elevation.","pos":[4512,4714]},{"content":"Disabled","pos":[4720,4728]},{"pos":[4734,4932],"content":"The secure desktop can be disabled only by the user of the interactive desktop or by disabling the <bpt id=\"p1\">**</bpt>User Account Control: Switch to the secure desktop when prompting for elevation<ept id=\"p1\">**</ept> policy setting."},{"content":"Best practices","pos":[4938,4952]},{"content":"Best practices are dependent on your security policies and your remote operational requirements.","pos":[4958,5054]},{"content":"Location","pos":[5060,5068]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>Security Options","pos":[5070,5163]},{"content":"Default values","pos":[5169,5183]},{"content":"The following table lists the actual and effective default values for this policy.","pos":[5185,5267]},{"content":"Default values are also listed on the policy’s property page.","pos":[5268,5329]},{"content":"Server type or GPO","pos":[5331,5349]},{"content":"Default value","pos":[5351,5364]},{"content":"Default Domain Policy","pos":[5379,5400]},{"content":"Not defined","pos":[5402,5413]},{"content":"Default Domain Controller Policy","pos":[5418,5450]},{"content":"Not defined","pos":[5453,5464]},{"content":"Stand-Alone Server Default Settings","pos":[5469,5504]},{"content":"Disabled","pos":[5507,5515]},{"content":"DC Effective Default Settings","pos":[5520,5549]},{"content":"Disabled","pos":[5552,5560]},{"content":"Member Server Effective Default Settings","pos":[5565,5605]},{"content":"Disabled","pos":[5608,5616]},{"content":"Client Computer Effective Default Settings","pos":[5621,5663]},{"content":"Disabled","pos":[5666,5674]},{"content":"Policy management","pos":[5682,5699]},{"content":"This section describes features and tools that are available to help you manage this policy.","pos":[5701,5793]},{"content":"Restart requirement","pos":[5799,5818]},{"content":"None.","pos":[5820,5825]},{"content":"Changes to this policy become effective without a computer restart when they are saved locally or distributed through Group Policy.","pos":[5826,5957]},{"content":"Group Policy","pos":[5963,5975]},{"content":"All auditing capabilities are integrated in Group Policy.","pos":[5977,6034]},{"content":"You can configure, deploy, and manage these settings in the Group Policy Management Console (GPMC) or Local Security Policy snap-in for a domain, site, or organizational unit (OU).","pos":[6035,6215]},{"content":"Policy interactions","pos":[6221,6240]},{"content":"If you plan to enable this setting, you should also review the effect of the <bpt id=\"p1\">[</bpt>User Account Control: Behavior of the elevation prompt for standard users<ept id=\"p1\">](user-account-control-behavior-of-the-elevation-prompt-for-standard-users.md)</ept> setting.","pos":[6242,6480]},{"content":"If it is configured as <bpt id=\"p1\">**</bpt>Automatically deny elevation requests<ept id=\"p1\">**</ept>, elevation requests are not presented to the user.","pos":[6481,6596]},{"content":"If you disable this setting, the secure desktop can only be disabled by the user of the interactive desktop or by disabling the <bpt id=\"p1\">[</bpt>User Account Control: Switch to the secure desktop when prompting for elevation<ept id=\"p1\">](user-account-control-switch-to-the-secure-desktop-when-prompting-for-elevation.md)</ept> setting, which by default is enabled.","pos":[6597,6927]},{"content":"Security considerations","pos":[6932,6955]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[6957,7151]},{"content":"Vulnerability","pos":[7157,7170]},{"content":"UIA programs are designed to interact with Windows and application programs on behalf of a user.","pos":[7172,7268]},{"content":"This setting allows UIA programs to bypass the secure desktop to increase usability in certain cases, but it allows elevation requests to appear on the regular interactive desktop instead of on the secure desktop.","pos":[7269,7482]},{"content":"This increases the risk that a malicious program could intercept data that is being transferred between the UI and the application.","pos":[7483,7614]},{"content":"Because UIA programs must be able to respond to prompts regarding security issues, such as the UAC elevation prompt, UIA programs must be highly trusted.","pos":[7615,7768]},{"content":"To be considered trusted, a UIA program must be digitally signed.","pos":[7769,7834]},{"content":"By default, UIA programs can be run only from the following protected paths:","pos":[7835,7911]},{"content":"..<ph id=\"ph1\">\\\\</ph>Program Files<ph id=\"ph2\">\\\\</ph> (and subfolders)","pos":[7917,7953]},{"content":"..<ph id=\"ph1\">\\\\</ph>Program Files (x86)<ph id=\"ph2\">\\\\</ph> (and subfolders, in 64-bit versions of Windows only)","pos":[7958,8036]},{"content":"..<ph id=\"ph1\">\\\\</ph>Windows<ph id=\"ph2\">\\\\</ph>System32","pos":[8041,8062]},{"content":"The requirement to be in a protected path can be disabled by the <bpt id=\"p1\">[</bpt>User Account Control: Only elevate UIAccess applications that are installed in secure locations<ept id=\"p1\">](user-account-control-only-elevate-uiaccess-applications-that-are-installed-in-secure-locations.md)</ept> setting.","pos":[8066,8336]},{"content":"Although this setting applies to any UIA program, it is used primarily in certain Windows Remote Assistance scenarios.","pos":[8337,8455]},{"content":"Countermeasure","pos":[8461,8475]},{"pos":[8477,8608],"content":"Disable the <bpt id=\"p1\">**</bpt>User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop<ept id=\"p1\">**</ept> setting."},{"content":"Potential impact","pos":[8614,8630]},{"content":"If a user requests remote assistance from an administrator and the remote assistance session is established, elevation prompts appear on the interactive user's secure desktop and the administrator's remote session is paused.","pos":[8632,8856]},{"content":"To avoid pausing the remote administrator’s session during elevation requests, the user can select the \"Allow IT Expert to respond to User Account Control prompts\" check box when setting up the remote assistance session.","pos":[8857,9077]},{"content":"However, selecting this check box requires that the interactive user respond to an elevation prompt on the secure desktop.","pos":[9078,9200]},{"content":"If the interactive user is a standard user, the user does not have the required credentials to allow elevation.","pos":[9201,9312]},{"content":"Related topics","pos":[9317,9331]},{"content":"Security Options","pos":[9336,9352]}],"content":"---\ntitle: User Account Control Allow UIAccess applications to prompt for elevation without using the secure desktop (Windows 10)\ndescription: Describes the best practices, location, values, and security considerations for the User Account Control Allow UIAccess applications to prompt for elevation without using the secure desktop security policy setting.\nms.assetid: fce20472-3c93-449d-b520-13c4c74a9892\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, values, and security considerations for the **User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop** security policy setting.\n\n## Reference\n\nThis security setting controls whether User Interface Accessibility (UIAccess or UIA) programs can automatically disable the secure desktop for elevation prompts that are used by a standard user.\n\n>**Note:**  This setting does not change the behavior of the UAC elevation prompt for administrators.\n \n**Background**\n\nUser Interface Privilege Isolation (UIPI) implements restrictions in the Windows subsystem that prevent lower-privilege applications from sending messages or installing hooks in higher-privilege processes. Higher-privilege applications are permitted to send messages to lower-privilege processes. UIPI does not interfere with or change the behavior of messages between applications at the same privilege (or integrity) level.\n\nMicrosoft UI Automation is the current model to support accessibility requirements in the Windows operating systems. Applications that are designed to support an accessible user experience control the behavior of other Windows applications on behalf of the user. When all applications on the automation client computer and server are running as a standard user (that is, at a medium integrity level), the UIPI restrictions do not interfere with the Microsoft UI automation model.\n\nHowever, there might be times when an administrative user runs an application with elevated privilege based on UAC in Admin Approval Mode. Microsoft UI Automation cannot drive the UI graphics of elevated applications on the desktop without the ability to bypass the restrictions that UIPI implements. The ability to bypass UIPI restrictions across privilege levels is available for UI automation programs by using UIAccess.\n\nIf an application presents a UIAccess attribute when it requests privileges, the application is stating a requirement to bypass UIPI restrictions for sending messages across privilege levels. Devices implement the following policy \nchecks before starting an application with UIAccess privilege.\n\n1.  The application must have a digital signature that can be verified by using a digital certificate that is associated with the Trusted Root Certification Authorities store on the local computer.\n2.  The application must be installed in a local folder that is writeable only by administrators, such as the Program Files directory. The allowed directories for UI automation applications are:\n\n    1.  %ProgramFiles% and its subdirectories.\n    2.  %WinDir% and its subdirectories, except a few subdirectories that are excluded because standard users have write access.\n\n**Resulting behavior**\n\nWhen this setting is enabled, UIAccess programs (including Windows Remote Assistance) can automatically disable the secure desktop for elevation prompts. Unless you have also disabled elevation prompts, the prompts appear on the interactive user's desktop instead of on the secure desktop. The prompts also appear on the remote administrator's view of the desktop during a Windows Remote Assistance session, and the remote administrator can provide the appropriate credentials for elevation.\n\nIf you disable this setting, the secure desktop can only be disabled by the user of the interactive desktop or by disabling the [User Account Control: Switch to the secure desktop when prompting for elevation](user-account-control-switch-to-the-secure-desktop-when-prompting-for-elevation.md) setting, which by default is enabled.\n\n### Possible values\n\n-   Enabled\n\n    UIA programs can automatically disable the secure desktop for elevation prompts, and unless you have also disabled elevation prompts, the prompts appear on the interactive user's desktop instead of on the secure desktop. Prompts will also appear on the remote administrator's view of the desktop during a Windows Remote Assistance session, and the remote administrator can provide the appropriate credentials for elevation.\n\n-   Disabled\n\n    The secure desktop can be disabled only by the user of the interactive desktop or by disabling the **User Account Control: Switch to the secure desktop when prompting for elevation** policy setting.\n\n### Best practices\n\n-   Best practices are dependent on your security policies and your remote operational requirements.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\Security Options\n\n### Default values\n\nThe following table lists the actual and effective default values for this policy. Default values are also listed on the policy’s property page.\n\nServer type or GPO| Default value |\n| - | - |\n| Default Domain Policy| Not defined| \n| Default Domain Controller Policy | Not defined| \n| Stand-Alone Server Default Settings | Disabled| \n| DC Effective Default Settings | Disabled| \n| Member Server Effective Default Settings | Disabled| \n| Client Computer Effective Default Settings | Disabled| \n \n## Policy management\n\nThis section describes features and tools that are available to help you manage this policy.\n\n### Restart requirement\n\nNone. Changes to this policy become effective without a computer restart when they are saved locally or distributed through Group Policy.\n\n### Group Policy\n\nAll auditing capabilities are integrated in Group Policy. You can configure, deploy, and manage these settings in the Group Policy Management Console (GPMC) or Local Security Policy snap-in for a domain, site, or organizational unit (OU).\n\n### Policy interactions\n\nIf you plan to enable this setting, you should also review the effect of the [User Account Control: Behavior of the elevation prompt for standard users](user-account-control-behavior-of-the-elevation-prompt-for-standard-users.md) setting. If it is configured as **Automatically deny elevation requests**, elevation requests are not presented to the user. If you disable this setting, the secure desktop can only be disabled by the user of the interactive desktop or by disabling the [User Account Control: Switch to the secure desktop when prompting for elevation](user-account-control-switch-to-the-secure-desktop-when-prompting-for-elevation.md) setting, which by default is enabled.\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nUIA programs are designed to interact with Windows and application programs on behalf of a user. This setting allows UIA programs to bypass the secure desktop to increase usability in certain cases, but it allows elevation requests to appear on the regular interactive desktop instead of on the secure desktop. This increases the risk that a malicious program could intercept data that is being transferred between the UI and the application. Because UIA programs must be able to respond to prompts regarding security issues, such as the UAC elevation prompt, UIA programs must be highly trusted. To be considered trusted, a UIA program must be digitally signed. By default, UIA programs can be run only from the following protected paths:\n\n-   ..\\\\Program Files\\\\ (and subfolders)\n-   ..\\\\Program Files (x86)\\\\ (and subfolders, in 64-bit versions of Windows only)\n-   ..\\\\Windows\\\\System32\\\\\n\nThe requirement to be in a protected path can be disabled by the [User Account Control: Only elevate UIAccess applications that are installed in secure locations](user-account-control-only-elevate-uiaccess-applications-that-are-installed-in-secure-locations.md) setting. Although this setting applies to any UIA program, it is used primarily in certain Windows Remote Assistance scenarios.\n\n### Countermeasure\n\nDisable the **User Account Control: Allow UIAccess applications to prompt for elevation without using the secure desktop** setting.\n\n### Potential impact\n\nIf a user requests remote assistance from an administrator and the remote assistance session is established, elevation prompts appear on the interactive user's secure desktop and the administrator's remote session is paused. To avoid pausing the remote administrator’s session during elevation requests, the user can select the \"Allow IT Expert to respond to User Account Control prompts\" check box when setting up the remote assistance session. However, selecting this check box requires that the interactive user respond to an elevation prompt on the secure desktop. If the interactive user is a standard user, the user does not have the required credentials to allow elevation.\n\n## Related topics\n\n- [Security Options](security-options.md)\n"}