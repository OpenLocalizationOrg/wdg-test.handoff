{"nodes":[{"content":"Log on as a batch job (Windows 10)","pos":[11,45]},{"content":"Describes the best practices, location, values, policy management, and security considerations for the Log on as a batch job security policy setting.","pos":[59,208]},{"content":"Log on as a batch job","pos":[364,385]},{"content":"Applies to","pos":[389,399]},{"content":"Windows 10","pos":[406,416]},{"pos":[418,571],"content":"Describes the best practices, location, values, policy management, and security considerations for the <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept> security policy setting."},{"content":"Reference","pos":[576,585]},{"content":"This policy setting determines which accounts can log on by using a batch-queue tool such as the Task Scheduler service.","pos":[587,707]},{"content":"When you use the Add Scheduled Task Wizard to schedule a task to run under a particular user name and password, that user is automatically assigned the <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept> user right.","pos":[708,897]},{"content":"When the scheduled time arrives, the Task Scheduler service logs on the user as a batch job instead of as an interactive user, and the task runs in the user's security context.","pos":[898,1074]},{"content":"Constant: SeBatchLogonRight","pos":[1076,1103]},{"content":"Possible values","pos":[1109,1124]},{"content":"User-defined list of accounts","pos":[1130,1159]},{"content":"Default values","pos":[1164,1178]},{"content":"Not Defined","pos":[1183,1194]},{"content":"Best practices","pos":[1200,1214]},{"content":"Use discretion when assigning this right to specific users for security reasons.","pos":[1220,1300]},{"content":"The default settings are sufficient in most cases.","pos":[1301,1351]},{"content":"Location","pos":[1357,1365]},{"content":"Computer Configuration<ph id=\"ph1\">\\\\</ph>Windows Settings<ph id=\"ph2\">\\\\</ph>Security Settings<ph id=\"ph3\">\\\\</ph>Local Policies<ph id=\"ph4\">\\\\</ph>User Rights Assignment","pos":[1367,1466]},{"content":"Default values","pos":[1472,1486]},{"content":"By default, this setting is for Administrators, Backup Operators, and Performance Log Users on domain controllers and on stand-alone servers.","pos":[1488,1629]},{"content":"The following table lists the actual and effective default policy values.","pos":[1631,1704]},{"content":"Default values are also listed on the policy’s property page.","pos":[1705,1766]},{"content":"Server type or GPO","pos":[1770,1788]},{"content":"Default value","pos":[1791,1804]},{"content":"Default Domain Policy","pos":[1819,1840]},{"content":"Not defined","pos":[1842,1853]},{"content":"Default Domain Controller Policy","pos":[1858,1890]},{"content":"Administrators","pos":[1893,1907]},{"content":"Backup Operators","pos":[1912,1928]},{"content":"Performance Log Users","pos":[1933,1954]},{"content":"Stand-Alone Server Default Settings","pos":[1959,1994]},{"content":"Administrators","pos":[1997,2011]},{"content":"Backup Operators","pos":[2016,2032]},{"content":"Performance Log Users","pos":[2037,2058]},{"content":"Domain Controller Effective Default Settings","pos":[2063,2107]},{"content":"Administrators","pos":[2110,2124]},{"content":"Backup Operators","pos":[2129,2145]},{"content":"Performance Log Users","pos":[2150,2171]},{"content":"Member Server Effective Default Settings","pos":[2176,2216]},{"content":"Administrators","pos":[2219,2233]},{"content":"Backup Operators","pos":[2238,2254]},{"content":"Performance Log Users","pos":[2259,2280]},{"content":"Client Computer Effective Default Settings","pos":[2285,2327]},{"content":"Administrators","pos":[2330,2344]},{"content":"Policy management","pos":[2352,2369]},{"content":"This section describes features, tools, and guidance to help you manage this policy.","pos":[2371,2455]},{"content":"A restart of the computer is not required for this policy setting to be effective.","pos":[2457,2539]},{"content":"Any change to the user rights assignment for an account becomes effective the next time the owner of the account logs on.","pos":[2541,2662]},{"content":"Group Policy","pos":[2668,2680]},{"content":"Task Scheduler automatically grants this right when a user schedules a task.","pos":[2682,2758]},{"content":"To override this behavior use the <bpt id=\"p1\">[</bpt>Deny log on as a batch job<ept id=\"p1\">](deny-log-on-as-a-batch-job.md)</ept> User Rights Assignment setting.","pos":[2759,2884]},{"content":"Group Policy settings are applied in the following order, which will overwrite settings on the local computer at the next Group Policy update:","pos":[2886,3028]},{"content":"Local policy settings","pos":[3034,3055]},{"content":"Site policy settings","pos":[3060,3080]},{"content":"Domain policy settings","pos":[3085,3107]},{"content":"OU policy settings","pos":[3112,3130]},{"content":"Security considerations","pos":[3135,3158]},{"content":"This section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.","pos":[3160,3354]},{"content":"Vulnerability","pos":[3360,3373]},{"content":"The <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept> user right presents a low-risk vulnerability.","pos":[3375,3450]},{"content":"For most organizations, the default settings are sufficient.","pos":[3451,3511]},{"content":"Members of the local Administrators group have this right by default.","pos":[3512,3581]},{"content":"Countermeasure","pos":[3587,3601]},{"content":"You should allow the computer to manage this user right automatically if you want to allow scheduled tasks to run for specific user accounts.","pos":[3603,3744]},{"content":"If you do not want to use the Task Scheduler in this manner, configure the <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept> user right for only the Local Service account.","pos":[3745,3892]},{"pos":[3894,4131],"content":"For IIS servers, you should configure this policy locally instead of through domain–based Group Policy settings so that you can ensure the local IUSR<ph id=\"ph1\">\\_</ph><bpt id=\"p1\">*</bpt><ph id=\"ph2\">&amp;lt;</ph>ComputerName<ph id=\"ph3\">&amp;gt;</ph><ept id=\"p1\">*</ept> and IWAM<ph id=\"ph4\">\\_</ph><bpt id=\"p2\">*</bpt><ph id=\"ph5\">&amp;lt;</ph>ComputerName<ph id=\"ph6\">&amp;gt;</ph><ept id=\"p2\">*</ept> accounts have this user right."},{"content":"Potential impact","pos":[4137,4153]},{"content":"If you configure the <bpt id=\"p1\">**</bpt>Log on as a batch job<ept id=\"p1\">**</ept> setting by using domain-based Group Policy settings, the computer cannot assign the user right to accounts that are used for scheduled jobs in the Task Scheduler.","pos":[4155,4364]},{"content":"If you install optional components such as ASP.NET or IIS, you may need to assign this user right to additional accounts that are required by those components.","pos":[4365,4524]},{"content":"For example, IIS requires assignment of this user right to the IIS<ph id=\"ph1\">\\_</ph>WPG group and the IUSR<ph id=\"ph2\">\\_</ph><bpt id=\"p1\">*</bpt><ph id=\"ph3\">&amp;lt;</ph>ComputerName<ph id=\"ph4\">&amp;gt;</ph><ept id=\"p1\">*</ept>, ASPNET, and IWAM<ph id=\"ph5\">\\_</ph><bpt id=\"p2\">*</bpt><ph id=\"ph6\">&amp;lt;</ph>ComputerName<ph id=\"ph7\">&amp;gt;</ph><ept id=\"p2\">*</ept> accounts.","pos":[4525,4691]},{"content":"If this user right is not assigned to this group and these accounts, IIS cannot run some COM objects that are necessary for proper functionality.","pos":[4692,4837]},{"content":"Related topics","pos":[4842,4856]},{"content":"User Rights Assignment","pos":[4861,4883]}],"content":"---\ntitle: Log on as a batch job (Windows 10)\ndescription: Describes the best practices, location, values, policy management, and security considerations for the Log on as a batch job security policy setting.\nms.assetid: 4eaddb51-0a18-470e-9d3d-5e7cd7970b41\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Log on as a batch job\n\n**Applies to**\n-   Windows 10\n\nDescribes the best practices, location, values, policy management, and security considerations for the **Log on as a batch job** security policy setting.\n\n## Reference\n\nThis policy setting determines which accounts can log on by using a batch-queue tool such as the Task Scheduler service. When you use the Add Scheduled Task Wizard to schedule a task to run under a particular user name and password, that user is automatically assigned the **Log on as a batch job** user right. When the scheduled time arrives, the Task Scheduler service logs on the user as a batch job instead of as an interactive user, and the task runs in the user's security context.\n\nConstant: SeBatchLogonRight\n\n### Possible values\n\n-   User-defined list of accounts\n-   Default values\n-   Not Defined\n\n### Best practices\n\n-   Use discretion when assigning this right to specific users for security reasons. The default settings are sufficient in most cases.\n\n### Location\n\nComputer Configuration\\\\Windows Settings\\\\Security Settings\\\\Local Policies\\\\User Rights Assignment\n\n### Default values\n\nBy default, this setting is for Administrators, Backup Operators, and Performance Log Users on domain controllers and on stand-alone servers.\n\nThe following table lists the actual and effective default policy values. Default values are also listed on the policy’s property page.\n\n| Server type or GPO | Default value |\n| - | - |\n| Default Domain Policy| Not defined| \n| Default Domain Controller Policy | Administrators<br/>Backup Operators<br/>Performance Log Users| \n| Stand-Alone Server Default Settings | Administrators<br/>Backup Operators<br/>Performance Log Users| \n| Domain Controller Effective Default Settings | Administrators<br/>Backup Operators<br/>Performance Log Users| \n| Member Server Effective Default Settings | Administrators<br/>Backup Operators<br/>Performance Log Users| \n| Client Computer Effective Default Settings | Administrators| \n \n## Policy management\n\nThis section describes features, tools, and guidance to help you manage this policy.\n\nA restart of the computer is not required for this policy setting to be effective.\n\nAny change to the user rights assignment for an account becomes effective the next time the owner of the account logs on.\n\n### Group Policy\n\nTask Scheduler automatically grants this right when a user schedules a task. To override this behavior use the [Deny log on as a batch job](deny-log-on-as-a-batch-job.md) User Rights Assignment setting.\n\nGroup Policy settings are applied in the following order, which will overwrite settings on the local computer at the next Group Policy update:\n\n1.  Local policy settings\n2.  Site policy settings\n3.  Domain policy settings\n4.  OU policy settings\n\n## Security considerations\n\nThis section describes how an attacker might exploit a feature or its configuration, how to implement the countermeasure, and the possible negative consequences of countermeasure implementation.\n\n### Vulnerability\n\nThe **Log on as a batch job** user right presents a low-risk vulnerability. For most organizations, the default settings are sufficient. Members of the local Administrators group have this right by default.\n\n### Countermeasure\n\nYou should allow the computer to manage this user right automatically if you want to allow scheduled tasks to run for specific user accounts. If you do not want to use the Task Scheduler in this manner, configure the **Log on as a batch job** user right for only the Local Service account.\n\nFor IIS servers, you should configure this policy locally instead of through domain–based Group Policy settings so that you can ensure the local IUSR\\_*&lt;ComputerName&gt;* and IWAM\\_*&lt;ComputerName&gt;* accounts have this user right.\n\n### Potential impact\n\nIf you configure the **Log on as a batch job** setting by using domain-based Group Policy settings, the computer cannot assign the user right to accounts that are used for scheduled jobs in the Task Scheduler. If you install optional components such as ASP.NET or IIS, you may need to assign this user right to additional accounts that are required by those components. For example, IIS requires assignment of this user right to the IIS\\_WPG group and the IUSR\\_*&lt;ComputerName&gt;*, ASPNET, and IWAM\\_*&lt;ComputerName&gt;* accounts. If this user right is not assigned to this group and these accounts, IIS cannot run some COM objects that are necessary for proper functionality.\n\n## Related topics\n\n- [User Rights Assignment](user-rights-assignment.md)\n"}