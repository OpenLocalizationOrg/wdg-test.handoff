{"nodes":[{"content":"Planning Settings for a Basic Firewall Policy (Windows 10)","pos":[11,69]},{"content":"Planning Settings for a Basic Firewall Policy","pos":[83,128]},{"content":"Planning Settings for a Basic Firewall Policy","pos":[284,329]},{"content":"Applies to","pos":[333,343]},{"content":"Windows 10","pos":[350,360]},{"content":"Windows Server 2016 Technical Preview","pos":[365,402]},{"content":"After you have identified your requirements, and have the information about the network layout and devices available, you can begin to design the GPO settings and rules that will enable you to enforce your requirements on the devices.","pos":[404,638]},{"content":"The following is a list of the firewall settings that you might consider for inclusion in a basic firewall design, together with recommendations to serve as a starting point for your analysis:","pos":[640,832]},{"content":"<bpt id=\"p1\">**</bpt>Profile selection<ept id=\"p1\">**</ept>.","pos":[838,860]},{"content":"The firewall rules can be configured for any of the network location profiles that you see in the Network and Sharing Center: <bpt id=\"p1\">**</bpt>Domain<ept id=\"p1\">**</ept>, <bpt id=\"p2\">**</bpt>Public<ept id=\"p2\">**</ept>, and <bpt id=\"p3\">**</bpt>Private<ept id=\"p3\">**</ept>.","pos":[861,1027]},{"content":"Most settings are enforced in the Domain profile, without an option for the user to change them.","pos":[1028,1124]},{"content":"However, you might want to leave the profile settings configurable by the user on devices that can be taken from the organization's physical network and joined to a public or home network.","pos":[1125,1313]},{"content":"If you lock down the public and private profiles, you might prevent a user from accessing a required network program or service.","pos":[1314,1442]},{"content":"Because they are not on the organization's network, you cannot fix a connectivity problem by deploying rule changes in a GPO.","pos":[1443,1568]},{"content":"For each section that follows, consider each profile and apply the rules to those profiles that make sense for your organization.","pos":[1569,1698]},{"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept>  We recommend that on server devices that you set all rules for all profiles to prevent any unexpected profile switch from disrupting network connectivity.","pos":[1705,1875]},{"content":"You might consider a similar practice for your desktop devices, and only support different profiles on portable devices.","pos":[1876,1996]},{"content":"<bpt id=\"p1\">**</bpt>Firewall state: On<ept id=\"p1\">**</ept>.","pos":[2002,2025]},{"content":"We recommend that you prevent the user from turning it off.","pos":[2026,2085]},{"content":"<bpt id=\"p1\">**</bpt>Default behavior for Inbound connections: Block<ept id=\"p1\">**</ept>.","pos":[2091,2143]},{"content":"We recommend that you enforce the default behavior of blocking unsolicited inbound connections.","pos":[2144,2239]},{"content":"To allow network traffic for a specific program, create an inbound rule that serves as an exception to this default behavior.","pos":[2240,2365]},{"content":"<bpt id=\"p1\">**</bpt>Default behavior for Outbound connections: Allow<ept id=\"p1\">**</ept>.","pos":[2371,2424]},{"content":"We recommend that you enforce the default behavior of allowing outbound connections.","pos":[2425,2509]},{"content":"<bpt id=\"p1\">**</bpt>Allow unicast response: Yes<ept id=\"p1\">**</ept>.","pos":[2515,2547]},{"content":"We recommend that you use the default setting of <bpt id=\"p1\">**</bpt>Yes<ept id=\"p1\">**</ept> unless you have specific requirements to do otherwise.","pos":[2548,2659]},{"content":"<bpt id=\"p1\">**</bpt>Apply local firewall rules: Yes<ept id=\"p1\">**</ept>.","pos":[2665,2701]},{"content":"We recommend that you allow users to create and use local firewall rules.","pos":[2702,2775]},{"content":"If you set this to <bpt id=\"p1\">**</bpt>No<ept id=\"p1\">**</ept>, then when a user clicks <bpt id=\"p2\">**</bpt>Allow<ept id=\"p2\">**</ept> on the notification message to allow traffic for a new program, Windows does not create a new firewall rule and the traffic remains blocked.","pos":[2776,2977]},{"pos":[2983,3157],"content":"If you and the IT staff can create and maintain the list of firewall rules for all permitted applications and deploy them by using GPOs then you can set this value to <bpt id=\"p1\">**</bpt>No<ept id=\"p1\">**</ept>."},{"content":"<bpt id=\"p1\">**</bpt>Apply local connection security rules: No<ept id=\"p1\">**</ept>.","pos":[3163,3209]},{"content":"We recommend that you prevent users from creating and using their own connection security rules.","pos":[3210,3306]},{"content":"Connection failures caused by conflicting rules can be difficult to troubleshoot.","pos":[3307,3388]},{"content":"<bpt id=\"p1\">**</bpt>Logging<ept id=\"p1\">**</ept>.","pos":[3394,3406]},{"content":"We recommend that you enable logging to a file on the local hard disk.","pos":[3407,3477]},{"content":"Be sure to limit the size, such as 4096 KB, to avoid causing performance problems by filling the user's hard disk.","pos":[3478,3592]},{"content":"Be sure to specify a folder to which the Windows Firewall service account has write permissions.","pos":[3593,3689]},{"content":"<bpt id=\"p1\">**</bpt>Inbound rules<ept id=\"p1\">**</ept>.","pos":[3695,3713]},{"content":"Create inbound rules for programs that must be able to receive unsolicited inbound network packets from another device on the network.","pos":[3714,3848]},{"content":"Make the rules as specific as possible to reduce the risk of malicious programs exploiting the rules.","pos":[3849,3950]},{"content":"For example, specify both program and port numbers.","pos":[3951,4002]},{"content":"Specifying a program ensures that the rule is only active when the program is actually running, and specifying the port number ensures that the program cannot receive unexpected traffic on a different port.","pos":[4003,4209]},{"content":"Inbound rules are common on servers, because they host services to which client devices connect.","pos":[4215,4311]},{"content":"When you install programs and services on a server, the installation program typically creates and enables the rules for you.","pos":[4312,4437]},{"content":"Examine the rules to ensure that they do not open up more ports than are required.","pos":[4438,4520]},{"pos":[4527,4824],"content":"<bpt id=\"p1\">**</bpt>Important:<ept id=\"p1\">**</ept>  If you create inbound rules that permit RPC network traffic by using the <bpt id=\"p2\">**</bpt>RPC Endpoint Mapper<ept id=\"p2\">**</ept> and <bpt id=\"p3\">**</bpt>Dynamic RPC<ept id=\"p3\">**</ept> rule options, then all inbound RPC network traffic is permitted because the firewall cannot filter network traffic based on the UUID of the destination application."},{"content":"<bpt id=\"p1\">**</bpt>Outbound rules<ept id=\"p1\">**</ept>.","pos":[4830,4849]},{"content":"Only create outbound rules to block network traffic that must be prevented in all cases.","pos":[4850,4938]},{"content":"If your organization prohibits the use of certain network programs, you can support that policy by blocking the known network traffic used by the program.","pos":[4939,5093]},{"content":"Be sure to test the restrictions before you deploy them to avoid interfering with traffic for needed and authorized programs.","pos":[5094,5219]},{"pos":[5221,5300],"content":"<bpt id=\"p1\">**</bpt>Next: <ept id=\"p1\">**</ept><bpt id=\"p2\">[</bpt>Planning Domain Isolation Zones<ept id=\"p2\">](planning-domain-isolation-zones.md)</ept>"}],"content":"---\ntitle: Planning Settings for a Basic Firewall Policy (Windows 10)\ndescription: Planning Settings for a Basic Firewall Policy\nms.assetid: 4c90df5a-3cbc-4b85-924b-537c2422d735\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: security\nauthor: brianlic-msft\n---\n\n# Planning Settings for a Basic Firewall Policy\n\n**Applies to**\n-   Windows 10\n-   Windows Server 2016 Technical Preview\n\nAfter you have identified your requirements, and have the information about the network layout and devices available, you can begin to design the GPO settings and rules that will enable you to enforce your requirements on the devices.\n\nThe following is a list of the firewall settings that you might consider for inclusion in a basic firewall design, together with recommendations to serve as a starting point for your analysis:\n\n-   **Profile selection**. The firewall rules can be configured for any of the network location profiles that you see in the Network and Sharing Center: **Domain**, **Public**, and **Private**. Most settings are enforced in the Domain profile, without an option for the user to change them. However, you might want to leave the profile settings configurable by the user on devices that can be taken from the organization's physical network and joined to a public or home network. If you lock down the public and private profiles, you might prevent a user from accessing a required network program or service. Because they are not on the organization's network, you cannot fix a connectivity problem by deploying rule changes in a GPO. For each section that follows, consider each profile and apply the rules to those profiles that make sense for your organization.\n\n    >**Important:**  We recommend that on server devices that you set all rules for all profiles to prevent any unexpected profile switch from disrupting network connectivity. You might consider a similar practice for your desktop devices, and only support different profiles on portable devices.\n\n-   **Firewall state: On**. We recommend that you prevent the user from turning it off.\n\n-   **Default behavior for Inbound connections: Block**. We recommend that you enforce the default behavior of blocking unsolicited inbound connections. To allow network traffic for a specific program, create an inbound rule that serves as an exception to this default behavior.\n\n-   **Default behavior for Outbound connections: Allow**. We recommend that you enforce the default behavior of allowing outbound connections.\n\n-   **Allow unicast response: Yes**. We recommend that you use the default setting of **Yes** unless you have specific requirements to do otherwise.\n\n-   **Apply local firewall rules: Yes**. We recommend that you allow users to create and use local firewall rules. If you set this to **No**, then when a user clicks **Allow** on the notification message to allow traffic for a new program, Windows does not create a new firewall rule and the traffic remains blocked.\n\n    If you and the IT staff can create and maintain the list of firewall rules for all permitted applications and deploy them by using GPOs then you can set this value to **No**.\n\n-   **Apply local connection security rules: No**. We recommend that you prevent users from creating and using their own connection security rules. Connection failures caused by conflicting rules can be difficult to troubleshoot.\n\n-   **Logging**. We recommend that you enable logging to a file on the local hard disk. Be sure to limit the size, such as 4096 KB, to avoid causing performance problems by filling the user's hard disk. Be sure to specify a folder to which the Windows Firewall service account has write permissions.\n\n-   **Inbound rules**. Create inbound rules for programs that must be able to receive unsolicited inbound network packets from another device on the network. Make the rules as specific as possible to reduce the risk of malicious programs exploiting the rules. For example, specify both program and port numbers. Specifying a program ensures that the rule is only active when the program is actually running, and specifying the port number ensures that the program cannot receive unexpected traffic on a different port.\n\n    Inbound rules are common on servers, because they host services to which client devices connect. When you install programs and services on a server, the installation program typically creates and enables the rules for you. Examine the rules to ensure that they do not open up more ports than are required.\n\n    >**Important:**  If you create inbound rules that permit RPC network traffic by using the **RPC Endpoint Mapper** and **Dynamic RPC** rule options, then all inbound RPC network traffic is permitted because the firewall cannot filter network traffic based on the UUID of the destination application.\n\n-   **Outbound rules**. Only create outbound rules to block network traffic that must be prevented in all cases. If your organization prohibits the use of certain network programs, you can support that policy by blocking the known network traffic used by the program. Be sure to test the restrictions before you deploy them to avoid interfering with traffic for needed and authorized programs.\n\n**Next: **[Planning Domain Isolation Zones](planning-domain-isolation-zones.md)\n"}