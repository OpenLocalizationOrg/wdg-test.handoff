{"nodes":[{"content":"Frequently Asked Questions (Windows 10)","pos":[11,50]},{"content":"Frequently Asked Questions","pos":[64,90]},{"content":"Frequently Asked Questions","pos":[223,249]},{"content":"The following sections provide frequently asked questions and recommended solutions for migrations using User State Migration Tool (USMT) 10.0.","pos":[252,395]},{"pos":[442,449],"content":"General"},{"pos":[483,536],"content":"How much space is needed on the destination computer?"},{"content":"The destination computer needs enough available space for the following:","pos":[538,610]},{"content":"Operating system","pos":[616,632]},{"content":"Applications","pos":[638,650]},{"content":"Uncompressed store","pos":[656,674]},{"pos":[714,808],"content":"Can I store the files and settings directly on the destination computer or do I need a server?"},{"content":"You do not need to save the files to a server.","pos":[810,856]},{"content":"If you are moving the user state to a new computer, you can create the store on a shared folder, on media that you can remove, such as a USB flash drive (UFD), or you can store it directly on the destination computer, as in the following steps:","pos":[857,1101]},{"content":"Create and share the directory C:<ph id=\"ph1\">\\\\</ph>store on the destination computer.","pos":[1107,1176]},{"pos":[1182,1299],"content":"Run the ScanState tool on the source computer and save the files and settings to <ph id=\"ph1\">\\\\\\\\</ph><bpt id=\"p1\">*</bpt>DestinationComputerName<ept id=\"p1\">*</ept><ph id=\"ph2\">\\\\</ph>store"},{"content":"Run the LoadState tool on the destination computer and specify C:<ph id=\"ph1\">\\\\</ph>store as the store location.","pos":[1305,1400]},{"pos":[1429,1499],"content":"Can I migrate data between operating systems with different languages?"},{"content":"No.","pos":[1501,1504]},{"content":"USMT does not support migrating data between operating systems with different languages; the source computer's operating-system language must match the destination computer's operating-system language.","pos":[1505,1706]},{"pos":[1739,1820],"content":"Can I change the location of the temporary directory on the destination computer?"},{"content":"Yes.","pos":[1822,1826]},{"content":"The environment variable USMT<ph id=\"ph1\">\\_</ph>WORKING<ph id=\"ph2\">\\_</ph>DIR can be changed to an alternative temporary directory.","pos":[1827,1924]},{"content":"There are some offline migration scenarios where this is necessary, for example, when the USMT binaries are located on read-only Windows Preinstallation Environment (WinPE) boot media.","pos":[1925,2109]},{"content":"How do I install USMT?","pos":[2115,2137]},{"content":"Because USMT is included in Windows Assessment and Deployment Kit (Windows ADK), you need to install the Windows ADK package on at least one computer in your environment.","pos":[2139,2309]},{"content":"However, the USMT binaries are designed to be deployed using xcopy.","pos":[2310,2377]},{"content":"This means that they are installed on a computer simply by recursively copying the USMT directory from the computer containing the Windows ADK to each client computer.","pos":[2378,2545]},{"pos":[2581,2605],"content":"How do I uninstall USMT?"},{"content":"If you have installed the Windows ADK on the computer, uninstalling Windows ADK will uninstall USMT.","pos":[2607,2707]},{"content":"For client computers that do not have the Windows ADK installed, you can simply delete the USMT directory to uninstall USMT.","pos":[2708,2832]},{"pos":[2879,2897],"content":"Files and Settings"},{"pos":[2931,3003],"content":"How can I exclude a folder or a certain type of file from the migration?"},{"content":"You can use the <bpt id=\"p1\">**</bpt><ph id=\"ph1\">&amp;lt;</ph>unconditionalExclude<ph id=\"ph2\">&amp;gt;</ph><ept id=\"p1\">**</ept> element to globally exclude data from the migration.","pos":[3005,3106]},{"content":"For example, you can use this element to exclude all MP3 files on the computer or to exclude all files from C:<ph id=\"ph1\">\\\\</ph>UserData.","pos":[3107,3228]},{"content":"This element excludes objects regardless of any other <ph id=\"ph1\">&amp;lt;</ph>include<ph id=\"ph2\">&amp;gt;</ph> rules that are in the .xml files.","pos":[3229,3332]},{"content":"For an example, see <ph id=\"ph1\">&amp;lt;</ph>unconditionalExclude<ph id=\"ph2\">&amp;gt;</ph> in the <bpt id=\"p1\">[</bpt>Exclude Files and Settings<ept id=\"p1\">](usmt-exclude-files-and-settings.md)</ept> topic.","pos":[3333,3460]},{"content":"For the syntax of this element, see <bpt id=\"p1\">[</bpt>XML Elements Library<ept id=\"p1\">](usmt-xml-elements-library.md)</ept>.","pos":[3461,3550]},{"pos":[3590,3689],"content":"What happens to files that were located on a drive that does not exist on the destination computer?"},{"content":"USMT migrates the files to the %SystemDrive% while maintaining the correct folder hierarchy.","pos":[3691,3783]},{"content":"For example, if E:<ph id=\"ph1\">\\\\</ph>data<ph id=\"ph2\">\\\\</ph>File.pst is on the source computer, but the destination computer does not have an E:<ph id=\"ph3\">\\\\</ph> drive, the file will be migrated to C:<ph id=\"ph4\">\\\\</ph>data<ph id=\"ph5\">\\\\</ph>File.pst, if C:<ph id=\"ph6\">\\\\</ph> is the system drive.","pos":[3784,3981]},{"content":"This holds true even when <ph id=\"ph1\">&amp;lt;</ph>locationModify<ph id=\"ph2\">&amp;gt;</ph> rules attempt to move data to a drive that does not exist on the destination computer.","pos":[3982,4117]},{"pos":[4160,4175],"content":"USMT .xml Files"},{"pos":[4211,4255],"content":"Where can I get examples of USMT .xml files?"},{"content":"The following topics include examples of USMT .xml files:","pos":[4257,4314]},{"content":"Exclude Files and Settings","pos":[4321,4347]},{"content":"Reroute Files and Settings","pos":[4391,4417]},{"content":"Include Files and Settings","pos":[4461,4487]},{"content":"Custom XML Examples","pos":[4531,4550]},{"pos":[4614,4673],"content":"Can I use custom .xml files that were written for USMT 5.0?"},{"content":"Yes.","pos":[4675,4679]},{"content":"You can use custom .xml files that were written for USMT 5.0 with USMT for Windows 10.","pos":[4680,4766]},{"content":"However, in order to use new USMT functionality, you must revisit your custom USMT files and refresh them to include the new command-line options and XML elements.","pos":[4767,4930]},{"pos":[4960,4994],"content":"How can I validate the .xml files?"},{"content":"You can use the USMT XML Schema (MigXML.xsd) to write and validate migration .xml files.","pos":[4996,5084]},{"pos":[5117,5195],"content":"Why must I list the .xml files with both the ScanState and LoadState commands?"},{"content":"The .xml files are not copied to the store as in previous versions of USMT.","pos":[5197,5272]},{"content":"Because the ScanState and LoadState tools need the .xml files to control the migration, you must specify the same set of .xml files for the <bpt id=\"p1\">**</bpt>ScanState<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>LoadState<ept id=\"p2\">**</ept> commands.","pos":[5273,5454]},{"content":"If you used a particular set of mig<ph id=\"ph1\">\\*</ph>.xml files in the ScanState tool, either called through the \"/auto\" option, or individually through the \"/i\" option, then you should use same option to call the exact same mig<ph id=\"ph2\">\\*</ph>.xml files in the LoadState tool.","pos":[5455,5702]},{"content":"However, you do not have to specify the Config.xml file, unless you want to exclude some of the files and settings that you migrated to the store.","pos":[5703,5849]},{"content":"For example, you might want to migrate the My Documents folder to the store, but not to the destination computer.","pos":[5850,5963]},{"content":"To do this, modify the Config.xml file and specify the updated file with the <bpt id=\"p1\">**</bpt>LoadState<ept id=\"p1\">**</ept> command.","pos":[5964,6063]},{"content":"<bpt id=\"p1\">**</bpt>LoadState<ept id=\"p1\">**</ept> will migrate only the files and settings that you want to migrate.","pos":[6064,6144]},{"content":"If you exclude an .xml file from the <bpt id=\"p1\">**</bpt>LoadState<ept id=\"p1\">**</ept> command, then all of the data that is in the store that was migrated with the missing .xml files will be migrated.","pos":[6146,6311]},{"content":"However, the migration rules that were specified for the <bpt id=\"p1\">**</bpt>ScanState<ept id=\"p1\">**</ept> command will not apply.","pos":[6312,6406]},{"content":"For example, if you exclude a MigApp.xml file that has a rerouting rule such as <ph id=\"ph1\">`MigsysHelperFunction.RelativeMove(\"c:\\data\", \"%CSIDL_PERSONAL%\")`</ph>, USMT will not reroute the files.","pos":[6407,6587]},{"content":"Instead, it will migrate them to C:<ph id=\"ph1\">\\\\</ph>data.","pos":[6588,6630]},{"pos":[6663,6720],"content":"Which files can I modify and specify on the command line?"},{"content":"You can specify the MigUser.xml and MigApp.xml files on the command line.","pos":[6722,6795]},{"content":"You can modify each of these files.","pos":[6796,6831]},{"content":"The migration of operating system settings is controlled by the manifests, which you cannot modify.","pos":[6832,6931]},{"content":"If you want to exclude certain operating-system settings or any other components, create and modify the Config.xml file.","pos":[6932,7052]},{"pos":[7085,7153],"content":"What happens if I do not specify the .xml files on the command line?"},{"content":"ScanState","pos":[7161,7170]},{"pos":[7178,7313],"content":"If you do not specify any files with the <bpt id=\"p1\">**</bpt>ScanState<ept id=\"p1\">**</ept> command, all user accounts and default operating system components are migrated."},{"content":"LoadState","pos":[7321,7330]},{"content":"If you do not specify any files with the <bpt id=\"p1\">**</bpt>LoadState<ept id=\"p1\">**</ept> command, all data that is in the store is migrated.","pos":[7338,7444]},{"content":"However, any target-specific migration rules that were specified in .xml files with the <bpt id=\"p1\">**</bpt>ScanState<ept id=\"p1\">**</ept> command will not apply.","pos":[7445,7570]},{"content":"For example, if you exclude a MigApp.xml file that has a rerouting rule such as <ph id=\"ph1\">`MigsysHelperFunction.RelativeMove(\"c:\\data\", \"%CSIDL_PERSONAL%\")`</ph>, USMT will not reroute the files.","pos":[7571,7751]},{"content":"Instead, it will migrate them to C:<ph id=\"ph1\">\\\\</ph>data.","pos":[7752,7794]},{"content":"Conflicts and Precedence","pos":[7799,7823]},{"pos":[7860,7961],"content":"What happens when there are conflicting XML rules or conflicting objects on the destination computer?"},{"pos":[7963,8050],"content":"For more information, see <bpt id=\"p1\">[</bpt>Conflicts and Precedence<ept id=\"p1\">](usmt-conflicts-and-precedence.md)</ept>."},{"content":"Related topics","pos":[8055,8069]},{"content":"User State Migration Tool (USMT) Troubleshooting","pos":[8073,8121]},{"content":"Extract Files from a Compressed USMT Migration Store","pos":[8150,8202]},{"content":"Verify the Condition of a Compressed Migration Store","pos":[8263,8315]}],"content":"---\ntitle: Frequently Asked Questions (Windows 10)\ndescription: Frequently Asked Questions\nms.assetid: 813c13a7-6818-4e6e-9284-7ee49493241b\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nauthor: greg-lindsay\n---\n\n# Frequently Asked Questions\n\n\nThe following sections provide frequently asked questions and recommended solutions for migrations using User State Migration Tool (USMT) 10.0.\n\n## <a href=\"\" id=\"bkmk-generalquestions\"></a>General\n\n\n### <a href=\"\" id=\"bkmk-1\"></a>How much space is needed on the destination computer?\n\nThe destination computer needs enough available space for the following:\n\n-   Operating system\n\n-   Applications\n\n-   Uncompressed store\n\n### <a href=\"\" id=\"bkmk-directly\"></a>Can I store the files and settings directly on the destination computer or do I need a server?\n\nYou do not need to save the files to a server. If you are moving the user state to a new computer, you can create the store on a shared folder, on media that you can remove, such as a USB flash drive (UFD), or you can store it directly on the destination computer, as in the following steps:\n\n1.  Create and share the directory C:\\\\store on the destination computer.\n\n2.  Run the ScanState tool on the source computer and save the files and settings to \\\\\\\\*DestinationComputerName*\\\\store\n\n3.  Run the LoadState tool on the destination computer and specify C:\\\\store as the store location.\n\n### <a href=\"\" id=\"no\"></a>Can I migrate data between operating systems with different languages?\n\nNo. USMT does not support migrating data between operating systems with different languages; the source computer's operating-system language must match the destination computer's operating-system language.\n\n### <a href=\"\" id=\"bkmk-2\"></a>Can I change the location of the temporary directory on the destination computer?\n\nYes. The environment variable USMT\\_WORKING\\_DIR can be changed to an alternative temporary directory. There are some offline migration scenarios where this is necessary, for example, when the USMT binaries are located on read-only Windows Preinstallation Environment (WinPE) boot media.\n\n### How do I install USMT?\n\nBecause USMT is included in Windows Assessment and Deployment Kit (Windows ADK), you need to install the Windows ADK package on at least one computer in your environment. However, the USMT binaries are designed to be deployed using xcopy. This means that they are installed on a computer simply by recursively copying the USMT directory from the computer containing the Windows ADK to each client computer.\n\n### <a href=\"\" id=\"uninstall\"></a>How do I uninstall USMT?\n\nIf you have installed the Windows ADK on the computer, uninstalling Windows ADK will uninstall USMT. For client computers that do not have the Windows ADK installed, you can simply delete the USMT directory to uninstall USMT.\n\n## <a href=\"\" id=\"bkmk-filesandsettings\"></a>Files and Settings\n\n\n### <a href=\"\" id=\"bkmk-8\"></a>How can I exclude a folder or a certain type of file from the migration?\n\nYou can use the **&lt;unconditionalExclude&gt;** element to globally exclude data from the migration. For example, you can use this element to exclude all MP3 files on the computer or to exclude all files from C:\\\\UserData. This element excludes objects regardless of any other &lt;include&gt; rules that are in the .xml files. For an example, see &lt;unconditionalExclude&gt; in the [Exclude Files and Settings](usmt-exclude-files-and-settings.md) topic. For the syntax of this element, see [XML Elements Library](usmt-xml-elements-library.md).\n\n### <a href=\"\" id=\"bkmk-location\"></a>What happens to files that were located on a drive that does not exist on the destination computer?\n\nUSMT migrates the files to the %SystemDrive% while maintaining the correct folder hierarchy. For example, if E:\\\\data\\\\File.pst is on the source computer, but the destination computer does not have an E:\\\\ drive, the file will be migrated to C:\\\\data\\\\File.pst, if C:\\\\ is the system drive. This holds true even when &lt;locationModify&gt; rules attempt to move data to a drive that does not exist on the destination computer.\n\n## <a href=\"\" id=\"bkmk-usmtxmlfiles\"></a>USMT .xml Files\n\n\n### <a href=\"\" id=\"bkmk-111\"></a>Where can I get examples of USMT .xml files?\n\nThe following topics include examples of USMT .xml files:\n\n-   [Exclude Files and Settings](usmt-exclude-files-and-settings.md)\n\n-   [Reroute Files and Settings](usmt-reroute-files-and-settings.md)\n\n-   [Include Files and Settings](usmt-include-files-and-settings.md)\n\n-   [Custom XML Examples](usmt-custom-xml-examples.md)\n\n### <a href=\"\" id=\"bkmk-16\"></a>Can I use custom .xml files that were written for USMT 5.0?\n\nYes. You can use custom .xml files that were written for USMT 5.0 with USMT for Windows 10. However, in order to use new USMT functionality, you must revisit your custom USMT files and refresh them to include the new command-line options and XML elements.\n\n### <a href=\"\" id=\"how\"></a>How can I validate the .xml files?\n\nYou can use the USMT XML Schema (MigXML.xsd) to write and validate migration .xml files.\n\n### <a href=\"\" id=\"bkmk-3\"></a>Why must I list the .xml files with both the ScanState and LoadState commands?\n\nThe .xml files are not copied to the store as in previous versions of USMT. Because the ScanState and LoadState tools need the .xml files to control the migration, you must specify the same set of .xml files for the **ScanState** and **LoadState** commands. If you used a particular set of mig\\*.xml files in the ScanState tool, either called through the \"/auto\" option, or individually through the \"/i\" option, then you should use same option to call the exact same mig\\*.xml files in the LoadState tool. However, you do not have to specify the Config.xml file, unless you want to exclude some of the files and settings that you migrated to the store. For example, you might want to migrate the My Documents folder to the store, but not to the destination computer. To do this, modify the Config.xml file and specify the updated file with the **LoadState** command. **LoadState** will migrate only the files and settings that you want to migrate.\n\nIf you exclude an .xml file from the **LoadState** command, then all of the data that is in the store that was migrated with the missing .xml files will be migrated. However, the migration rules that were specified for the **ScanState** command will not apply. For example, if you exclude a MigApp.xml file that has a rerouting rule such as `MigsysHelperFunction.RelativeMove(\"c:\\data\", \"%CSIDL_PERSONAL%\")`, USMT will not reroute the files. Instead, it will migrate them to C:\\\\data.\n\n### <a href=\"\" id=\"bkmk-4\"></a>Which files can I modify and specify on the command line?\n\nYou can specify the MigUser.xml and MigApp.xml files on the command line. You can modify each of these files. The migration of operating system settings is controlled by the manifests, which you cannot modify. If you want to exclude certain operating-system settings or any other components, create and modify the Config.xml file.\n\n### <a href=\"\" id=\"bkmk-7\"></a>What happens if I do not specify the .xml files on the command line?\n\n-   **ScanState**\n\n    If you do not specify any files with the **ScanState** command, all user accounts and default operating system components are migrated.\n\n-   **LoadState**\n\n    If you do not specify any files with the **LoadState** command, all data that is in the store is migrated. However, any target-specific migration rules that were specified in .xml files with the **ScanState** command will not apply. For example, if you exclude a MigApp.xml file that has a rerouting rule such as `MigsysHelperFunction.RelativeMove(\"c:\\data\", \"%CSIDL_PERSONAL%\")`, USMT will not reroute the files. Instead, it will migrate them to C:\\\\data.\n\n## Conflicts and Precedence\n\n\n### <a href=\"\" id=\"conflicts\"></a>What happens when there are conflicting XML rules or conflicting objects on the destination computer?\n\nFor more information, see [Conflicts and Precedence](usmt-conflicts-and-precedence.md).\n\n## Related topics\n\n\n[User State Migration Tool (USMT) Troubleshooting](usmt-troubleshooting.md)\n\n[Extract Files from a Compressed USMT Migration Store](usmt-extract-files-from-a-compressed-migration-store.md)\n\n[Verify the Condition of a Compressed Migration Store](verify-the-condition-of-a-compressed-migration-store.md)\n\n \n\n \n\n\n\n\n\n"}