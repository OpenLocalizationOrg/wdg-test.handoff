{"nodes":[{"content":"Design the MED-V Image Repositories","pos":[11,46]},{"content":"Design the MED-V Image Repositories","pos":[60,95]},{"content":"Design the MED-V Image Repositories","pos":[258,293]},{"content":"After MED-V images are created and packed, they can be stored on a file server in any location.","pos":[296,391]},{"content":"The files may be sent over HTTP or HTTPS by one or more IIS servers.","pos":[392,460]},{"content":"The image repository can be shared by multiple MED-V instances.","pos":[461,524]},{"content":"To design the image repositories, you must first decide how the images will be deployed to each client and then whether that client requires a local image repository.","pos":[526,692]},{"content":"Each repository is then designed and placed, along with its accompanying IIS server.","pos":[693,777]},{"content":"Determine How Images Will Be Deployed","pos":[782,819]},{"content":"For each MED-V workspace, decide how you plan to deploy MED-V images to the client.","pos":[822,905]},{"content":"This is important in determining how many repositories are necessary to store the packed images, where those repositories will be placed, and then to design those repositories.","pos":[906,1082]},{"content":"Packed images can be deployed in the following ways:","pos":[1084,1136]},{"content":"Downloaded over the network from an image distribution server, which comprises a file server and IIS server.","pos":[1142,1250]},{"content":"On removable media, such as a USB drive or DVD.","pos":[1256,1303]},{"content":"Pre-staged to an image store directory on the client computer using an enterprise software distribution center.","pos":[1309,1420]},{"content":"Decide which method, or methods, will be used to deploy MED-V images to each of the clients and whether the location will require an image repository.","pos":[1422,1572]},{"content":"Determine the Number of Image Repositories","pos":[1577,1619]},{"content":"Now that you have determined the minimum number of repositories you need, add more if any of the following criteria apply:","pos":[1622,1744]},{"content":"Organizational or regulatory reasons to separate the MED-V images—some MED-V images may not be able to coexist in the same repository.","pos":[1750,1884]},{"content":"For example, sensitive personal data may require storage on a server that is only available to a limited set of employees who need access to the data.","pos":[1885,2035]},{"content":"Clients in isolated networks—if images will be deployed over the network, determine whether any networks are isolated and require a separate repository.","pos":[2041,2193]},{"content":"For example, organizations often isolate lab networks from production networks.","pos":[2194,2273]},{"content":"Clients in remote networks—if images will be deployed over the network, some client machines may be separated from the repository by network links that have insufficient bandwidth to provide an adequate experience when a client loads a MED-V workspace.","pos":[2279,2531]},{"content":"If necessary, design additional MED-V instances to address this need.","pos":[2532,2601]},{"content":"Add these repositories to the design.","pos":[2603,2640]},{"content":"Decide on a name for each repository and the reason for designing it.","pos":[2641,2710]},{"content":"Decide which MED-V images the repositories will hold and which MED-V clients will load MED-V workspaces with images from the repository.","pos":[2711,2847]},{"content":"Design and Place the Image Repositories","pos":[2852,2891]},{"content":"When a new image is available to clients, clients begin downloading the image, possibly simultaneously.","pos":[2894,2997]},{"content":"This creates a high demand on the repository and must be taken into account when designing the image repository.","pos":[2998,3110]},{"content":"For each repository, determine the amount of data it will store.","pos":[3112,3176]},{"content":"Sum the sizes of images that will be stored in the repository.","pos":[3177,3239]},{"content":"This is the value of the disk space required on the file server.","pos":[3240,3304]},{"content":"Next, add up the number of clients that may download MED-V images from the repository.","pos":[3306,3392]},{"content":"This is the maximum number of concurrent downloads that can occur when a new MED-V image is loaded into the repository.","pos":[3393,3512]},{"content":"The file server must be designed with a disk subsystem that can meet the IO demands this will create.","pos":[3513,3614]},{"content":"The image repository can reside on the same system as the MED-V server and the server running SQL Server, or on a remote file share.","pos":[3616,3748]},{"content":"You can also run it in a Windows Server 2008 Hyper-V VM.","pos":[3749,3805]},{"content":"Check the network location of the clients that the image repository will service, and place the repository in a network location where it will have sufficient bandwidth to meet the service level expectations of those clients.","pos":[3806,4031]},{"content":"Fault Tolerance","pos":[4037,4052]},{"content":"If the image repository is unavailable, clients will not be able to download new or updated MED-V images.","pos":[4054,4159]},{"content":"To design fault-tolerance options for the file server and fault-tolerant disks, see the <bpt id=\"p1\">[</bpt>Infrastructure Planning and Design Microsoft SQL Server 2008<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=163302)</ept> guide.","pos":[4160,4364]},{"content":"Design and Place the IIS Servers","pos":[4369,4401]},{"content":"This section is only relevant if clients will download image files over the network using HTTP or HTTPS.","pos":[4404,4508]},{"content":"The IIS server can coexist on the same system as the MED-V server and the server running SQL Server.","pos":[4510,4610]},{"content":"It can also run in a Windows Server 2008 Hyper-V VM.","pos":[4611,4663]},{"content":"The IIS server infrastructure must have sufficient throughput to deliver images to clients within the service level expectations of the organization.","pos":[4664,4813]},{"content":"It must be designed with a disk subsystem that can meet the IO demands this creates.","pos":[4814,4898]},{"content":"For each image repository, sum the number of clients that may download MED-V images using IIS.","pos":[4900,4994]},{"content":"This is the maximum number of concurrent downloads that can occur when an image is loaded into the repository.","pos":[4995,5105]},{"content":"Use the throughput sum and the service level expectations determined in <bpt id=\"p1\">[</bpt>Define the Project Scope<ept id=\"p1\">](define-the-project-scope.md)</ept> to plan the design of the IIS server infrastructure and to determine the appropriate amount of bandwidth to allocate for the repository.","pos":[5106,5370]},{"pos":[5372,5544],"content":"To design the IIS infrastructure, see the <bpt id=\"p1\">[</bpt>Infrastructure Planning and Design Microsoft Internet Information Services<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=160826)</ept> guide."},{"content":"Fault Tolerance","pos":[5550,5565]},{"content":"If the IIS server infrastructure is unavailable, clients will not be able to download new or updated images.","pos":[5567,5675]},{"content":"To configure fault tolerance, the Windows Server 2008-based IIS server can be placed in a failover cluster.","pos":[5676,5783]},{"content":"To design the fault tolerance for the IIS server infrastructure, see the <bpt id=\"p1\">[</bpt>Infrastructure Planning and Design Microsoft Internet Information Services<ept id=\"p1\">](http://go.microsoft.com/fwlink/?LinkId=160826)</ept> guide.","pos":[5784,5987]},{"content":"Related topics","pos":[5992,6006]},{"content":"Deploying a MED-V Workspace Using an Enterprise Software Distribution System","pos":[6010,6086]},{"content":"Deploying a MED-V Workspace Using a Deployment Package","pos":[6171,6225]}],"content":"---\ntitle: Design the MED-V Image Repositories\ndescription: Design the MED-V Image Repositories\nauthor: jamiejdt\nms.assetid: e153154d-2751-4990-b94d-a2d76242c15f\nms.pagetype: mdop, virtualization\nms.mktglfcycl: deploy\nms.sitesec: library\nms.prod: w7\n---\n\n\n# Design the MED-V Image Repositories\n\n\nAfter MED-V images are created and packed, they can be stored on a file server in any location. The files may be sent over HTTP or HTTPS by one or more IIS servers. The image repository can be shared by multiple MED-V instances.\n\nTo design the image repositories, you must first decide how the images will be deployed to each client and then whether that client requires a local image repository. Each repository is then designed and placed, along with its accompanying IIS server.\n\n## Determine How Images Will Be Deployed\n\n\nFor each MED-V workspace, decide how you plan to deploy MED-V images to the client. This is important in determining how many repositories are necessary to store the packed images, where those repositories will be placed, and then to design those repositories.\n\nPacked images can be deployed in the following ways:\n\n-   Downloaded over the network from an image distribution server, which comprises a file server and IIS server.\n\n-   On removable media, such as a USB drive or DVD.\n\n-   Pre-staged to an image store directory on the client computer using an enterprise software distribution center.\n\nDecide which method, or methods, will be used to deploy MED-V images to each of the clients and whether the location will require an image repository.\n\n## Determine the Number of Image Repositories\n\n\nNow that you have determined the minimum number of repositories you need, add more if any of the following criteria apply:\n\n-   Organizational or regulatory reasons to separate the MED-V images—some MED-V images may not be able to coexist in the same repository. For example, sensitive personal data may require storage on a server that is only available to a limited set of employees who need access to the data.\n\n-   Clients in isolated networks—if images will be deployed over the network, determine whether any networks are isolated and require a separate repository. For example, organizations often isolate lab networks from production networks.\n\n-   Clients in remote networks—if images will be deployed over the network, some client machines may be separated from the repository by network links that have insufficient bandwidth to provide an adequate experience when a client loads a MED-V workspace. If necessary, design additional MED-V instances to address this need.\n\nAdd these repositories to the design. Decide on a name for each repository and the reason for designing it. Decide which MED-V images the repositories will hold and which MED-V clients will load MED-V workspaces with images from the repository.\n\n## Design and Place the Image Repositories\n\n\nWhen a new image is available to clients, clients begin downloading the image, possibly simultaneously. This creates a high demand on the repository and must be taken into account when designing the image repository.\n\nFor each repository, determine the amount of data it will store. Sum the sizes of images that will be stored in the repository. This is the value of the disk space required on the file server.\n\nNext, add up the number of clients that may download MED-V images from the repository. This is the maximum number of concurrent downloads that can occur when a new MED-V image is loaded into the repository. The file server must be designed with a disk subsystem that can meet the IO demands this will create.\n\nThe image repository can reside on the same system as the MED-V server and the server running SQL Server, or on a remote file share. You can also run it in a Windows Server 2008 Hyper-V VM. Check the network location of the clients that the image repository will service, and place the repository in a network location where it will have sufficient bandwidth to meet the service level expectations of those clients.\n\n### Fault Tolerance\n\nIf the image repository is unavailable, clients will not be able to download new or updated MED-V images. To design fault-tolerance options for the file server and fault-tolerant disks, see the [Infrastructure Planning and Design Microsoft SQL Server 2008](http://go.microsoft.com/fwlink/?LinkId=163302) guide.\n\n## Design and Place the IIS Servers\n\n\nThis section is only relevant if clients will download image files over the network using HTTP or HTTPS.\n\nThe IIS server can coexist on the same system as the MED-V server and the server running SQL Server. It can also run in a Windows Server 2008 Hyper-V VM. The IIS server infrastructure must have sufficient throughput to deliver images to clients within the service level expectations of the organization. It must be designed with a disk subsystem that can meet the IO demands this creates.\n\nFor each image repository, sum the number of clients that may download MED-V images using IIS. This is the maximum number of concurrent downloads that can occur when an image is loaded into the repository. Use the throughput sum and the service level expectations determined in [Define the Project Scope](define-the-project-scope.md) to plan the design of the IIS server infrastructure and to determine the appropriate amount of bandwidth to allocate for the repository.\n\nTo design the IIS infrastructure, see the [Infrastructure Planning and Design Microsoft Internet Information Services](http://go.microsoft.com/fwlink/?LinkId=160826) guide.\n\n### Fault Tolerance\n\nIf the IIS server infrastructure is unavailable, clients will not be able to download new or updated images. To configure fault tolerance, the Windows Server 2008-based IIS server can be placed in a failover cluster. To design the fault tolerance for the IIS server infrastructure, see the [Infrastructure Planning and Design Microsoft Internet Information Services](http://go.microsoft.com/fwlink/?LinkId=160826) guide.\n\n## Related topics\n\n\n[Deploying a MED-V Workspace Using an Enterprise Software Distribution System](deploying-a-med-v-workspace-using-an-enterprise-software-distribution-system.md)\n\n[Deploying a MED-V Workspace Using a Deployment Package](deploying-a-med-v-workspace-using-a-deployment-package.md)\n\n \n\n \n\n\n\n\n\n"}