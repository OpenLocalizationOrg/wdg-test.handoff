{"nodes":[{"content":"Set up MDT for BitLocker (Windows 10)","pos":[11,48]},{"content":"Set up MDT for BitLocker","pos":[268,292]},{"content":"This topic will show you how to configure your environment for BitLocker, the disk volume encryption built into Windows 10 Enterprise and Windows 10 Pro, using MDT.","pos":[294,458]},{"content":"BitLocker in Windows 10 has two requirements in regard to an operating system deployment:","pos":[459,548]},{"content":"A protector, which can either be stored in the Trusted Platform Module (TPM) chip, or stored as a password.","pos":[553,660]},{"content":"Technically, you also can use a USB stick to store the protector, but it's not a practical approach as the USB stick can be lost or stolen.","pos":[661,800]},{"content":"We, therefore, recommend that you instead use a TPM chip and/or a password.","pos":[801,876]},{"content":"Multiple partitions on the hard drive.","pos":[881,919]},{"content":"To configure your environment for BitLocker, you will need to do the following:","pos":[921,1000]},{"content":"Configure Active Directory for BitLocker.","pos":[1006,1047]},{"content":"Download the various BitLocker scripts and tools.","pos":[1052,1101]},{"content":"Configure the operating system deployment task sequence for BitLocker.","pos":[1106,1176]},{"content":"Configure the rules (CustomSettings.ini) for BitLocker.","pos":[1181,1236]},{"content":"Note","pos":[1240,1244]},{"content":"Even though it is not a BitLocker requirement, we recommend configuring BitLocker to store the recovery key and TPM owner information in Active Directory.","pos":[1249,1403]},{"content":"For additional information about these features, see <bpt id=\"p1\">[</bpt>Backing Up BitLocker and TPM Recovery Information to AD DS<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=619548)</ept>.","pos":[1404,1567]},{"content":"If you have access to Microsoft BitLocker Administration and Monitoring (MBAM), which is part of Microsoft Desktop Optimization Pack (MDOP), you have additional management features for BitLocker.","pos":[1568,1763]},{"content":"For the purposes of this topic, we will use DC01, a domain controller that is a member of the domain contoso.com for the fictitious Contoso Corporation.","pos":[1766,1918]},{"content":"For more details on the setup for this topic, please see <bpt id=\"p1\">[</bpt>Deploy Windows 10 with the Microsoft Deployment Toolkit<ept id=\"p1\">](deploy-windows-10-with-the-microsoft-deployment-toolkit.md#proof)</ept>.","pos":[1919,2100]},{"pos":[2131,2171],"content":"Configure Active Directory for BitLocker"},{"content":"To enable BitLocker to store the recovery key and TPM information in Active Directory, you need to create a Group Policy for it in Active Directory.","pos":[2173,2321]},{"content":"For this section, we are running Windows Server 2012 R2, so you do not need to extend the Schema.","pos":[2322,2419]},{"content":"You do, however, need to set the appropriate permissions in Active Directory.","pos":[2420,2497]},{"content":"Note","pos":[2501,2505]},{"content":"Depending on the Active Directory Schema version, you might need to update the Schema before you can store BitLocker information in Active Directory.","pos":[2510,2659]},{"content":"In Windows Server 2012 R2 (as well as in Windows Server 2008 R2 and Windows Server 2012), you have access to the BitLocker Drive Encryption Administration Utilities features, which will help you manage BitLocker.","pos":[2662,2874]},{"content":"When you install the features, the BitLocker Active Directory Recovery Password Viewer is included, and it extends Active Directory Users and Computers with BitLocker Recovery information.","pos":[2875,3063]},{"content":"figure 2","pos":[3067,3075]},{"content":"Figure 2.","pos":[3103,3112]},{"content":"The BitLocker Recovery information on a computer object in the contoso.com domain.","pos":[3113,3195]},{"content":"Add the BitLocker Drive Encryption Administration Utilities","pos":[3201,3260]},{"content":"The BitLocker Drive Encryption Administration Utilities are added as features via Server Manager (or Windows PowerShell):","pos":[3262,3383]},{"pos":[3389,3496],"content":"On DC01, log on as <bpt id=\"p1\">**</bpt>CONTOSO<ph id=\"ph1\">\\\\</ph>Administrator<ept id=\"p1\">**</ept>, and, using Server Manager, click <bpt id=\"p2\">**</bpt>Add roles and features<ept id=\"p2\">**</ept>."},{"pos":[3501,3550],"content":"On the <bpt id=\"p1\">**</bpt>Before you begin<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[3555,3669],"content":"On the <bpt id=\"p1\">**</bpt>Select installation type<ept id=\"p1\">**</ept> page, select <bpt id=\"p2\">**</bpt>Role-based or feature-based installation<ept id=\"p2\">**</ept>, and click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[3674,3764],"content":"On the <bpt id=\"p1\">**</bpt>Select destination server<ept id=\"p1\">**</ept> page, select <bpt id=\"p2\">**</bpt>DC01.contoso.com<ept id=\"p2\">**</ept> and click <bpt id=\"p3\">**</bpt>Next<ept id=\"p3\">**</ept>."},{"pos":[3769,3821],"content":"On the <bpt id=\"p1\">**</bpt>Select server roles<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Next<ept id=\"p2\">**</ept>."},{"pos":[3826,4002],"content":"On the <bpt id=\"p1\">**</bpt>Select features<ept id=\"p1\">**</ept> page, expand <bpt id=\"p2\">**</bpt>Remote Server Administration Tools<ept id=\"p2\">**</ept>, expand <bpt id=\"p3\">**</bpt>Feature Administration Tools<ept id=\"p3\">**</ept>, select the following features, and then click <bpt id=\"p4\">**</bpt>Next<ept id=\"p4\">**</ept>:"},{"content":"BitLocker Drive Encryption Administration Utilities","pos":[4011,4062]},{"content":"BitLocker Drive Encryption Tools","pos":[4071,4103]},{"content":"BitLocker Recovery Password Viewer","pos":[4112,4146]},{"pos":[4151,4243],"content":"On the <bpt id=\"p1\">**</bpt>Confirm installation selections<ept id=\"p1\">**</ept> page, click <bpt id=\"p2\">**</bpt>Install<ept id=\"p2\">**</ept> and then click <bpt id=\"p3\">**</bpt>Close<ept id=\"p3\">**</ept>."},{"content":"figure 3","pos":[4247,4255]},{"content":"Figure 3.","pos":[4283,4292]},{"content":"Selecting the BitLocker Drive Encryption Administration Utilities.","pos":[4293,4359]},{"content":"Create the BitLocker Group Policy","pos":[4365,4398]},{"content":"Following these steps, you enable the backup of BitLocker and TPM recovery information to Active Directory.","pos":[4400,4507]},{"content":"You also enable the policy for the TPM validation profile.","pos":[4508,4566]},{"pos":[4571,4726],"content":"On DC01, using Group Policy Management, right-click the <bpt id=\"p1\">**</bpt>Contoso<ept id=\"p1\">**</ept> organizational unit (OU), and select <bpt id=\"p2\">**</bpt>Create a GPO in this domain, and Link it here<ept id=\"p2\">**</ept>."},{"pos":[4731,4792],"content":"Assign the name <bpt id=\"p1\">**</bpt>BitLocker Policy<ept id=\"p1\">**</ept> to the new Group Policy."},{"pos":[4797,5064],"content":"Expand the **Contoso** OU, right-click the **BitLocker Policy**, and select **Edit**. Configure the following policy settings:\nComputer Configuration / Policies / Administrative Templates / Windows Components / BitLocker Drive Encryption / Operating System Drives","leadings":["","    "],"nodes":[{"content":"Expand the <bpt id=\"p1\">**</bpt>Contoso<ept id=\"p1\">**</ept> OU, right-click the <bpt id=\"p2\">**</bpt>BitLocker Policy<ept id=\"p2\">**</ept>, and select <bpt id=\"p3\">**</bpt>Edit<ept id=\"p3\">**</ept>.","pos":[0,85]},{"content":"Configure the following policy settings: Computer Configuration / Policies / Administrative Templates / Windows Components / BitLocker Drive Encryption / Operating System Drives","pos":[86,263]}]},{"pos":[5073,5205],"content":"Enable the <bpt id=\"p1\">**</bpt>Choose how BitLocker-protected operating system drives can be recovered<ept id=\"p1\">**</ept> policy, and configure the following settings:"},{"content":"Allow data recovery agent (default)","pos":[5218,5253]},{"content":"Save BitLocker recovery information to Active Directory Domain Services (default)","pos":[5266,5347]},{"content":"Do not enable BitLocker until recovery information is stored in AD DS for operating system drives","pos":[5360,5457]},{"pos":[5466,5569],"content":"Enable the <bpt id=\"p1\">**</bpt>Configure TPM platform validation profile for BIOS-based firmware configurations<ept id=\"p1\">**</ept> policy."},{"pos":[5578,5795],"content":"Enable the **Configure TPM platform validation profile for native UEFI firmware configurations** policy.\nComputer Configuration / Policies / Administrative Templates / System / Trusted Platform Module Services","leadings":["","        "],"nodes":[{"content":"Enable the <bpt id=\"p1\">**</bpt>Configure TPM platform validation profile for native UEFI firmware configurations<ept id=\"p1\">**</ept> policy.","pos":[0,104]},{"content":"Computer Configuration / Policies / Administrative Templates / System / Trusted Platform Module Services","pos":[105,209]}]},{"pos":[5804,5881],"content":"Enable the <bpt id=\"p1\">**</bpt>Turn on TPM backup to Active Directory Domain Services<ept id=\"p1\">**</ept> policy."},{"content":"Note","pos":[5885,5889]},{"content":"If you consistently get the error \"Windows BitLocker Drive Encryption Information.","pos":[5894,5976]},{"content":"The system boot information has changed since BitLocker was enabled.","pos":[5977,6045]},{"content":"You must supply a BitLocker recovery password to start this system.\"","pos":[6046,6114]},{"content":"after encrypting a computer with BitLocker, you might have to change the various \"Configure TPM platform validation profile\" Group Policies, as well.","pos":[6115,6264]},{"content":"Whether or not you need to do this will depend on the hardware you are using.","pos":[6265,6342]},{"content":"Set permissions in Active Directory for BitLocker","pos":[6349,6398]},{"content":"In addition to the Group Policy created previously, you need to configure permissions in Active Directory to be able to store the TPM recovery information.","pos":[6400,6555]},{"content":"In these steps, we assume you have downloaded the <bpt id=\"p1\">[</bpt>Add-TPMSelfWriteACE.vbs script<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=167133)</ept> from Microsoft to C:<ph id=\"ph1\">\\\\</ph>Setup<ph id=\"ph2\">\\\\</ph>Scripts on DC01.","pos":[6556,6733]},{"content":"On DC01, start an elevated PowerShell prompt (run as Administrator).","pos":[6738,6806]},{"content":"Configure the permissions by running the following command:","pos":[6811,6870]},{"content":"figure 4","pos":[6950,6958]},{"content":"Figure 4.","pos":[6986,6995]},{"content":"Running the Add-TPMSelfWriteACE.vbs script on DC01.","pos":[6996,7047]},{"pos":[7078,7132],"content":"Add BIOS configuration tools from Dell, HP, and Lenovo"},{"content":"If you want to automate enabling the TPM chip as part of the deployment process, you need to download the vendor tools and add them to your task sequences, either directly or in a script wrapper.","pos":[7134,7329]},{"content":"Add tools from Dell","pos":[7335,7354]},{"content":"The Dell tools are available via the Dell Client Configuration Toolkit (CCTK).","pos":[7356,7434]},{"content":"The executable file from Dell is named cctk.exe.","pos":[7435,7483]},{"content":"Here is a sample command to enable TPM and set a BIOS password using the cctk.exe tool:","pos":[7484,7571]},{"content":"Add tools from HP","pos":[7636,7653]},{"content":"The HP tools are part of HP System Software Manager.","pos":[7655,7707]},{"content":"The executable file from HP is named BiosConfigUtility.exe.","pos":[7708,7767]},{"content":"This utility uses a configuration file for the BIOS settings.","pos":[7768,7829]},{"content":"Here is a sample command to enable TPM and set a BIOS password using the BiosConfigUtility.exe tool:","pos":[7830,7930]},{"content":"And the sample content of the TPMEnable.REPSET file:","pos":[8027,8079]},{"content":"Add tools from Lenovo","pos":[8284,8305]},{"content":"The Lenovo tools are a set of VBScripts available as part of the Lenovo BIOS Setup using Windows Management Instrumentation Deployment Guide.","pos":[8307,8448]},{"content":"Lenovo also provides a separate download of the scripts.","pos":[8449,8505]},{"content":"Here is a sample command to enable TPM using the Lenovo tools:","pos":[8506,8568]},{"pos":[8659,8717],"content":"Configure the Windows 10 task sequence to enable BitLocker"},{"content":"When configuring a task sequence to run any BitLocker tool, either directly or using a custom script, it is helpful if you also add some logic to detect whether the BIOS is already configured on the machine.","pos":[8719,8926]},{"content":"In this task sequence, we are using a sample script (ZTICheckforTPM.wsf) from the Deployment Guys web page to check the status on the TPM chip.","pos":[8927,9070]},{"content":"You can download this script from the Deployment Guys Blog post, <bpt id=\"p1\">[</bpt>Check to see if the TPM is enabled<ept id=\"p1\">](http://go.microsoft.com/fwlink/p/?LinkId=619549)</ept>.","pos":[9071,9222]},{"content":"In the following task sequence, we have added five actions:","pos":[9223,9282]},{"content":"Check TPM Status.","pos":[9289,9306]},{"content":"Runs the ZTICheckforTPM.wsf script to determine if TPM is enabled.","pos":[9309,9375]},{"content":"Depending on the status, the script will set the TPMEnabled and TPMActivated properties to either true or false.","pos":[9376,9488]},{"pos":[9493,9892],"content":"**Configure BIOS for TPM.** Runs the vendor tools (in this case, HP, Dell, and Lenovo). To ensure this action is run only when necessary, add a condition so the action is run only when the TPM chip is not already activated. Use the properties from the ZTICheckforTPM.wsf.\n**Note**  \nIt is common for organizations wrapping these tools in scripts to get additional logging and error handling.","leadings":["","    ","    "],"nodes":[{"content":"**Configure BIOS for TPM.** Runs the vendor tools (in this case, HP, Dell, and Lenovo). To ensure this action is run only when necessary, add a condition so the action is run only when the TPM chip is not already activated. Use the properties from the ZTICheckforTPM.wsf.\n**Note**","pos":[0,280],"nodes":[{"content":"Configure BIOS for TPM.","pos":[2,25]},{"content":"Runs the vendor tools (in this case, HP, Dell, and Lenovo).","pos":[28,87]},{"content":"To ensure this action is run only when necessary, add a condition so the action is run only when the TPM chip is not already activated.","pos":[88,223]},{"content":"Use the properties from the ZTICheckforTPM.wsf.","pos":[224,271]},{"content":"Note","pos":[274,278]}]},{"content":"It is common for organizations wrapping these tools in scripts to get additional logging and error handling.","pos":[283,391]}]},{"content":"Restart computer.","pos":[9905,9922]},{"content":"Self-explanatory, reboots the computer.","pos":[9925,9964]},{"content":"Check TPM Status.","pos":[9971,9988]},{"content":"Runs the ZTICheckforTPM.wsf script one more time.","pos":[9991,10040]},{"content":"Enable BitLocker.","pos":[10047,10064]},{"content":"Runs the built-in action to activate BitLocker.","pos":[10067,10114]},{"content":"Related topics","pos":[10119,10133]},{"content":"Configure MDT deployment share rules","pos":[10136,10172]},{"content":"Configure MDT for UserExit scripts","pos":[10217,10251]},{"content":"Simulate a Windows 10 deployment in a test environment","pos":[10299,10353]},{"content":"Use the MDT database to stage Windows 10 deployment information","pos":[10416,10479]},{"content":"Assign applications using roles in MDT","pos":[10551,10589]},{"content":"Use web services in MDT","pos":[10641,10664]},{"content":"Use Orchestrator runbooks with MDT","pos":[10701,10735]}],"content":"---\ntitle: Set up MDT for BitLocker (Windows 10)\nms.assetid: 386e6713-5c20-4d2a-a220-a38d94671a38\ndescription: \nkeywords: disk, encryption, TPM, configure, secure, script\nms.prod: w10\nms.mktglfcycl: deploy\nms.sitesec: library\nms.pagetype: mdt\nauthor: mtniehaus\n---\n\n# Set up MDT for BitLocker\n\nThis topic will show you how to configure your environment for BitLocker, the disk volume encryption built into Windows 10 Enterprise and Windows 10 Pro, using MDT. BitLocker in Windows 10 has two requirements in regard to an operating system deployment:\n-   A protector, which can either be stored in the Trusted Platform Module (TPM) chip, or stored as a password. Technically, you also can use a USB stick to store the protector, but it's not a practical approach as the USB stick can be lost or stolen. We, therefore, recommend that you instead use a TPM chip and/or a password.\n-   Multiple partitions on the hard drive.\n\nTo configure your environment for BitLocker, you will need to do the following:\n\n1.  Configure Active Directory for BitLocker.\n2.  Download the various BitLocker scripts and tools.\n3.  Configure the operating system deployment task sequence for BitLocker.\n4.  Configure the rules (CustomSettings.ini) for BitLocker.\n\n**Note**  \nEven though it is not a BitLocker requirement, we recommend configuring BitLocker to store the recovery key and TPM owner information in Active Directory. For additional information about these features, see [Backing Up BitLocker and TPM Recovery Information to AD DS](http://go.microsoft.com/fwlink/p/?LinkId=619548). If you have access to Microsoft BitLocker Administration and Monitoring (MBAM), which is part of Microsoft Desktop Optimization Pack (MDOP), you have additional management features for BitLocker.\n \nFor the purposes of this topic, we will use DC01, a domain controller that is a member of the domain contoso.com for the fictitious Contoso Corporation. For more details on the setup for this topic, please see [Deploy Windows 10 with the Microsoft Deployment Toolkit](deploy-windows-10-with-the-microsoft-deployment-toolkit.md#proof).\n\n## <a href=\"\" id=\"sec01\"></a>Configure Active Directory for BitLocker\n\nTo enable BitLocker to store the recovery key and TPM information in Active Directory, you need to create a Group Policy for it in Active Directory. For this section, we are running Windows Server 2012 R2, so you do not need to extend the Schema. You do, however, need to set the appropriate permissions in Active Directory.\n\n**Note**  \nDepending on the Active Directory Schema version, you might need to update the Schema before you can store BitLocker information in Active Directory.\n \nIn Windows Server 2012 R2 (as well as in Windows Server 2008 R2 and Windows Server 2012), you have access to the BitLocker Drive Encryption Administration Utilities features, which will help you manage BitLocker. When you install the features, the BitLocker Active Directory Recovery Password Viewer is included, and it extends Active Directory Users and Computers with BitLocker Recovery information.\n\n![figure 2](images/mdt-09-fig02.png)\n\nFigure 2. The BitLocker Recovery information on a computer object in the contoso.com domain.\n\n### Add the BitLocker Drive Encryption Administration Utilities\n\nThe BitLocker Drive Encryption Administration Utilities are added as features via Server Manager (or Windows PowerShell):\n\n1.  On DC01, log on as **CONTOSO\\\\Administrator**, and, using Server Manager, click **Add roles and features**.\n2.  On the **Before you begin** page, click **Next**.\n3.  On the **Select installation type** page, select **Role-based or feature-based installation**, and click **Next**.\n4.  On the **Select destination server** page, select **DC01.contoso.com** and click **Next**.\n5.  On the **Select server roles** page, click **Next**.\n6.  On the **Select features** page, expand **Remote Server Administration Tools**, expand **Feature Administration Tools**, select the following features, and then click **Next**:\n    1.  BitLocker Drive Encryption Administration Utilities\n    2.  BitLocker Drive Encryption Tools\n    3.  BitLocker Recovery Password Viewer\n7.  On the **Confirm installation selections** page, click **Install** and then click **Close**.\n\n![figure 3](images/mdt-09-fig03.png)\n\nFigure 3. Selecting the BitLocker Drive Encryption Administration Utilities.\n\n### Create the BitLocker Group Policy\n\nFollowing these steps, you enable the backup of BitLocker and TPM recovery information to Active Directory. You also enable the policy for the TPM validation profile.\n1.  On DC01, using Group Policy Management, right-click the **Contoso** organizational unit (OU), and select **Create a GPO in this domain, and Link it here**.\n2.  Assign the name **BitLocker Policy** to the new Group Policy.\n3.  Expand the **Contoso** OU, right-click the **BitLocker Policy**, and select **Edit**. Configure the following policy settings:\n    Computer Configuration / Policies / Administrative Templates / Windows Components / BitLocker Drive Encryption / Operating System Drives\n    1.  Enable the **Choose how BitLocker-protected operating system drives can be recovered** policy, and configure the following settings:\n        1.  Allow data recovery agent (default)\n        2.  Save BitLocker recovery information to Active Directory Domain Services (default)\n        3.  Do not enable BitLocker until recovery information is stored in AD DS for operating system drives\n    2.  Enable the **Configure TPM platform validation profile for BIOS-based firmware configurations** policy.\n    3.  Enable the **Configure TPM platform validation profile for native UEFI firmware configurations** policy.\n        Computer Configuration / Policies / Administrative Templates / System / Trusted Platform Module Services\n    4.  Enable the **Turn on TPM backup to Active Directory Domain Services** policy.\n\n**Note**  \nIf you consistently get the error \"Windows BitLocker Drive Encryption Information. The system boot information has changed since BitLocker was enabled. You must supply a BitLocker recovery password to start this system.\" after encrypting a computer with BitLocker, you might have to change the various \"Configure TPM platform validation profile\" Group Policies, as well. Whether or not you need to do this will depend on the hardware you are using.\n \n### Set permissions in Active Directory for BitLocker\n\nIn addition to the Group Policy created previously, you need to configure permissions in Active Directory to be able to store the TPM recovery information. In these steps, we assume you have downloaded the [Add-TPMSelfWriteACE.vbs script](http://go.microsoft.com/fwlink/p/?LinkId=167133) from Microsoft to C:\\\\Setup\\\\Scripts on DC01.\n1.  On DC01, start an elevated PowerShell prompt (run as Administrator).\n2.  Configure the permissions by running the following command:\n    ``` syntax\n    cscript C:\\Setup\\Scripts\\Add-TPMSelfWriteACE.vbs\n    ```\n\n![figure 4](images/mdt-09-fig04.png)\n\nFigure 4. Running the Add-TPMSelfWriteACE.vbs script on DC01.\n\n## <a href=\"\" id=\"sec02\"></a>Add BIOS configuration tools from Dell, HP, and Lenovo\n\nIf you want to automate enabling the TPM chip as part of the deployment process, you need to download the vendor tools and add them to your task sequences, either directly or in a script wrapper.\n\n### Add tools from Dell\n\nThe Dell tools are available via the Dell Client Configuration Toolkit (CCTK). The executable file from Dell is named cctk.exe. Here is a sample command to enable TPM and set a BIOS password using the cctk.exe tool:\n``` syntax\ncctk.exe --tpm=on --valsetuppwd=Password1234\n```\n### Add tools from HP\n\nThe HP tools are part of HP System Software Manager. The executable file from HP is named BiosConfigUtility.exe. This utility uses a configuration file for the BIOS settings. Here is a sample command to enable TPM and set a BIOS password using the BiosConfigUtility.exe tool:\n``` syntax\nBIOSConfigUtility.EXE /SetConfig:TPMEnable.REPSET /NewAdminPassword:Password1234\n```\nAnd the sample content of the TPMEnable.REPSET file:\n``` syntax\nEnglish\nActivate Embedded Security On Next Boot\n*Enable\nEmbedded Security Activation Policy\n*No prompts\nF1 to Boot\nAllow user to reject\nEmbedded Security Device Availability\n*Available\n```\n### Add tools from Lenovo\n\nThe Lenovo tools are a set of VBScripts available as part of the Lenovo BIOS Setup using Windows Management Instrumentation Deployment Guide. Lenovo also provides a separate download of the scripts. Here is a sample command to enable TPM using the Lenovo tools:\n``` syntax\ncscript.exe SetConfig.vbs SecurityChip Active\n```\n## <a href=\"\" id=\"sec03\"></a>Configure the Windows 10 task sequence to enable BitLocker\n\nWhen configuring a task sequence to run any BitLocker tool, either directly or using a custom script, it is helpful if you also add some logic to detect whether the BIOS is already configured on the machine. In this task sequence, we are using a sample script (ZTICheckforTPM.wsf) from the Deployment Guys web page to check the status on the TPM chip. You can download this script from the Deployment Guys Blog post, [Check to see if the TPM is enabled](http://go.microsoft.com/fwlink/p/?LinkId=619549). In the following task sequence, we have added five actions:\n-   **Check TPM Status.** Runs the ZTICheckforTPM.wsf script to determine if TPM is enabled. Depending on the status, the script will set the TPMEnabled and TPMActivated properties to either true or false.\n-   **Configure BIOS for TPM.** Runs the vendor tools (in this case, HP, Dell, and Lenovo). To ensure this action is run only when necessary, add a condition so the action is run only when the TPM chip is not already activated. Use the properties from the ZTICheckforTPM.wsf.\n    **Note**  \n    It is common for organizations wrapping these tools in scripts to get additional logging and error handling.\n     \n-   **Restart computer.** Self-explanatory, reboots the computer.\n-   **Check TPM Status.** Runs the ZTICheckforTPM.wsf script one more time.\n-   **Enable BitLocker.** Runs the built-in action to activate BitLocker.\n\n## Related topics\n\n[Configure MDT deployment share rules](configure-mdt-deployment-share-rules.md)\n\n[Configure MDT for UserExit scripts](configure-mdt-2013-for-userexit-scripts.md)\n\n[Simulate a Windows 10 deployment in a test environment](simulate-a-windows-10-deployment-in-a-test-environment.md)\n\n[Use the MDT database to stage Windows 10 deployment information](use-the-mdt-database-to-stage-windows-10-deployment-information.md)\n\n[Assign applications using roles in MDT](assign-applications-using-roles-in-mdt-2013.md)\n\n[Use web services in MDT](use-web-services-in-mdt-2013.md)\n\n[Use Orchestrator runbooks with MDT](use-orchestrator-runbooks-with-mdt-2013.md)\n"}